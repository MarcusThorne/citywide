{"ast":null,"code":"function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction _get(target, property, receiver) { if (typeof Reflect !== \"undefined\" && Reflect.get) { _get = Reflect.get; } else { _get = function _get(target, property, receiver) { var base = _superPropBase(target, property); if (!base) return; var desc = Object.getOwnPropertyDescriptor(base, property); if (desc.get) { return desc.get.call(receiver); } return desc.value; }; } return _get(target, property, receiver || target); }\n\nfunction _superPropBase(object, property) { while (!Object.prototype.hasOwnProperty.call(object, property)) { object = _getPrototypeOf(object); if (object === null) break; } return object; }\n\nfunction _toArray(arr) { return _arrayWithHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableRest(); }\n\nfunction _toConsumableArray(arr) { return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread(); }\n\nfunction _nonIterableSpread() { throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\n\nfunction _iterableToArray(iter) { if (typeof Symbol !== \"undefined\" && Symbol.iterator in Object(iter)) return Array.from(iter); }\n\nfunction _arrayWithoutHoles(arr) { if (Array.isArray(arr)) return _arrayLikeToArray(arr); }\n\nfunction _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest(); }\n\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\n\nfunction _iterableToArrayLimit(arr, i) { if (typeof Symbol === \"undefined\" || !(Symbol.iterator in Object(arr))) return; var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"] != null) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; }\n\nfunction _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }\n\nfunction _createForOfIteratorHelper(o, allowArrayLike) { var it; if (typeof Symbol === \"undefined\" || o[Symbol.iterator] == null) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e415) { throw _e415; }, f: F }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = o[Symbol.iterator](); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e416) { didErr = true; err = _e416; }, f: function f() { try { if (!normalCompletion && it.return != null) it.return(); } finally { if (didErr) throw err; } } }; }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nfunction _wrapNativeSuper(Class) { var _cache = typeof Map === \"function\" ? new Map() : undefined; _wrapNativeSuper = function _wrapNativeSuper(Class) { if (Class === null || !_isNativeFunction(Class)) return Class; if (typeof Class !== \"function\") { throw new TypeError(\"Super expression must either be null or a function\"); } if (typeof _cache !== \"undefined\") { if (_cache.has(Class)) return _cache.get(Class); _cache.set(Class, Wrapper); } function Wrapper() { return _construct(Class, arguments, _getPrototypeOf(this).constructor); } Wrapper.prototype = Object.create(Class.prototype, { constructor: { value: Wrapper, enumerable: false, writable: true, configurable: true } }); return _setPrototypeOf(Wrapper, Class); }; return _wrapNativeSuper(Class); }\n\nfunction _construct(Parent, args, Class) { if (_isNativeReflectConstruct()) { _construct = Reflect.construct; } else { _construct = function _construct(Parent, args, Class) { var a = [null]; a.push.apply(a, args); var Constructor = Function.bind.apply(Parent, a); var instance = new Constructor(); if (Class) _setPrototypeOf(instance, Class.prototype); return instance; }; } return _construct.apply(null, arguments); }\n\nfunction _isNativeFunction(fn) { return Function.toString.call(fn).indexOf(\"[native code]\") !== -1; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _typeof(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\n/* Mapbox GL JS is Copyright Â© 2020 Mapbox and subject to the Mapbox Terms of Service ((https://www.mapbox.com/legal/tos/). */\n(function (global, factory) {\n  (typeof exports === \"undefined\" ? \"undefined\" : _typeof(exports)) === 'object' && typeof module !== 'undefined' ? module.exports = factory() : typeof define === 'function' && define.amd ? define(factory) : (global = global || self, global.mapboxgl = factory());\n})(this, function () {\n  'use strict';\n  /* eslint-disable */\n\n  var shared, worker, mapboxgl; // define gets called three times: one for each chunk. we rely on the order\n  // they're imported to know which is which\n\n  function define(_, chunk) {\n    if (!shared) {\n      shared = chunk;\n    } else if (!worker) {\n      worker = chunk;\n    } else {\n      var workerBundleString = 'var sharedChunk = {}; (' + shared + ')(sharedChunk); (' + worker + ')(sharedChunk);';\n      var sharedChunk = {};\n      shared(sharedChunk);\n      mapboxgl = chunk(sharedChunk);\n\n      if (typeof window !== 'undefined') {\n        mapboxgl.workerUrl = window.URL.createObjectURL(new Blob([workerBundleString], {\n          type: 'text/javascript'\n        }));\n      }\n    }\n  }\n\n  define([\"exports\"], function (t) {\n    \"use strict\";\n\n    var e = r;\n\n    function r(t, e, r, i) {\n      this.cx = 3 * t, this.bx = 3 * (r - t) - this.cx, this.ax = 1 - this.cx - this.bx, this.cy = 3 * e, this.by = 3 * (i - e) - this.cy, this.ay = 1 - this.cy - this.by, this.p1x = t, this.p1y = i, this.p2x = r, this.p2y = i;\n    }\n\n    r.prototype.sampleCurveX = function (t) {\n      return ((this.ax * t + this.bx) * t + this.cx) * t;\n    }, r.prototype.sampleCurveY = function (t) {\n      return ((this.ay * t + this.by) * t + this.cy) * t;\n    }, r.prototype.sampleCurveDerivativeX = function (t) {\n      return (3 * this.ax * t + 2 * this.bx) * t + this.cx;\n    }, r.prototype.solveCurveX = function (t, e) {\n      var r, i, n, s, a;\n\n      for (void 0 === e && (e = 1e-6), n = t, a = 0; a < 8; a++) {\n        if (s = this.sampleCurveX(n) - t, Math.abs(s) < e) return n;\n        var o = this.sampleCurveDerivativeX(n);\n        if (Math.abs(o) < 1e-6) break;\n        n -= s / o;\n      }\n\n      if ((n = t) < (r = 0)) return r;\n      if (n > (i = 1)) return i;\n\n      for (; r < i;) {\n        if (s = this.sampleCurveX(n), Math.abs(s - t) < e) return n;\n        t > s ? r = n : i = n, n = .5 * (i - r) + r;\n      }\n\n      return n;\n    }, r.prototype.solve = function (t, e) {\n      return this.sampleCurveY(this.solveCurveX(t, e));\n    };\n    var i = n;\n\n    function n(t, e) {\n      this.x = t, this.y = e;\n    }\n\n    n.prototype = {\n      clone: function clone() {\n        return new n(this.x, this.y);\n      },\n      add: function add(t) {\n        return this.clone()._add(t);\n      },\n      sub: function sub(t) {\n        return this.clone()._sub(t);\n      },\n      multByPoint: function multByPoint(t) {\n        return this.clone()._multByPoint(t);\n      },\n      divByPoint: function divByPoint(t) {\n        return this.clone()._divByPoint(t);\n      },\n      mult: function mult(t) {\n        return this.clone()._mult(t);\n      },\n      div: function div(t) {\n        return this.clone()._div(t);\n      },\n      rotate: function rotate(t) {\n        return this.clone()._rotate(t);\n      },\n      rotateAround: function rotateAround(t, e) {\n        return this.clone()._rotateAround(t, e);\n      },\n      matMult: function matMult(t) {\n        return this.clone()._matMult(t);\n      },\n      unit: function unit() {\n        return this.clone()._unit();\n      },\n      perp: function perp() {\n        return this.clone()._perp();\n      },\n      round: function round() {\n        return this.clone()._round();\n      },\n      mag: function mag() {\n        return Math.sqrt(this.x * this.x + this.y * this.y);\n      },\n      equals: function equals(t) {\n        return this.x === t.x && this.y === t.y;\n      },\n      dist: function dist(t) {\n        return Math.sqrt(this.distSqr(t));\n      },\n      distSqr: function distSqr(t) {\n        var e = t.x - this.x,\n            r = t.y - this.y;\n        return e * e + r * r;\n      },\n      angle: function angle() {\n        return Math.atan2(this.y, this.x);\n      },\n      angleTo: function angleTo(t) {\n        return Math.atan2(this.y - t.y, this.x - t.x);\n      },\n      angleWith: function angleWith(t) {\n        return this.angleWithSep(t.x, t.y);\n      },\n      angleWithSep: function angleWithSep(t, e) {\n        return Math.atan2(this.x * e - this.y * t, this.x * t + this.y * e);\n      },\n      _matMult: function _matMult(t) {\n        var e = t[2] * this.x + t[3] * this.y;\n        return this.x = t[0] * this.x + t[1] * this.y, this.y = e, this;\n      },\n      _add: function _add(t) {\n        return this.x += t.x, this.y += t.y, this;\n      },\n      _sub: function _sub(t) {\n        return this.x -= t.x, this.y -= t.y, this;\n      },\n      _mult: function _mult(t) {\n        return this.x *= t, this.y *= t, this;\n      },\n      _div: function _div(t) {\n        return this.x /= t, this.y /= t, this;\n      },\n      _multByPoint: function _multByPoint(t) {\n        return this.x *= t.x, this.y *= t.y, this;\n      },\n      _divByPoint: function _divByPoint(t) {\n        return this.x /= t.x, this.y /= t.y, this;\n      },\n      _unit: function _unit() {\n        return this._div(this.mag()), this;\n      },\n      _perp: function _perp() {\n        var t = this.y;\n        return this.y = this.x, this.x = -t, this;\n      },\n      _rotate: function _rotate(t) {\n        var e = Math.cos(t),\n            r = Math.sin(t),\n            i = r * this.x + e * this.y;\n        return this.x = e * this.x - r * this.y, this.y = i, this;\n      },\n      _rotateAround: function _rotateAround(t, e) {\n        var r = Math.cos(t),\n            i = Math.sin(t),\n            n = e.y + i * (this.x - e.x) + r * (this.y - e.y);\n        return this.x = e.x + r * (this.x - e.x) - i * (this.y - e.y), this.y = n, this;\n      },\n      _round: function _round() {\n        return this.x = Math.round(this.x), this.y = Math.round(this.y), this;\n      }\n    }, n.convert = function (t) {\n      return t instanceof n ? t : Array.isArray(t) ? new n(t[0], t[1]) : t;\n    };\n    var s = \"undefined\" != typeof self ? self : {};\n\n    function a(t, e) {\n      if (Array.isArray(t)) {\n        if (!Array.isArray(e) || t.length !== e.length) return !1;\n\n        for (var _r2 = 0; _r2 < t.length; _r2++) {\n          if (!a(t[_r2], e[_r2])) return !1;\n        }\n\n        return !0;\n      }\n\n      if (\"object\" == _typeof(t) && null !== t && null !== e) {\n        if (\"object\" != _typeof(e)) return !1;\n        if (Object.keys(t).length !== Object.keys(e).length) return !1;\n\n        for (var _r3 in t) {\n          if (!a(t[_r3], e[_r3])) return !1;\n        }\n\n        return !0;\n      }\n\n      return t === e;\n    }\n\n    var o = Math.pow(2, 53) - 1,\n        l = Math.PI / 180,\n        u = 180 / Math.PI;\n\n    function c(t) {\n      return t * l;\n    }\n\n    function h(t) {\n      if (t <= 0) return 0;\n      if (t >= 1) return 1;\n      var e = t * t,\n          r = e * t;\n      return 4 * (t < .5 ? r : 3 * (t - e) + r - .75);\n    }\n\n    function p(t, r, i, n) {\n      var s = new e(t, r, i, n);\n      return function (t) {\n        return s.solve(t);\n      };\n    }\n\n    var d = p(.25, .1, .25, 1);\n\n    function f(t, e, r) {\n      return Math.min(r, Math.max(e, t));\n    }\n\n    function y(t, e, r) {\n      var i = r - e,\n          n = ((t - e) % i + i) % i + e;\n      return n === e ? r : n;\n    }\n\n    function m(t, e, r) {\n      if (!t.length) return r(null, []);\n      var i = t.length;\n      var n = new Array(t.length);\n      var s = null;\n      t.forEach(function (t, a) {\n        e(t, function (t, e) {\n          t && (s = t), n[a] = e, 0 == --i && r(s, n);\n        });\n      });\n    }\n\n    function g(t) {\n      var e = [];\n\n      for (var _r4 in t) {\n        e.push(t[_r4]);\n      }\n\n      return e;\n    }\n\n    function x(t) {\n      for (var _len = arguments.length, e = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n        e[_key - 1] = arguments[_key];\n      }\n\n      for (var _i2 = 0, _e2 = e; _i2 < _e2.length; _i2++) {\n        var _r5 = _e2[_i2];\n\n        for (var _e3 in _r5) {\n          t[_e3] = _r5[_e3];\n        }\n      }\n\n      return t;\n    }\n\n    var v = 1;\n\n    function b() {\n      return v++;\n    }\n\n    function w() {\n      return function t(e) {\n        return e ? (e ^ 16 * Math.random() >> e / 4).toString(16) : ([1e7] + -[1e3] + -4e3 + -8e3 + -1e11).replace(/[018]/g, t);\n      }();\n    }\n\n    function _(t) {\n      return !!t && /^[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(t);\n    }\n\n    function k(t, e) {\n      t.forEach(function (t) {\n        e[t] && (e[t] = e[t].bind(e));\n      });\n    }\n\n    function A(t, e) {\n      return -1 !== t.indexOf(e, t.length - e.length);\n    }\n\n    function S(t, e, r) {\n      var i = {};\n\n      for (var _n2 in t) {\n        i[_n2] = e.call(r || this, t[_n2], _n2, t);\n      }\n\n      return i;\n    }\n\n    function I(t, e, r) {\n      var i = {};\n\n      for (var _n3 in t) {\n        e.call(r || this, t[_n3], _n3, t) && (i[_n3] = t[_n3]);\n      }\n\n      return i;\n    }\n\n    function T(t) {\n      return Array.isArray(t) ? t.map(T) : \"object\" == _typeof(t) && t ? S(t, T) : t;\n    }\n\n    var z = {};\n\n    function E(t) {\n      z[t] || (\"undefined\" != typeof console && console.warn(t), z[t] = !0);\n    }\n\n    function M(t, e, r) {\n      return (r.y - t.y) * (e.x - t.x) > (e.y - t.y) * (r.x - t.x);\n    }\n\n    function B(t) {\n      var e = 0;\n\n      for (var _r6, _i3, _n4 = 0, _s2 = t.length, _a2 = _s2 - 1; _n4 < _s2; _a2 = _n4++) {\n        _r6 = t[_n4], _i3 = t[_a2], e += (_i3.x - _r6.x) * (_r6.y + _i3.y);\n      }\n\n      return e;\n    }\n\n    function D() {\n      return \"undefined\" != typeof WorkerGlobalScope && \"undefined\" != typeof self && self instanceof WorkerGlobalScope;\n    }\n\n    function C(t) {\n      var e = {};\n\n      if (t.replace(/(?:^|(?:\\s*\\,\\s*))([^\\x00-\\x20\\(\\)<>@\\,;\\:\\\\\"\\/\\[\\]\\?\\=\\{\\}\\x7F]+)(?:\\=(?:([^\\x00-\\x20\\(\\)<>@\\,;\\:\\\\\"\\/\\[\\]\\?\\=\\{\\}\\x7F]+)|(?:\\\"((?:[^\"\\\\]|\\\\.)*)\\\")))?/g, function (t, r, i, n) {\n        var s = i || n;\n        return e[r] = !s || s.toLowerCase(), \"\";\n      }), e[\"max-age\"]) {\n        var _t2 = parseInt(e[\"max-age\"], 10);\n\n        isNaN(_t2) ? delete e[\"max-age\"] : e[\"max-age\"] = _t2;\n      }\n\n      return e;\n    }\n\n    var P,\n        V,\n        F = null;\n\n    function R(t) {\n      if (null == F) {\n        var _e4 = t.navigator ? t.navigator.userAgent : null;\n\n        F = !!t.safari || !(!_e4 || !(/\\b(iPad|iPhone|iPod)\\b/.test(_e4) || _e4.match(\"Safari\") && !_e4.match(\"Chrome\")));\n      }\n\n      return F;\n    }\n\n    function L(t) {\n      try {\n        var _e5 = s[t];\n        return _e5.setItem(\"_mapbox_test_\", 1), _e5.removeItem(\"_mapbox_test_\"), !0;\n      } catch (t) {\n        return !1;\n      }\n    }\n\n    var U,\n        O = !1;\n    var $ = {\n      now: function now() {\n        return void 0 !== U ? U : s.performance.now();\n      },\n      setErrorState: function setErrorState() {\n        O = !0;\n      },\n      setNow: function setNow(t) {\n        U = t;\n      },\n      restoreNow: function restoreNow() {\n        U = void 0;\n      },\n      frame: function frame(t) {\n        if (O) return {\n          cancel: function cancel() {}\n        };\n        var e = s.requestAnimationFrame(t);\n        return {\n          cancel: function cancel() {\n            return s.cancelAnimationFrame(e);\n          }\n        };\n      },\n      getImageData: function getImageData(t) {\n        var e = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n        var r = s.document.createElement(\"canvas\"),\n            i = r.getContext(\"2d\");\n        if (!i) throw new Error(\"failed to create canvas 2d context\");\n        return r.width = t.width, r.height = t.height, i.drawImage(t, 0, 0, t.width, t.height), i.getImageData(-e, -e, t.width + 2 * e, t.height + 2 * e);\n      },\n      resolveURL: function resolveURL(t) {\n        return P || (P = s.document.createElement(\"a\")), P.href = t, P.href;\n      },\n\n      get devicePixelRatio() {\n        return s.devicePixelRatio;\n      },\n\n      get prefersReducedMotion() {\n        return !!s.matchMedia && (null == V && (V = s.matchMedia(\"(prefers-reduced-motion: reduce)\")), V.matches);\n      }\n\n    };\n    var q;\n    var N = {\n      API_URL: \"https://api.mapbox.com\",\n\n      get API_URL_REGEX() {\n        if (null == q) {\n          var _t3 = /^((https?:)?\\/\\/)?([^\\/]+\\.)?mapbox\\.c(n|om)(\\/|\\?|$)/i;\n\n          try {\n            q = null != process.env.API_URL_REGEX ? new RegExp(process.env.API_URL_REGEX) : _t3;\n          } catch (e) {\n            q = _t3;\n          }\n        }\n\n        return q;\n      },\n\n      get EVENTS_URL() {\n        return this.API_URL ? 0 === this.API_URL.indexOf(\"https://api.mapbox.cn\") ? \"https://events.mapbox.cn/events/v2\" : 0 === this.API_URL.indexOf(\"https://api.mapbox.com\") ? \"https://events.mapbox.com/events/v2\" : null : null;\n      },\n\n      SESSION_PATH: \"/map-sessions/v1\",\n      FEEDBACK_URL: \"https://apps.mapbox.com/feedback\",\n      TILE_URL_VERSION: \"v4\",\n      RASTER_URL_PREFIX: \"raster/v1\",\n      REQUIRE_ACCESS_TOKEN: !0,\n      ACCESS_TOKEN: null,\n      MAX_PARALLEL_IMAGE_REQUESTS: 16\n    },\n        j = {\n      supported: !1,\n      testSupport: function testSupport(t) {\n        !X && Z && (K ? H(t) : G = t);\n      }\n    };\n    var G,\n        Z,\n        X = !1,\n        K = !1;\n\n    function H(t) {\n      var e = t.createTexture();\n      t.bindTexture(t.TEXTURE_2D, e);\n\n      try {\n        if (t.texImage2D(t.TEXTURE_2D, 0, t.RGBA, t.RGBA, t.UNSIGNED_BYTE, Z), t.isContextLost()) return;\n        j.supported = !0;\n      } catch (t) {}\n\n      t.deleteTexture(e), X = !0;\n    }\n\n    s.document && (Z = s.document.createElement(\"img\"), Z.onload = function () {\n      G && H(G), G = null, K = !0;\n    }, Z.onerror = function () {\n      X = !0, G = null;\n    }, Z.src = \"data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=\");\n    var Y = \"01\";\n\n    function W(t) {\n      return 0 === t.indexOf(\"mapbox:\");\n    }\n\n    function J(t) {\n      return N.API_URL_REGEX.test(t);\n    }\n\n    var Q = /^(\\w+):\\/\\/([^/?]*)(\\/[^?]+)?\\??(.+)?/;\n\n    function tt(t) {\n      var e = t.match(Q);\n      if (!e) throw new Error(\"Unable to parse URL object\");\n      return {\n        protocol: e[1],\n        authority: e[2],\n        path: e[3] || \"/\",\n        params: e[4] ? e[4].split(\"&\") : []\n      };\n    }\n\n    function et(t) {\n      var e = t.params.length ? \"?\".concat(t.params.join(\"&\")) : \"\";\n      return \"\".concat(t.protocol, \"://\").concat(t.authority).concat(t.path).concat(e);\n    }\n\n    function rt(t) {\n      if (!t) return null;\n      var e = t.split(\".\");\n      if (!e || 3 !== e.length) return null;\n\n      try {\n        return JSON.parse(decodeURIComponent(s.atob(e[1]).split(\"\").map(function (t) {\n          return \"%\" + (\"00\" + t.charCodeAt(0).toString(16)).slice(-2);\n        }).join(\"\")));\n      } catch (t) {\n        return null;\n      }\n    }\n\n    var it = /*#__PURE__*/function () {\n      function it(t) {\n        _classCallCheck(this, it);\n\n        this.type = t, this.anonId = null, this.eventData = {}, this.queue = [], this.pendingRequest = null;\n      }\n\n      _createClass(it, [{\n        key: \"getStorageKey\",\n        value: function getStorageKey(t) {\n          var e = rt(N.ACCESS_TOKEN);\n          var r = \"\";\n          return r = e && e.u ? s.btoa(encodeURIComponent(e.u).replace(/%([0-9A-F]{2})/g, function (t, e) {\n            return String.fromCharCode(Number(\"0x\" + e));\n          })) : N.ACCESS_TOKEN || \"\", t ? \"mapbox.eventData.\".concat(t, \":\").concat(r) : \"mapbox.eventData:\".concat(r);\n        }\n      }, {\n        key: \"fetchEventData\",\n        value: function fetchEventData() {\n          var t = L(\"localStorage\"),\n              e = this.getStorageKey(),\n              r = this.getStorageKey(\"uuid\");\n          if (t) try {\n            var _t4 = s.localStorage.getItem(e);\n\n            _t4 && (this.eventData = JSON.parse(_t4));\n\n            var _i4 = s.localStorage.getItem(r);\n\n            _i4 && (this.anonId = _i4);\n          } catch (t) {\n            E(\"Unable to read from LocalStorage\");\n          }\n        }\n      }, {\n        key: \"saveEventData\",\n        value: function saveEventData() {\n          var t = L(\"localStorage\"),\n              e = this.getStorageKey(),\n              r = this.getStorageKey(\"uuid\");\n          if (t) try {\n            s.localStorage.setItem(r, this.anonId), Object.keys(this.eventData).length >= 1 && s.localStorage.setItem(e, JSON.stringify(this.eventData));\n          } catch (t) {\n            E(\"Unable to write to LocalStorage\");\n          }\n        }\n      }, {\n        key: \"processRequests\",\n        value: function processRequests(t) {}\n      }, {\n        key: \"postEvent\",\n        value: function postEvent(t, e, r, i) {\n          var _this = this;\n\n          if (!N.EVENTS_URL) return;\n          var n = tt(N.EVENTS_URL);\n          n.params.push(\"access_token=\".concat(i || N.ACCESS_TOKEN || \"\"));\n          var s = {\n            event: this.type,\n            created: new Date(t).toISOString(),\n            sdkIdentifier: \"mapbox-gl-js\",\n            sdkVersion: \"2.1.1\",\n            skuId: Y,\n            userId: this.anonId\n          },\n              a = e ? x(s, e) : s,\n              o = {\n            url: et(n),\n            headers: {\n              \"Content-Type\": \"text/plain\"\n            },\n            body: JSON.stringify([a])\n          };\n          this.pendingRequest = At(o, function (t) {\n            _this.pendingRequest = null, r(t), _this.saveEventData(), _this.processRequests(i);\n          });\n        }\n      }, {\n        key: \"queueRequest\",\n        value: function queueRequest(t, e) {\n          this.queue.push(t), this.processRequests(e);\n        }\n      }]);\n\n      return it;\n    }();\n\n    var nt = new ( /*#__PURE__*/function (_it) {\n      _inherits(_class, _it);\n\n      var _super = _createSuper(_class);\n\n      function _class(t) {\n        var _this2;\n\n        _classCallCheck(this, _class);\n\n        _this2 = _super.call(this, \"appUserTurnstile\"), _this2._customAccessToken = t;\n        return _this2;\n      }\n\n      _createClass(_class, [{\n        key: \"postTurnstileEvent\",\n        value: function postTurnstileEvent(t, e) {\n          N.EVENTS_URL && N.ACCESS_TOKEN && Array.isArray(t) && t.some(function (t) {\n            return W(t) || J(t);\n          }) && this.queueRequest(Date.now(), e);\n        }\n      }, {\n        key: \"processRequests\",\n        value: function processRequests(t) {\n          var _this3 = this;\n\n          if (this.pendingRequest || 0 === this.queue.length) return;\n          this.anonId && this.eventData.lastSuccess && this.eventData.tokenU || this.fetchEventData();\n          var e = rt(N.ACCESS_TOKEN),\n              r = e ? e.u : N.ACCESS_TOKEN;\n          var i = r !== this.eventData.tokenU;\n          _(this.anonId) || (this.anonId = w(), i = !0);\n          var n = this.queue.shift();\n\n          if (this.eventData.lastSuccess) {\n            var _t5 = new Date(this.eventData.lastSuccess),\n                _e6 = new Date(n),\n                _r7 = (n - this.eventData.lastSuccess) / 864e5;\n\n            i = i || _r7 >= 1 || _r7 < -1 || _t5.getDate() !== _e6.getDate();\n          } else i = !0;\n\n          if (!i) return this.processRequests();\n          this.postEvent(n, {\n            \"enabled.telemetry\": !1\n          }, function (t) {\n            t || (_this3.eventData.lastSuccess = n, _this3.eventData.tokenU = r);\n          }, t);\n        }\n      }]);\n\n      return _class;\n    }(it))(),\n        st = nt.postTurnstileEvent.bind(nt),\n        at = new ( /*#__PURE__*/function (_it2) {\n      _inherits(_class2, _it2);\n\n      var _super2 = _createSuper(_class2);\n\n      function _class2() {\n        var _this4;\n\n        _classCallCheck(this, _class2);\n\n        _this4 = _super2.call(this, \"map.load\"), _this4.success = {}, _this4.skuToken = \"\";\n        return _this4;\n      }\n\n      _createClass(_class2, [{\n        key: \"postMapLoadEvent\",\n        value: function postMapLoadEvent(t, e, r, i) {\n          this.skuToken = e, this.errorCb = i, N.EVENTS_URL && (r || N.ACCESS_TOKEN ? this.queueRequest({\n            id: t,\n            timestamp: Date.now()\n          }, r) : this.errorCb(new Error(\"A valid Mapbox access token is required to use Mapbox GL JS. To create an account or a new access token, visit https://account.mapbox.com/\")));\n        }\n      }, {\n        key: \"processRequests\",\n        value: function processRequests(t) {\n          var _this5 = this;\n\n          if (this.pendingRequest || 0 === this.queue.length) return;\n\n          var _this$queue$shift = this.queue.shift(),\n              e = _this$queue$shift.id,\n              r = _this$queue$shift.timestamp;\n\n          e && this.success[e] || (this.anonId || this.fetchEventData(), _(this.anonId) || (this.anonId = w()), this.postEvent(r, {\n            skuToken: this.skuToken\n          }, function (t) {\n            t ? _this5.errorCb(t) : e && (_this5.success[e] = !0);\n          }, t));\n        }\n      }]);\n\n      return _class2;\n    }(it))(),\n        ot = at.postMapLoadEvent.bind(at),\n        lt = new ( /*#__PURE__*/function (_it3) {\n      _inherits(_class3, _it3);\n\n      var _super3 = _createSuper(_class3);\n\n      function _class3() {\n        var _this6;\n\n        _classCallCheck(this, _class3);\n\n        _this6 = _super3.call(this, \"map.auth\"), _this6.success = {}, _this6.skuToken = \"\";\n        return _this6;\n      }\n\n      _createClass(_class3, [{\n        key: \"getSession\",\n        value: function getSession(t, e, r, i) {\n          var _this7 = this;\n\n          if (!N.API_URL || !N.SESSION_PATH) return;\n          var n = tt(N.API_URL + N.SESSION_PATH);\n          n.params.push(\"sku=\".concat(e || \"\")), n.params.push(\"access_token=\".concat(i || N.ACCESS_TOKEN || \"\"));\n          var s = {\n            url: et(n),\n            headers: {\n              \"Content-Type\": \"text/plain\"\n            }\n          };\n          this.pendingRequest = St(s, function (t) {\n            _this7.pendingRequest = null, r(t), _this7.saveEventData(), _this7.processRequests(i);\n          });\n        }\n      }, {\n        key: \"getSessionAPI\",\n        value: function getSessionAPI(t, e, r, i) {\n          this.skuToken = e, this.errorCb = i, N.SESSION_PATH && N.API_URL && (r || N.ACCESS_TOKEN ? this.queueRequest({\n            id: t,\n            timestamp: Date.now()\n          }, r) : this.errorCb(new Error(\"NO_ACCESS_TOKEN\")));\n        }\n      }, {\n        key: \"processRequests\",\n        value: function processRequests(t) {\n          var _this8 = this;\n\n          if (this.pendingRequest || 0 === this.queue.length) return;\n\n          var _this$queue$shift2 = this.queue.shift(),\n              e = _this$queue$shift2.id,\n              r = _this$queue$shift2.timestamp;\n\n          e && this.success[e] || this.getSession(r, this.skuToken, function (t) {\n            t ? _this8.errorCb(t) : e && (_this8.success[e] = !0);\n          }, t);\n        }\n      }]);\n\n      return _class3;\n    }(it))(),\n        ut = lt.getSessionAPI.bind(lt);\n    var ct,\n        ht,\n        pt = 500,\n        dt = 50;\n\n    function ft() {\n      s.caches && !ct && (ct = s.caches.open(\"mapbox-tiles\"));\n    }\n\n    function yt(t) {\n      var e = t.indexOf(\"?\");\n      return e < 0 ? t : t.slice(0, e);\n    }\n\n    var mt,\n        gt = 1 / 0;\n\n    function xt() {\n      return null == mt && (mt = s.OffscreenCanvas && new s.OffscreenCanvas(1, 1).getContext(\"2d\") && \"function\" == typeof s.createImageBitmap), mt;\n    }\n\n    var vt = {\n      Unknown: \"Unknown\",\n      Style: \"Style\",\n      Source: \"Source\",\n      Tile: \"Tile\",\n      Glyphs: \"Glyphs\",\n      SpriteImage: \"SpriteImage\",\n      SpriteJSON: \"SpriteJSON\",\n      Image: \"Image\"\n    };\n    \"function\" == typeof Object.freeze && Object.freeze(vt);\n\n    var bt = /*#__PURE__*/function (_Error) {\n      _inherits(bt, _Error);\n\n      var _super4 = _createSuper(bt);\n\n      function bt(t, e, r) {\n        var _this9;\n\n        _classCallCheck(this, bt);\n\n        401 === e && J(r) && (t += \": you may have provided an invalid Mapbox access token. See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes\"), _this9 = _super4.call(this, t), _this9.status = e, _this9.url = r;\n        return _this9;\n      }\n\n      _createClass(bt, [{\n        key: \"toString\",\n        value: function toString() {\n          return \"\".concat(this.name, \": \").concat(this.message, \" (\").concat(this.status, \"): \").concat(this.url);\n        }\n      }]);\n\n      return bt;\n    }( /*#__PURE__*/_wrapNativeSuper(Error));\n\n    var wt = D() ? function () {\n      return self.worker && self.worker.referrer;\n    } : function () {\n      return (\"blob:\" === s.location.protocol ? s.parent : s).location.href;\n    };\n\n    var _t = function _t(t, e) {\n      if (!(/^file:/.test(r = t.url) || /^file:/.test(wt()) && !/^\\w+:/.test(r))) {\n        if (s.fetch && s.Request && s.AbortController && s.Request.prototype.hasOwnProperty(\"signal\")) return function (t, e) {\n          var r = new s.AbortController(),\n              i = new s.Request(t.url, {\n            method: t.method || \"GET\",\n            body: t.body,\n            credentials: t.credentials,\n            headers: t.headers,\n            referrer: wt(),\n            signal: r.signal\n          });\n          var n = !1,\n              a = !1;\n          var o = (l = i.url).indexOf(\"sku=\") > 0 && J(l);\n          var l;\n          \"json\" === t.type && i.headers.set(\"Accept\", \"application/json\");\n\n          var u = function u(r, n, l) {\n            if (a) return;\n            if (r && \"SecurityError\" !== r.message && E(r), n && l) return c(n);\n            var u = Date.now();\n            s.fetch(i).then(function (r) {\n              if (r.ok) {\n                var _t6 = o ? r.clone() : null;\n\n                return c(r, _t6, u);\n              }\n\n              return e(new bt(r.statusText, r.status, t.url));\n            }).catch(function (t) {\n              20 !== t.code && e(new Error(t.message));\n            });\n          },\n              c = function c(r, o, l) {\n            (\"arrayBuffer\" === t.type ? r.arrayBuffer() : \"json\" === t.type ? r.json() : r.text()).then(function (t) {\n              a || (o && l && function (t, e, r) {\n                if (ft(), !ct) return;\n                var i = {\n                  status: e.status,\n                  statusText: e.statusText,\n                  headers: new s.Headers()\n                };\n                e.headers.forEach(function (t, e) {\n                  return i.headers.set(e, t);\n                });\n                var n = C(e.headers.get(\"Cache-Control\") || \"\");\n                n[\"no-store\"] || (n[\"max-age\"] && i.headers.set(\"Expires\", new Date(r + 1e3 * n[\"max-age\"]).toUTCString()), new Date(i.headers.get(\"Expires\")).getTime() - r < 42e4 || function (t, e) {\n                  if (void 0 === ht) try {\n                    new Response(new ReadableStream()), ht = !0;\n                  } catch (t) {\n                    ht = !1;\n                  }\n                  ht ? e(t.body) : t.blob().then(e);\n                }(e, function (e) {\n                  var r = new s.Response(e, i);\n                  ft(), ct && ct.then(function (e) {\n                    return e.put(yt(t.url), r);\n                  }).catch(function (t) {\n                    return E(t.message);\n                  });\n                }));\n              }(i, o, l), n = !0, e(null, t, r.headers.get(\"Cache-Control\"), r.headers.get(\"Expires\")));\n            }).catch(function (t) {\n              a || e(new Error(t.message));\n            });\n          };\n\n          return o ? function (t, e) {\n            if (ft(), !ct) return e(null);\n            var r = yt(t.url);\n            ct.then(function (t) {\n              t.match(r).then(function (i) {\n                var n = function (t) {\n                  if (!t) return !1;\n                  var e = new Date(t.headers.get(\"Expires\") || 0),\n                      r = C(t.headers.get(\"Cache-Control\") || \"\");\n                  return e > Date.now() && !r[\"no-cache\"];\n                }(i);\n\n                t.delete(r), n && t.put(r, i.clone()), e(null, i, n);\n              }).catch(e);\n            }).catch(e);\n          }(i, u) : u(null, null), {\n            cancel: function cancel() {\n              a = !0, n || r.abort();\n            }\n          };\n        }(t, e);\n        if (D() && self.worker && self.worker.actor) return self.worker.actor.send(\"getResource\", t, e, void 0, !0);\n      }\n\n      var r;\n      return function (t, e) {\n        var r = new s.XMLHttpRequest();\n        r.open(t.method || \"GET\", t.url, !0), \"arrayBuffer\" === t.type && (r.responseType = \"arraybuffer\");\n\n        for (var _e7 in t.headers) {\n          r.setRequestHeader(_e7, t.headers[_e7]);\n        }\n\n        return \"json\" === t.type && (r.responseType = \"text\", r.setRequestHeader(\"Accept\", \"application/json\")), r.withCredentials = \"include\" === t.credentials, r.onerror = function () {\n          e(new Error(r.statusText));\n        }, r.onload = function () {\n          if ((r.status >= 200 && r.status < 300 || 0 === r.status) && null !== r.response) {\n            var _i5 = r.response;\n            if (\"json\" === t.type) try {\n              _i5 = JSON.parse(r.response);\n            } catch (t) {\n              return e(t);\n            }\n            e(null, _i5, r.getResponseHeader(\"Cache-Control\"), r.getResponseHeader(\"Expires\"));\n          } else e(new bt(r.statusText, r.status, t.url));\n        }, r.send(t.body), {\n          cancel: function cancel() {\n            return r.abort();\n          }\n        };\n      }(t, e);\n    },\n        kt = function kt(t, e) {\n      return _t(x(t, {\n        type: \"arrayBuffer\"\n      }), e);\n    },\n        At = function At(t, e) {\n      return _t(x(t, {\n        method: \"POST\"\n      }), e);\n    },\n        St = function St(t, e) {\n      return _t(x(t, {\n        method: \"GET\"\n      }), e);\n    };\n\n    function It(t) {\n      var e = s.document.createElement(\"a\");\n      return e.href = t, e.protocol === s.document.location.protocol && e.host === s.document.location.host;\n    }\n\n    var Tt = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=\";\n    var zt, Et;\n    zt = [], Et = 0;\n\n    var Mt = function Mt(t, e) {\n      if (j.supported && (t.headers || (t.headers = {}), t.headers.accept = \"image/webp,*/*\"), Et >= N.MAX_PARALLEL_IMAGE_REQUESTS) {\n        var _r8 = {\n          requestParameters: t,\n          callback: e,\n          cancelled: !1,\n          cancel: function cancel() {\n            this.cancelled = !0;\n          }\n        };\n        return zt.push(_r8), _r8;\n      }\n\n      Et++;\n      var r = !1;\n\n      var i = function i() {\n        if (!r) for (r = !0, Et--; zt.length && Et < N.MAX_PARALLEL_IMAGE_REQUESTS;) {\n          var _t7 = zt.shift(),\n              _e8 = _t7.requestParameters,\n              _r9 = _t7.callback,\n              _i6 = _t7.cancelled;\n\n          _i6 || (_t7.cancel = Mt(_e8, _r9).cancel);\n        }\n      },\n          n = kt(t, function (t, r, n, a) {\n        i(), t ? e(t) : r && (xt() ? function (t, e) {\n          var r = new s.Blob([new Uint8Array(t)], {\n            type: \"image/png\"\n          });\n          s.createImageBitmap(r).then(function (t) {\n            e(null, t);\n          }).catch(function (t) {\n            e(new Error(\"Could not load image because of \".concat(t.message, \". Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.\")));\n          });\n        }(r, e) : function (t, e, r, i) {\n          var n = new s.Image(),\n              a = s.URL;\n          n.onload = function () {\n            e(null, n), a.revokeObjectURL(n.src), n.onload = null, s.requestAnimationFrame(function () {\n              n.src = Tt;\n            });\n          }, n.onerror = function () {\n            return e(new Error(\"Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.\"));\n          };\n          var o = new s.Blob([new Uint8Array(t)], {\n            type: \"image/png\"\n          });\n          n.cacheControl = r, n.expires = i, n.src = t.byteLength ? a.createObjectURL(o) : Tt;\n        }(r, e, n, a));\n      });\n\n      return {\n        cancel: function cancel() {\n          n.cancel(), i();\n        }\n      };\n    };\n\n    function Bt(t, e, r) {\n      r[t] && -1 !== r[t].indexOf(e) || (r[t] = r[t] || [], r[t].push(e));\n    }\n\n    function Dt(t, e, r) {\n      if (r && r[t]) {\n        var _i7 = r[t].indexOf(e);\n\n        -1 !== _i7 && r[t].splice(_i7, 1);\n      }\n    }\n\n    var Ct = function Ct(t) {\n      var e = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n      _classCallCheck(this, Ct);\n\n      x(this, e), this.type = t;\n    };\n\n    var Pt = /*#__PURE__*/function (_Ct) {\n      _inherits(Pt, _Ct);\n\n      var _super5 = _createSuper(Pt);\n\n      function Pt(t) {\n        var e = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n        _classCallCheck(this, Pt);\n\n        return _super5.call(this, \"error\", x({\n          error: t\n        }, e));\n      }\n\n      return Pt;\n    }(Ct);\n\n    var Vt = /*#__PURE__*/function () {\n      function Vt() {\n        _classCallCheck(this, Vt);\n      }\n\n      _createClass(Vt, [{\n        key: \"on\",\n        value: function on(t, e) {\n          return this._listeners = this._listeners || {}, Bt(t, e, this._listeners), this;\n        }\n      }, {\n        key: \"off\",\n        value: function off(t, e) {\n          return Dt(t, e, this._listeners), Dt(t, e, this._oneTimeListeners), this;\n        }\n      }, {\n        key: \"once\",\n        value: function once(t, e) {\n          var _this10 = this;\n\n          return e ? (this._oneTimeListeners = this._oneTimeListeners || {}, Bt(t, e, this._oneTimeListeners), this) : new Promise(function (e) {\n            return _this10.once(t, e);\n          });\n        }\n      }, {\n        key: \"fire\",\n        value: function fire(t, e) {\n          \"string\" == typeof t && (t = new Ct(t, e || {}));\n          var r = t.type;\n\n          if (this.listens(r)) {\n            t.target = this;\n\n            var _e9 = this._listeners && this._listeners[r] ? this._listeners[r].slice() : [];\n\n            var _iterator = _createForOfIteratorHelper(_e9),\n                _step;\n\n            try {\n              for (_iterator.s(); !(_step = _iterator.n()).done;) {\n                var _r10 = _step.value;\n\n                _r10.call(this, t);\n              }\n            } catch (err) {\n              _iterator.e(err);\n            } finally {\n              _iterator.f();\n            }\n\n            var _i8 = this._oneTimeListeners && this._oneTimeListeners[r] ? this._oneTimeListeners[r].slice() : [];\n\n            var _iterator2 = _createForOfIteratorHelper(_i8),\n                _step2;\n\n            try {\n              for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {\n                var _e10 = _step2.value;\n                Dt(r, _e10, this._oneTimeListeners), _e10.call(this, t);\n              }\n            } catch (err) {\n              _iterator2.e(err);\n            } finally {\n              _iterator2.f();\n            }\n\n            var _n5 = this._eventedParent;\n            _n5 && (x(t, \"function\" == typeof this._eventedParentData ? this._eventedParentData() : this._eventedParentData), _n5.fire(t));\n          } else t instanceof Pt && console.error(t.error);\n\n          return this;\n        }\n      }, {\n        key: \"listens\",\n        value: function listens(t) {\n          return !!(this._listeners && this._listeners[t] && this._listeners[t].length > 0 || this._oneTimeListeners && this._oneTimeListeners[t] && this._oneTimeListeners[t].length > 0 || this._eventedParent && this._eventedParent.listens(t));\n        }\n      }, {\n        key: \"setEventedParent\",\n        value: function setEventedParent(t, e) {\n          return this._eventedParent = t, this._eventedParentData = e, this;\n        }\n      }]);\n\n      return Vt;\n    }();\n\n    var Ft = {\n      $version: 8,\n      $root: {\n        version: {\n          required: !0,\n          type: \"enum\",\n          values: [8]\n        },\n        name: {\n          type: \"string\"\n        },\n        metadata: {\n          type: \"*\"\n        },\n        center: {\n          type: \"array\",\n          value: \"number\"\n        },\n        zoom: {\n          type: \"number\"\n        },\n        bearing: {\n          type: \"number\",\n          default: 0,\n          period: 360,\n          units: \"degrees\"\n        },\n        pitch: {\n          type: \"number\",\n          default: 0,\n          units: \"degrees\"\n        },\n        light: {\n          type: \"light\"\n        },\n        terrain: {\n          type: \"terrain\"\n        },\n        sources: {\n          required: !0,\n          type: \"sources\"\n        },\n        sprite: {\n          type: \"string\"\n        },\n        glyphs: {\n          type: \"string\"\n        },\n        transition: {\n          type: \"transition\"\n        },\n        layers: {\n          required: !0,\n          type: \"array\",\n          value: \"layer\"\n        }\n      },\n      sources: {\n        \"*\": {\n          type: \"source\"\n        }\n      },\n      source: [\"source_vector\", \"source_raster\", \"source_raster_dem\", \"source_geojson\", \"source_video\", \"source_image\"],\n      source_vector: {\n        type: {\n          required: !0,\n          type: \"enum\",\n          values: {\n            vector: {}\n          }\n        },\n        url: {\n          type: \"string\"\n        },\n        tiles: {\n          type: \"array\",\n          value: \"string\"\n        },\n        bounds: {\n          type: \"array\",\n          value: \"number\",\n          length: 4,\n          default: [-180, -85.051129, 180, 85.051129]\n        },\n        scheme: {\n          type: \"enum\",\n          values: {\n            xyz: {},\n            tms: {}\n          },\n          default: \"xyz\"\n        },\n        minzoom: {\n          type: \"number\",\n          default: 0\n        },\n        maxzoom: {\n          type: \"number\",\n          default: 22\n        },\n        attribution: {\n          type: \"string\"\n        },\n        promoteId: {\n          type: \"promoteId\"\n        },\n        volatile: {\n          type: \"boolean\",\n          default: !1\n        },\n        \"*\": {\n          type: \"*\"\n        }\n      },\n      source_raster: {\n        type: {\n          required: !0,\n          type: \"enum\",\n          values: {\n            raster: {}\n          }\n        },\n        url: {\n          type: \"string\"\n        },\n        tiles: {\n          type: \"array\",\n          value: \"string\"\n        },\n        bounds: {\n          type: \"array\",\n          value: \"number\",\n          length: 4,\n          default: [-180, -85.051129, 180, 85.051129]\n        },\n        minzoom: {\n          type: \"number\",\n          default: 0\n        },\n        maxzoom: {\n          type: \"number\",\n          default: 22\n        },\n        tileSize: {\n          type: \"number\",\n          default: 512,\n          units: \"pixels\"\n        },\n        scheme: {\n          type: \"enum\",\n          values: {\n            xyz: {},\n            tms: {}\n          },\n          default: \"xyz\"\n        },\n        attribution: {\n          type: \"string\"\n        },\n        volatile: {\n          type: \"boolean\",\n          default: !1\n        },\n        \"*\": {\n          type: \"*\"\n        }\n      },\n      source_raster_dem: {\n        type: {\n          required: !0,\n          type: \"enum\",\n          values: {\n            \"raster-dem\": {}\n          }\n        },\n        url: {\n          type: \"string\"\n        },\n        tiles: {\n          type: \"array\",\n          value: \"string\"\n        },\n        bounds: {\n          type: \"array\",\n          value: \"number\",\n          length: 4,\n          default: [-180, -85.051129, 180, 85.051129]\n        },\n        minzoom: {\n          type: \"number\",\n          default: 0\n        },\n        maxzoom: {\n          type: \"number\",\n          default: 22\n        },\n        tileSize: {\n          type: \"number\",\n          default: 512,\n          units: \"pixels\"\n        },\n        attribution: {\n          type: \"string\"\n        },\n        encoding: {\n          type: \"enum\",\n          values: {\n            terrarium: {},\n            mapbox: {}\n          },\n          default: \"mapbox\"\n        },\n        volatile: {\n          type: \"boolean\",\n          default: !1\n        },\n        \"*\": {\n          type: \"*\"\n        }\n      },\n      source_geojson: {\n        type: {\n          required: !0,\n          type: \"enum\",\n          values: {\n            geojson: {}\n          }\n        },\n        data: {\n          type: \"*\"\n        },\n        maxzoom: {\n          type: \"number\",\n          default: 18\n        },\n        attribution: {\n          type: \"string\"\n        },\n        buffer: {\n          type: \"number\",\n          default: 128,\n          maximum: 512,\n          minimum: 0\n        },\n        filter: {\n          type: \"*\"\n        },\n        tolerance: {\n          type: \"number\",\n          default: .375\n        },\n        cluster: {\n          type: \"boolean\",\n          default: !1\n        },\n        clusterRadius: {\n          type: \"number\",\n          default: 50,\n          minimum: 0\n        },\n        clusterMaxZoom: {\n          type: \"number\"\n        },\n        clusterMinPoints: {\n          type: \"number\"\n        },\n        clusterProperties: {\n          type: \"*\"\n        },\n        lineMetrics: {\n          type: \"boolean\",\n          default: !1\n        },\n        generateId: {\n          type: \"boolean\",\n          default: !1\n        },\n        promoteId: {\n          type: \"promoteId\"\n        }\n      },\n      source_video: {\n        type: {\n          required: !0,\n          type: \"enum\",\n          values: {\n            video: {}\n          }\n        },\n        urls: {\n          required: !0,\n          type: \"array\",\n          value: \"string\"\n        },\n        coordinates: {\n          required: !0,\n          type: \"array\",\n          length: 4,\n          value: {\n            type: \"array\",\n            length: 2,\n            value: \"number\"\n          }\n        }\n      },\n      source_image: {\n        type: {\n          required: !0,\n          type: \"enum\",\n          values: {\n            image: {}\n          }\n        },\n        url: {\n          required: !0,\n          type: \"string\"\n        },\n        coordinates: {\n          required: !0,\n          type: \"array\",\n          length: 4,\n          value: {\n            type: \"array\",\n            length: 2,\n            value: \"number\"\n          }\n        }\n      },\n      layer: {\n        id: {\n          type: \"string\",\n          required: !0\n        },\n        type: {\n          type: \"enum\",\n          values: {\n            fill: {},\n            line: {},\n            symbol: {},\n            circle: {},\n            heatmap: {},\n            \"fill-extrusion\": {},\n            raster: {},\n            hillshade: {},\n            background: {},\n            sky: {}\n          },\n          required: !0\n        },\n        metadata: {\n          type: \"*\"\n        },\n        source: {\n          type: \"string\"\n        },\n        \"source-layer\": {\n          type: \"string\"\n        },\n        minzoom: {\n          type: \"number\",\n          minimum: 0,\n          maximum: 24\n        },\n        maxzoom: {\n          type: \"number\",\n          minimum: 0,\n          maximum: 24\n        },\n        filter: {\n          type: \"filter\"\n        },\n        layout: {\n          type: \"layout\"\n        },\n        paint: {\n          type: \"paint\"\n        }\n      },\n      layout: [\"layout_fill\", \"layout_line\", \"layout_circle\", \"layout_heatmap\", \"layout_fill-extrusion\", \"layout_symbol\", \"layout_raster\", \"layout_hillshade\", \"layout_background\", \"layout_sky\"],\n      layout_background: {\n        visibility: {\n          type: \"enum\",\n          values: {\n            visible: {},\n            none: {}\n          },\n          default: \"visible\",\n          \"property-type\": \"constant\"\n        }\n      },\n      layout_sky: {\n        visibility: {\n          type: \"enum\",\n          values: {\n            visible: {},\n            none: {}\n          },\n          default: \"visible\",\n          \"property-type\": \"constant\"\n        }\n      },\n      layout_fill: {\n        \"fill-sort-key\": {\n          type: \"number\",\n          expression: {\n            interpolated: !1,\n            parameters: [\"zoom\", \"feature\"]\n          },\n          \"property-type\": \"data-driven\"\n        },\n        visibility: {\n          type: \"enum\",\n          values: {\n            visible: {},\n            none: {}\n          },\n          default: \"visible\",\n          \"property-type\": \"constant\"\n        }\n      },\n      layout_circle: {\n        \"circle-sort-key\": {\n          type: \"number\",\n          expression: {\n            interpolated: !1,\n            parameters: [\"zoom\", \"feature\"]\n          },\n          \"property-type\": \"data-driven\"\n        },\n        visibility: {\n          type: \"enum\",\n          values: {\n            visible: {},\n            none: {}\n          },\n          default: \"visible\",\n          \"property-type\": \"constant\"\n        }\n      },\n      layout_heatmap: {\n        visibility: {\n          type: \"enum\",\n          values: {\n            visible: {},\n            none: {}\n          },\n          default: \"visible\",\n          \"property-type\": \"constant\"\n        }\n      },\n      \"layout_fill-extrusion\": {\n        visibility: {\n          type: \"enum\",\n          values: {\n            visible: {},\n            none: {}\n          },\n          default: \"visible\",\n          \"property-type\": \"constant\"\n        }\n      },\n      layout_line: {\n        \"line-cap\": {\n          type: \"enum\",\n          values: {\n            butt: {},\n            round: {},\n            square: {}\n          },\n          default: \"butt\",\n          expression: {\n            interpolated: !1,\n            parameters: [\"zoom\"]\n          },\n          \"property-type\": \"data-constant\"\n        },\n        \"line-join\": {\n          type: \"enum\",\n          values: {\n            bevel: {},\n            round: {},\n            miter: {}\n          },\n          default: \"miter\",\n          expression: {\n            interpolated: !1,\n            parameters: [\"zoom\", \"feature\"]\n          },\n          \"property-type\": \"data-driven\"\n        },\n        \"line-miter-limit\": {\n          type: \"number\",\n          default: 2,\n          requires: [{\n            \"line-join\": \"miter\"\n          }],\n          expression: {\n            interpolated: !0,\n            parameters: [\"zoom\"]\n          },\n          \"property-type\": \"data-constant\"\n        },\n        \"line-round-limit\": {\n          type: \"number\",\n          default: 1.05,\n          requires: [{\n            \"line-join\": \"round\"\n          }],\n          expression: {\n            interpolated: !0,\n            parameters: [\"zoom\"]\n          },\n          \"property-type\": \"data-constant\"\n        },\n        \"line-sort-key\": {\n          type: \"number\",\n          expression: {\n            interpolated: !1,\n            parameters: [\"zoom\", \"feature\"]\n          },\n          \"property-type\": \"data-driven\"\n        },\n        visibility: {\n          type: \"enum\",\n          values: {\n            visible: {},\n            none: {}\n          },\n          default: \"visible\",\n          \"property-type\": \"constant\"\n        }\n      },\n      layout_symbol: {\n        \"symbol-placement\": {\n          type: \"enum\",\n          values: {\n            point: {},\n            line: {},\n            \"line-center\": {}\n          },\n          default: \"point\",\n          expression: {\n            interpolated: !1,\n            parameters: [\"zoom\"]\n          },\n          \"property-type\": \"data-constant\"\n        },\n        \"symbol-spacing\": {\n          type: \"number\",\n          default: 250,\n          minimum: 1,\n          units: \"pixels\",\n          requires: [{\n            \"symbol-placement\": \"line\"\n          }],\n          expression: {\n            interpolated: !0,\n            parameters: [\"zoom\"]\n          },\n          \"property-type\": \"data-constant\"\n        },\n        \"symbol-avoid-edges\": {\n          type: \"boolean\",\n          default: !1,\n          expression: {\n            interpolated: !1,\n            parameters: [\"zoom\"]\n          },\n          \"property-type\": \"data-constant\"\n        },\n        \"symbol-sort-key\": {\n          type: \"number\",\n          expression: {\n            interpolated: !1,\n            parameters: [\"zoom\", \"feature\"]\n          },\n          \"property-type\": \"data-driven\"\n        },\n        \"symbol-z-order\": {\n          type: \"enum\",\n          values: {\n            auto: {},\n            \"viewport-y\": {},\n            source: {}\n          },\n          default: \"auto\",\n          expression: {\n            interpolated: !1,\n            parameters: [\"zoom\"]\n          },\n          \"property-type\": \"data-constant\"\n        },\n        \"icon-allow-overlap\": {\n          type: \"boolean\",\n          default: !1,\n          requires: [\"icon-image\"],\n          expression: {\n            interpolated: !1,\n            parameters: [\"zoom\"]\n          },\n          \"property-type\": \"data-constant\"\n        },\n        \"icon-ignore-placement\": {\n          type: \"boolean\",\n          default: !1,\n          requires: [\"icon-image\"],\n          expression: {\n            interpolated: !1,\n            parameters: [\"zoom\"]\n          },\n          \"property-type\": \"data-constant\"\n        },\n        \"icon-optional\": {\n          type: \"boolean\",\n          default: !1,\n          requires: [\"icon-image\", \"text-field\"],\n          expression: {\n            interpolated: !1,\n            parameters: [\"zoom\"]\n          },\n          \"property-type\": \"data-constant\"\n        },\n        \"icon-rotation-alignment\": {\n          type: \"enum\",\n          values: {\n            map: {},\n            viewport: {},\n            auto: {}\n          },\n          default: \"auto\",\n          requires: [\"icon-image\"],\n          expression: {\n            interpolated: !1,\n            parameters: [\"zoom\"]\n          },\n          \"property-type\": \"data-constant\"\n        },\n        \"icon-size\": {\n          type: \"number\",\n          default: 1,\n          minimum: 0,\n          units: \"factor of the original icon size\",\n          requires: [\"icon-image\"],\n          expression: {\n            interpolated: !0,\n            parameters: [\"zoom\", \"feature\"]\n          },\n          \"property-type\": \"data-driven\"\n        },\n        \"icon-text-fit\": {\n          type: \"enum\",\n          values: {\n            none: {},\n            width: {},\n            height: {},\n            both: {}\n          },\n          default: \"none\",\n          requires: [\"icon-image\", \"text-field\"],\n          expression: {\n            interpolated: !1,\n            parameters: [\"zoom\"]\n          },\n          \"property-type\": \"data-constant\"\n        },\n        \"icon-text-fit-padding\": {\n          type: \"array\",\n          value: \"number\",\n          length: 4,\n          default: [0, 0, 0, 0],\n          units: \"pixels\",\n          requires: [\"icon-image\", \"text-field\", {\n            \"icon-text-fit\": [\"both\", \"width\", \"height\"]\n          }],\n          expression: {\n            interpolated: !0,\n            parameters: [\"zoom\"]\n          },\n          \"property-type\": \"data-constant\"\n        },\n        \"icon-image\": {\n          type: \"resolvedImage\",\n          tokens: !0,\n          expression: {\n            interpolated: !1,\n            parameters: [\"zoom\", \"feature\"]\n          },\n          \"property-type\": \"data-driven\"\n        },\n        \"icon-rotate\": {\n          type: \"number\",\n          default: 0,\n          period: 360,\n          units: \"degrees\",\n          requires: [\"icon-image\"],\n          expression: {\n            interpolated: !0,\n            parameters: [\"zoom\", \"feature\"]\n          },\n          \"property-type\": \"data-driven\"\n        },\n        \"icon-padding\": {\n          type: \"number\",\n          default: 2,\n          minimum: 0,\n          units: \"pixels\",\n          requires: [\"icon-image\"],\n          expression: {\n            interpolated: !0,\n            parameters: [\"zoom\"]\n          },\n          \"property-type\": \"data-constant\"\n        },\n        \"icon-keep-upright\": {\n          type: \"boolean\",\n          default: !1,\n          requires: [\"icon-image\", {\n            \"icon-rotation-alignment\": \"map\"\n          }, {\n            \"symbol-placement\": [\"line\", \"line-center\"]\n          }],\n          expression: {\n            interpolated: !1,\n            parameters: [\"zoom\"]\n          },\n          \"property-type\": \"data-constant\"\n        },\n        \"icon-offset\": {\n          type: \"array\",\n          value: \"number\",\n          length: 2,\n          default: [0, 0],\n          requires: [\"icon-image\"],\n          expression: {\n            interpolated: !0,\n            parameters: [\"zoom\", \"feature\"]\n          },\n          \"property-type\": \"data-driven\"\n        },\n        \"icon-anchor\": {\n          type: \"enum\",\n          values: {\n            center: {},\n            left: {},\n            right: {},\n            top: {},\n            bottom: {},\n            \"top-left\": {},\n            \"top-right\": {},\n            \"bottom-left\": {},\n            \"bottom-right\": {}\n          },\n          default: \"center\",\n          requires: [\"icon-image\"],\n          expression: {\n            interpolated: !1,\n            parameters: [\"zoom\", \"feature\"]\n          },\n          \"property-type\": \"data-driven\"\n        },\n        \"icon-pitch-alignment\": {\n          type: \"enum\",\n          values: {\n            map: {},\n            viewport: {},\n            auto: {}\n          },\n          default: \"auto\",\n          requires: [\"icon-image\"],\n          expression: {\n            interpolated: !1,\n            parameters: [\"zoom\"]\n          },\n          \"property-type\": \"data-constant\"\n        },\n        \"text-pitch-alignment\": {\n          type: \"enum\",\n          values: {\n            map: {},\n            viewport: {},\n            auto: {}\n          },\n          default: \"auto\",\n          requires: [\"text-field\"],\n          expression: {\n            interpolated: !1,\n            parameters: [\"zoom\"]\n          },\n          \"property-type\": \"data-constant\"\n        },\n        \"text-rotation-alignment\": {\n          type: \"enum\",\n          values: {\n            map: {},\n            viewport: {},\n            auto: {}\n          },\n          default: \"auto\",\n          requires: [\"text-field\"],\n          expression: {\n            interpolated: !1,\n            parameters: [\"zoom\"]\n          },\n          \"property-type\": \"data-constant\"\n        },\n        \"text-field\": {\n          type: \"formatted\",\n          default: \"\",\n          tokens: !0,\n          expression: {\n            interpolated: !1,\n            parameters: [\"zoom\", \"feature\"]\n          },\n          \"property-type\": \"data-driven\"\n        },\n        \"text-font\": {\n          type: \"array\",\n          value: \"string\",\n          default: [\"Open Sans Regular\", \"Arial Unicode MS Regular\"],\n          requires: [\"text-field\"],\n          expression: {\n            interpolated: !1,\n            parameters: [\"zoom\", \"feature\"]\n          },\n          \"property-type\": \"data-driven\"\n        },\n        \"text-size\": {\n          type: \"number\",\n          default: 16,\n          minimum: 0,\n          units: \"pixels\",\n          requires: [\"text-field\"],\n          expression: {\n            interpolated: !0,\n            parameters: [\"zoom\", \"feature\"]\n          },\n          \"property-type\": \"data-driven\"\n        },\n        \"text-max-width\": {\n          type: \"number\",\n          default: 10,\n          minimum: 0,\n          units: \"ems\",\n          requires: [\"text-field\"],\n          expression: {\n            interpolated: !0,\n            parameters: [\"zoom\", \"feature\"]\n          },\n          \"property-type\": \"data-driven\"\n        },\n        \"text-line-height\": {\n          type: \"number\",\n          default: 1.2,\n          units: \"ems\",\n          requires: [\"text-field\"],\n          expression: {\n            interpolated: !0,\n            parameters: [\"zoom\"]\n          },\n          \"property-type\": \"data-constant\"\n        },\n        \"text-letter-spacing\": {\n          type: \"number\",\n          default: 0,\n          units: \"ems\",\n          requires: [\"text-field\"],\n          expression: {\n            interpolated: !0,\n            parameters: [\"zoom\", \"feature\"]\n          },\n          \"property-type\": \"data-driven\"\n        },\n        \"text-justify\": {\n          type: \"enum\",\n          values: {\n            auto: {},\n            left: {},\n            center: {},\n            right: {}\n          },\n          default: \"center\",\n          requires: [\"text-field\"],\n          expression: {\n            interpolated: !1,\n            parameters: [\"zoom\", \"feature\"]\n          },\n          \"property-type\": \"data-driven\"\n        },\n        \"text-radial-offset\": {\n          type: \"number\",\n          units: \"ems\",\n          default: 0,\n          requires: [\"text-field\"],\n          \"property-type\": \"data-driven\",\n          expression: {\n            interpolated: !0,\n            parameters: [\"zoom\", \"feature\"]\n          }\n        },\n        \"text-variable-anchor\": {\n          type: \"array\",\n          value: \"enum\",\n          values: {\n            center: {},\n            left: {},\n            right: {},\n            top: {},\n            bottom: {},\n            \"top-left\": {},\n            \"top-right\": {},\n            \"bottom-left\": {},\n            \"bottom-right\": {}\n          },\n          requires: [\"text-field\", {\n            \"symbol-placement\": [\"point\"]\n          }],\n          expression: {\n            interpolated: !1,\n            parameters: [\"zoom\"]\n          },\n          \"property-type\": \"data-constant\"\n        },\n        \"text-anchor\": {\n          type: \"enum\",\n          values: {\n            center: {},\n            left: {},\n            right: {},\n            top: {},\n            bottom: {},\n            \"top-left\": {},\n            \"top-right\": {},\n            \"bottom-left\": {},\n            \"bottom-right\": {}\n          },\n          default: \"center\",\n          requires: [\"text-field\", {\n            \"!\": \"text-variable-anchor\"\n          }],\n          expression: {\n            interpolated: !1,\n            parameters: [\"zoom\", \"feature\"]\n          },\n          \"property-type\": \"data-driven\"\n        },\n        \"text-max-angle\": {\n          type: \"number\",\n          default: 45,\n          units: \"degrees\",\n          requires: [\"text-field\", {\n            \"symbol-placement\": [\"line\", \"line-center\"]\n          }],\n          expression: {\n            interpolated: !0,\n            parameters: [\"zoom\"]\n          },\n          \"property-type\": \"data-constant\"\n        },\n        \"text-writing-mode\": {\n          type: \"array\",\n          value: \"enum\",\n          values: {\n            horizontal: {},\n            vertical: {}\n          },\n          requires: [\"text-field\", {\n            \"symbol-placement\": [\"point\"]\n          }],\n          expression: {\n            interpolated: !1,\n            parameters: [\"zoom\"]\n          },\n          \"property-type\": \"data-constant\"\n        },\n        \"text-rotate\": {\n          type: \"number\",\n          default: 0,\n          period: 360,\n          units: \"degrees\",\n          requires: [\"text-field\"],\n          expression: {\n            interpolated: !0,\n            parameters: [\"zoom\", \"feature\"]\n          },\n          \"property-type\": \"data-driven\"\n        },\n        \"text-padding\": {\n          type: \"number\",\n          default: 2,\n          minimum: 0,\n          units: \"pixels\",\n          requires: [\"text-field\"],\n          expression: {\n            interpolated: !0,\n            parameters: [\"zoom\"]\n          },\n          \"property-type\": \"data-constant\"\n        },\n        \"text-keep-upright\": {\n          type: \"boolean\",\n          default: !0,\n          requires: [\"text-field\", {\n            \"text-rotation-alignment\": \"map\"\n          }, {\n            \"symbol-placement\": [\"line\", \"line-center\"]\n          }],\n          expression: {\n            interpolated: !1,\n            parameters: [\"zoom\"]\n          },\n          \"property-type\": \"data-constant\"\n        },\n        \"text-transform\": {\n          type: \"enum\",\n          values: {\n            none: {},\n            uppercase: {},\n            lowercase: {}\n          },\n          default: \"none\",\n          requires: [\"text-field\"],\n          expression: {\n            interpolated: !1,\n            parameters: [\"zoom\", \"feature\"]\n          },\n          \"property-type\": \"data-driven\"\n        },\n        \"text-offset\": {\n          type: \"array\",\n          value: \"number\",\n          units: \"ems\",\n          length: 2,\n          default: [0, 0],\n          requires: [\"text-field\", {\n            \"!\": \"text-radial-offset\"\n          }],\n          expression: {\n            interpolated: !0,\n            parameters: [\"zoom\", \"feature\"]\n          },\n          \"property-type\": \"data-driven\"\n        },\n        \"text-allow-overlap\": {\n          type: \"boolean\",\n          default: !1,\n          requires: [\"text-field\"],\n          expression: {\n            interpolated: !1,\n            parameters: [\"zoom\"]\n          },\n          \"property-type\": \"data-constant\"\n        },\n        \"text-ignore-placement\": {\n          type: \"boolean\",\n          default: !1,\n          requires: [\"text-field\"],\n          expression: {\n            interpolated: !1,\n            parameters: [\"zoom\"]\n          },\n          \"property-type\": \"data-constant\"\n        },\n        \"text-optional\": {\n          type: \"boolean\",\n          default: !1,\n          requires: [\"text-field\", \"icon-image\"],\n          expression: {\n            interpolated: !1,\n            parameters: [\"zoom\"]\n          },\n          \"property-type\": \"data-constant\"\n        },\n        visibility: {\n          type: \"enum\",\n          values: {\n            visible: {},\n            none: {}\n          },\n          default: \"visible\",\n          \"property-type\": \"constant\"\n        }\n      },\n      layout_raster: {\n        visibility: {\n          type: \"enum\",\n          values: {\n            visible: {},\n            none: {}\n          },\n          default: \"visible\",\n          \"property-type\": \"constant\"\n        }\n      },\n      layout_hillshade: {\n        visibility: {\n          type: \"enum\",\n          values: {\n            visible: {},\n            none: {}\n          },\n          default: \"visible\",\n          \"property-type\": \"constant\"\n        }\n      },\n      filter: {\n        type: \"array\",\n        value: \"*\"\n      },\n      filter_operator: {\n        type: \"enum\",\n        values: {\n          \"==\": {},\n          \"!=\": {},\n          \">\": {},\n          \">=\": {},\n          \"<\": {},\n          \"<=\": {},\n          in: {},\n          \"!in\": {},\n          all: {},\n          any: {},\n          none: {},\n          has: {},\n          \"!has\": {},\n          within: {}\n        }\n      },\n      geometry_type: {\n        type: \"enum\",\n        values: {\n          Point: {},\n          LineString: {},\n          Polygon: {}\n        }\n      },\n      function: {\n        expression: {\n          type: \"expression\"\n        },\n        stops: {\n          type: \"array\",\n          value: \"function_stop\"\n        },\n        base: {\n          type: \"number\",\n          default: 1,\n          minimum: 0\n        },\n        property: {\n          type: \"string\",\n          default: \"$zoom\"\n        },\n        type: {\n          type: \"enum\",\n          values: {\n            identity: {},\n            exponential: {},\n            interval: {},\n            categorical: {}\n          },\n          default: \"exponential\"\n        },\n        colorSpace: {\n          type: \"enum\",\n          values: {\n            rgb: {},\n            lab: {},\n            hcl: {}\n          },\n          default: \"rgb\"\n        },\n        default: {\n          type: \"*\",\n          required: !1\n        }\n      },\n      function_stop: {\n        type: \"array\",\n        minimum: 0,\n        maximum: 24,\n        value: [\"number\", \"color\"],\n        length: 2\n      },\n      expression: {\n        type: \"array\",\n        value: \"*\",\n        minimum: 1\n      },\n      light: {\n        anchor: {\n          type: \"enum\",\n          default: \"viewport\",\n          values: {\n            map: {},\n            viewport: {}\n          },\n          \"property-type\": \"data-constant\",\n          transition: !1,\n          expression: {\n            interpolated: !1,\n            parameters: [\"zoom\"]\n          }\n        },\n        position: {\n          type: \"array\",\n          default: [1.15, 210, 30],\n          length: 3,\n          value: \"number\",\n          \"property-type\": \"data-constant\",\n          transition: !0,\n          expression: {\n            interpolated: !0,\n            parameters: [\"zoom\"]\n          }\n        },\n        color: {\n          type: \"color\",\n          \"property-type\": \"data-constant\",\n          default: \"#ffffff\",\n          expression: {\n            interpolated: !0,\n            parameters: [\"zoom\"]\n          },\n          transition: !0\n        },\n        intensity: {\n          type: \"number\",\n          \"property-type\": \"data-constant\",\n          default: .5,\n          minimum: 0,\n          maximum: 1,\n          expression: {\n            interpolated: !0,\n            parameters: [\"zoom\"]\n          },\n          transition: !0\n        }\n      },\n      terrain: {\n        source: {\n          type: \"string\",\n          required: !0\n        },\n        exaggeration: {\n          type: \"number\",\n          \"property-type\": \"data-constant\",\n          default: 1,\n          minimum: 0,\n          maximum: 1e3,\n          expression: {\n            interpolated: !0,\n            parameters: [\"zoom\"]\n          },\n          transition: !0\n        }\n      },\n      paint: [\"paint_fill\", \"paint_line\", \"paint_circle\", \"paint_heatmap\", \"paint_fill-extrusion\", \"paint_symbol\", \"paint_raster\", \"paint_hillshade\", \"paint_background\", \"paint_sky\"],\n      paint_fill: {\n        \"fill-antialias\": {\n          type: \"boolean\",\n          default: !0,\n          expression: {\n            interpolated: !1,\n            parameters: [\"zoom\"]\n          },\n          \"property-type\": \"data-constant\"\n        },\n        \"fill-opacity\": {\n          type: \"number\",\n          default: 1,\n          minimum: 0,\n          maximum: 1,\n          transition: !0,\n          expression: {\n            interpolated: !0,\n            parameters: [\"zoom\", \"feature\", \"feature-state\"]\n          },\n          \"property-type\": \"data-driven\"\n        },\n        \"fill-color\": {\n          type: \"color\",\n          default: \"#000000\",\n          transition: !0,\n          requires: [{\n            \"!\": \"fill-pattern\"\n          }],\n          expression: {\n            interpolated: !0,\n            parameters: [\"zoom\", \"feature\", \"feature-state\"]\n          },\n          \"property-type\": \"data-driven\"\n        },\n        \"fill-outline-color\": {\n          type: \"color\",\n          transition: !0,\n          requires: [{\n            \"!\": \"fill-pattern\"\n          }, {\n            \"fill-antialias\": !0\n          }],\n          expression: {\n            interpolated: !0,\n            parameters: [\"zoom\", \"feature\", \"feature-state\"]\n          },\n          \"property-type\": \"data-driven\"\n        },\n        \"fill-translate\": {\n          type: \"array\",\n          value: \"number\",\n          length: 2,\n          default: [0, 0],\n          transition: !0,\n          units: \"pixels\",\n          expression: {\n            interpolated: !0,\n            parameters: [\"zoom\"]\n          },\n          \"property-type\": \"data-constant\"\n        },\n        \"fill-translate-anchor\": {\n          type: \"enum\",\n          values: {\n            map: {},\n            viewport: {}\n          },\n          default: \"map\",\n          requires: [\"fill-translate\"],\n          expression: {\n            interpolated: !1,\n            parameters: [\"zoom\"]\n          },\n          \"property-type\": \"data-constant\"\n        },\n        \"fill-pattern\": {\n          type: \"resolvedImage\",\n          transition: !0,\n          expression: {\n            interpolated: !1,\n            parameters: [\"zoom\", \"feature\"]\n          },\n          \"property-type\": \"cross-faded-data-driven\"\n        }\n      },\n      \"paint_fill-extrusion\": {\n        \"fill-extrusion-opacity\": {\n          type: \"number\",\n          default: 1,\n          minimum: 0,\n          maximum: 1,\n          transition: !0,\n          expression: {\n            interpolated: !0,\n            parameters: [\"zoom\"]\n          },\n          \"property-type\": \"data-constant\"\n        },\n        \"fill-extrusion-color\": {\n          type: \"color\",\n          default: \"#000000\",\n          transition: !0,\n          requires: [{\n            \"!\": \"fill-extrusion-pattern\"\n          }],\n          expression: {\n            interpolated: !0,\n            parameters: [\"zoom\", \"feature\", \"feature-state\"]\n          },\n          \"property-type\": \"data-driven\"\n        },\n        \"fill-extrusion-translate\": {\n          type: \"array\",\n          value: \"number\",\n          length: 2,\n          default: [0, 0],\n          transition: !0,\n          units: \"pixels\",\n          expression: {\n            interpolated: !0,\n            parameters: [\"zoom\"]\n          },\n          \"property-type\": \"data-constant\"\n        },\n        \"fill-extrusion-translate-anchor\": {\n          type: \"enum\",\n          values: {\n            map: {},\n            viewport: {}\n          },\n          default: \"map\",\n          requires: [\"fill-extrusion-translate\"],\n          expression: {\n            interpolated: !1,\n            parameters: [\"zoom\"]\n          },\n          \"property-type\": \"data-constant\"\n        },\n        \"fill-extrusion-pattern\": {\n          type: \"resolvedImage\",\n          transition: !0,\n          expression: {\n            interpolated: !1,\n            parameters: [\"zoom\", \"feature\"]\n          },\n          \"property-type\": \"cross-faded-data-driven\"\n        },\n        \"fill-extrusion-height\": {\n          type: \"number\",\n          default: 0,\n          minimum: 0,\n          units: \"meters\",\n          transition: !0,\n          expression: {\n            interpolated: !0,\n            parameters: [\"zoom\", \"feature\", \"feature-state\"]\n          },\n          \"property-type\": \"data-driven\"\n        },\n        \"fill-extrusion-base\": {\n          type: \"number\",\n          default: 0,\n          minimum: 0,\n          units: \"meters\",\n          transition: !0,\n          requires: [\"fill-extrusion-height\"],\n          expression: {\n            interpolated: !0,\n            parameters: [\"zoom\", \"feature\", \"feature-state\"]\n          },\n          \"property-type\": \"data-driven\"\n        },\n        \"fill-extrusion-vertical-gradient\": {\n          type: \"boolean\",\n          default: !0,\n          transition: !1,\n          expression: {\n            interpolated: !1,\n            parameters: [\"zoom\"]\n          },\n          \"property-type\": \"data-constant\"\n        }\n      },\n      paint_line: {\n        \"line-opacity\": {\n          type: \"number\",\n          default: 1,\n          minimum: 0,\n          maximum: 1,\n          transition: !0,\n          expression: {\n            interpolated: !0,\n            parameters: [\"zoom\", \"feature\", \"feature-state\"]\n          },\n          \"property-type\": \"data-driven\"\n        },\n        \"line-color\": {\n          type: \"color\",\n          default: \"#000000\",\n          transition: !0,\n          requires: [{\n            \"!\": \"line-pattern\"\n          }],\n          expression: {\n            interpolated: !0,\n            parameters: [\"zoom\", \"feature\", \"feature-state\"]\n          },\n          \"property-type\": \"data-driven\"\n        },\n        \"line-translate\": {\n          type: \"array\",\n          value: \"number\",\n          length: 2,\n          default: [0, 0],\n          transition: !0,\n          units: \"pixels\",\n          expression: {\n            interpolated: !0,\n            parameters: [\"zoom\"]\n          },\n          \"property-type\": \"data-constant\"\n        },\n        \"line-translate-anchor\": {\n          type: \"enum\",\n          values: {\n            map: {},\n            viewport: {}\n          },\n          default: \"map\",\n          requires: [\"line-translate\"],\n          expression: {\n            interpolated: !1,\n            parameters: [\"zoom\"]\n          },\n          \"property-type\": \"data-constant\"\n        },\n        \"line-width\": {\n          type: \"number\",\n          default: 1,\n          minimum: 0,\n          transition: !0,\n          units: \"pixels\",\n          expression: {\n            interpolated: !0,\n            parameters: [\"zoom\", \"feature\", \"feature-state\"]\n          },\n          \"property-type\": \"data-driven\"\n        },\n        \"line-gap-width\": {\n          type: \"number\",\n          default: 0,\n          minimum: 0,\n          transition: !0,\n          units: \"pixels\",\n          expression: {\n            interpolated: !0,\n            parameters: [\"zoom\", \"feature\", \"feature-state\"]\n          },\n          \"property-type\": \"data-driven\"\n        },\n        \"line-offset\": {\n          type: \"number\",\n          default: 0,\n          transition: !0,\n          units: \"pixels\",\n          expression: {\n            interpolated: !0,\n            parameters: [\"zoom\", \"feature\", \"feature-state\"]\n          },\n          \"property-type\": \"data-driven\"\n        },\n        \"line-blur\": {\n          type: \"number\",\n          default: 0,\n          minimum: 0,\n          transition: !0,\n          units: \"pixels\",\n          expression: {\n            interpolated: !0,\n            parameters: [\"zoom\", \"feature\", \"feature-state\"]\n          },\n          \"property-type\": \"data-driven\"\n        },\n        \"line-dasharray\": {\n          type: \"array\",\n          value: \"number\",\n          minimum: 0,\n          transition: !0,\n          units: \"line widths\",\n          requires: [{\n            \"!\": \"line-pattern\"\n          }],\n          expression: {\n            interpolated: !1,\n            parameters: [\"zoom\"]\n          },\n          \"property-type\": \"cross-faded\"\n        },\n        \"line-pattern\": {\n          type: \"resolvedImage\",\n          transition: !0,\n          expression: {\n            interpolated: !1,\n            parameters: [\"zoom\", \"feature\"]\n          },\n          \"property-type\": \"cross-faded-data-driven\"\n        },\n        \"line-gradient\": {\n          type: \"color\",\n          transition: !1,\n          requires: [{\n            \"!\": \"line-dasharray\"\n          }, {\n            \"!\": \"line-pattern\"\n          }, {\n            source: \"geojson\",\n            has: {\n              lineMetrics: !0\n            }\n          }],\n          expression: {\n            interpolated: !0,\n            parameters: [\"line-progress\"]\n          },\n          \"property-type\": \"color-ramp\"\n        }\n      },\n      paint_circle: {\n        \"circle-radius\": {\n          type: \"number\",\n          default: 5,\n          minimum: 0,\n          transition: !0,\n          units: \"pixels\",\n          expression: {\n            interpolated: !0,\n            parameters: [\"zoom\", \"feature\", \"feature-state\"]\n          },\n          \"property-type\": \"data-driven\"\n        },\n        \"circle-color\": {\n          type: \"color\",\n          default: \"#000000\",\n          transition: !0,\n          expression: {\n            interpolated: !0,\n            parameters: [\"zoom\", \"feature\", \"feature-state\"]\n          },\n          \"property-type\": \"data-driven\"\n        },\n        \"circle-blur\": {\n          type: \"number\",\n          default: 0,\n          transition: !0,\n          expression: {\n            interpolated: !0,\n            parameters: [\"zoom\", \"feature\", \"feature-state\"]\n          },\n          \"property-type\": \"data-driven\"\n        },\n        \"circle-opacity\": {\n          type: \"number\",\n          default: 1,\n          minimum: 0,\n          maximum: 1,\n          transition: !0,\n          expression: {\n            interpolated: !0,\n            parameters: [\"zoom\", \"feature\", \"feature-state\"]\n          },\n          \"property-type\": \"data-driven\"\n        },\n        \"circle-translate\": {\n          type: \"array\",\n          value: \"number\",\n          length: 2,\n          default: [0, 0],\n          transition: !0,\n          units: \"pixels\",\n          expression: {\n            interpolated: !0,\n            parameters: [\"zoom\"]\n          },\n          \"property-type\": \"data-constant\"\n        },\n        \"circle-translate-anchor\": {\n          type: \"enum\",\n          values: {\n            map: {},\n            viewport: {}\n          },\n          default: \"map\",\n          requires: [\"circle-translate\"],\n          expression: {\n            interpolated: !1,\n            parameters: [\"zoom\"]\n          },\n          \"property-type\": \"data-constant\"\n        },\n        \"circle-pitch-scale\": {\n          type: \"enum\",\n          values: {\n            map: {},\n            viewport: {}\n          },\n          default: \"map\",\n          expression: {\n            interpolated: !1,\n            parameters: [\"zoom\"]\n          },\n          \"property-type\": \"data-constant\"\n        },\n        \"circle-pitch-alignment\": {\n          type: \"enum\",\n          values: {\n            map: {},\n            viewport: {}\n          },\n          default: \"viewport\",\n          expression: {\n            interpolated: !1,\n            parameters: [\"zoom\"]\n          },\n          \"property-type\": \"data-constant\"\n        },\n        \"circle-stroke-width\": {\n          type: \"number\",\n          default: 0,\n          minimum: 0,\n          transition: !0,\n          units: \"pixels\",\n          expression: {\n            interpolated: !0,\n            parameters: [\"zoom\", \"feature\", \"feature-state\"]\n          },\n          \"property-type\": \"data-driven\"\n        },\n        \"circle-stroke-color\": {\n          type: \"color\",\n          default: \"#000000\",\n          transition: !0,\n          expression: {\n            interpolated: !0,\n            parameters: [\"zoom\", \"feature\", \"feature-state\"]\n          },\n          \"property-type\": \"data-driven\"\n        },\n        \"circle-stroke-opacity\": {\n          type: \"number\",\n          default: 1,\n          minimum: 0,\n          maximum: 1,\n          transition: !0,\n          expression: {\n            interpolated: !0,\n            parameters: [\"zoom\", \"feature\", \"feature-state\"]\n          },\n          \"property-type\": \"data-driven\"\n        }\n      },\n      paint_heatmap: {\n        \"heatmap-radius\": {\n          type: \"number\",\n          default: 30,\n          minimum: 1,\n          transition: !0,\n          units: \"pixels\",\n          expression: {\n            interpolated: !0,\n            parameters: [\"zoom\", \"feature\", \"feature-state\"]\n          },\n          \"property-type\": \"data-driven\"\n        },\n        \"heatmap-weight\": {\n          type: \"number\",\n          default: 1,\n          minimum: 0,\n          transition: !1,\n          expression: {\n            interpolated: !0,\n            parameters: [\"zoom\", \"feature\", \"feature-state\"]\n          },\n          \"property-type\": \"data-driven\"\n        },\n        \"heatmap-intensity\": {\n          type: \"number\",\n          default: 1,\n          minimum: 0,\n          transition: !0,\n          expression: {\n            interpolated: !0,\n            parameters: [\"zoom\"]\n          },\n          \"property-type\": \"data-constant\"\n        },\n        \"heatmap-color\": {\n          type: \"color\",\n          default: [\"interpolate\", [\"linear\"], [\"heatmap-density\"], 0, \"rgba(0, 0, 255, 0)\", .1, \"royalblue\", .3, \"cyan\", .5, \"lime\", .7, \"yellow\", 1, \"red\"],\n          transition: !1,\n          expression: {\n            interpolated: !0,\n            parameters: [\"heatmap-density\"]\n          },\n          \"property-type\": \"color-ramp\"\n        },\n        \"heatmap-opacity\": {\n          type: \"number\",\n          default: 1,\n          minimum: 0,\n          maximum: 1,\n          transition: !0,\n          expression: {\n            interpolated: !0,\n            parameters: [\"zoom\"]\n          },\n          \"property-type\": \"data-constant\"\n        }\n      },\n      paint_symbol: {\n        \"icon-opacity\": {\n          type: \"number\",\n          default: 1,\n          minimum: 0,\n          maximum: 1,\n          transition: !0,\n          requires: [\"icon-image\"],\n          expression: {\n            interpolated: !0,\n            parameters: [\"zoom\", \"feature\", \"feature-state\"]\n          },\n          \"property-type\": \"data-driven\"\n        },\n        \"icon-color\": {\n          type: \"color\",\n          default: \"#000000\",\n          transition: !0,\n          requires: [\"icon-image\"],\n          expression: {\n            interpolated: !0,\n            parameters: [\"zoom\", \"feature\", \"feature-state\"]\n          },\n          \"property-type\": \"data-driven\"\n        },\n        \"icon-halo-color\": {\n          type: \"color\",\n          default: \"rgba(0, 0, 0, 0)\",\n          transition: !0,\n          requires: [\"icon-image\"],\n          expression: {\n            interpolated: !0,\n            parameters: [\"zoom\", \"feature\", \"feature-state\"]\n          },\n          \"property-type\": \"data-driven\"\n        },\n        \"icon-halo-width\": {\n          type: \"number\",\n          default: 0,\n          minimum: 0,\n          transition: !0,\n          units: \"pixels\",\n          requires: [\"icon-image\"],\n          expression: {\n            interpolated: !0,\n            parameters: [\"zoom\", \"feature\", \"feature-state\"]\n          },\n          \"property-type\": \"data-driven\"\n        },\n        \"icon-halo-blur\": {\n          type: \"number\",\n          default: 0,\n          minimum: 0,\n          transition: !0,\n          units: \"pixels\",\n          requires: [\"icon-image\"],\n          expression: {\n            interpolated: !0,\n            parameters: [\"zoom\", \"feature\", \"feature-state\"]\n          },\n          \"property-type\": \"data-driven\"\n        },\n        \"icon-translate\": {\n          type: \"array\",\n          value: \"number\",\n          length: 2,\n          default: [0, 0],\n          transition: !0,\n          units: \"pixels\",\n          requires: [\"icon-image\"],\n          expression: {\n            interpolated: !0,\n            parameters: [\"zoom\"]\n          },\n          \"property-type\": \"data-constant\"\n        },\n        \"icon-translate-anchor\": {\n          type: \"enum\",\n          values: {\n            map: {},\n            viewport: {}\n          },\n          default: \"map\",\n          requires: [\"icon-image\", \"icon-translate\"],\n          expression: {\n            interpolated: !1,\n            parameters: [\"zoom\"]\n          },\n          \"property-type\": \"data-constant\"\n        },\n        \"text-opacity\": {\n          type: \"number\",\n          default: 1,\n          minimum: 0,\n          maximum: 1,\n          transition: !0,\n          requires: [\"text-field\"],\n          expression: {\n            interpolated: !0,\n            parameters: [\"zoom\", \"feature\", \"feature-state\"]\n          },\n          \"property-type\": \"data-driven\"\n        },\n        \"text-color\": {\n          type: \"color\",\n          default: \"#000000\",\n          transition: !0,\n          overridable: !0,\n          requires: [\"text-field\"],\n          expression: {\n            interpolated: !0,\n            parameters: [\"zoom\", \"feature\", \"feature-state\"]\n          },\n          \"property-type\": \"data-driven\"\n        },\n        \"text-halo-color\": {\n          type: \"color\",\n          default: \"rgba(0, 0, 0, 0)\",\n          transition: !0,\n          requires: [\"text-field\"],\n          expression: {\n            interpolated: !0,\n            parameters: [\"zoom\", \"feature\", \"feature-state\"]\n          },\n          \"property-type\": \"data-driven\"\n        },\n        \"text-halo-width\": {\n          type: \"number\",\n          default: 0,\n          minimum: 0,\n          transition: !0,\n          units: \"pixels\",\n          requires: [\"text-field\"],\n          expression: {\n            interpolated: !0,\n            parameters: [\"zoom\", \"feature\", \"feature-state\"]\n          },\n          \"property-type\": \"data-driven\"\n        },\n        \"text-halo-blur\": {\n          type: \"number\",\n          default: 0,\n          minimum: 0,\n          transition: !0,\n          units: \"pixels\",\n          requires: [\"text-field\"],\n          expression: {\n            interpolated: !0,\n            parameters: [\"zoom\", \"feature\", \"feature-state\"]\n          },\n          \"property-type\": \"data-driven\"\n        },\n        \"text-translate\": {\n          type: \"array\",\n          value: \"number\",\n          length: 2,\n          default: [0, 0],\n          transition: !0,\n          units: \"pixels\",\n          requires: [\"text-field\"],\n          expression: {\n            interpolated: !0,\n            parameters: [\"zoom\"]\n          },\n          \"property-type\": \"data-constant\"\n        },\n        \"text-translate-anchor\": {\n          type: \"enum\",\n          values: {\n            map: {},\n            viewport: {}\n          },\n          default: \"map\",\n          requires: [\"text-field\", \"text-translate\"],\n          expression: {\n            interpolated: !1,\n            parameters: [\"zoom\"]\n          },\n          \"property-type\": \"data-constant\"\n        }\n      },\n      paint_raster: {\n        \"raster-opacity\": {\n          type: \"number\",\n          default: 1,\n          minimum: 0,\n          maximum: 1,\n          transition: !0,\n          expression: {\n            interpolated: !0,\n            parameters: [\"zoom\"]\n          },\n          \"property-type\": \"data-constant\"\n        },\n        \"raster-hue-rotate\": {\n          type: \"number\",\n          default: 0,\n          period: 360,\n          transition: !0,\n          units: \"degrees\",\n          expression: {\n            interpolated: !0,\n            parameters: [\"zoom\"]\n          },\n          \"property-type\": \"data-constant\"\n        },\n        \"raster-brightness-min\": {\n          type: \"number\",\n          default: 0,\n          minimum: 0,\n          maximum: 1,\n          transition: !0,\n          expression: {\n            interpolated: !0,\n            parameters: [\"zoom\"]\n          },\n          \"property-type\": \"data-constant\"\n        },\n        \"raster-brightness-max\": {\n          type: \"number\",\n          default: 1,\n          minimum: 0,\n          maximum: 1,\n          transition: !0,\n          expression: {\n            interpolated: !0,\n            parameters: [\"zoom\"]\n          },\n          \"property-type\": \"data-constant\"\n        },\n        \"raster-saturation\": {\n          type: \"number\",\n          default: 0,\n          minimum: -1,\n          maximum: 1,\n          transition: !0,\n          expression: {\n            interpolated: !0,\n            parameters: [\"zoom\"]\n          },\n          \"property-type\": \"data-constant\"\n        },\n        \"raster-contrast\": {\n          type: \"number\",\n          default: 0,\n          minimum: -1,\n          maximum: 1,\n          transition: !0,\n          expression: {\n            interpolated: !0,\n            parameters: [\"zoom\"]\n          },\n          \"property-type\": \"data-constant\"\n        },\n        \"raster-resampling\": {\n          type: \"enum\",\n          values: {\n            linear: {},\n            nearest: {}\n          },\n          default: \"linear\",\n          expression: {\n            interpolated: !1,\n            parameters: [\"zoom\"]\n          },\n          \"property-type\": \"data-constant\"\n        },\n        \"raster-fade-duration\": {\n          type: \"number\",\n          default: 300,\n          minimum: 0,\n          transition: !1,\n          units: \"milliseconds\",\n          expression: {\n            interpolated: !0,\n            parameters: [\"zoom\"]\n          },\n          \"property-type\": \"data-constant\"\n        }\n      },\n      paint_hillshade: {\n        \"hillshade-illumination-direction\": {\n          type: \"number\",\n          default: 335,\n          minimum: 0,\n          maximum: 359,\n          transition: !1,\n          expression: {\n            interpolated: !0,\n            parameters: [\"zoom\"]\n          },\n          \"property-type\": \"data-constant\"\n        },\n        \"hillshade-illumination-anchor\": {\n          type: \"enum\",\n          values: {\n            map: {},\n            viewport: {}\n          },\n          default: \"viewport\",\n          expression: {\n            interpolated: !1,\n            parameters: [\"zoom\"]\n          },\n          \"property-type\": \"data-constant\"\n        },\n        \"hillshade-exaggeration\": {\n          type: \"number\",\n          default: .5,\n          minimum: 0,\n          maximum: 1,\n          transition: !0,\n          expression: {\n            interpolated: !0,\n            parameters: [\"zoom\"]\n          },\n          \"property-type\": \"data-constant\"\n        },\n        \"hillshade-shadow-color\": {\n          type: \"color\",\n          default: \"#000000\",\n          transition: !0,\n          expression: {\n            interpolated: !0,\n            parameters: [\"zoom\"]\n          },\n          \"property-type\": \"data-constant\"\n        },\n        \"hillshade-highlight-color\": {\n          type: \"color\",\n          default: \"#FFFFFF\",\n          transition: !0,\n          expression: {\n            interpolated: !0,\n            parameters: [\"zoom\"]\n          },\n          \"property-type\": \"data-constant\"\n        },\n        \"hillshade-accent-color\": {\n          type: \"color\",\n          default: \"#000000\",\n          transition: !0,\n          expression: {\n            interpolated: !0,\n            parameters: [\"zoom\"]\n          },\n          \"property-type\": \"data-constant\"\n        }\n      },\n      paint_background: {\n        \"background-color\": {\n          type: \"color\",\n          default: \"#000000\",\n          transition: !0,\n          requires: [{\n            \"!\": \"background-pattern\"\n          }],\n          expression: {\n            interpolated: !0,\n            parameters: [\"zoom\"]\n          },\n          \"property-type\": \"data-constant\"\n        },\n        \"background-pattern\": {\n          type: \"resolvedImage\",\n          transition: !0,\n          expression: {\n            interpolated: !1,\n            parameters: [\"zoom\"]\n          },\n          \"property-type\": \"cross-faded\"\n        },\n        \"background-opacity\": {\n          type: \"number\",\n          default: 1,\n          minimum: 0,\n          maximum: 1,\n          transition: !0,\n          expression: {\n            interpolated: !0,\n            parameters: [\"zoom\"]\n          },\n          \"property-type\": \"data-constant\"\n        }\n      },\n      paint_sky: {\n        \"sky-type\": {\n          type: \"enum\",\n          values: {\n            gradient: {},\n            atmosphere: {}\n          },\n          default: \"atmosphere\",\n          expression: {\n            interpolated: !1,\n            parameters: [\"zoom\"]\n          },\n          \"property-type\": \"data-constant\"\n        },\n        \"sky-atmosphere-sun\": {\n          type: \"array\",\n          value: \"number\",\n          length: 2,\n          units: \"degrees\",\n          minimum: [0, 0],\n          maximum: [360, 180],\n          transition: !1,\n          requires: [{\n            \"sky-type\": \"atmosphere\"\n          }],\n          expression: {\n            interpolated: !1,\n            parameters: [\"zoom\"]\n          },\n          \"property-type\": \"data-constant\"\n        },\n        \"sky-atmosphere-sun-intensity\": {\n          type: \"number\",\n          requires: [{\n            \"sky-type\": \"atmosphere\"\n          }],\n          default: 10,\n          minimum: 0,\n          maximum: 100,\n          transition: !1,\n          \"property-type\": \"data-constant\"\n        },\n        \"sky-gradient-center\": {\n          type: \"array\",\n          requires: [{\n            \"sky-type\": \"gradient\"\n          }],\n          value: \"number\",\n          default: [0, 0],\n          length: 2,\n          units: \"degrees\",\n          minimum: [0, 0],\n          maximum: [360, 180],\n          transition: !1,\n          expression: {\n            interpolated: !1,\n            parameters: [\"zoom\"]\n          },\n          \"property-type\": \"data-constant\"\n        },\n        \"sky-gradient-radius\": {\n          type: \"number\",\n          requires: [{\n            \"sky-type\": \"gradient\"\n          }],\n          default: 90,\n          minimum: 0,\n          maximum: 180,\n          transition: !1,\n          expression: {\n            interpolated: !1,\n            parameters: [\"zoom\"]\n          },\n          \"property-type\": \"data-constant\"\n        },\n        \"sky-gradient\": {\n          type: \"color\",\n          default: [\"interpolate\", [\"linear\"], [\"sky-radial-progress\"], .8, \"#87ceeb\", 1, \"white\"],\n          transition: !1,\n          requires: [{\n            \"sky-type\": \"gradient\"\n          }],\n          expression: {\n            interpolated: !0,\n            parameters: [\"sky-radial-progress\"]\n          },\n          \"property-type\": \"color-ramp\"\n        },\n        \"sky-atmosphere-halo-color\": {\n          type: \"color\",\n          default: \"white\",\n          transition: !1,\n          requires: [{\n            \"sky-type\": \"atmosphere\"\n          }],\n          \"property-type\": \"data-constant\"\n        },\n        \"sky-atmosphere-color\": {\n          type: \"color\",\n          default: \"white\",\n          transition: !1,\n          requires: [{\n            \"sky-type\": \"atmosphere\"\n          }],\n          \"property-type\": \"data-constant\"\n        },\n        \"sky-opacity\": {\n          type: \"number\",\n          default: 1,\n          minimum: 0,\n          maximum: 1,\n          transition: !0,\n          expression: {\n            interpolated: !0,\n            parameters: [\"zoom\"]\n          },\n          \"property-type\": \"data-constant\"\n        }\n      },\n      transition: {\n        duration: {\n          type: \"number\",\n          default: 300,\n          minimum: 0,\n          units: \"milliseconds\"\n        },\n        delay: {\n          type: \"number\",\n          default: 0,\n          minimum: 0,\n          units: \"milliseconds\"\n        }\n      },\n      \"property-type\": {\n        \"data-driven\": {\n          type: \"property-type\"\n        },\n        \"cross-faded\": {\n          type: \"property-type\"\n        },\n        \"cross-faded-data-driven\": {\n          type: \"property-type\"\n        },\n        \"color-ramp\": {\n          type: \"property-type\"\n        },\n        \"data-constant\": {\n          type: \"property-type\"\n        },\n        constant: {\n          type: \"property-type\"\n        }\n      },\n      promoteId: {\n        \"*\": {\n          type: \"string\"\n        }\n      }\n    };\n\n    var Rt = function Rt(t, e, r, i) {\n      _classCallCheck(this, Rt);\n\n      this.message = (t ? \"\".concat(t, \": \") : \"\") + r, i && (this.identifier = i), null != e && e.__line__ && (this.line = e.__line__);\n    };\n\n    function Lt(t) {\n      var e = t.value;\n      return e ? [new Rt(t.key, e, \"constants have been deprecated as of v8\")] : [];\n    }\n\n    function Ut(t) {\n      for (var _len2 = arguments.length, e = new Array(_len2 > 1 ? _len2 - 1 : 0), _key2 = 1; _key2 < _len2; _key2++) {\n        e[_key2 - 1] = arguments[_key2];\n      }\n\n      for (var _i9 = 0, _e11 = e; _i9 < _e11.length; _i9++) {\n        var _r11 = _e11[_i9];\n\n        for (var _e12 in _r11) {\n          t[_e12] = _r11[_e12];\n        }\n      }\n\n      return t;\n    }\n\n    function Ot(t) {\n      return t instanceof Number || t instanceof String || t instanceof Boolean ? t.valueOf() : t;\n    }\n\n    function $t(t) {\n      if (Array.isArray(t)) return t.map($t);\n\n      if (t instanceof Object && !(t instanceof Number || t instanceof String || t instanceof Boolean)) {\n        var _e13 = {};\n\n        for (var _r12 in t) {\n          _e13[_r12] = $t(t[_r12]);\n        }\n\n        return _e13;\n      }\n\n      return Ot(t);\n    }\n\n    var qt = /*#__PURE__*/function (_Error2) {\n      _inherits(qt, _Error2);\n\n      var _super6 = _createSuper(qt);\n\n      function qt(t, e) {\n        var _this11;\n\n        _classCallCheck(this, qt);\n\n        _this11 = _super6.call(this, e), _this11.message = e, _this11.key = t;\n        return _this11;\n      }\n\n      return qt;\n    }( /*#__PURE__*/_wrapNativeSuper(Error));\n\n    var Nt = /*#__PURE__*/function () {\n      function Nt(t) {\n        var e = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];\n\n        _classCallCheck(this, Nt);\n\n        this.parent = t, this.bindings = {};\n\n        var _iterator3 = _createForOfIteratorHelper(e),\n            _step3;\n\n        try {\n          for (_iterator3.s(); !(_step3 = _iterator3.n()).done;) {\n            var _ref3 = _step3.value;\n\n            var _ref2 = _slicedToArray(_ref3, 2);\n\n            var _t8 = _ref2[0];\n            var _r13 = _ref2[1];\n            this.bindings[_t8] = _r13;\n          }\n        } catch (err) {\n          _iterator3.e(err);\n        } finally {\n          _iterator3.f();\n        }\n      }\n\n      _createClass(Nt, [{\n        key: \"concat\",\n        value: function concat(t) {\n          return new Nt(this, t);\n        }\n      }, {\n        key: \"get\",\n        value: function get(t) {\n          if (this.bindings[t]) return this.bindings[t];\n          if (this.parent) return this.parent.get(t);\n          throw new Error(\"\".concat(t, \" not found in scope.\"));\n        }\n      }, {\n        key: \"has\",\n        value: function has(t) {\n          return !!this.bindings[t] || !!this.parent && this.parent.has(t);\n        }\n      }]);\n\n      return Nt;\n    }();\n\n    var jt = {\n      kind: \"null\"\n    },\n        Gt = {\n      kind: \"number\"\n    },\n        Zt = {\n      kind: \"string\"\n    },\n        Xt = {\n      kind: \"boolean\"\n    },\n        Kt = {\n      kind: \"color\"\n    },\n        Ht = {\n      kind: \"object\"\n    },\n        Yt = {\n      kind: \"value\"\n    },\n        Wt = {\n      kind: \"collator\"\n    },\n        Jt = {\n      kind: \"formatted\"\n    },\n        Qt = {\n      kind: \"resolvedImage\"\n    };\n\n    function te(t, e) {\n      return {\n        kind: \"array\",\n        itemType: t,\n        N: e\n      };\n    }\n\n    function ee(t) {\n      if (\"array\" === t.kind) {\n        var _e14 = ee(t.itemType);\n\n        return \"number\" == typeof t.N ? \"array<\".concat(_e14, \", \").concat(t.N, \">\") : \"value\" === t.itemType.kind ? \"array\" : \"array<\".concat(_e14, \">\");\n      }\n\n      return t.kind;\n    }\n\n    var re = [jt, Gt, Zt, Xt, Kt, Jt, Ht, te(Yt), Qt];\n\n    function ie(t, e) {\n      if (\"error\" === e.kind) return null;\n\n      if (\"array\" === t.kind) {\n        if (\"array\" === e.kind && (0 === e.N && \"value\" === e.itemType.kind || !ie(t.itemType, e.itemType)) && (\"number\" != typeof t.N || t.N === e.N)) return null;\n      } else {\n        if (t.kind === e.kind) return null;\n\n        if (\"value\" === t.kind) {\n          var _iterator4 = _createForOfIteratorHelper(re),\n              _step4;\n\n          try {\n            for (_iterator4.s(); !(_step4 = _iterator4.n()).done;) {\n              var _t9 = _step4.value;\n              if (!ie(_t9, e)) return null;\n            }\n          } catch (err) {\n            _iterator4.e(err);\n          } finally {\n            _iterator4.f();\n          }\n        }\n      }\n\n      return \"Expected \".concat(ee(t), \" but found \").concat(ee(e), \" instead.\");\n    }\n\n    function ne(t, e) {\n      return e.some(function (e) {\n        return e.kind === t.kind;\n      });\n    }\n\n    function se(t, e) {\n      return e.some(function (e) {\n        return \"null\" === e ? null === t : \"array\" === e ? Array.isArray(t) : \"object\" === e ? t && !Array.isArray(t) && \"object\" == _typeof(t) : e === _typeof(t);\n      });\n    }\n\n    function ae(t, e) {\n      return t(e = {\n        exports: {}\n      }, e.exports), e.exports;\n    }\n\n    var oe = ae(function (t, e) {\n      var r = {\n        transparent: [0, 0, 0, 0],\n        aliceblue: [240, 248, 255, 1],\n        antiquewhite: [250, 235, 215, 1],\n        aqua: [0, 255, 255, 1],\n        aquamarine: [127, 255, 212, 1],\n        azure: [240, 255, 255, 1],\n        beige: [245, 245, 220, 1],\n        bisque: [255, 228, 196, 1],\n        black: [0, 0, 0, 1],\n        blanchedalmond: [255, 235, 205, 1],\n        blue: [0, 0, 255, 1],\n        blueviolet: [138, 43, 226, 1],\n        brown: [165, 42, 42, 1],\n        burlywood: [222, 184, 135, 1],\n        cadetblue: [95, 158, 160, 1],\n        chartreuse: [127, 255, 0, 1],\n        chocolate: [210, 105, 30, 1],\n        coral: [255, 127, 80, 1],\n        cornflowerblue: [100, 149, 237, 1],\n        cornsilk: [255, 248, 220, 1],\n        crimson: [220, 20, 60, 1],\n        cyan: [0, 255, 255, 1],\n        darkblue: [0, 0, 139, 1],\n        darkcyan: [0, 139, 139, 1],\n        darkgoldenrod: [184, 134, 11, 1],\n        darkgray: [169, 169, 169, 1],\n        darkgreen: [0, 100, 0, 1],\n        darkgrey: [169, 169, 169, 1],\n        darkkhaki: [189, 183, 107, 1],\n        darkmagenta: [139, 0, 139, 1],\n        darkolivegreen: [85, 107, 47, 1],\n        darkorange: [255, 140, 0, 1],\n        darkorchid: [153, 50, 204, 1],\n        darkred: [139, 0, 0, 1],\n        darksalmon: [233, 150, 122, 1],\n        darkseagreen: [143, 188, 143, 1],\n        darkslateblue: [72, 61, 139, 1],\n        darkslategray: [47, 79, 79, 1],\n        darkslategrey: [47, 79, 79, 1],\n        darkturquoise: [0, 206, 209, 1],\n        darkviolet: [148, 0, 211, 1],\n        deeppink: [255, 20, 147, 1],\n        deepskyblue: [0, 191, 255, 1],\n        dimgray: [105, 105, 105, 1],\n        dimgrey: [105, 105, 105, 1],\n        dodgerblue: [30, 144, 255, 1],\n        firebrick: [178, 34, 34, 1],\n        floralwhite: [255, 250, 240, 1],\n        forestgreen: [34, 139, 34, 1],\n        fuchsia: [255, 0, 255, 1],\n        gainsboro: [220, 220, 220, 1],\n        ghostwhite: [248, 248, 255, 1],\n        gold: [255, 215, 0, 1],\n        goldenrod: [218, 165, 32, 1],\n        gray: [128, 128, 128, 1],\n        green: [0, 128, 0, 1],\n        greenyellow: [173, 255, 47, 1],\n        grey: [128, 128, 128, 1],\n        honeydew: [240, 255, 240, 1],\n        hotpink: [255, 105, 180, 1],\n        indianred: [205, 92, 92, 1],\n        indigo: [75, 0, 130, 1],\n        ivory: [255, 255, 240, 1],\n        khaki: [240, 230, 140, 1],\n        lavender: [230, 230, 250, 1],\n        lavenderblush: [255, 240, 245, 1],\n        lawngreen: [124, 252, 0, 1],\n        lemonchiffon: [255, 250, 205, 1],\n        lightblue: [173, 216, 230, 1],\n        lightcoral: [240, 128, 128, 1],\n        lightcyan: [224, 255, 255, 1],\n        lightgoldenrodyellow: [250, 250, 210, 1],\n        lightgray: [211, 211, 211, 1],\n        lightgreen: [144, 238, 144, 1],\n        lightgrey: [211, 211, 211, 1],\n        lightpink: [255, 182, 193, 1],\n        lightsalmon: [255, 160, 122, 1],\n        lightseagreen: [32, 178, 170, 1],\n        lightskyblue: [135, 206, 250, 1],\n        lightslategray: [119, 136, 153, 1],\n        lightslategrey: [119, 136, 153, 1],\n        lightsteelblue: [176, 196, 222, 1],\n        lightyellow: [255, 255, 224, 1],\n        lime: [0, 255, 0, 1],\n        limegreen: [50, 205, 50, 1],\n        linen: [250, 240, 230, 1],\n        magenta: [255, 0, 255, 1],\n        maroon: [128, 0, 0, 1],\n        mediumaquamarine: [102, 205, 170, 1],\n        mediumblue: [0, 0, 205, 1],\n        mediumorchid: [186, 85, 211, 1],\n        mediumpurple: [147, 112, 219, 1],\n        mediumseagreen: [60, 179, 113, 1],\n        mediumslateblue: [123, 104, 238, 1],\n        mediumspringgreen: [0, 250, 154, 1],\n        mediumturquoise: [72, 209, 204, 1],\n        mediumvioletred: [199, 21, 133, 1],\n        midnightblue: [25, 25, 112, 1],\n        mintcream: [245, 255, 250, 1],\n        mistyrose: [255, 228, 225, 1],\n        moccasin: [255, 228, 181, 1],\n        navajowhite: [255, 222, 173, 1],\n        navy: [0, 0, 128, 1],\n        oldlace: [253, 245, 230, 1],\n        olive: [128, 128, 0, 1],\n        olivedrab: [107, 142, 35, 1],\n        orange: [255, 165, 0, 1],\n        orangered: [255, 69, 0, 1],\n        orchid: [218, 112, 214, 1],\n        palegoldenrod: [238, 232, 170, 1],\n        palegreen: [152, 251, 152, 1],\n        paleturquoise: [175, 238, 238, 1],\n        palevioletred: [219, 112, 147, 1],\n        papayawhip: [255, 239, 213, 1],\n        peachpuff: [255, 218, 185, 1],\n        peru: [205, 133, 63, 1],\n        pink: [255, 192, 203, 1],\n        plum: [221, 160, 221, 1],\n        powderblue: [176, 224, 230, 1],\n        purple: [128, 0, 128, 1],\n        rebeccapurple: [102, 51, 153, 1],\n        red: [255, 0, 0, 1],\n        rosybrown: [188, 143, 143, 1],\n        royalblue: [65, 105, 225, 1],\n        saddlebrown: [139, 69, 19, 1],\n        salmon: [250, 128, 114, 1],\n        sandybrown: [244, 164, 96, 1],\n        seagreen: [46, 139, 87, 1],\n        seashell: [255, 245, 238, 1],\n        sienna: [160, 82, 45, 1],\n        silver: [192, 192, 192, 1],\n        skyblue: [135, 206, 235, 1],\n        slateblue: [106, 90, 205, 1],\n        slategray: [112, 128, 144, 1],\n        slategrey: [112, 128, 144, 1],\n        snow: [255, 250, 250, 1],\n        springgreen: [0, 255, 127, 1],\n        steelblue: [70, 130, 180, 1],\n        tan: [210, 180, 140, 1],\n        teal: [0, 128, 128, 1],\n        thistle: [216, 191, 216, 1],\n        tomato: [255, 99, 71, 1],\n        turquoise: [64, 224, 208, 1],\n        violet: [238, 130, 238, 1],\n        wheat: [245, 222, 179, 1],\n        white: [255, 255, 255, 1],\n        whitesmoke: [245, 245, 245, 1],\n        yellow: [255, 255, 0, 1],\n        yellowgreen: [154, 205, 50, 1]\n      };\n\n      function i(t) {\n        return (t = Math.round(t)) < 0 ? 0 : t > 255 ? 255 : t;\n      }\n\n      function n(t) {\n        return i(\"%\" === t[t.length - 1] ? parseFloat(t) / 100 * 255 : parseInt(t));\n      }\n\n      function s(t) {\n        return (e = \"%\" === t[t.length - 1] ? parseFloat(t) / 100 : parseFloat(t)) < 0 ? 0 : e > 1 ? 1 : e;\n        var e;\n      }\n\n      function a(t, e, r) {\n        return r < 0 ? r += 1 : r > 1 && (r -= 1), 6 * r < 1 ? t + (e - t) * r * 6 : 2 * r < 1 ? e : 3 * r < 2 ? t + (e - t) * (2 / 3 - r) * 6 : t;\n      }\n\n      try {\n        e.parseCSSColor = function (t) {\n          var e,\n              o = t.replace(/ /g, \"\").toLowerCase();\n          if (o in r) return r[o].slice();\n          if (\"#\" === o[0]) return 4 === o.length ? (e = parseInt(o.substr(1), 16)) >= 0 && e <= 4095 ? [(3840 & e) >> 4 | (3840 & e) >> 8, 240 & e | (240 & e) >> 4, 15 & e | (15 & e) << 4, 1] : null : 7 === o.length && (e = parseInt(o.substr(1), 16)) >= 0 && e <= 16777215 ? [(16711680 & e) >> 16, (65280 & e) >> 8, 255 & e, 1] : null;\n          var l = o.indexOf(\"(\"),\n              u = o.indexOf(\")\");\n\n          if (-1 !== l && u + 1 === o.length) {\n            var c = o.substr(0, l),\n                h = o.substr(l + 1, u - (l + 1)).split(\",\"),\n                p = 1;\n\n            switch (c) {\n              case \"rgba\":\n                if (4 !== h.length) return null;\n                p = s(h.pop());\n\n              case \"rgb\":\n                return 3 !== h.length ? null : [n(h[0]), n(h[1]), n(h[2]), p];\n\n              case \"hsla\":\n                if (4 !== h.length) return null;\n                p = s(h.pop());\n\n              case \"hsl\":\n                if (3 !== h.length) return null;\n                var d = (parseFloat(h[0]) % 360 + 360) % 360 / 360,\n                    f = s(h[1]),\n                    y = s(h[2]),\n                    m = y <= .5 ? y * (f + 1) : y + f - y * f,\n                    g = 2 * y - m;\n                return [i(255 * a(g, m, d + 1 / 3)), i(255 * a(g, m, d)), i(255 * a(g, m, d - 1 / 3)), p];\n\n              default:\n                return null;\n            }\n          }\n\n          return null;\n        };\n      } catch (t) {}\n    }).parseCSSColor;\n\n    var le = /*#__PURE__*/function () {\n      function le(t, e, r) {\n        var i = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : 1;\n\n        _classCallCheck(this, le);\n\n        this.r = t, this.g = e, this.b = r, this.a = i;\n      }\n\n      _createClass(le, [{\n        key: \"toString\",\n        value: function toString() {\n          var _this$toArray = this.toArray(),\n              _this$toArray2 = _slicedToArray(_this$toArray, 4),\n              t = _this$toArray2[0],\n              e = _this$toArray2[1],\n              r = _this$toArray2[2],\n              i = _this$toArray2[3];\n\n          return \"rgba(\".concat(Math.round(t), \",\").concat(Math.round(e), \",\").concat(Math.round(r), \",\").concat(i, \")\");\n        }\n      }, {\n        key: \"toArray\",\n        value: function toArray() {\n          var t = this.r,\n              e = this.g,\n              r = this.b,\n              i = this.a;\n          return 0 === i ? [0, 0, 0, 0] : [255 * t / i, 255 * e / i, 255 * r / i, i];\n        }\n      }], [{\n        key: \"parse\",\n        value: function parse(t) {\n          if (!t) return;\n          if (t instanceof le) return t;\n          if (\"string\" != typeof t) return;\n          var e = oe(t);\n          return e ? new le(e[0] / 255 * e[3], e[1] / 255 * e[3], e[2] / 255 * e[3], e[3]) : void 0;\n        }\n      }]);\n\n      return le;\n    }();\n\n    le.black = new le(0, 0, 0, 1), le.white = new le(1, 1, 1, 1), le.transparent = new le(0, 0, 0, 0), le.red = new le(1, 0, 0, 1), le.blue = new le(0, 0, 1, 1);\n\n    var ue = /*#__PURE__*/function () {\n      function ue(t, e, r) {\n        _classCallCheck(this, ue);\n\n        this.sensitivity = t ? e ? \"variant\" : \"case\" : e ? \"accent\" : \"base\", this.locale = r, this.collator = new Intl.Collator(this.locale ? this.locale : [], {\n          sensitivity: this.sensitivity,\n          usage: \"search\"\n        });\n      }\n\n      _createClass(ue, [{\n        key: \"compare\",\n        value: function compare(t, e) {\n          return this.collator.compare(t, e);\n        }\n      }, {\n        key: \"resolvedLocale\",\n        value: function resolvedLocale() {\n          return new Intl.Collator(this.locale ? this.locale : []).resolvedOptions().locale;\n        }\n      }]);\n\n      return ue;\n    }();\n\n    var ce = function ce(t, e, r, i, n) {\n      _classCallCheck(this, ce);\n\n      this.text = t, this.image = e, this.scale = r, this.fontStack = i, this.textColor = n;\n    };\n\n    var he = /*#__PURE__*/function () {\n      function he(t) {\n        _classCallCheck(this, he);\n\n        this.sections = t;\n      }\n\n      _createClass(he, [{\n        key: \"isEmpty\",\n        value: function isEmpty() {\n          return 0 === this.sections.length || !this.sections.some(function (t) {\n            return 0 !== t.text.length || t.image && 0 !== t.image.name.length;\n          });\n        }\n      }, {\n        key: \"toString\",\n        value: function toString() {\n          return 0 === this.sections.length ? \"\" : this.sections.map(function (t) {\n            return t.text;\n          }).join(\"\");\n        }\n      }, {\n        key: \"serialize\",\n        value: function serialize() {\n          var t = [\"format\"];\n\n          var _iterator5 = _createForOfIteratorHelper(this.sections),\n              _step5;\n\n          try {\n            for (_iterator5.s(); !(_step5 = _iterator5.n()).done;) {\n              var _e15 = _step5.value;\n\n              if (_e15.image) {\n                t.push([\"image\", _e15.image.name]);\n                continue;\n              }\n\n              t.push(_e15.text);\n              var _r14 = {};\n              _e15.fontStack && (_r14[\"text-font\"] = [\"literal\", _e15.fontStack.split(\",\")]), _e15.scale && (_r14[\"font-scale\"] = _e15.scale), _e15.textColor && (_r14[\"text-color\"] = [\"rgba\"].concat(_e15.textColor.toArray())), t.push(_r14);\n            }\n          } catch (err) {\n            _iterator5.e(err);\n          } finally {\n            _iterator5.f();\n          }\n\n          return t;\n        }\n      }], [{\n        key: \"fromString\",\n        value: function fromString(t) {\n          return new he([new ce(t, null, null, null, null)]);\n        }\n      }, {\n        key: \"factory\",\n        value: function factory(t) {\n          return t instanceof he ? t : he.fromString(t);\n        }\n      }]);\n\n      return he;\n    }();\n\n    var pe = /*#__PURE__*/function () {\n      function pe(t) {\n        _classCallCheck(this, pe);\n\n        this.name = t.name, this.available = t.available;\n      }\n\n      _createClass(pe, [{\n        key: \"toString\",\n        value: function toString() {\n          return this.name;\n        }\n      }, {\n        key: \"serialize\",\n        value: function serialize() {\n          return [\"image\", this.name];\n        }\n      }], [{\n        key: \"fromString\",\n        value: function fromString(t) {\n          return t ? new pe({\n            name: t,\n            available: !1\n          }) : null;\n        }\n      }]);\n\n      return pe;\n    }();\n\n    function de(t, e, r, i) {\n      return \"number\" == typeof t && t >= 0 && t <= 255 && \"number\" == typeof e && e >= 0 && e <= 255 && \"number\" == typeof r && r >= 0 && r <= 255 ? void 0 === i || \"number\" == typeof i && i >= 0 && i <= 1 ? null : \"Invalid rgba value [\".concat([t, e, r, i].join(\", \"), \"]: 'a' must be between 0 and 1.\") : \"Invalid rgba value [\".concat((\"number\" == typeof i ? [t, e, r, i] : [t, e, r]).join(\", \"), \"]: 'r', 'g', and 'b' must be between 0 and 255.\");\n    }\n\n    function fe(t) {\n      if (null === t) return !0;\n      if (\"string\" == typeof t) return !0;\n      if (\"boolean\" == typeof t) return !0;\n      if (\"number\" == typeof t) return !0;\n      if (t instanceof le) return !0;\n      if (t instanceof ue) return !0;\n      if (t instanceof he) return !0;\n      if (t instanceof pe) return !0;\n\n      if (Array.isArray(t)) {\n        var _iterator6 = _createForOfIteratorHelper(t),\n            _step6;\n\n        try {\n          for (_iterator6.s(); !(_step6 = _iterator6.n()).done;) {\n            var _e16 = _step6.value;\n            if (!fe(_e16)) return !1;\n          }\n        } catch (err) {\n          _iterator6.e(err);\n        } finally {\n          _iterator6.f();\n        }\n\n        return !0;\n      }\n\n      if (\"object\" == _typeof(t)) {\n        for (var _e17 in t) {\n          if (!fe(t[_e17])) return !1;\n        }\n\n        return !0;\n      }\n\n      return !1;\n    }\n\n    function ye(t) {\n      if (null === t) return jt;\n      if (\"string\" == typeof t) return Zt;\n      if (\"boolean\" == typeof t) return Xt;\n      if (\"number\" == typeof t) return Gt;\n      if (t instanceof le) return Kt;\n      if (t instanceof ue) return Wt;\n      if (t instanceof he) return Jt;\n      if (t instanceof pe) return Qt;\n\n      if (Array.isArray(t)) {\n        var _e18 = t.length;\n\n        var _r15;\n\n        var _iterator7 = _createForOfIteratorHelper(t),\n            _step7;\n\n        try {\n          for (_iterator7.s(); !(_step7 = _iterator7.n()).done;) {\n            var _e19 = _step7.value;\n\n            var _t10 = ye(_e19);\n\n            if (_r15) {\n              if (_r15 === _t10) continue;\n              _r15 = Yt;\n              break;\n            }\n\n            _r15 = _t10;\n          }\n        } catch (err) {\n          _iterator7.e(err);\n        } finally {\n          _iterator7.f();\n        }\n\n        return te(_r15 || Yt, _e18);\n      }\n\n      return Ht;\n    }\n\n    function me(t) {\n      var e = _typeof(t);\n\n      return null === t ? \"\" : \"string\" === e || \"number\" === e || \"boolean\" === e ? String(t) : t instanceof le || t instanceof he || t instanceof pe ? t.toString() : JSON.stringify(t);\n    }\n\n    var ge = /*#__PURE__*/function () {\n      function ge(t, e) {\n        _classCallCheck(this, ge);\n\n        this.type = t, this.value = e;\n      }\n\n      _createClass(ge, [{\n        key: \"evaluate\",\n        value: function evaluate() {\n          return this.value;\n        }\n      }, {\n        key: \"eachChild\",\n        value: function eachChild() {}\n      }, {\n        key: \"outputDefined\",\n        value: function outputDefined() {\n          return !0;\n        }\n      }, {\n        key: \"serialize\",\n        value: function serialize() {\n          return \"array\" === this.type.kind || \"object\" === this.type.kind ? [\"literal\", this.value] : this.value instanceof le ? [\"rgba\"].concat(this.value.toArray()) : this.value instanceof he ? this.value.serialize() : this.value;\n        }\n      }], [{\n        key: \"parse\",\n        value: function parse(t, e) {\n          if (2 !== t.length) return e.error(\"'literal' expression requires exactly one argument, but found \".concat(t.length - 1, \" instead.\"));\n          if (!fe(t[1])) return e.error(\"invalid value\");\n          var r = t[1];\n          var i = ye(r);\n          var n = e.expectedType;\n          return \"array\" !== i.kind || 0 !== i.N || !n || \"array\" !== n.kind || \"number\" == typeof n.N && 0 !== n.N || (i = n), new ge(i, r);\n        }\n      }]);\n\n      return ge;\n    }();\n\n    var xe = /*#__PURE__*/function () {\n      function xe(t) {\n        _classCallCheck(this, xe);\n\n        this.name = \"ExpressionEvaluationError\", this.message = t;\n      }\n\n      _createClass(xe, [{\n        key: \"toJSON\",\n        value: function toJSON() {\n          return this.message;\n        }\n      }]);\n\n      return xe;\n    }();\n\n    var ve = {\n      string: Zt,\n      number: Gt,\n      boolean: Xt,\n      object: Ht\n    };\n\n    var be = /*#__PURE__*/function () {\n      function be(t, e) {\n        _classCallCheck(this, be);\n\n        this.type = t, this.args = e;\n      }\n\n      _createClass(be, [{\n        key: \"evaluate\",\n        value: function evaluate(t) {\n          for (var _e20 = 0; _e20 < this.args.length; _e20++) {\n            var _r16 = this.args[_e20].evaluate(t);\n\n            if (!ie(this.type, ye(_r16))) return _r16;\n            if (_e20 === this.args.length - 1) throw new xe(\"Expected value to be of type \".concat(ee(this.type), \", but found \").concat(ee(ye(_r16)), \" instead.\"));\n          }\n\n          return null;\n        }\n      }, {\n        key: \"eachChild\",\n        value: function eachChild(t) {\n          this.args.forEach(t);\n        }\n      }, {\n        key: \"outputDefined\",\n        value: function outputDefined() {\n          return this.args.every(function (t) {\n            return t.outputDefined();\n          });\n        }\n      }, {\n        key: \"serialize\",\n        value: function serialize() {\n          var t = this.type,\n              e = [t.kind];\n\n          if (\"array\" === t.kind) {\n            var _r17 = t.itemType;\n\n            if (\"string\" === _r17.kind || \"number\" === _r17.kind || \"boolean\" === _r17.kind) {\n              e.push(_r17.kind);\n              var _i10 = t.N;\n              (\"number\" == typeof _i10 || this.args.length > 1) && e.push(_i10);\n            }\n          }\n\n          return e.concat(this.args.map(function (t) {\n            return t.serialize();\n          }));\n        }\n      }], [{\n        key: \"parse\",\n        value: function parse(t, e) {\n          if (t.length < 2) return e.error(\"Expected at least one argument.\");\n          var r,\n              i = 1;\n          var n = t[0];\n\n          if (\"array\" === n) {\n            var _n6, _s3;\n\n            if (t.length > 2) {\n              var _r18 = t[1];\n              if (\"string\" != typeof _r18 || !(_r18 in ve) || \"object\" === _r18) return e.error('The item type argument of \"array\" must be one of string, number, boolean', 1);\n              _n6 = ve[_r18], i++;\n            } else _n6 = Yt;\n\n            if (t.length > 3) {\n              if (null !== t[2] && (\"number\" != typeof t[2] || t[2] < 0 || t[2] !== Math.floor(t[2]))) return e.error('The length argument to \"array\" must be a positive integer literal', 2);\n              _s3 = t[2], i++;\n            }\n\n            r = te(_n6, _s3);\n          } else r = ve[n];\n\n          var s = [];\n\n          for (; i < t.length; i++) {\n            var _r19 = e.parse(t[i], i, Yt);\n\n            if (!_r19) return null;\n            s.push(_r19);\n          }\n\n          return new be(r, s);\n        }\n      }]);\n\n      return be;\n    }();\n\n    var we = /*#__PURE__*/function () {\n      function we(t) {\n        _classCallCheck(this, we);\n\n        this.type = Jt, this.sections = t;\n      }\n\n      _createClass(we, [{\n        key: \"evaluate\",\n        value: function evaluate(t) {\n          return new he(this.sections.map(function (e) {\n            var r = e.content.evaluate(t);\n            return ye(r) === Qt ? new ce(\"\", r, null, null, null) : new ce(me(r), null, e.scale ? e.scale.evaluate(t) : null, e.font ? e.font.evaluate(t).join(\",\") : null, e.textColor ? e.textColor.evaluate(t) : null);\n          }));\n        }\n      }, {\n        key: \"eachChild\",\n        value: function eachChild(t) {\n          var _iterator8 = _createForOfIteratorHelper(this.sections),\n              _step8;\n\n          try {\n            for (_iterator8.s(); !(_step8 = _iterator8.n()).done;) {\n              var _e21 = _step8.value;\n              t(_e21.content), _e21.scale && t(_e21.scale), _e21.font && t(_e21.font), _e21.textColor && t(_e21.textColor);\n            }\n          } catch (err) {\n            _iterator8.e(err);\n          } finally {\n            _iterator8.f();\n          }\n        }\n      }, {\n        key: \"outputDefined\",\n        value: function outputDefined() {\n          return !1;\n        }\n      }, {\n        key: \"serialize\",\n        value: function serialize() {\n          var t = [\"format\"];\n\n          var _iterator9 = _createForOfIteratorHelper(this.sections),\n              _step9;\n\n          try {\n            for (_iterator9.s(); !(_step9 = _iterator9.n()).done;) {\n              var _e22 = _step9.value;\n              t.push(_e22.content.serialize());\n              var _r20 = {};\n              _e22.scale && (_r20[\"font-scale\"] = _e22.scale.serialize()), _e22.font && (_r20[\"text-font\"] = _e22.font.serialize()), _e22.textColor && (_r20[\"text-color\"] = _e22.textColor.serialize()), t.push(_r20);\n            }\n          } catch (err) {\n            _iterator9.e(err);\n          } finally {\n            _iterator9.f();\n          }\n\n          return t;\n        }\n      }], [{\n        key: \"parse\",\n        value: function parse(t, e) {\n          if (t.length < 2) return e.error(\"Expected at least one argument.\");\n          var r = t[1];\n          if (!Array.isArray(r) && \"object\" == _typeof(r)) return e.error(\"First argument must be an image or text section.\");\n          var i = [];\n          var n = !1;\n\n          for (var _r21 = 1; _r21 <= t.length - 1; ++_r21) {\n            var _s4 = t[_r21];\n\n            if (n && \"object\" == _typeof(_s4) && !Array.isArray(_s4)) {\n              n = !1;\n              var _t11 = null;\n              if (_s4[\"font-scale\"] && (_t11 = e.parse(_s4[\"font-scale\"], 1, Gt), !_t11)) return null;\n              var _r22 = null;\n              if (_s4[\"text-font\"] && (_r22 = e.parse(_s4[\"text-font\"], 1, te(Zt)), !_r22)) return null;\n              var _a3 = null;\n              if (_s4[\"text-color\"] && (_a3 = e.parse(_s4[\"text-color\"], 1, Kt), !_a3)) return null;\n              var _o2 = i[i.length - 1];\n              _o2.scale = _t11, _o2.font = _r22, _o2.textColor = _a3;\n            } else {\n              var _s5 = e.parse(t[_r21], 1, Yt);\n\n              if (!_s5) return null;\n              var _a4 = _s5.type.kind;\n              if (\"string\" !== _a4 && \"value\" !== _a4 && \"null\" !== _a4 && \"resolvedImage\" !== _a4) return e.error(\"Formatted text type must be 'string', 'value', 'image' or 'null'.\");\n              n = !0, i.push({\n                content: _s5,\n                scale: null,\n                font: null,\n                textColor: null\n              });\n            }\n          }\n\n          return new we(i);\n        }\n      }]);\n\n      return we;\n    }();\n\n    var _e = /*#__PURE__*/function () {\n      function _e(t) {\n        _classCallCheck(this, _e);\n\n        this.type = Qt, this.input = t;\n      }\n\n      _createClass(_e, [{\n        key: \"evaluate\",\n        value: function evaluate(t) {\n          var e = this.input.evaluate(t),\n              r = pe.fromString(e);\n          return r && t.availableImages && (r.available = t.availableImages.indexOf(e) > -1), r;\n        }\n      }, {\n        key: \"eachChild\",\n        value: function eachChild(t) {\n          t(this.input);\n        }\n      }, {\n        key: \"outputDefined\",\n        value: function outputDefined() {\n          return !1;\n        }\n      }, {\n        key: \"serialize\",\n        value: function serialize() {\n          return [\"image\", this.input.serialize()];\n        }\n      }], [{\n        key: \"parse\",\n        value: function parse(t, e) {\n          if (2 !== t.length) return e.error(\"Expected two arguments.\");\n          var r = e.parse(t[1], 1, Zt);\n          return r ? new _e(r) : e.error(\"No image name provided.\");\n        }\n      }]);\n\n      return _e;\n    }();\n\n    var ke = {\n      \"to-boolean\": Xt,\n      \"to-color\": Kt,\n      \"to-number\": Gt,\n      \"to-string\": Zt\n    };\n\n    var Ae = /*#__PURE__*/function () {\n      function Ae(t, e) {\n        _classCallCheck(this, Ae);\n\n        this.type = t, this.args = e;\n      }\n\n      _createClass(Ae, [{\n        key: \"evaluate\",\n        value: function evaluate(t) {\n          if (\"boolean\" === this.type.kind) return Boolean(this.args[0].evaluate(t));\n\n          if (\"color\" === this.type.kind) {\n            var _e23, _r23;\n\n            var _iterator10 = _createForOfIteratorHelper(this.args),\n                _step10;\n\n            try {\n              for (_iterator10.s(); !(_step10 = _iterator10.n()).done;) {\n                var _i11 = _step10.value;\n                if (_e23 = _i11.evaluate(t), _r23 = null, _e23 instanceof le) return _e23;\n\n                if (\"string\" == typeof _e23) {\n                  var _r24 = t.parseColor(_e23);\n\n                  if (_r24) return _r24;\n                } else if (Array.isArray(_e23) && (_r23 = _e23.length < 3 || _e23.length > 4 ? \"Invalid rbga value \".concat(JSON.stringify(_e23), \": expected an array containing either three or four numeric values.\") : de(_e23[0], _e23[1], _e23[2], _e23[3]), !_r23)) return new le(_e23[0] / 255, _e23[1] / 255, _e23[2] / 255, _e23[3]);\n              }\n            } catch (err) {\n              _iterator10.e(err);\n            } finally {\n              _iterator10.f();\n            }\n\n            throw new xe(_r23 || \"Could not parse color from value '\".concat(\"string\" == typeof _e23 ? _e23 : String(JSON.stringify(_e23)), \"'\"));\n          }\n\n          if (\"number\" === this.type.kind) {\n            var _e24 = null;\n\n            var _iterator11 = _createForOfIteratorHelper(this.args),\n                _step11;\n\n            try {\n              for (_iterator11.s(); !(_step11 = _iterator11.n()).done;) {\n                var _r25 = _step11.value;\n                if (_e24 = _r25.evaluate(t), null === _e24) return 0;\n\n                var _i12 = Number(_e24);\n\n                if (!isNaN(_i12)) return _i12;\n              }\n            } catch (err) {\n              _iterator11.e(err);\n            } finally {\n              _iterator11.f();\n            }\n\n            throw new xe(\"Could not convert \".concat(JSON.stringify(_e24), \" to number.\"));\n          }\n\n          return \"formatted\" === this.type.kind ? he.fromString(me(this.args[0].evaluate(t))) : \"resolvedImage\" === this.type.kind ? pe.fromString(me(this.args[0].evaluate(t))) : me(this.args[0].evaluate(t));\n        }\n      }, {\n        key: \"eachChild\",\n        value: function eachChild(t) {\n          this.args.forEach(t);\n        }\n      }, {\n        key: \"outputDefined\",\n        value: function outputDefined() {\n          return this.args.every(function (t) {\n            return t.outputDefined();\n          });\n        }\n      }, {\n        key: \"serialize\",\n        value: function serialize() {\n          if (\"formatted\" === this.type.kind) return new we([{\n            content: this.args[0],\n            scale: null,\n            font: null,\n            textColor: null\n          }]).serialize();\n          if (\"resolvedImage\" === this.type.kind) return new _e(this.args[0]).serialize();\n          var t = [\"to-\".concat(this.type.kind)];\n          return this.eachChild(function (e) {\n            t.push(e.serialize());\n          }), t;\n        }\n      }], [{\n        key: \"parse\",\n        value: function parse(t, e) {\n          if (t.length < 2) return e.error(\"Expected at least one argument.\");\n          var r = t[0];\n          if ((\"to-boolean\" === r || \"to-string\" === r) && 2 !== t.length) return e.error(\"Expected one argument.\");\n          var i = ke[r],\n              n = [];\n\n          for (var _r26 = 1; _r26 < t.length; _r26++) {\n            var _i13 = e.parse(t[_r26], _r26, Yt);\n\n            if (!_i13) return null;\n            n.push(_i13);\n          }\n\n          return new Ae(i, n);\n        }\n      }]);\n\n      return Ae;\n    }();\n\n    var Se = [\"Unknown\", \"Point\", \"LineString\", \"Polygon\"];\n\n    var Ie = /*#__PURE__*/function () {\n      function Ie() {\n        _classCallCheck(this, Ie);\n\n        this.globals = null, this.feature = null, this.featureState = null, this.formattedSection = null, this._parseColorCache = {}, this.availableImages = null, this.canonical = null;\n      }\n\n      _createClass(Ie, [{\n        key: \"id\",\n        value: function id() {\n          return this.feature && \"id\" in this.feature ? this.feature.id : null;\n        }\n      }, {\n        key: \"geometryType\",\n        value: function geometryType() {\n          return this.feature ? \"number\" == typeof this.feature.type ? Se[this.feature.type] : this.feature.type : null;\n        }\n      }, {\n        key: \"geometry\",\n        value: function geometry() {\n          return this.feature && \"geometry\" in this.feature ? this.feature.geometry : null;\n        }\n      }, {\n        key: \"canonicalID\",\n        value: function canonicalID() {\n          return this.canonical;\n        }\n      }, {\n        key: \"properties\",\n        value: function properties() {\n          return this.feature && this.feature.properties || {};\n        }\n      }, {\n        key: \"parseColor\",\n        value: function parseColor(t) {\n          var e = this._parseColorCache[t];\n          return e || (e = this._parseColorCache[t] = le.parse(t)), e;\n        }\n      }]);\n\n      return Ie;\n    }();\n\n    var Te = /*#__PURE__*/function () {\n      function Te(t, e, r, i) {\n        _classCallCheck(this, Te);\n\n        this.name = t, this.type = e, this._evaluate = r, this.args = i;\n      }\n\n      _createClass(Te, [{\n        key: \"evaluate\",\n        value: function evaluate(t) {\n          return this._evaluate(t, this.args);\n        }\n      }, {\n        key: \"eachChild\",\n        value: function eachChild(t) {\n          this.args.forEach(t);\n        }\n      }, {\n        key: \"outputDefined\",\n        value: function outputDefined() {\n          return !1;\n        }\n      }, {\n        key: \"serialize\",\n        value: function serialize() {\n          return [this.name].concat(this.args.map(function (t) {\n            return t.serialize();\n          }));\n        }\n      }], [{\n        key: \"parse\",\n        value: function parse(t, e) {\n          var _e$errors;\n\n          var r = t[0],\n              i = Te.definitions[r];\n          if (!i) return e.error(\"Unknown expression \\\"\".concat(r, \"\\\". If you wanted a literal array, use [\\\"literal\\\", [...]].\"), 0);\n          var n = Array.isArray(i) ? i[0] : i.type,\n              s = Array.isArray(i) ? [[i[1], i[2]]] : i.overloads,\n              a = s.filter(function (_ref4) {\n            var _ref5 = _slicedToArray(_ref4, 1),\n                e = _ref5[0];\n\n            return !Array.isArray(e) || e.length === t.length - 1;\n          });\n          var o = null;\n\n          var _iterator12 = _createForOfIteratorHelper(a),\n              _step12;\n\n          try {\n            for (_iterator12.s(); !(_step12 = _iterator12.n()).done;) {\n              var _ref10 = _step12.value;\n\n              var _ref7 = _slicedToArray(_ref10, 2);\n\n              var _i15 = _ref7[0];\n              var _s6 = _ref7[1];\n              o = new He(e.registry, e.path, null, e.scope);\n              var _a5 = [];\n\n              var _l2 = !1;\n\n              for (var _e25 = 1; _e25 < t.length; _e25++) {\n                var _r29 = t[_e25],\n                    _n8 = Array.isArray(_i15) ? _i15[_e25 - 1] : _i15.type,\n                    _s7 = o.parse(_r29, 1 + _a5.length, _n8);\n\n                if (!_s7) {\n                  _l2 = !0;\n                  break;\n                }\n\n                _a5.push(_s7);\n              }\n\n              if (!_l2) if (Array.isArray(_i15) && _i15.length !== _a5.length) o.error(\"Expected \".concat(_i15.length, \" arguments, but found \").concat(_a5.length, \" instead.\"));else {\n                for (var _t12 = 0; _t12 < _a5.length; _t12++) {\n                  var _e26 = Array.isArray(_i15) ? _i15[_t12] : _i15.type,\n                      _r30 = _a5[_t12];\n\n                  o.concat(_t12 + 1).checkSubtype(_e26, _r30.type);\n                }\n\n                if (0 === o.errors.length) return new Te(r, n, _s6, _a5);\n              }\n            }\n          } catch (err) {\n            _iterator12.e(err);\n          } finally {\n            _iterator12.f();\n          }\n\n          if (1 === a.length) (_e$errors = e.errors).push.apply(_e$errors, _toConsumableArray(o.errors));else {\n            var _r27 = (a.length ? a : s).map(function (_ref8) {\n              var _ref9 = _slicedToArray(_ref8, 1),\n                  t = _ref9[0];\n\n              return e = t, Array.isArray(e) ? \"(\".concat(e.map(ee).join(\", \"), \")\") : \"(\".concat(ee(e.type), \"...)\");\n              var e;\n            }).join(\" | \"),\n                _i14 = [];\n\n            for (var _r28 = 1; _r28 < t.length; _r28++) {\n              var _n7 = e.parse(t[_r28], 1 + _i14.length);\n\n              if (!_n7) return null;\n\n              _i14.push(ee(_n7.type));\n            }\n\n            e.error(\"Expected arguments of type \".concat(_r27, \", but found (\").concat(_i14.join(\", \"), \") instead.\"));\n          }\n          return null;\n        }\n      }, {\n        key: \"register\",\n        value: function register(t, e) {\n          Te.definitions = e;\n\n          for (var _r31 in e) {\n            t[_r31] = Te;\n          }\n        }\n      }]);\n\n      return Te;\n    }();\n\n    var ze = /*#__PURE__*/function () {\n      function ze(t, e, r) {\n        _classCallCheck(this, ze);\n\n        this.type = Wt, this.locale = r, this.caseSensitive = t, this.diacriticSensitive = e;\n      }\n\n      _createClass(ze, [{\n        key: \"evaluate\",\n        value: function evaluate(t) {\n          return new ue(this.caseSensitive.evaluate(t), this.diacriticSensitive.evaluate(t), this.locale ? this.locale.evaluate(t) : null);\n        }\n      }, {\n        key: \"eachChild\",\n        value: function eachChild(t) {\n          t(this.caseSensitive), t(this.diacriticSensitive), this.locale && t(this.locale);\n        }\n      }, {\n        key: \"outputDefined\",\n        value: function outputDefined() {\n          return !1;\n        }\n      }, {\n        key: \"serialize\",\n        value: function serialize() {\n          var t = {};\n          return t[\"case-sensitive\"] = this.caseSensitive.serialize(), t[\"diacritic-sensitive\"] = this.diacriticSensitive.serialize(), this.locale && (t.locale = this.locale.serialize()), [\"collator\", t];\n        }\n      }], [{\n        key: \"parse\",\n        value: function parse(t, e) {\n          if (2 !== t.length) return e.error(\"Expected one argument.\");\n          var r = t[1];\n          if (\"object\" != _typeof(r) || Array.isArray(r)) return e.error(\"Collator options argument must be an object.\");\n          var i = e.parse(void 0 !== r[\"case-sensitive\"] && r[\"case-sensitive\"], 1, Xt);\n          if (!i) return null;\n          var n = e.parse(void 0 !== r[\"diacritic-sensitive\"] && r[\"diacritic-sensitive\"], 1, Xt);\n          if (!n) return null;\n          var s = null;\n          return r.locale && (s = e.parse(r.locale, 1, Zt), !s) ? null : new ze(i, n, s);\n        }\n      }]);\n\n      return ze;\n    }();\n\n    function Ee(t, e) {\n      t[0] = Math.min(t[0], e[0]), t[1] = Math.min(t[1], e[1]), t[2] = Math.max(t[2], e[0]), t[3] = Math.max(t[3], e[1]);\n    }\n\n    function Me(t, e) {\n      return !(t[0] <= e[0] || t[2] >= e[2] || t[1] <= e[1] || t[3] >= e[3]);\n    }\n\n    function Be(t, e) {\n      var r = (180 + t[0]) / 360,\n          i = (180 - 180 / Math.PI * Math.log(Math.tan(Math.PI / 4 + t[1] * Math.PI / 360))) / 360,\n          n = Math.pow(2, e.z);\n      return [Math.round(r * n * 8192), Math.round(i * n * 8192)];\n    }\n\n    function De(t, e, r) {\n      var i = t[0] - e[0],\n          n = t[1] - e[1],\n          s = t[0] - r[0],\n          a = t[1] - r[1];\n      return i * a - s * n == 0 && i * s <= 0 && n * a <= 0;\n    }\n\n    function Ce(t, e) {\n      var r = !1;\n\n      for (var _a6 = 0, _o3 = e.length; _a6 < _o3; _a6++) {\n        var _o4 = e[_a6];\n\n        for (var _e27 = 0, _a7 = _o4.length; _e27 < _a7 - 1; _e27++) {\n          if (De(t, _o4[_e27], _o4[_e27 + 1])) return !1;\n          (n = _o4[_e27])[1] > (i = t)[1] != (s = _o4[_e27 + 1])[1] > i[1] && i[0] < (s[0] - n[0]) * (i[1] - n[1]) / (s[1] - n[1]) + n[0] && (r = !r);\n        }\n      }\n\n      var i, n, s;\n      return r;\n    }\n\n    function Pe(t, e) {\n      for (var _r32 = 0; _r32 < e.length; _r32++) {\n        if (Ce(t, e[_r32])) return !0;\n      }\n\n      return !1;\n    }\n\n    function Ve(t, e, r, i) {\n      var n = i[0] - r[0],\n          s = i[1] - r[1],\n          a = (t[0] - r[0]) * s - n * (t[1] - r[1]),\n          o = (e[0] - r[0]) * s - n * (e[1] - r[1]);\n      return a > 0 && o < 0 || a < 0 && o > 0;\n    }\n\n    function Fe(t, e, r) {\n      var _iterator13 = _createForOfIteratorHelper(r),\n          _step13;\n\n      try {\n        for (_iterator13.s(); !(_step13 = _iterator13.n()).done;) {\n          var _u2 = _step13.value;\n\n          for (var _r33 = 0; _r33 < _u2.length - 1; ++_r33) {\n            if (0 != (o = [(a = _u2[_r33 + 1])[0] - (s = _u2[_r33])[0], a[1] - s[1]])[0] * (l = [(n = e)[0] - (i = t)[0], n[1] - i[1]])[1] - o[1] * l[0] && Ve(i, n, s, a) && Ve(s, a, i, n)) return !0;\n          }\n        }\n      } catch (err) {\n        _iterator13.e(err);\n      } finally {\n        _iterator13.f();\n      }\n\n      var i, n, s, a, o, l;\n      return !1;\n    }\n\n    function Re(t, e) {\n      for (var _r34 = 0; _r34 < t.length; ++_r34) {\n        if (!Ce(t[_r34], e)) return !1;\n      }\n\n      for (var _r35 = 0; _r35 < t.length - 1; ++_r35) {\n        if (Fe(t[_r35], t[_r35 + 1], e)) return !1;\n      }\n\n      return !0;\n    }\n\n    function Le(t, e) {\n      for (var _r36 = 0; _r36 < e.length; _r36++) {\n        if (Re(t, e[_r36])) return !0;\n      }\n\n      return !1;\n    }\n\n    function Ue(t, e, r) {\n      var i = [];\n\n      for (var _n9 = 0; _n9 < t.length; _n9++) {\n        var _s8 = [];\n\n        for (var _i16 = 0; _i16 < t[_n9].length; _i16++) {\n          var _a8 = Be(t[_n9][_i16], r);\n\n          Ee(e, _a8), _s8.push(_a8);\n        }\n\n        i.push(_s8);\n      }\n\n      return i;\n    }\n\n    function Oe(t, e, r) {\n      var i = [];\n\n      for (var _n10 = 0; _n10 < t.length; _n10++) {\n        var _s9 = Ue(t[_n10], e, r);\n\n        i.push(_s9);\n      }\n\n      return i;\n    }\n\n    function $e(t, e, r, i) {\n      if (t[0] < r[0] || t[0] > r[2]) {\n        var _e28 = .5 * i;\n\n        var _n11 = t[0] - r[0] > _e28 ? -i : r[0] - t[0] > _e28 ? i : 0;\n\n        0 === _n11 && (_n11 = t[0] - r[2] > _e28 ? -i : r[2] - t[0] > _e28 ? i : 0), t[0] += _n11;\n      }\n\n      Ee(e, t);\n    }\n\n    function qe(t, e, r, i) {\n      var n = 8192 * Math.pow(2, i.z),\n          s = [8192 * i.x, 8192 * i.y],\n          a = [];\n\n      var _iterator14 = _createForOfIteratorHelper(t),\n          _step14;\n\n      try {\n        for (_iterator14.s(); !(_step14 = _iterator14.n()).done;) {\n          var _i17 = _step14.value;\n\n          var _iterator15 = _createForOfIteratorHelper(_i17),\n              _step15;\n\n          try {\n            for (_iterator15.s(); !(_step15 = _iterator15.n()).done;) {\n              var _t13 = _step15.value;\n              var _i18 = [_t13.x + s[0], _t13.y + s[1]];\n              $e(_i18, e, r, n), a.push(_i18);\n            }\n          } catch (err) {\n            _iterator15.e(err);\n          } finally {\n            _iterator15.f();\n          }\n        }\n      } catch (err) {\n        _iterator14.e(err);\n      } finally {\n        _iterator14.f();\n      }\n\n      return a;\n    }\n\n    function Ne(t, e, r, i) {\n      var n = 8192 * Math.pow(2, i.z),\n          s = [8192 * i.x, 8192 * i.y],\n          a = [];\n\n      var _iterator16 = _createForOfIteratorHelper(t),\n          _step16;\n\n      try {\n        for (_iterator16.s(); !(_step16 = _iterator16.n()).done;) {\n          var _r37 = _step16.value;\n          var _t15 = [];\n\n          var _iterator19 = _createForOfIteratorHelper(_r37),\n              _step19;\n\n          try {\n            for (_iterator19.s(); !(_step19 = _iterator19.n()).done;) {\n              var _i20 = _step19.value;\n              var _r38 = [_i20.x + s[0], _i20.y + s[1]];\n              Ee(e, _r38), _t15.push(_r38);\n            }\n          } catch (err) {\n            _iterator19.e(err);\n          } finally {\n            _iterator19.f();\n          }\n\n          a.push(_t15);\n        }\n      } catch (err) {\n        _iterator16.e(err);\n      } finally {\n        _iterator16.f();\n      }\n\n      if (e[2] - e[0] <= n / 2) {\n        (o = e)[0] = o[1] = 1 / 0, o[2] = o[3] = -1 / 0;\n\n        var _iterator17 = _createForOfIteratorHelper(a),\n            _step17;\n\n        try {\n          for (_iterator17.s(); !(_step17 = _iterator17.n()).done;) {\n            var _t14 = _step17.value;\n\n            var _iterator18 = _createForOfIteratorHelper(_t14),\n                _step18;\n\n            try {\n              for (_iterator18.s(); !(_step18 = _iterator18.n()).done;) {\n                var _i19 = _step18.value;\n                $e(_i19, e, r, n);\n              }\n            } catch (err) {\n              _iterator18.e(err);\n            } finally {\n              _iterator18.f();\n            }\n          }\n        } catch (err) {\n          _iterator17.e(err);\n        } finally {\n          _iterator17.f();\n        }\n      }\n\n      var o;\n      return a;\n    }\n\n    var je = /*#__PURE__*/function () {\n      function je(t, e) {\n        _classCallCheck(this, je);\n\n        this.type = Xt, this.geojson = t, this.geometries = e;\n      }\n\n      _createClass(je, [{\n        key: \"evaluate\",\n        value: function evaluate(t) {\n          if (null != t.geometry() && null != t.canonicalID()) {\n            if (\"Point\" === t.geometryType()) return function (t, e) {\n              var r = [1 / 0, 1 / 0, -1 / 0, -1 / 0],\n                  i = [1 / 0, 1 / 0, -1 / 0, -1 / 0],\n                  n = t.canonicalID();\n\n              if (\"Polygon\" === e.type) {\n                var _s10 = Ue(e.coordinates, i, n),\n                    _a9 = qe(t.geometry(), r, i, n);\n\n                if (!Me(r, i)) return !1;\n\n                var _iterator20 = _createForOfIteratorHelper(_a9),\n                    _step20;\n\n                try {\n                  for (_iterator20.s(); !(_step20 = _iterator20.n()).done;) {\n                    var _t16 = _step20.value;\n                    if (!Ce(_t16, _s10)) return !1;\n                  }\n                } catch (err) {\n                  _iterator20.e(err);\n                } finally {\n                  _iterator20.f();\n                }\n              }\n\n              if (\"MultiPolygon\" === e.type) {\n                var _s11 = Oe(e.coordinates, i, n),\n                    _a10 = qe(t.geometry(), r, i, n);\n\n                if (!Me(r, i)) return !1;\n\n                var _iterator21 = _createForOfIteratorHelper(_a10),\n                    _step21;\n\n                try {\n                  for (_iterator21.s(); !(_step21 = _iterator21.n()).done;) {\n                    var _t17 = _step21.value;\n                    if (!Pe(_t17, _s11)) return !1;\n                  }\n                } catch (err) {\n                  _iterator21.e(err);\n                } finally {\n                  _iterator21.f();\n                }\n              }\n\n              return !0;\n            }(t, this.geometries);\n            if (\"LineString\" === t.geometryType()) return function (t, e) {\n              var r = [1 / 0, 1 / 0, -1 / 0, -1 / 0],\n                  i = [1 / 0, 1 / 0, -1 / 0, -1 / 0],\n                  n = t.canonicalID();\n\n              if (\"Polygon\" === e.type) {\n                var _s12 = Ue(e.coordinates, i, n),\n                    _a11 = Ne(t.geometry(), r, i, n);\n\n                if (!Me(r, i)) return !1;\n\n                var _iterator22 = _createForOfIteratorHelper(_a11),\n                    _step22;\n\n                try {\n                  for (_iterator22.s(); !(_step22 = _iterator22.n()).done;) {\n                    var _t18 = _step22.value;\n                    if (!Re(_t18, _s12)) return !1;\n                  }\n                } catch (err) {\n                  _iterator22.e(err);\n                } finally {\n                  _iterator22.f();\n                }\n              }\n\n              if (\"MultiPolygon\" === e.type) {\n                var _s13 = Oe(e.coordinates, i, n),\n                    _a12 = Ne(t.geometry(), r, i, n);\n\n                if (!Me(r, i)) return !1;\n\n                var _iterator23 = _createForOfIteratorHelper(_a12),\n                    _step23;\n\n                try {\n                  for (_iterator23.s(); !(_step23 = _iterator23.n()).done;) {\n                    var _t19 = _step23.value;\n                    if (!Le(_t19, _s13)) return !1;\n                  }\n                } catch (err) {\n                  _iterator23.e(err);\n                } finally {\n                  _iterator23.f();\n                }\n              }\n\n              return !0;\n            }(t, this.geometries);\n          }\n\n          return !1;\n        }\n      }, {\n        key: \"eachChild\",\n        value: function eachChild() {}\n      }, {\n        key: \"outputDefined\",\n        value: function outputDefined() {\n          return !0;\n        }\n      }, {\n        key: \"serialize\",\n        value: function serialize() {\n          return [\"within\", this.geojson];\n        }\n      }], [{\n        key: \"parse\",\n        value: function parse(t, e) {\n          if (2 !== t.length) return e.error(\"'within' expression requires exactly one argument, but found \".concat(t.length - 1, \" instead.\"));\n\n          if (fe(t[1])) {\n            var _e29 = t[1];\n            if (\"FeatureCollection\" === _e29.type) for (var _t20 = 0; _t20 < _e29.features.length; ++_t20) {\n              var _r39 = _e29.features[_t20].geometry.type;\n              if (\"Polygon\" === _r39 || \"MultiPolygon\" === _r39) return new je(_e29, _e29.features[_t20].geometry);\n            } else if (\"Feature\" === _e29.type) {\n              var _t21 = _e29.geometry.type;\n              if (\"Polygon\" === _t21 || \"MultiPolygon\" === _t21) return new je(_e29, _e29.geometry);\n            } else if (\"Polygon\" === _e29.type || \"MultiPolygon\" === _e29.type) return new je(_e29, _e29);\n          }\n\n          return e.error(\"'within' expression requires valid geojson object that contains polygon geometry type.\");\n        }\n      }]);\n\n      return je;\n    }();\n\n    function Ge(t) {\n      if (t instanceof Te) {\n        if (\"get\" === t.name && 1 === t.args.length) return !1;\n        if (\"feature-state\" === t.name) return !1;\n        if (\"has\" === t.name && 1 === t.args.length) return !1;\n        if (\"properties\" === t.name || \"geometry-type\" === t.name || \"id\" === t.name) return !1;\n        if (/^filter-/.test(t.name)) return !1;\n      }\n\n      if (t instanceof je) return !1;\n      var e = !0;\n      return t.eachChild(function (t) {\n        e && !Ge(t) && (e = !1);\n      }), e;\n    }\n\n    function Ze(t) {\n      if (t instanceof Te && \"feature-state\" === t.name) return !1;\n      var e = !0;\n      return t.eachChild(function (t) {\n        e && !Ze(t) && (e = !1);\n      }), e;\n    }\n\n    function Xe(t, e) {\n      if (t instanceof Te && e.indexOf(t.name) >= 0) return !1;\n      var r = !0;\n      return t.eachChild(function (t) {\n        r && !Xe(t, e) && (r = !1);\n      }), r;\n    }\n\n    var Ke = /*#__PURE__*/function () {\n      function Ke(t, e) {\n        _classCallCheck(this, Ke);\n\n        this.type = e.type, this.name = t, this.boundExpression = e;\n      }\n\n      _createClass(Ke, [{\n        key: \"evaluate\",\n        value: function evaluate(t) {\n          return this.boundExpression.evaluate(t);\n        }\n      }, {\n        key: \"eachChild\",\n        value: function eachChild() {}\n      }, {\n        key: \"outputDefined\",\n        value: function outputDefined() {\n          return !1;\n        }\n      }, {\n        key: \"serialize\",\n        value: function serialize() {\n          return [\"var\", this.name];\n        }\n      }], [{\n        key: \"parse\",\n        value: function parse(t, e) {\n          if (2 !== t.length || \"string\" != typeof t[1]) return e.error(\"'var' expression requires exactly one string literal argument.\");\n          var r = t[1];\n          return e.scope.has(r) ? new Ke(r, e.scope.get(r)) : e.error(\"Unknown variable \\\"\".concat(r, \"\\\". Make sure \\\"\").concat(r, \"\\\" has been bound in an enclosing \\\"let\\\" expression before using it.\"), 1);\n        }\n      }]);\n\n      return Ke;\n    }();\n\n    var He = /*#__PURE__*/function () {\n      function He(t) {\n        var e = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];\n        var r = arguments.length > 2 ? arguments[2] : undefined;\n        var i = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : new Nt();\n        var n = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : [];\n\n        _classCallCheck(this, He);\n\n        this.registry = t, this.path = e, this.key = e.map(function (t) {\n          return \"[\".concat(t, \"]\");\n        }).join(\"\"), this.scope = i, this.errors = n, this.expectedType = r;\n      }\n\n      _createClass(He, [{\n        key: \"parse\",\n        value: function parse(t, e, r, i) {\n          var n = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : {};\n          return e ? this.concat(e, r, i)._parse(t, n) : this._parse(t, n);\n        }\n      }, {\n        key: \"_parse\",\n        value: function _parse(t, e) {\n          function r(t, e, r) {\n            return \"assert\" === r ? new be(e, [t]) : \"coerce\" === r ? new Ae(e, [t]) : t;\n          }\n\n          if (null !== t && \"string\" != typeof t && \"boolean\" != typeof t && \"number\" != typeof t || (t = [\"literal\", t]), Array.isArray(t)) {\n            if (0 === t.length) return this.error('Expected an array with at least one element. If you wanted a literal array, use [\"literal\", []].');\n            var _i21 = t[0];\n            if (\"string\" != typeof _i21) return this.error(\"Expression name must be a string, but found \".concat(_typeof(_i21), \" instead. If you wanted a literal array, use [\\\"literal\\\", [...]].\"), 0), null;\n            var _n12 = this.registry[_i21];\n\n            if (_n12) {\n              var _i22 = _n12.parse(t, this);\n\n              if (!_i22) return null;\n\n              if (this.expectedType) {\n                var _t22 = this.expectedType,\n                    _n13 = _i22.type;\n                if (\"string\" !== _t22.kind && \"number\" !== _t22.kind && \"boolean\" !== _t22.kind && \"object\" !== _t22.kind && \"array\" !== _t22.kind || \"value\" !== _n13.kind) {\n                  if (\"color\" !== _t22.kind && \"formatted\" !== _t22.kind && \"resolvedImage\" !== _t22.kind || \"value\" !== _n13.kind && \"string\" !== _n13.kind) {\n                    if (this.checkSubtype(_t22, _n13)) return null;\n                  } else _i22 = r(_i22, _t22, e.typeAnnotation || \"coerce\");\n                } else _i22 = r(_i22, _t22, e.typeAnnotation || \"assert\");\n              }\n\n              if (!(_i22 instanceof ge) && \"resolvedImage\" !== _i22.type.kind && function t(e) {\n                if (e instanceof Ke) return t(e.boundExpression);\n                if (e instanceof Te && \"error\" === e.name) return !1;\n                if (e instanceof ze) return !1;\n                if (e instanceof je) return !1;\n                var r = e instanceof Ae || e instanceof be;\n                var i = !0;\n                return e.eachChild(function (e) {\n                  i = r ? i && t(e) : i && e instanceof ge;\n                }), !!i && Ge(e) && Xe(e, [\"zoom\", \"heatmap-density\", \"line-progress\", \"sky-radial-progress\", \"accumulated\", \"is-supported-script\"]);\n              }(_i22)) {\n                var _t23 = new Ie();\n\n                try {\n                  _i22 = new ge(_i22.type, _i22.evaluate(_t23));\n                } catch (t) {\n                  return this.error(t.message), null;\n                }\n              }\n\n              return _i22;\n            }\n\n            return this.error(\"Unknown expression \\\"\".concat(_i21, \"\\\". If you wanted a literal array, use [\\\"literal\\\", [...]].\"), 0);\n          }\n\n          return this.error(void 0 === t ? \"'undefined' value invalid. Use null instead.\" : \"object\" == _typeof(t) ? 'Bare objects invalid. Use [\"literal\", {...}] instead.' : \"Expected an array, but found \".concat(_typeof(t), \" instead.\"));\n        }\n      }, {\n        key: \"concat\",\n        value: function concat(t, e, r) {\n          var i = \"number\" == typeof t ? this.path.concat(t) : this.path,\n              n = r ? this.scope.concat(r) : this.scope;\n          return new He(this.registry, i, e || null, n, this.errors);\n        }\n      }, {\n        key: \"error\",\n        value: function error(t) {\n          for (var _len3 = arguments.length, e = new Array(_len3 > 1 ? _len3 - 1 : 0), _key3 = 1; _key3 < _len3; _key3++) {\n            e[_key3 - 1] = arguments[_key3];\n          }\n\n          var r = \"\".concat(this.key).concat(e.map(function (t) {\n            return \"[\".concat(t, \"]\");\n          }).join(\"\"));\n          this.errors.push(new qt(r, t));\n        }\n      }, {\n        key: \"checkSubtype\",\n        value: function checkSubtype(t, e) {\n          var r = ie(t, e);\n          return r && this.error(r), r;\n        }\n      }]);\n\n      return He;\n    }();\n\n    function Ye(t, e) {\n      var r = t.length - 1;\n      var i,\n          n,\n          s = 0,\n          a = r,\n          o = 0;\n\n      for (; s <= a;) {\n        if (o = Math.floor((s + a) / 2), i = t[o], n = t[o + 1], i <= e) {\n          if (o === r || e < n) return o;\n          s = o + 1;\n        } else {\n          if (!(i > e)) throw new xe(\"Input is not a number.\");\n          a = o - 1;\n        }\n      }\n\n      return 0;\n    }\n\n    var We = /*#__PURE__*/function () {\n      function We(t, e, r) {\n        _classCallCheck(this, We);\n\n        this.type = t, this.input = e, this.labels = [], this.outputs = [];\n\n        var _iterator24 = _createForOfIteratorHelper(r),\n            _step24;\n\n        try {\n          for (_iterator24.s(); !(_step24 = _iterator24.n()).done;) {\n            var _ref13 = _step24.value;\n\n            var _ref12 = _slicedToArray(_ref13, 2);\n\n            var _t24 = _ref12[0];\n            var _e30 = _ref12[1];\n            this.labels.push(_t24), this.outputs.push(_e30);\n          }\n        } catch (err) {\n          _iterator24.e(err);\n        } finally {\n          _iterator24.f();\n        }\n      }\n\n      _createClass(We, [{\n        key: \"evaluate\",\n        value: function evaluate(t) {\n          var e = this.labels,\n              r = this.outputs;\n          if (1 === e.length) return r[0].evaluate(t);\n          var i = this.input.evaluate(t);\n          if (i <= e[0]) return r[0].evaluate(t);\n          var n = e.length;\n          return i >= e[n - 1] ? r[n - 1].evaluate(t) : r[Ye(e, i)].evaluate(t);\n        }\n      }, {\n        key: \"eachChild\",\n        value: function eachChild(t) {\n          t(this.input);\n\n          var _iterator25 = _createForOfIteratorHelper(this.outputs),\n              _step25;\n\n          try {\n            for (_iterator25.s(); !(_step25 = _iterator25.n()).done;) {\n              var _e31 = _step25.value;\n              t(_e31);\n            }\n          } catch (err) {\n            _iterator25.e(err);\n          } finally {\n            _iterator25.f();\n          }\n        }\n      }, {\n        key: \"outputDefined\",\n        value: function outputDefined() {\n          return this.outputs.every(function (t) {\n            return t.outputDefined();\n          });\n        }\n      }, {\n        key: \"serialize\",\n        value: function serialize() {\n          var t = [\"step\", this.input.serialize()];\n\n          for (var _e32 = 0; _e32 < this.labels.length; _e32++) {\n            _e32 > 0 && t.push(this.labels[_e32]), t.push(this.outputs[_e32].serialize());\n          }\n\n          return t;\n        }\n      }], [{\n        key: \"parse\",\n        value: function parse(t, e) {\n          if (t.length - 1 < 4) return e.error(\"Expected at least 4 arguments, but found only \".concat(t.length - 1, \".\"));\n          if ((t.length - 1) % 2 != 0) return e.error(\"Expected an even number of arguments.\");\n          var r = e.parse(t[1], 1, Gt);\n          if (!r) return null;\n          var i = [];\n          var n = null;\n          e.expectedType && \"value\" !== e.expectedType.kind && (n = e.expectedType);\n\n          for (var _r40 = 1; _r40 < t.length; _r40 += 2) {\n            var _s14 = 1 === _r40 ? -1 / 0 : t[_r40],\n                _a13 = t[_r40 + 1],\n                _o5 = _r40,\n                _l3 = _r40 + 1;\n\n            if (\"number\" != typeof _s14) return e.error('Input/output pairs for \"step\" expressions must be defined using literal numeric values (not computed expressions) for the input values.', _o5);\n            if (i.length && i[i.length - 1][0] >= _s14) return e.error('Input/output pairs for \"step\" expressions must be arranged with input values in strictly ascending order.', _o5);\n\n            var _u3 = e.parse(_a13, _l3, n);\n\n            if (!_u3) return null;\n            n = n || _u3.type, i.push([_s14, _u3]);\n          }\n\n          return new We(n, r, i);\n        }\n      }]);\n\n      return We;\n    }();\n\n    function Je(t, e, r) {\n      return t * (1 - r) + e * r;\n    }\n\n    var Qe = Object.freeze({\n      __proto__: null,\n      number: Je,\n      color: function color(t, e, r) {\n        return new le(Je(t.r, e.r, r), Je(t.g, e.g, r), Je(t.b, e.b, r), Je(t.a, e.a, r));\n      },\n      array: function array(t, e, r) {\n        return t.map(function (t, i) {\n          return Je(t, e[i], r);\n        });\n      }\n    });\n    var tr = 6 / 29 * 3 * (6 / 29),\n        er = Math.PI / 180,\n        rr = 180 / Math.PI;\n\n    function ir(t) {\n      return t > .008856451679035631 ? Math.pow(t, 1 / 3) : t / tr + 4 / 29;\n    }\n\n    function nr(t) {\n      return t > 6 / 29 ? t * t * t : tr * (t - 4 / 29);\n    }\n\n    function sr(t) {\n      return 255 * (t <= .0031308 ? 12.92 * t : 1.055 * Math.pow(t, 1 / 2.4) - .055);\n    }\n\n    function ar(t) {\n      return (t /= 255) <= .04045 ? t / 12.92 : Math.pow((t + .055) / 1.055, 2.4);\n    }\n\n    function or(t) {\n      var e = ar(t.r),\n          r = ar(t.g),\n          i = ar(t.b),\n          n = ir((.4124564 * e + .3575761 * r + .1804375 * i) / .95047),\n          s = ir((.2126729 * e + .7151522 * r + .072175 * i) / 1);\n      return {\n        l: 116 * s - 16,\n        a: 500 * (n - s),\n        b: 200 * (s - ir((.0193339 * e + .119192 * r + .9503041 * i) / 1.08883)),\n        alpha: t.a\n      };\n    }\n\n    function lr(t) {\n      var e = (t.l + 16) / 116,\n          r = isNaN(t.a) ? e : e + t.a / 500,\n          i = isNaN(t.b) ? e : e - t.b / 200;\n      return e = 1 * nr(e), r = .95047 * nr(r), i = 1.08883 * nr(i), new le(sr(3.2404542 * r - 1.5371385 * e - .4985314 * i), sr(-.969266 * r + 1.8760108 * e + .041556 * i), sr(.0556434 * r - .2040259 * e + 1.0572252 * i), t.alpha);\n    }\n\n    function ur(t, e, r) {\n      var i = e - t;\n      return t + r * (i > 180 || i < -180 ? i - 360 * Math.round(i / 360) : i);\n    }\n\n    var cr = {\n      forward: or,\n      reverse: lr,\n      interpolate: function interpolate(t, e, r) {\n        return {\n          l: Je(t.l, e.l, r),\n          a: Je(t.a, e.a, r),\n          b: Je(t.b, e.b, r),\n          alpha: Je(t.alpha, e.alpha, r)\n        };\n      }\n    },\n        hr = {\n      forward: function forward(t) {\n        var _or = or(t),\n            e = _or.l,\n            r = _or.a,\n            i = _or.b,\n            n = Math.atan2(i, r) * rr;\n\n        return {\n          h: n < 0 ? n + 360 : n,\n          c: Math.sqrt(r * r + i * i),\n          l: e,\n          alpha: t.a\n        };\n      },\n      reverse: function reverse(t) {\n        var e = t.h * er,\n            r = t.c;\n        return lr({\n          l: t.l,\n          a: Math.cos(e) * r,\n          b: Math.sin(e) * r,\n          alpha: t.alpha\n        });\n      },\n      interpolate: function interpolate(t, e, r) {\n        return {\n          h: ur(t.h, e.h, r),\n          c: Je(t.c, e.c, r),\n          l: Je(t.l, e.l, r),\n          alpha: Je(t.alpha, e.alpha, r)\n        };\n      }\n    };\n    var pr = Object.freeze({\n      __proto__: null,\n      lab: cr,\n      hcl: hr\n    });\n\n    var dr = /*#__PURE__*/function () {\n      function dr(t, e, r, i, n) {\n        _classCallCheck(this, dr);\n\n        this.type = t, this.operator = e, this.interpolation = r, this.input = i, this.labels = [], this.outputs = [];\n\n        var _iterator26 = _createForOfIteratorHelper(n),\n            _step26;\n\n        try {\n          for (_iterator26.s(); !(_step26 = _iterator26.n()).done;) {\n            var _ref16 = _step26.value;\n\n            var _ref15 = _slicedToArray(_ref16, 2);\n\n            var _t25 = _ref15[0];\n            var _e33 = _ref15[1];\n            this.labels.push(_t25), this.outputs.push(_e33);\n          }\n        } catch (err) {\n          _iterator26.e(err);\n        } finally {\n          _iterator26.f();\n        }\n      }\n\n      _createClass(dr, [{\n        key: \"evaluate\",\n        value: function evaluate(t) {\n          var e = this.labels,\n              r = this.outputs;\n          if (1 === e.length) return r[0].evaluate(t);\n          var i = this.input.evaluate(t);\n          if (i <= e[0]) return r[0].evaluate(t);\n          var n = e.length;\n          if (i >= e[n - 1]) return r[n - 1].evaluate(t);\n          var s = Ye(e, i),\n              a = dr.interpolationFactor(this.interpolation, i, e[s], e[s + 1]),\n              o = r[s].evaluate(t),\n              l = r[s + 1].evaluate(t);\n          return \"interpolate\" === this.operator ? Qe[this.type.kind.toLowerCase()](o, l, a) : \"interpolate-hcl\" === this.operator ? hr.reverse(hr.interpolate(hr.forward(o), hr.forward(l), a)) : cr.reverse(cr.interpolate(cr.forward(o), cr.forward(l), a));\n        }\n      }, {\n        key: \"eachChild\",\n        value: function eachChild(t) {\n          t(this.input);\n\n          var _iterator27 = _createForOfIteratorHelper(this.outputs),\n              _step27;\n\n          try {\n            for (_iterator27.s(); !(_step27 = _iterator27.n()).done;) {\n              var _e34 = _step27.value;\n              t(_e34);\n            }\n          } catch (err) {\n            _iterator27.e(err);\n          } finally {\n            _iterator27.f();\n          }\n        }\n      }, {\n        key: \"outputDefined\",\n        value: function outputDefined() {\n          return this.outputs.every(function (t) {\n            return t.outputDefined();\n          });\n        }\n      }, {\n        key: \"serialize\",\n        value: function serialize() {\n          var t;\n          t = \"linear\" === this.interpolation.name ? [\"linear\"] : \"exponential\" === this.interpolation.name ? 1 === this.interpolation.base ? [\"linear\"] : [\"exponential\", this.interpolation.base] : [\"cubic-bezier\"].concat(this.interpolation.controlPoints);\n          var e = [this.operator, t, this.input.serialize()];\n\n          for (var _t26 = 0; _t26 < this.labels.length; _t26++) {\n            e.push(this.labels[_t26], this.outputs[_t26].serialize());\n          }\n\n          return e;\n        }\n      }], [{\n        key: \"interpolationFactor\",\n        value: function interpolationFactor(t, r, i, n) {\n          var s = 0;\n          if (\"exponential\" === t.name) s = fr(r, t.base, i, n);else if (\"linear\" === t.name) s = fr(r, 1, i, n);else if (\"cubic-bezier\" === t.name) {\n            var _a14 = t.controlPoints;\n            s = new e(_a14[0], _a14[1], _a14[2], _a14[3]).solve(fr(r, 1, i, n));\n          }\n          return s;\n        }\n      }, {\n        key: \"parse\",\n        value: function parse(t, e) {\n          var _t27 = _toArray(t),\n              r = _t27[0],\n              i = _t27[1],\n              n = _t27[2],\n              s = _t27.slice(3);\n\n          if (!Array.isArray(i) || 0 === i.length) return e.error(\"Expected an interpolation type expression.\", 1);\n          if (\"linear\" === i[0]) i = {\n            name: \"linear\"\n          };else if (\"exponential\" === i[0]) {\n            var _t28 = i[1];\n            if (\"number\" != typeof _t28) return e.error(\"Exponential interpolation requires a numeric base.\", 1, 1);\n            i = {\n              name: \"exponential\",\n              base: _t28\n            };\n          } else {\n            if (\"cubic-bezier\" !== i[0]) return e.error(\"Unknown interpolation type \".concat(String(i[0])), 1, 0);\n            {\n              var _t29 = i.slice(1);\n\n              if (4 !== _t29.length || _t29.some(function (t) {\n                return \"number\" != typeof t || t < 0 || t > 1;\n              })) return e.error(\"Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.\", 1);\n              i = {\n                name: \"cubic-bezier\",\n                controlPoints: _t29\n              };\n            }\n          }\n          if (t.length - 1 < 4) return e.error(\"Expected at least 4 arguments, but found only \".concat(t.length - 1, \".\"));\n          if ((t.length - 1) % 2 != 0) return e.error(\"Expected an even number of arguments.\");\n          if (n = e.parse(n, 2, Gt), !n) return null;\n          var a = [];\n          var o = null;\n          \"interpolate-hcl\" === r || \"interpolate-lab\" === r ? o = Kt : e.expectedType && \"value\" !== e.expectedType.kind && (o = e.expectedType);\n\n          for (var _t30 = 0; _t30 < s.length; _t30 += 2) {\n            var _r41 = s[_t30],\n                _i23 = s[_t30 + 1],\n                _n14 = _t30 + 3,\n                _l4 = _t30 + 4;\n\n            if (\"number\" != typeof _r41) return e.error('Input/output pairs for \"interpolate\" expressions must be defined using literal numeric values (not computed expressions) for the input values.', _n14);\n            if (a.length && a[a.length - 1][0] >= _r41) return e.error('Input/output pairs for \"interpolate\" expressions must be arranged with input values in strictly ascending order.', _n14);\n\n            var _u4 = e.parse(_i23, _l4, o);\n\n            if (!_u4) return null;\n            o = o || _u4.type, a.push([_r41, _u4]);\n          }\n\n          return \"number\" === o.kind || \"color\" === o.kind || \"array\" === o.kind && \"number\" === o.itemType.kind && \"number\" == typeof o.N ? new dr(o, r, i, n, a) : e.error(\"Type \".concat(ee(o), \" is not interpolatable.\"));\n        }\n      }]);\n\n      return dr;\n    }();\n\n    function fr(t, e, r, i) {\n      var n = i - r,\n          s = t - r;\n      return 0 === n ? 0 : 1 === e ? s / n : (Math.pow(e, s) - 1) / (Math.pow(e, n) - 1);\n    }\n\n    var yr = /*#__PURE__*/function () {\n      function yr(t, e) {\n        _classCallCheck(this, yr);\n\n        this.type = t, this.args = e;\n      }\n\n      _createClass(yr, [{\n        key: \"evaluate\",\n        value: function evaluate(t) {\n          var e,\n              r = null,\n              i = 0;\n\n          var _iterator28 = _createForOfIteratorHelper(this.args),\n              _step28;\n\n          try {\n            for (_iterator28.s(); !(_step28 = _iterator28.n()).done;) {\n              var _n15 = _step28.value;\n              if (i++, r = _n15.evaluate(t), r && r instanceof pe && !r.available && (e || (e = r.name), r = null, i === this.args.length && (r = e)), null !== r) break;\n            }\n          } catch (err) {\n            _iterator28.e(err);\n          } finally {\n            _iterator28.f();\n          }\n\n          return r;\n        }\n      }, {\n        key: \"eachChild\",\n        value: function eachChild(t) {\n          this.args.forEach(t);\n        }\n      }, {\n        key: \"outputDefined\",\n        value: function outputDefined() {\n          return this.args.every(function (t) {\n            return t.outputDefined();\n          });\n        }\n      }, {\n        key: \"serialize\",\n        value: function serialize() {\n          var t = [\"coalesce\"];\n          return this.eachChild(function (e) {\n            t.push(e.serialize());\n          }), t;\n        }\n      }], [{\n        key: \"parse\",\n        value: function parse(t, e) {\n          if (t.length < 2) return e.error(\"Expectected at least one argument.\");\n          var r = null;\n          var i = e.expectedType;\n          i && \"value\" !== i.kind && (r = i);\n          var n = [];\n\n          var _iterator29 = _createForOfIteratorHelper(t.slice(1)),\n              _step29;\n\n          try {\n            for (_iterator29.s(); !(_step29 = _iterator29.n()).done;) {\n              var _i24 = _step29.value;\n\n              var _t31 = e.parse(_i24, 1 + n.length, r, void 0, {\n                typeAnnotation: \"omit\"\n              });\n\n              if (!_t31) return null;\n              r = r || _t31.type, n.push(_t31);\n            }\n          } catch (err) {\n            _iterator29.e(err);\n          } finally {\n            _iterator29.f();\n          }\n\n          var s = i && n.some(function (t) {\n            return ie(i, t.type);\n          });\n          return new yr(s ? Yt : r, n);\n        }\n      }]);\n\n      return yr;\n    }();\n\n    var mr = /*#__PURE__*/function () {\n      function mr(t, e) {\n        _classCallCheck(this, mr);\n\n        this.type = e.type, this.bindings = [].concat(t), this.result = e;\n      }\n\n      _createClass(mr, [{\n        key: \"evaluate\",\n        value: function evaluate(t) {\n          return this.result.evaluate(t);\n        }\n      }, {\n        key: \"eachChild\",\n        value: function eachChild(t) {\n          var _iterator30 = _createForOfIteratorHelper(this.bindings),\n              _step30;\n\n          try {\n            for (_iterator30.s(); !(_step30 = _iterator30.n()).done;) {\n              var _e35 = _step30.value;\n              t(_e35[1]);\n            }\n          } catch (err) {\n            _iterator30.e(err);\n          } finally {\n            _iterator30.f();\n          }\n\n          t(this.result);\n        }\n      }, {\n        key: \"outputDefined\",\n        value: function outputDefined() {\n          return this.result.outputDefined();\n        }\n      }, {\n        key: \"serialize\",\n        value: function serialize() {\n          var t = [\"let\"];\n\n          var _iterator31 = _createForOfIteratorHelper(this.bindings),\n              _step31;\n\n          try {\n            for (_iterator31.s(); !(_step31 = _iterator31.n()).done;) {\n              var _ref19 = _step31.value;\n\n              var _ref18 = _slicedToArray(_ref19, 2);\n\n              var _e36 = _ref18[0];\n              var _r42 = _ref18[1];\n              t.push(_e36, _r42.serialize());\n            }\n          } catch (err) {\n            _iterator31.e(err);\n          } finally {\n            _iterator31.f();\n          }\n\n          return t.push(this.result.serialize()), t;\n        }\n      }], [{\n        key: \"parse\",\n        value: function parse(t, e) {\n          if (t.length < 4) return e.error(\"Expected at least 3 arguments, but found \".concat(t.length - 1, \" instead.\"));\n          var r = [];\n\n          for (var _i25 = 1; _i25 < t.length - 1; _i25 += 2) {\n            var _n16 = t[_i25];\n            if (\"string\" != typeof _n16) return e.error(\"Expected string, but found \".concat(_typeof(_n16), \" instead.\"), _i25);\n            if (/[^a-zA-Z0-9_]/.test(_n16)) return e.error(\"Variable names must contain only alphanumeric characters or '_'.\", _i25);\n\n            var _s15 = e.parse(t[_i25 + 1], _i25 + 1);\n\n            if (!_s15) return null;\n            r.push([_n16, _s15]);\n          }\n\n          var i = e.parse(t[t.length - 1], t.length - 1, e.expectedType, r);\n          return i ? new mr(r, i) : null;\n        }\n      }]);\n\n      return mr;\n    }();\n\n    var gr = /*#__PURE__*/function () {\n      function gr(t, e, r) {\n        _classCallCheck(this, gr);\n\n        this.type = t, this.index = e, this.input = r;\n      }\n\n      _createClass(gr, [{\n        key: \"evaluate\",\n        value: function evaluate(t) {\n          var e = this.index.evaluate(t),\n              r = this.input.evaluate(t);\n          if (e < 0) throw new xe(\"Array index out of bounds: \".concat(e, \" < 0.\"));\n          if (e >= r.length) throw new xe(\"Array index out of bounds: \".concat(e, \" > \").concat(r.length - 1, \".\"));\n          if (e !== Math.floor(e)) throw new xe(\"Array index must be an integer, but found \".concat(e, \" instead.\"));\n          return r[e];\n        }\n      }, {\n        key: \"eachChild\",\n        value: function eachChild(t) {\n          t(this.index), t(this.input);\n        }\n      }, {\n        key: \"outputDefined\",\n        value: function outputDefined() {\n          return !1;\n        }\n      }, {\n        key: \"serialize\",\n        value: function serialize() {\n          return [\"at\", this.index.serialize(), this.input.serialize()];\n        }\n      }], [{\n        key: \"parse\",\n        value: function parse(t, e) {\n          if (3 !== t.length) return e.error(\"Expected 2 arguments, but found \".concat(t.length - 1, \" instead.\"));\n          var r = e.parse(t[1], 1, Gt),\n              i = e.parse(t[2], 2, te(e.expectedType || Yt));\n          return r && i ? new gr(i.type.itemType, r, i) : null;\n        }\n      }]);\n\n      return gr;\n    }();\n\n    var xr = /*#__PURE__*/function () {\n      function xr(t, e) {\n        _classCallCheck(this, xr);\n\n        this.type = Xt, this.needle = t, this.haystack = e;\n      }\n\n      _createClass(xr, [{\n        key: \"evaluate\",\n        value: function evaluate(t) {\n          var e = this.needle.evaluate(t),\n              r = this.haystack.evaluate(t);\n          if (!r) return !1;\n          if (!se(e, [\"boolean\", \"string\", \"number\", \"null\"])) throw new xe(\"Expected first argument to be of type boolean, string, number or null, but found \".concat(ee(ye(e)), \" instead.\"));\n          if (!se(r, [\"string\", \"array\"])) throw new xe(\"Expected second argument to be of type array or string, but found \".concat(ee(ye(r)), \" instead.\"));\n          return r.indexOf(e) >= 0;\n        }\n      }, {\n        key: \"eachChild\",\n        value: function eachChild(t) {\n          t(this.needle), t(this.haystack);\n        }\n      }, {\n        key: \"outputDefined\",\n        value: function outputDefined() {\n          return !0;\n        }\n      }, {\n        key: \"serialize\",\n        value: function serialize() {\n          return [\"in\", this.needle.serialize(), this.haystack.serialize()];\n        }\n      }], [{\n        key: \"parse\",\n        value: function parse(t, e) {\n          if (3 !== t.length) return e.error(\"Expected 2 arguments, but found \".concat(t.length - 1, \" instead.\"));\n          var r = e.parse(t[1], 1, Yt),\n              i = e.parse(t[2], 2, Yt);\n          return r && i ? ne(r.type, [Xt, Zt, Gt, jt, Yt]) ? new xr(r, i) : e.error(\"Expected first argument to be of type boolean, string, number or null, but found \".concat(ee(r.type), \" instead\")) : null;\n        }\n      }]);\n\n      return xr;\n    }();\n\n    var vr = /*#__PURE__*/function () {\n      function vr(t, e, r) {\n        _classCallCheck(this, vr);\n\n        this.type = Gt, this.needle = t, this.haystack = e, this.fromIndex = r;\n      }\n\n      _createClass(vr, [{\n        key: \"evaluate\",\n        value: function evaluate(t) {\n          var e = this.needle.evaluate(t),\n              r = this.haystack.evaluate(t);\n          if (!se(e, [\"boolean\", \"string\", \"number\", \"null\"])) throw new xe(\"Expected first argument to be of type boolean, string, number or null, but found \".concat(ee(ye(e)), \" instead.\"));\n          if (!se(r, [\"string\", \"array\"])) throw new xe(\"Expected second argument to be of type array or string, but found \".concat(ee(ye(r)), \" instead.\"));\n\n          if (this.fromIndex) {\n            var _i26 = this.fromIndex.evaluate(t);\n\n            return r.indexOf(e, _i26);\n          }\n\n          return r.indexOf(e);\n        }\n      }, {\n        key: \"eachChild\",\n        value: function eachChild(t) {\n          t(this.needle), t(this.haystack), this.fromIndex && t(this.fromIndex);\n        }\n      }, {\n        key: \"outputDefined\",\n        value: function outputDefined() {\n          return !1;\n        }\n      }, {\n        key: \"serialize\",\n        value: function serialize() {\n          if (null != this.fromIndex && void 0 !== this.fromIndex) {\n            var _t32 = this.fromIndex.serialize();\n\n            return [\"index-of\", this.needle.serialize(), this.haystack.serialize(), _t32];\n          }\n\n          return [\"index-of\", this.needle.serialize(), this.haystack.serialize()];\n        }\n      }], [{\n        key: \"parse\",\n        value: function parse(t, e) {\n          if (t.length <= 2 || t.length >= 5) return e.error(\"Expected 3 or 4 arguments, but found \".concat(t.length - 1, \" instead.\"));\n          var r = e.parse(t[1], 1, Yt),\n              i = e.parse(t[2], 2, Yt);\n          if (!r || !i) return null;\n          if (!ne(r.type, [Xt, Zt, Gt, jt, Yt])) return e.error(\"Expected first argument to be of type boolean, string, number or null, but found \".concat(ee(r.type), \" instead\"));\n\n          if (4 === t.length) {\n            var _n17 = e.parse(t[3], 3, Gt);\n\n            return _n17 ? new vr(r, i, _n17) : null;\n          }\n\n          return new vr(r, i);\n        }\n      }]);\n\n      return vr;\n    }();\n\n    var br = /*#__PURE__*/function () {\n      function br(t, e, r, i, n, s) {\n        _classCallCheck(this, br);\n\n        this.inputType = t, this.type = e, this.input = r, this.cases = i, this.outputs = n, this.otherwise = s;\n      }\n\n      _createClass(br, [{\n        key: \"evaluate\",\n        value: function evaluate(t) {\n          var e = this.input.evaluate(t);\n          return (ye(e) === this.inputType && this.outputs[this.cases[e]] || this.otherwise).evaluate(t);\n        }\n      }, {\n        key: \"eachChild\",\n        value: function eachChild(t) {\n          t(this.input), this.outputs.forEach(t), t(this.otherwise);\n        }\n      }, {\n        key: \"outputDefined\",\n        value: function outputDefined() {\n          return this.outputs.every(function (t) {\n            return t.outputDefined();\n          }) && this.otherwise.outputDefined();\n        }\n      }, {\n        key: \"serialize\",\n        value: function serialize() {\n          var _this12 = this;\n\n          var t = [\"match\", this.input.serialize()],\n              e = Object.keys(this.cases).sort(),\n              r = [],\n              i = {};\n\n          var _iterator32 = _createForOfIteratorHelper(e),\n              _step32;\n\n          try {\n            for (_iterator32.s(); !(_step32 = _iterator32.n()).done;) {\n              var _t33 = _step32.value;\n              var _e38 = i[this.cases[_t33]];\n              void 0 === _e38 ? (i[this.cases[_t33]] = r.length, r.push([this.cases[_t33], [_t33]])) : r[_e38][1].push(_t33);\n            }\n          } catch (err) {\n            _iterator32.e(err);\n          } finally {\n            _iterator32.f();\n          }\n\n          var n = function n(t) {\n            return \"number\" === _this12.inputType.kind ? Number(t) : t;\n          };\n\n          for (var _i27 = 0, _r43 = r; _i27 < _r43.length; _i27++) {\n            var _ref22 = _r43[_i27];\n\n            var _ref21 = _slicedToArray(_ref22, 2);\n\n            var _e37 = _ref21[0];\n            var _i28 = _ref21[1];\n            t.push(1 === _i28.length ? n(_i28[0]) : _i28.map(n)), t.push(this.outputs[_e37].serialize());\n          }\n\n          return t.push(this.otherwise.serialize()), t;\n        }\n      }], [{\n        key: \"parse\",\n        value: function parse(t, e) {\n          if (t.length < 5) return e.error(\"Expected at least 4 arguments, but found only \".concat(t.length - 1, \".\"));\n          if (t.length % 2 != 1) return e.error(\"Expected an even number of arguments.\");\n          var r, i;\n          e.expectedType && \"value\" !== e.expectedType.kind && (i = e.expectedType);\n          var n = {},\n              s = [];\n\n          for (var _a15 = 2; _a15 < t.length - 1; _a15 += 2) {\n            var _o6 = t[_a15];\n            var _l5 = t[_a15 + 1];\n            Array.isArray(_o6) || (_o6 = [_o6]);\n\n            var _u5 = e.concat(_a15);\n\n            if (0 === _o6.length) return _u5.error(\"Expected at least one branch label.\");\n\n            var _iterator33 = _createForOfIteratorHelper(_o6),\n                _step33;\n\n            try {\n              for (_iterator33.s(); !(_step33 = _iterator33.n()).done;) {\n                var _t34 = _step33.value;\n                if (\"number\" != typeof _t34 && \"string\" != typeof _t34) return _u5.error(\"Branch labels must be numbers or strings.\");\n                if (\"number\" == typeof _t34 && Math.abs(_t34) > Number.MAX_SAFE_INTEGER) return _u5.error(\"Branch labels must be integers no larger than \".concat(Number.MAX_SAFE_INTEGER, \".\"));\n                if (\"number\" == typeof _t34 && Math.floor(_t34) !== _t34) return _u5.error(\"Numeric branch labels must be integer values.\");\n\n                if (r) {\n                  if (_u5.checkSubtype(r, ye(_t34))) return null;\n                } else r = ye(_t34);\n\n                if (void 0 !== n[String(_t34)]) return _u5.error(\"Branch labels must be unique.\");\n                n[String(_t34)] = s.length;\n              }\n            } catch (err) {\n              _iterator33.e(err);\n            } finally {\n              _iterator33.f();\n            }\n\n            var _c2 = e.parse(_l5, _a15, i);\n\n            if (!_c2) return null;\n            i = i || _c2.type, s.push(_c2);\n          }\n\n          var a = e.parse(t[1], 1, Yt);\n          if (!a) return null;\n          var o = e.parse(t[t.length - 1], t.length - 1, i);\n          return o ? \"value\" !== a.type.kind && e.concat(1).checkSubtype(r, a.type) ? null : new br(r, i, a, n, s, o) : null;\n        }\n      }]);\n\n      return br;\n    }();\n\n    var wr = /*#__PURE__*/function () {\n      function wr(t, e, r) {\n        _classCallCheck(this, wr);\n\n        this.type = t, this.branches = e, this.otherwise = r;\n      }\n\n      _createClass(wr, [{\n        key: \"evaluate\",\n        value: function evaluate(t) {\n          var _iterator34 = _createForOfIteratorHelper(this.branches),\n              _step34;\n\n          try {\n            for (_iterator34.s(); !(_step34 = _iterator34.n()).done;) {\n              var _ref25 = _step34.value;\n\n              var _ref24 = _slicedToArray(_ref25, 2);\n\n              var _e39 = _ref24[0];\n              var _r44 = _ref24[1];\n              if (_e39.evaluate(t)) return _r44.evaluate(t);\n            }\n          } catch (err) {\n            _iterator34.e(err);\n          } finally {\n            _iterator34.f();\n          }\n\n          return this.otherwise.evaluate(t);\n        }\n      }, {\n        key: \"eachChild\",\n        value: function eachChild(t) {\n          var _iterator35 = _createForOfIteratorHelper(this.branches),\n              _step35;\n\n          try {\n            for (_iterator35.s(); !(_step35 = _iterator35.n()).done;) {\n              var _ref28 = _step35.value;\n\n              var _ref27 = _slicedToArray(_ref28, 2);\n\n              var _e40 = _ref27[0];\n              var _r45 = _ref27[1];\n              t(_e40), t(_r45);\n            }\n          } catch (err) {\n            _iterator35.e(err);\n          } finally {\n            _iterator35.f();\n          }\n\n          t(this.otherwise);\n        }\n      }, {\n        key: \"outputDefined\",\n        value: function outputDefined() {\n          return this.branches.every(function (_ref29) {\n            var _ref30 = _slicedToArray(_ref29, 2),\n                t = _ref30[0],\n                e = _ref30[1];\n\n            return e.outputDefined();\n          }) && this.otherwise.outputDefined();\n        }\n      }, {\n        key: \"serialize\",\n        value: function serialize() {\n          var t = [\"case\"];\n          return this.eachChild(function (e) {\n            t.push(e.serialize());\n          }), t;\n        }\n      }], [{\n        key: \"parse\",\n        value: function parse(t, e) {\n          if (t.length < 4) return e.error(\"Expected at least 3 arguments, but found only \".concat(t.length - 1, \".\"));\n          if (t.length % 2 != 0) return e.error(\"Expected an odd number of arguments.\");\n          var r;\n          e.expectedType && \"value\" !== e.expectedType.kind && (r = e.expectedType);\n          var i = [];\n\n          for (var _n18 = 1; _n18 < t.length - 1; _n18 += 2) {\n            var _s16 = e.parse(t[_n18], _n18, Xt);\n\n            if (!_s16) return null;\n\n            var _a16 = e.parse(t[_n18 + 1], _n18 + 1, r);\n\n            if (!_a16) return null;\n            i.push([_s16, _a16]), r = r || _a16.type;\n          }\n\n          var n = e.parse(t[t.length - 1], t.length - 1, r);\n          return n ? new wr(r, i, n) : null;\n        }\n      }]);\n\n      return wr;\n    }();\n\n    var _r = /*#__PURE__*/function () {\n      function _r(t, e, r, i) {\n        _classCallCheck(this, _r);\n\n        this.type = t, this.input = e, this.beginIndex = r, this.endIndex = i;\n      }\n\n      _createClass(_r, [{\n        key: \"evaluate\",\n        value: function evaluate(t) {\n          var e = this.input.evaluate(t),\n              r = this.beginIndex.evaluate(t);\n          if (!se(e, [\"string\", \"array\"])) throw new xe(\"Expected first argument to be of type array or string, but found \".concat(ee(ye(e)), \" instead.\"));\n\n          if (this.endIndex) {\n            var _i29 = this.endIndex.evaluate(t);\n\n            return e.slice(r, _i29);\n          }\n\n          return e.slice(r);\n        }\n      }, {\n        key: \"eachChild\",\n        value: function eachChild(t) {\n          t(this.input), t(this.beginIndex), this.endIndex && t(this.endIndex);\n        }\n      }, {\n        key: \"outputDefined\",\n        value: function outputDefined() {\n          return !1;\n        }\n      }, {\n        key: \"serialize\",\n        value: function serialize() {\n          if (null != this.endIndex && void 0 !== this.endIndex) {\n            var _t35 = this.endIndex.serialize();\n\n            return [\"slice\", this.input.serialize(), this.beginIndex.serialize(), _t35];\n          }\n\n          return [\"slice\", this.input.serialize(), this.beginIndex.serialize()];\n        }\n      }], [{\n        key: \"parse\",\n        value: function parse(t, e) {\n          if (t.length <= 2 || t.length >= 5) return e.error(\"Expected 3 or 4 arguments, but found \".concat(t.length - 1, \" instead.\"));\n          var r = e.parse(t[1], 1, Yt),\n              i = e.parse(t[2], 2, Gt);\n          if (!r || !i) return null;\n          if (!ne(r.type, [te(Yt), Zt, Yt])) return e.error(\"Expected first argument to be of type array or string, but found \".concat(ee(r.type), \" instead\"));\n\n          if (4 === t.length) {\n            var _n19 = e.parse(t[3], 3, Gt);\n\n            return _n19 ? new _r(r.type, r, i, _n19) : null;\n          }\n\n          return new _r(r.type, r, i);\n        }\n      }]);\n\n      return _r;\n    }();\n\n    function kr(t, e) {\n      return \"==\" === t || \"!=\" === t ? \"boolean\" === e.kind || \"string\" === e.kind || \"number\" === e.kind || \"null\" === e.kind || \"value\" === e.kind : \"string\" === e.kind || \"number\" === e.kind || \"value\" === e.kind;\n    }\n\n    function Ar(t, e, r, i) {\n      return 0 === i.compare(e, r);\n    }\n\n    function Sr(t, e, r) {\n      var i = \"==\" !== t && \"!=\" !== t;\n      return /*#__PURE__*/function () {\n        function n(t, e, r) {\n          _classCallCheck(this, n);\n\n          this.type = Xt, this.lhs = t, this.rhs = e, this.collator = r, this.hasUntypedArgument = \"value\" === t.type.kind || \"value\" === e.type.kind;\n        }\n\n        _createClass(n, [{\n          key: \"evaluate\",\n          value: function evaluate(_n20) {\n            var s = this.lhs.evaluate(_n20),\n                a = this.rhs.evaluate(_n20);\n\n            if (i && this.hasUntypedArgument) {\n              var _e41 = ye(s),\n                  _r46 = ye(a);\n\n              if (_e41.kind !== _r46.kind || \"string\" !== _e41.kind && \"number\" !== _e41.kind) throw new xe(\"Expected arguments for \\\"\".concat(t, \"\\\" to be (string, string) or (number, number), but found (\").concat(_e41.kind, \", \").concat(_r46.kind, \") instead.\"));\n            }\n\n            if (this.collator && !i && this.hasUntypedArgument) {\n              var _t36 = ye(s),\n                  _r47 = ye(a);\n\n              if (\"string\" !== _t36.kind || \"string\" !== _r47.kind) return e(_n20, s, a);\n            }\n\n            return this.collator ? r(_n20, s, a, this.collator.evaluate(_n20)) : e(_n20, s, a);\n          }\n        }, {\n          key: \"eachChild\",\n          value: function eachChild(t) {\n            t(this.lhs), t(this.rhs), this.collator && t(this.collator);\n          }\n        }, {\n          key: \"outputDefined\",\n          value: function outputDefined() {\n            return !0;\n          }\n        }, {\n          key: \"serialize\",\n          value: function serialize() {\n            var e = [t];\n            return this.eachChild(function (t) {\n              e.push(t.serialize());\n            }), e;\n          }\n        }], [{\n          key: \"parse\",\n          value: function parse(t, e) {\n            if (3 !== t.length && 4 !== t.length) return e.error(\"Expected two or three arguments.\");\n            var r = t[0];\n            var s = e.parse(t[1], 1, Yt);\n            if (!s) return null;\n            if (!kr(r, s.type)) return e.concat(1).error(\"\\\"\".concat(r, \"\\\" comparisons are not supported for type '\").concat(ee(s.type), \"'.\"));\n            var a = e.parse(t[2], 2, Yt);\n            if (!a) return null;\n            if (!kr(r, a.type)) return e.concat(2).error(\"\\\"\".concat(r, \"\\\" comparisons are not supported for type '\").concat(ee(a.type), \"'.\"));\n            if (s.type.kind !== a.type.kind && \"value\" !== s.type.kind && \"value\" !== a.type.kind) return e.error(\"Cannot compare types '\".concat(ee(s.type), \"' and '\").concat(ee(a.type), \"'.\"));\n            i && (\"value\" === s.type.kind && \"value\" !== a.type.kind ? s = new be(a.type, [s]) : \"value\" !== s.type.kind && \"value\" === a.type.kind && (a = new be(s.type, [a])));\n            var o = null;\n\n            if (4 === t.length) {\n              if (\"string\" !== s.type.kind && \"string\" !== a.type.kind && \"value\" !== s.type.kind && \"value\" !== a.type.kind) return e.error(\"Cannot use collator to compare non-string types.\");\n              if (o = e.parse(t[3], 3, Wt), !o) return null;\n            }\n\n            return new n(s, a, o);\n          }\n        }]);\n\n        return n;\n      }();\n    }\n\n    var Ir = Sr(\"==\", function (t, e, r) {\n      return e === r;\n    }, Ar),\n        Tr = Sr(\"!=\", function (t, e, r) {\n      return e !== r;\n    }, function (t, e, r, i) {\n      return !Ar(0, e, r, i);\n    }),\n        zr = Sr(\"<\", function (t, e, r) {\n      return e < r;\n    }, function (t, e, r, i) {\n      return i.compare(e, r) < 0;\n    }),\n        Er = Sr(\">\", function (t, e, r) {\n      return e > r;\n    }, function (t, e, r, i) {\n      return i.compare(e, r) > 0;\n    }),\n        Mr = Sr(\"<=\", function (t, e, r) {\n      return e <= r;\n    }, function (t, e, r, i) {\n      return i.compare(e, r) <= 0;\n    });\n\n    var Br = /*#__PURE__*/function () {\n      function Br(t, e, r, i, n) {\n        _classCallCheck(this, Br);\n\n        this.type = Zt, this.number = t, this.locale = e, this.currency = r, this.minFractionDigits = i, this.maxFractionDigits = n;\n      }\n\n      _createClass(Br, [{\n        key: \"evaluate\",\n        value: function evaluate(t) {\n          return new Intl.NumberFormat(this.locale ? this.locale.evaluate(t) : [], {\n            style: this.currency ? \"currency\" : \"decimal\",\n            currency: this.currency ? this.currency.evaluate(t) : void 0,\n            minimumFractionDigits: this.minFractionDigits ? this.minFractionDigits.evaluate(t) : void 0,\n            maximumFractionDigits: this.maxFractionDigits ? this.maxFractionDigits.evaluate(t) : void 0\n          }).format(this.number.evaluate(t));\n        }\n      }, {\n        key: \"eachChild\",\n        value: function eachChild(t) {\n          t(this.number), this.locale && t(this.locale), this.currency && t(this.currency), this.minFractionDigits && t(this.minFractionDigits), this.maxFractionDigits && t(this.maxFractionDigits);\n        }\n      }, {\n        key: \"outputDefined\",\n        value: function outputDefined() {\n          return !1;\n        }\n      }, {\n        key: \"serialize\",\n        value: function serialize() {\n          var t = {};\n          return this.locale && (t.locale = this.locale.serialize()), this.currency && (t.currency = this.currency.serialize()), this.minFractionDigits && (t[\"min-fraction-digits\"] = this.minFractionDigits.serialize()), this.maxFractionDigits && (t[\"max-fraction-digits\"] = this.maxFractionDigits.serialize()), [\"number-format\", this.number.serialize(), t];\n        }\n      }], [{\n        key: \"parse\",\n        value: function parse(t, e) {\n          if (3 !== t.length) return e.error(\"Expected two arguments.\");\n          var r = e.parse(t[1], 1, Gt);\n          if (!r) return null;\n          var i = t[2];\n          if (\"object\" != _typeof(i) || Array.isArray(i)) return e.error(\"NumberFormat options argument must be an object.\");\n          var n = null;\n          if (i.locale && (n = e.parse(i.locale, 1, Zt), !n)) return null;\n          var s = null;\n          if (i.currency && (s = e.parse(i.currency, 1, Zt), !s)) return null;\n          var a = null;\n          if (i[\"min-fraction-digits\"] && (a = e.parse(i[\"min-fraction-digits\"], 1, Gt), !a)) return null;\n          var o = null;\n          return i[\"max-fraction-digits\"] && (o = e.parse(i[\"max-fraction-digits\"], 1, Gt), !o) ? null : new Br(r, n, s, a, o);\n        }\n      }]);\n\n      return Br;\n    }();\n\n    var Dr = /*#__PURE__*/function () {\n      function Dr(t) {\n        _classCallCheck(this, Dr);\n\n        this.type = Gt, this.input = t;\n      }\n\n      _createClass(Dr, [{\n        key: \"evaluate\",\n        value: function evaluate(t) {\n          var e = this.input.evaluate(t);\n          if (\"string\" == typeof e) return e.length;\n          if (Array.isArray(e)) return e.length;\n          throw new xe(\"Expected value to be of type string or array, but found \".concat(ee(ye(e)), \" instead.\"));\n        }\n      }, {\n        key: \"eachChild\",\n        value: function eachChild(t) {\n          t(this.input);\n        }\n      }, {\n        key: \"outputDefined\",\n        value: function outputDefined() {\n          return !1;\n        }\n      }, {\n        key: \"serialize\",\n        value: function serialize() {\n          var t = [\"length\"];\n          return this.eachChild(function (e) {\n            t.push(e.serialize());\n          }), t;\n        }\n      }], [{\n        key: \"parse\",\n        value: function parse(t, e) {\n          if (2 !== t.length) return e.error(\"Expected 1 argument, but found \".concat(t.length - 1, \" instead.\"));\n          var r = e.parse(t[1], 1);\n          return r ? \"array\" !== r.type.kind && \"string\" !== r.type.kind && \"value\" !== r.type.kind ? e.error(\"Expected argument of type string or array, but found \".concat(ee(r.type), \" instead.\")) : new Dr(r) : null;\n        }\n      }]);\n\n      return Dr;\n    }();\n\n    var Cr = {\n      \"==\": Ir,\n      \"!=\": Tr,\n      \">\": Er,\n      \"<\": zr,\n      \">=\": Sr(\">=\", function (t, e, r) {\n        return e >= r;\n      }, function (t, e, r, i) {\n        return i.compare(e, r) >= 0;\n      }),\n      \"<=\": Mr,\n      array: be,\n      at: gr,\n      boolean: be,\n      case: wr,\n      coalesce: yr,\n      collator: ze,\n      format: we,\n      image: _e,\n      in: xr,\n      \"index-of\": vr,\n      interpolate: dr,\n      \"interpolate-hcl\": dr,\n      \"interpolate-lab\": dr,\n      length: Dr,\n      let: mr,\n      literal: ge,\n      match: br,\n      number: be,\n      \"number-format\": Br,\n      object: be,\n      slice: _r,\n      step: We,\n      string: be,\n      \"to-boolean\": Ae,\n      \"to-color\": Ae,\n      \"to-number\": Ae,\n      \"to-string\": Ae,\n      var: Ke,\n      within: je\n    };\n\n    function Pr(t, _ref31) {\n      var _ref32 = _slicedToArray(_ref31, 4),\n          e = _ref32[0],\n          r = _ref32[1],\n          i = _ref32[2],\n          n = _ref32[3];\n\n      e = e.evaluate(t), r = r.evaluate(t), i = i.evaluate(t);\n      var s = n ? n.evaluate(t) : 1,\n          a = de(e, r, i, s);\n      if (a) throw new xe(a);\n      return new le(e / 255 * s, r / 255 * s, i / 255 * s, s);\n    }\n\n    function Vr(t, e) {\n      return t in e;\n    }\n\n    function Fr(t, e) {\n      var r = e[t];\n      return void 0 === r ? null : r;\n    }\n\n    function Rr(t) {\n      return {\n        type: t\n      };\n    }\n\n    function Lr(t) {\n      return {\n        result: \"success\",\n        value: t\n      };\n    }\n\n    function Ur(t) {\n      return {\n        result: \"error\",\n        value: t\n      };\n    }\n\n    function Or(t) {\n      return \"data-driven\" === t[\"property-type\"] || \"cross-faded-data-driven\" === t[\"property-type\"];\n    }\n\n    function $r(t) {\n      return !!t.expression && t.expression.parameters.indexOf(\"zoom\") > -1;\n    }\n\n    function qr(t) {\n      return !!t.expression && t.expression.interpolated;\n    }\n\n    function Nr(t) {\n      return t instanceof Number ? \"number\" : t instanceof String ? \"string\" : t instanceof Boolean ? \"boolean\" : Array.isArray(t) ? \"array\" : null === t ? \"null\" : _typeof(t);\n    }\n\n    function jr(t) {\n      return \"object\" == _typeof(t) && null !== t && !Array.isArray(t);\n    }\n\n    function Gr(t) {\n      return t;\n    }\n\n    function Zr(t, e, r) {\n      return void 0 !== t ? t : void 0 !== e ? e : void 0 !== r ? r : void 0;\n    }\n\n    function Xr(t, e, r, i, n) {\n      return Zr(_typeof(r) === n ? i[r] : void 0, t.default, e.default);\n    }\n\n    function Kr(t, e, r) {\n      if (\"number\" !== Nr(r)) return Zr(t.default, e.default);\n      var i = t.stops.length;\n      if (1 === i) return t.stops[0][1];\n      if (r <= t.stops[0][0]) return t.stops[0][1];\n      if (r >= t.stops[i - 1][0]) return t.stops[i - 1][1];\n      var n = Ye(t.stops.map(function (t) {\n        return t[0];\n      }), r);\n      return t.stops[n][1];\n    }\n\n    function Hr(t, e, r) {\n      var i = void 0 !== t.base ? t.base : 1;\n      if (\"number\" !== Nr(r)) return Zr(t.default, e.default);\n      var n = t.stops.length;\n      if (1 === n) return t.stops[0][1];\n      if (r <= t.stops[0][0]) return t.stops[0][1];\n      if (r >= t.stops[n - 1][0]) return t.stops[n - 1][1];\n\n      var s = Ye(t.stops.map(function (t) {\n        return t[0];\n      }), r),\n          a = function (t, e, r, i) {\n        var n = i - r,\n            s = t - r;\n        return 0 === n ? 0 : 1 === e ? s / n : (Math.pow(e, s) - 1) / (Math.pow(e, n) - 1);\n      }(r, i, t.stops[s][0], t.stops[s + 1][0]),\n          o = t.stops[s][1],\n          l = t.stops[s + 1][1];\n\n      var u = Qe[e.type] || Gr;\n\n      if (t.colorSpace && \"rgb\" !== t.colorSpace) {\n        var _e42 = pr[t.colorSpace];\n\n        u = function u(t, r) {\n          return _e42.reverse(_e42.interpolate(_e42.forward(t), _e42.forward(r), a));\n        };\n      }\n\n      return \"function\" == typeof o.evaluate ? {\n        evaluate: function evaluate() {\n          for (var _len4 = arguments.length, t = new Array(_len4), _key4 = 0; _key4 < _len4; _key4++) {\n            t[_key4] = arguments[_key4];\n          }\n\n          var e = o.evaluate.apply(void 0, t),\n              r = l.evaluate.apply(void 0, t);\n          if (void 0 !== e && void 0 !== r) return u(e, r, a);\n        }\n      } : u(o, l, a);\n    }\n\n    function Yr(t, e, r) {\n      return \"color\" === e.type ? r = le.parse(r) : \"formatted\" === e.type ? r = he.fromString(r.toString()) : \"resolvedImage\" === e.type ? r = pe.fromString(r.toString()) : Nr(r) === e.type || \"enum\" === e.type && e.values[r] || (r = void 0), Zr(r, t.default, e.default);\n    }\n\n    Te.register(Cr, {\n      error: [{\n        kind: \"error\"\n      }, [Zt], function (t, _ref33) {\n        var _ref34 = _slicedToArray(_ref33, 1),\n            e = _ref34[0];\n\n        throw new xe(e.evaluate(t));\n      }],\n      typeof: [Zt, [Yt], function (t, _ref35) {\n        var _ref36 = _slicedToArray(_ref35, 1),\n            e = _ref36[0];\n\n        return ee(ye(e.evaluate(t)));\n      }],\n      \"to-rgba\": [te(Gt, 4), [Kt], function (t, _ref37) {\n        var _ref38 = _slicedToArray(_ref37, 1),\n            e = _ref38[0];\n\n        return e.evaluate(t).toArray();\n      }],\n      rgb: [Kt, [Gt, Gt, Gt], Pr],\n      rgba: [Kt, [Gt, Gt, Gt, Gt], Pr],\n      has: {\n        type: Xt,\n        overloads: [[[Zt], function (t, _ref39) {\n          var _ref40 = _slicedToArray(_ref39, 1),\n              e = _ref40[0];\n\n          return Vr(e.evaluate(t), t.properties());\n        }], [[Zt, Ht], function (t, _ref41) {\n          var _ref42 = _slicedToArray(_ref41, 2),\n              e = _ref42[0],\n              r = _ref42[1];\n\n          return Vr(e.evaluate(t), r.evaluate(t));\n        }]]\n      },\n      get: {\n        type: Yt,\n        overloads: [[[Zt], function (t, _ref43) {\n          var _ref44 = _slicedToArray(_ref43, 1),\n              e = _ref44[0];\n\n          return Fr(e.evaluate(t), t.properties());\n        }], [[Zt, Ht], function (t, _ref45) {\n          var _ref46 = _slicedToArray(_ref45, 2),\n              e = _ref46[0],\n              r = _ref46[1];\n\n          return Fr(e.evaluate(t), r.evaluate(t));\n        }]]\n      },\n      \"feature-state\": [Yt, [Zt], function (t, _ref47) {\n        var _ref48 = _slicedToArray(_ref47, 1),\n            e = _ref48[0];\n\n        return Fr(e.evaluate(t), t.featureState || {});\n      }],\n      properties: [Ht, [], function (t) {\n        return t.properties();\n      }],\n      \"geometry-type\": [Zt, [], function (t) {\n        return t.geometryType();\n      }],\n      id: [Yt, [], function (t) {\n        return t.id();\n      }],\n      zoom: [Gt, [], function (t) {\n        return t.globals.zoom;\n      }],\n      \"heatmap-density\": [Gt, [], function (t) {\n        return t.globals.heatmapDensity || 0;\n      }],\n      \"line-progress\": [Gt, [], function (t) {\n        return t.globals.lineProgress || 0;\n      }],\n      \"sky-radial-progress\": [Gt, [], function (t) {\n        return t.globals.skyRadialProgress || 0;\n      }],\n      accumulated: [Yt, [], function (t) {\n        return void 0 === t.globals.accumulated ? null : t.globals.accumulated;\n      }],\n      \"+\": [Gt, Rr(Gt), function (t, e) {\n        var r = 0;\n\n        var _iterator36 = _createForOfIteratorHelper(e),\n            _step36;\n\n        try {\n          for (_iterator36.s(); !(_step36 = _iterator36.n()).done;) {\n            var _i30 = _step36.value;\n            r += _i30.evaluate(t);\n          }\n        } catch (err) {\n          _iterator36.e(err);\n        } finally {\n          _iterator36.f();\n        }\n\n        return r;\n      }],\n      \"*\": [Gt, Rr(Gt), function (t, e) {\n        var r = 1;\n\n        var _iterator37 = _createForOfIteratorHelper(e),\n            _step37;\n\n        try {\n          for (_iterator37.s(); !(_step37 = _iterator37.n()).done;) {\n            var _i31 = _step37.value;\n            r *= _i31.evaluate(t);\n          }\n        } catch (err) {\n          _iterator37.e(err);\n        } finally {\n          _iterator37.f();\n        }\n\n        return r;\n      }],\n      \"-\": {\n        type: Gt,\n        overloads: [[[Gt, Gt], function (t, _ref49) {\n          var _ref50 = _slicedToArray(_ref49, 2),\n              e = _ref50[0],\n              r = _ref50[1];\n\n          return e.evaluate(t) - r.evaluate(t);\n        }], [[Gt], function (t, _ref51) {\n          var _ref52 = _slicedToArray(_ref51, 1),\n              e = _ref52[0];\n\n          return -e.evaluate(t);\n        }]]\n      },\n      \"/\": [Gt, [Gt, Gt], function (t, _ref53) {\n        var _ref54 = _slicedToArray(_ref53, 2),\n            e = _ref54[0],\n            r = _ref54[1];\n\n        return e.evaluate(t) / r.evaluate(t);\n      }],\n      \"%\": [Gt, [Gt, Gt], function (t, _ref55) {\n        var _ref56 = _slicedToArray(_ref55, 2),\n            e = _ref56[0],\n            r = _ref56[1];\n\n        return e.evaluate(t) % r.evaluate(t);\n      }],\n      ln2: [Gt, [], function () {\n        return Math.LN2;\n      }],\n      pi: [Gt, [], function () {\n        return Math.PI;\n      }],\n      e: [Gt, [], function () {\n        return Math.E;\n      }],\n      \"^\": [Gt, [Gt, Gt], function (t, _ref57) {\n        var _ref58 = _slicedToArray(_ref57, 2),\n            e = _ref58[0],\n            r = _ref58[1];\n\n        return Math.pow(e.evaluate(t), r.evaluate(t));\n      }],\n      sqrt: [Gt, [Gt], function (t, _ref59) {\n        var _ref60 = _slicedToArray(_ref59, 1),\n            e = _ref60[0];\n\n        return Math.sqrt(e.evaluate(t));\n      }],\n      log10: [Gt, [Gt], function (t, _ref61) {\n        var _ref62 = _slicedToArray(_ref61, 1),\n            e = _ref62[0];\n\n        return Math.log(e.evaluate(t)) / Math.LN10;\n      }],\n      ln: [Gt, [Gt], function (t, _ref63) {\n        var _ref64 = _slicedToArray(_ref63, 1),\n            e = _ref64[0];\n\n        return Math.log(e.evaluate(t));\n      }],\n      log2: [Gt, [Gt], function (t, _ref65) {\n        var _ref66 = _slicedToArray(_ref65, 1),\n            e = _ref66[0];\n\n        return Math.log(e.evaluate(t)) / Math.LN2;\n      }],\n      sin: [Gt, [Gt], function (t, _ref67) {\n        var _ref68 = _slicedToArray(_ref67, 1),\n            e = _ref68[0];\n\n        return Math.sin(e.evaluate(t));\n      }],\n      cos: [Gt, [Gt], function (t, _ref69) {\n        var _ref70 = _slicedToArray(_ref69, 1),\n            e = _ref70[0];\n\n        return Math.cos(e.evaluate(t));\n      }],\n      tan: [Gt, [Gt], function (t, _ref71) {\n        var _ref72 = _slicedToArray(_ref71, 1),\n            e = _ref72[0];\n\n        return Math.tan(e.evaluate(t));\n      }],\n      asin: [Gt, [Gt], function (t, _ref73) {\n        var _ref74 = _slicedToArray(_ref73, 1),\n            e = _ref74[0];\n\n        return Math.asin(e.evaluate(t));\n      }],\n      acos: [Gt, [Gt], function (t, _ref75) {\n        var _ref76 = _slicedToArray(_ref75, 1),\n            e = _ref76[0];\n\n        return Math.acos(e.evaluate(t));\n      }],\n      atan: [Gt, [Gt], function (t, _ref77) {\n        var _ref78 = _slicedToArray(_ref77, 1),\n            e = _ref78[0];\n\n        return Math.atan(e.evaluate(t));\n      }],\n      min: [Gt, Rr(Gt), function (t, e) {\n        return Math.min.apply(Math, _toConsumableArray(e.map(function (e) {\n          return e.evaluate(t);\n        })));\n      }],\n      max: [Gt, Rr(Gt), function (t, e) {\n        return Math.max.apply(Math, _toConsumableArray(e.map(function (e) {\n          return e.evaluate(t);\n        })));\n      }],\n      abs: [Gt, [Gt], function (t, _ref79) {\n        var _ref80 = _slicedToArray(_ref79, 1),\n            e = _ref80[0];\n\n        return Math.abs(e.evaluate(t));\n      }],\n      round: [Gt, [Gt], function (t, _ref81) {\n        var _ref82 = _slicedToArray(_ref81, 1),\n            e = _ref82[0];\n\n        var r = e.evaluate(t);\n        return r < 0 ? -Math.round(-r) : Math.round(r);\n      }],\n      floor: [Gt, [Gt], function (t, _ref83) {\n        var _ref84 = _slicedToArray(_ref83, 1),\n            e = _ref84[0];\n\n        return Math.floor(e.evaluate(t));\n      }],\n      ceil: [Gt, [Gt], function (t, _ref85) {\n        var _ref86 = _slicedToArray(_ref85, 1),\n            e = _ref86[0];\n\n        return Math.ceil(e.evaluate(t));\n      }],\n      \"filter-==\": [Xt, [Zt, Yt], function (t, _ref87) {\n        var _ref88 = _slicedToArray(_ref87, 2),\n            e = _ref88[0],\n            r = _ref88[1];\n\n        return t.properties()[e.value] === r.value;\n      }],\n      \"filter-id-==\": [Xt, [Yt], function (t, _ref89) {\n        var _ref90 = _slicedToArray(_ref89, 1),\n            e = _ref90[0];\n\n        return t.id() === e.value;\n      }],\n      \"filter-type-==\": [Xt, [Zt], function (t, _ref91) {\n        var _ref92 = _slicedToArray(_ref91, 1),\n            e = _ref92[0];\n\n        return t.geometryType() === e.value;\n      }],\n      \"filter-<\": [Xt, [Zt, Yt], function (t, _ref93) {\n        var _ref94 = _slicedToArray(_ref93, 2),\n            e = _ref94[0],\n            r = _ref94[1];\n\n        var i = t.properties()[e.value],\n            n = r.value;\n        return _typeof(i) == _typeof(n) && i < n;\n      }],\n      \"filter-id-<\": [Xt, [Yt], function (t, _ref95) {\n        var _ref96 = _slicedToArray(_ref95, 1),\n            e = _ref96[0];\n\n        var r = t.id(),\n            i = e.value;\n        return _typeof(r) == _typeof(i) && r < i;\n      }],\n      \"filter->\": [Xt, [Zt, Yt], function (t, _ref97) {\n        var _ref98 = _slicedToArray(_ref97, 2),\n            e = _ref98[0],\n            r = _ref98[1];\n\n        var i = t.properties()[e.value],\n            n = r.value;\n        return _typeof(i) == _typeof(n) && i > n;\n      }],\n      \"filter-id->\": [Xt, [Yt], function (t, _ref99) {\n        var _ref100 = _slicedToArray(_ref99, 1),\n            e = _ref100[0];\n\n        var r = t.id(),\n            i = e.value;\n        return _typeof(r) == _typeof(i) && r > i;\n      }],\n      \"filter-<=\": [Xt, [Zt, Yt], function (t, _ref101) {\n        var _ref102 = _slicedToArray(_ref101, 2),\n            e = _ref102[0],\n            r = _ref102[1];\n\n        var i = t.properties()[e.value],\n            n = r.value;\n        return _typeof(i) == _typeof(n) && i <= n;\n      }],\n      \"filter-id-<=\": [Xt, [Yt], function (t, _ref103) {\n        var _ref104 = _slicedToArray(_ref103, 1),\n            e = _ref104[0];\n\n        var r = t.id(),\n            i = e.value;\n        return _typeof(r) == _typeof(i) && r <= i;\n      }],\n      \"filter->=\": [Xt, [Zt, Yt], function (t, _ref105) {\n        var _ref106 = _slicedToArray(_ref105, 2),\n            e = _ref106[0],\n            r = _ref106[1];\n\n        var i = t.properties()[e.value],\n            n = r.value;\n        return _typeof(i) == _typeof(n) && i >= n;\n      }],\n      \"filter-id->=\": [Xt, [Yt], function (t, _ref107) {\n        var _ref108 = _slicedToArray(_ref107, 1),\n            e = _ref108[0];\n\n        var r = t.id(),\n            i = e.value;\n        return _typeof(r) == _typeof(i) && r >= i;\n      }],\n      \"filter-has\": [Xt, [Yt], function (t, _ref109) {\n        var _ref110 = _slicedToArray(_ref109, 1),\n            e = _ref110[0];\n\n        return e.value in t.properties();\n      }],\n      \"filter-has-id\": [Xt, [], function (t) {\n        return null !== t.id() && void 0 !== t.id();\n      }],\n      \"filter-type-in\": [Xt, [te(Zt)], function (t, _ref111) {\n        var _ref112 = _slicedToArray(_ref111, 1),\n            e = _ref112[0];\n\n        return e.value.indexOf(t.geometryType()) >= 0;\n      }],\n      \"filter-id-in\": [Xt, [te(Yt)], function (t, _ref113) {\n        var _ref114 = _slicedToArray(_ref113, 1),\n            e = _ref114[0];\n\n        return e.value.indexOf(t.id()) >= 0;\n      }],\n      \"filter-in-small\": [Xt, [Zt, te(Yt)], function (t, _ref115) {\n        var _ref116 = _slicedToArray(_ref115, 2),\n            e = _ref116[0],\n            r = _ref116[1];\n\n        return r.value.indexOf(t.properties()[e.value]) >= 0;\n      }],\n      \"filter-in-large\": [Xt, [Zt, te(Yt)], function (t, _ref117) {\n        var _ref118 = _slicedToArray(_ref117, 2),\n            e = _ref118[0],\n            r = _ref118[1];\n\n        return function (t, e, r, i) {\n          for (; r <= i;) {\n            var _n21 = r + i >> 1;\n\n            if (e[_n21] === t) return !0;\n            e[_n21] > t ? i = _n21 - 1 : r = _n21 + 1;\n          }\n\n          return !1;\n        }(t.properties()[e.value], r.value, 0, r.value.length - 1);\n      }],\n      all: {\n        type: Xt,\n        overloads: [[[Xt, Xt], function (t, _ref119) {\n          var _ref120 = _slicedToArray(_ref119, 2),\n              e = _ref120[0],\n              r = _ref120[1];\n\n          return e.evaluate(t) && r.evaluate(t);\n        }], [Rr(Xt), function (t, e) {\n          var _iterator38 = _createForOfIteratorHelper(e),\n              _step38;\n\n          try {\n            for (_iterator38.s(); !(_step38 = _iterator38.n()).done;) {\n              var _r48 = _step38.value;\n              if (!_r48.evaluate(t)) return !1;\n            }\n          } catch (err) {\n            _iterator38.e(err);\n          } finally {\n            _iterator38.f();\n          }\n\n          return !0;\n        }]]\n      },\n      any: {\n        type: Xt,\n        overloads: [[[Xt, Xt], function (t, _ref121) {\n          var _ref122 = _slicedToArray(_ref121, 2),\n              e = _ref122[0],\n              r = _ref122[1];\n\n          return e.evaluate(t) || r.evaluate(t);\n        }], [Rr(Xt), function (t, e) {\n          var _iterator39 = _createForOfIteratorHelper(e),\n              _step39;\n\n          try {\n            for (_iterator39.s(); !(_step39 = _iterator39.n()).done;) {\n              var _r49 = _step39.value;\n              if (_r49.evaluate(t)) return !0;\n            }\n          } catch (err) {\n            _iterator39.e(err);\n          } finally {\n            _iterator39.f();\n          }\n\n          return !1;\n        }]]\n      },\n      \"!\": [Xt, [Xt], function (t, _ref123) {\n        var _ref124 = _slicedToArray(_ref123, 1),\n            e = _ref124[0];\n\n        return !e.evaluate(t);\n      }],\n      \"is-supported-script\": [Xt, [Zt], function (t, _ref125) {\n        var _ref126 = _slicedToArray(_ref125, 1),\n            e = _ref126[0];\n\n        var r = t.globals && t.globals.isSupportedScript;\n        return !r || r(e.evaluate(t));\n      }],\n      upcase: [Zt, [Zt], function (t, _ref127) {\n        var _ref128 = _slicedToArray(_ref127, 1),\n            e = _ref128[0];\n\n        return e.evaluate(t).toUpperCase();\n      }],\n      downcase: [Zt, [Zt], function (t, _ref129) {\n        var _ref130 = _slicedToArray(_ref129, 1),\n            e = _ref130[0];\n\n        return e.evaluate(t).toLowerCase();\n      }],\n      concat: [Zt, Rr(Yt), function (t, e) {\n        return e.map(function (e) {\n          return me(e.evaluate(t));\n        }).join(\"\");\n      }],\n      \"resolved-locale\": [Zt, [Wt], function (t, _ref131) {\n        var _ref132 = _slicedToArray(_ref131, 1),\n            e = _ref132[0];\n\n        return e.evaluate(t).resolvedLocale();\n      }]\n    });\n\n    var Wr = /*#__PURE__*/function () {\n      function Wr(t, e) {\n        _classCallCheck(this, Wr);\n\n        this.expression = t, this._warningHistory = {}, this._evaluator = new Ie(), this._defaultValue = e ? function (t) {\n          return \"color\" === t.type && jr(t.default) ? new le(0, 0, 0, 0) : \"color\" === t.type ? le.parse(t.default) || null : void 0 === t.default ? null : t.default;\n        }(e) : null, this._enumValues = e && \"enum\" === e.type ? e.values : null;\n      }\n\n      _createClass(Wr, [{\n        key: \"evaluateWithoutErrorHandling\",\n        value: function evaluateWithoutErrorHandling(t, e, r, i, n, s) {\n          return this._evaluator.globals = t, this._evaluator.feature = e, this._evaluator.featureState = r, this._evaluator.canonical = i, this._evaluator.availableImages = n || null, this._evaluator.formattedSection = s, this.expression.evaluate(this._evaluator);\n        }\n      }, {\n        key: \"evaluate\",\n        value: function evaluate(t, e, r, i, n, s) {\n          this._evaluator.globals = t, this._evaluator.feature = e || null, this._evaluator.featureState = r || null, this._evaluator.canonical = i, this._evaluator.availableImages = n || null, this._evaluator.formattedSection = s || null;\n\n          try {\n            var _t37 = this.expression.evaluate(this._evaluator);\n\n            if (null == _t37 || \"number\" == typeof _t37 && _t37 != _t37) return this._defaultValue;\n            if (this._enumValues && !(_t37 in this._enumValues)) throw new xe(\"Expected value to be one of \".concat(Object.keys(this._enumValues).map(function (t) {\n              return JSON.stringify(t);\n            }).join(\", \"), \", but found \").concat(JSON.stringify(_t37), \" instead.\"));\n            return _t37;\n          } catch (t) {\n            return this._warningHistory[t.message] || (this._warningHistory[t.message] = !0, \"undefined\" != typeof console && console.warn(t.message)), this._defaultValue;\n          }\n        }\n      }]);\n\n      return Wr;\n    }();\n\n    function Jr(t) {\n      return Array.isArray(t) && t.length > 0 && \"string\" == typeof t[0] && t[0] in Cr;\n    }\n\n    function Qr(t, e) {\n      var r = new He(Cr, [], e ? function (t) {\n        var e = {\n          color: Kt,\n          string: Zt,\n          number: Gt,\n          enum: Zt,\n          boolean: Xt,\n          formatted: Jt,\n          resolvedImage: Qt\n        };\n        return \"array\" === t.type ? te(e[t.value] || Yt, t.length) : e[t.type];\n      }(e) : void 0),\n          i = r.parse(t, void 0, void 0, void 0, e && \"string\" === e.type ? {\n        typeAnnotation: \"coerce\"\n      } : void 0);\n      return i ? Lr(new Wr(i, e)) : Ur(r.errors);\n    }\n\n    var ti = /*#__PURE__*/function () {\n      function ti(t, e) {\n        _classCallCheck(this, ti);\n\n        this.kind = t, this._styleExpression = e, this.isStateDependent = \"constant\" !== t && !Ze(e.expression);\n      }\n\n      _createClass(ti, [{\n        key: \"evaluateWithoutErrorHandling\",\n        value: function evaluateWithoutErrorHandling(t, e, r, i, n, s) {\n          return this._styleExpression.evaluateWithoutErrorHandling(t, e, r, i, n, s);\n        }\n      }, {\n        key: \"evaluate\",\n        value: function evaluate(t, e, r, i, n, s) {\n          return this._styleExpression.evaluate(t, e, r, i, n, s);\n        }\n      }]);\n\n      return ti;\n    }();\n\n    var ei = /*#__PURE__*/function () {\n      function ei(t, e, r, i) {\n        _classCallCheck(this, ei);\n\n        this.kind = t, this.zoomStops = r, this._styleExpression = e, this.isStateDependent = \"camera\" !== t && !Ze(e.expression), this.interpolationType = i;\n      }\n\n      _createClass(ei, [{\n        key: \"evaluateWithoutErrorHandling\",\n        value: function evaluateWithoutErrorHandling(t, e, r, i, n, s) {\n          return this._styleExpression.evaluateWithoutErrorHandling(t, e, r, i, n, s);\n        }\n      }, {\n        key: \"evaluate\",\n        value: function evaluate(t, e, r, i, n, s) {\n          return this._styleExpression.evaluate(t, e, r, i, n, s);\n        }\n      }, {\n        key: \"interpolationFactor\",\n        value: function interpolationFactor(t, e, r) {\n          return this.interpolationType ? dr.interpolationFactor(this.interpolationType, t, e, r) : 0;\n        }\n      }]);\n\n      return ei;\n    }();\n\n    function ri(t, e) {\n      if (\"error\" === (t = Qr(t, e)).result) return t;\n      var r = t.value.expression,\n          i = Ge(r);\n      if (!i && !Or(e)) return Ur([new qt(\"\", \"data expressions not supported\")]);\n      var n = Xe(r, [\"zoom\"]);\n      if (!n && !$r(e)) return Ur([new qt(\"\", \"zoom expressions not supported\")]);\n\n      var s = function t(e) {\n        var r = null;\n        if (e instanceof mr) r = t(e.result);else if (e instanceof yr) {\n          var _iterator40 = _createForOfIteratorHelper(e.args),\n              _step40;\n\n          try {\n            for (_iterator40.s(); !(_step40 = _iterator40.n()).done;) {\n              var _i32 = _step40.value;\n              if (r = t(_i32), r) break;\n            }\n          } catch (err) {\n            _iterator40.e(err);\n          } finally {\n            _iterator40.f();\n          }\n        } else (e instanceof We || e instanceof dr) && e.input instanceof Te && \"zoom\" === e.input.name && (r = e);\n        return r instanceof qt || e.eachChild(function (e) {\n          var i = t(e);\n          i instanceof qt ? r = i : !r && i ? r = new qt(\"\", '\"zoom\" expression may only be used as input to a top-level \"step\" or \"interpolate\" expression.') : r && i && r !== i && (r = new qt(\"\", 'Only one zoom-based \"step\" or \"interpolate\" subexpression may be used in an expression.'));\n        }), r;\n      }(r);\n\n      return s || n ? s instanceof qt ? Ur([s]) : s instanceof dr && !qr(e) ? Ur([new qt(\"\", '\"interpolate\" expressions cannot be used with this property')]) : Lr(s ? new ei(i ? \"camera\" : \"composite\", t.value, s.labels, s instanceof dr ? s.interpolation : void 0) : new ti(i ? \"constant\" : \"source\", t.value)) : Ur([new qt(\"\", '\"zoom\" expression may only be used as input to a top-level \"step\" or \"interpolate\" expression.')]);\n    }\n\n    var ii = /*#__PURE__*/function () {\n      function ii(t, e) {\n        _classCallCheck(this, ii);\n\n        this._parameters = t, this._specification = e, Ut(this, function t(e, r) {\n          var i = \"color\" === r.type,\n              n = e.stops && \"object\" == _typeof(e.stops[0][0]),\n              s = n || !(n || void 0 !== e.property),\n              a = e.type || (qr(r) ? \"exponential\" : \"interval\");\n\n          if (i && ((e = Ut({}, e)).stops && (e.stops = e.stops.map(function (t) {\n            return [t[0], le.parse(t[1])];\n          })), e.default = le.parse(e.default ? e.default : r.default)), e.colorSpace && \"rgb\" !== e.colorSpace && !pr[e.colorSpace]) throw new Error(\"Unknown color space: \".concat(e.colorSpace));\n          var o, l, u;\n          if (\"exponential\" === a) o = Hr;else if (\"interval\" === a) o = Kr;else if (\"categorical\" === a) {\n            o = Xr, l = Object.create(null);\n\n            var _iterator41 = _createForOfIteratorHelper(e.stops),\n                _step41;\n\n            try {\n              for (_iterator41.s(); !(_step41 = _iterator41.n()).done;) {\n                var _t38 = _step41.value;\n                l[_t38[0]] = _t38[1];\n              }\n            } catch (err) {\n              _iterator41.e(err);\n            } finally {\n              _iterator41.f();\n            }\n\n            u = _typeof(e.stops[0][0]);\n          } else {\n            if (\"identity\" !== a) throw new Error(\"Unknown function type \\\"\".concat(a, \"\\\"\"));\n            o = Yr;\n          }\n\n          if (n) {\n            var _i33 = {},\n                _n22 = [];\n\n            for (var _t39 = 0; _t39 < e.stops.length; _t39++) {\n              var _r50 = e.stops[_t39],\n                  _s18 = _r50[0].zoom;\n              void 0 === _i33[_s18] && (_i33[_s18] = {\n                zoom: _s18,\n                type: e.type,\n                property: e.property,\n                default: e.default,\n                stops: []\n              }, _n22.push(_s18)), _i33[_s18].stops.push([_r50[0].value, _r50[1]]);\n            }\n\n            var _s17 = [];\n\n            for (var _i34 = 0, _n23 = _n22; _i34 < _n23.length; _i34++) {\n              var _e43 = _n23[_i34];\n\n              _s17.push([_i33[_e43].zoom, t(_i33[_e43], r)]);\n            }\n\n            var _a17 = {\n              name: \"linear\"\n            };\n            return {\n              kind: \"composite\",\n              interpolationType: _a17,\n              interpolationFactor: dr.interpolationFactor.bind(void 0, _a17),\n              zoomStops: _s17.map(function (t) {\n                return t[0];\n              }),\n              evaluate: function evaluate(_ref133, i) {\n                var t = _ref133.zoom;\n                return Hr({\n                  stops: _s17,\n                  base: e.base\n                }, r, t).evaluate(t, i);\n              }\n            };\n          }\n\n          if (s) {\n            var _t40 = \"exponential\" === a ? {\n              name: \"exponential\",\n              base: void 0 !== e.base ? e.base : 1\n            } : null;\n\n            return {\n              kind: \"camera\",\n              interpolationType: _t40,\n              interpolationFactor: dr.interpolationFactor.bind(void 0, _t40),\n              zoomStops: e.stops.map(function (t) {\n                return t[0];\n              }),\n              evaluate: function evaluate(_ref134) {\n                var t = _ref134.zoom;\n                return o(e, r, t, l, u);\n              }\n            };\n          }\n\n          return {\n            kind: \"source\",\n            evaluate: function evaluate(t, i) {\n              var n = i && i.properties ? i.properties[e.property] : void 0;\n              return void 0 === n ? Zr(e.default, r.default) : o(e, r, n, l, u);\n            }\n          };\n        }(this._parameters, this._specification));\n      }\n\n      _createClass(ii, null, [{\n        key: \"deserialize\",\n        value: function deserialize(t) {\n          return new ii(t._parameters, t._specification);\n        }\n      }, {\n        key: \"serialize\",\n        value: function serialize(t) {\n          return {\n            _parameters: t._parameters,\n            _specification: t._specification\n          };\n        }\n      }]);\n\n      return ii;\n    }();\n\n    function ni(t) {\n      var e = t.key,\n          r = t.value,\n          i = t.valueSpec || {},\n          n = t.objectElementValidators || {},\n          s = t.style,\n          a = t.styleSpec;\n      var o = [];\n      var l = Nr(r);\n      if (\"object\" !== l) return [new Rt(e, r, \"object expected, \".concat(l, \" found\"))];\n\n      for (var _t41 in r) {\n        var _l6 = _t41.split(\".\")[0],\n            _u6 = i[_l6] || i[\"*\"];\n\n        var _c3 = void 0;\n\n        if (n[_l6]) _c3 = n[_l6];else if (i[_l6]) _c3 = Mi;else if (n[\"*\"]) _c3 = n[\"*\"];else {\n          if (!i[\"*\"]) {\n            o.push(new Rt(e, r[_t41], \"unknown property \\\"\".concat(_t41, \"\\\"\")));\n            continue;\n          }\n\n          _c3 = Mi;\n        }\n        o = o.concat(_c3({\n          key: (e ? \"\".concat(e, \".\") : e) + _t41,\n          value: r[_t41],\n          valueSpec: _u6,\n          style: s,\n          styleSpec: a,\n          object: r,\n          objectKey: _t41\n        }, r));\n      }\n\n      for (var _t42 in i) {\n        n[_t42] || i[_t42].required && void 0 === i[_t42].default && void 0 === r[_t42] && o.push(new Rt(e, r, \"missing required property \\\"\".concat(_t42, \"\\\"\")));\n      }\n\n      return o;\n    }\n\n    function si(t) {\n      var e = t.value,\n          r = t.valueSpec,\n          i = t.style,\n          n = t.styleSpec,\n          s = t.key,\n          a = t.arrayElementValidator || Mi;\n      if (\"array\" !== Nr(e)) return [new Rt(s, e, \"array expected, \".concat(Nr(e), \" found\"))];\n      if (r.length && e.length !== r.length) return [new Rt(s, e, \"array length \".concat(r.length, \" expected, length \").concat(e.length, \" found\"))];\n      if (r[\"min-length\"] && e.length < r[\"min-length\"]) return [new Rt(s, e, \"array length at least \".concat(r[\"min-length\"], \" expected, length \").concat(e.length, \" found\"))];\n      var o = {\n        type: r.value,\n        values: r.values,\n        minimum: r.minimum,\n        maximum: r.maximum\n      };\n      n.$version < 7 && (o.function = r.function), \"object\" === Nr(r.value) && (o = r.value);\n      var l = [];\n\n      for (var _t43 = 0; _t43 < e.length; _t43++) {\n        l = l.concat(a({\n          array: e,\n          arrayIndex: _t43,\n          value: e[_t43],\n          valueSpec: o,\n          style: i,\n          styleSpec: n,\n          key: \"\".concat(s, \"[\").concat(_t43, \"]\")\n        }));\n      }\n\n      return l;\n    }\n\n    function ai(t) {\n      var e = t.key,\n          r = t.value,\n          i = t.valueSpec;\n      var n = Nr(r);\n      if (\"number\" === n && r != r && (n = \"NaN\"), \"number\" !== n) return [new Rt(e, r, \"number expected, \".concat(n, \" found\"))];\n\n      if (\"minimum\" in i) {\n        var _n24 = i.minimum;\n        if (\"array\" === Nr(i.minimum) && (_n24 = i.minimum[t.arrayIndex]), r < _n24) return [new Rt(e, r, \"\".concat(r, \" is less than the minimum value \").concat(_n24))];\n      }\n\n      if (\"maximum\" in i) {\n        var _n25 = i.maximum;\n        if (\"array\" === Nr(i.maximum) && (_n25 = i.maximum[t.arrayIndex]), r > _n25) return [new Rt(e, r, \"\".concat(r, \" is greater than the maximum value \").concat(_n25))];\n      }\n\n      return [];\n    }\n\n    function oi(t) {\n      var e = t.valueSpec,\n          r = Ot(t.value.type);\n      var i,\n          n,\n          s,\n          a = {};\n      var o = \"categorical\" !== r && void 0 === t.value.property,\n          l = !o,\n          u = \"array\" === Nr(t.value.stops) && \"array\" === Nr(t.value.stops[0]) && \"object\" === Nr(t.value.stops[0][0]),\n          c = ni({\n        key: t.key,\n        value: t.value,\n        valueSpec: t.styleSpec.function,\n        style: t.style,\n        styleSpec: t.styleSpec,\n        objectElementValidators: {\n          stops: function stops(t) {\n            if (\"identity\" === r) return [new Rt(t.key, t.value, 'identity function may not have a \"stops\" property')];\n            var e = [];\n            var i = t.value;\n            return e = e.concat(si({\n              key: t.key,\n              value: i,\n              valueSpec: t.valueSpec,\n              style: t.style,\n              styleSpec: t.styleSpec,\n              arrayElementValidator: h\n            })), \"array\" === Nr(i) && 0 === i.length && e.push(new Rt(t.key, i, \"array must have at least one stop\")), e;\n          },\n          default: function _default(t) {\n            return Mi({\n              key: t.key,\n              value: t.value,\n              valueSpec: e,\n              style: t.style,\n              styleSpec: t.styleSpec\n            });\n          }\n        }\n      });\n      return \"identity\" === r && o && c.push(new Rt(t.key, t.value, 'missing required property \"property\"')), \"identity\" === r || t.value.stops || c.push(new Rt(t.key, t.value, 'missing required property \"stops\"')), \"exponential\" === r && t.valueSpec.expression && !qr(t.valueSpec) && c.push(new Rt(t.key, t.value, \"exponential functions not supported\")), t.styleSpec.$version >= 8 && (l && !Or(t.valueSpec) ? c.push(new Rt(t.key, t.value, \"property functions not supported\")) : o && !$r(t.valueSpec) && c.push(new Rt(t.key, t.value, \"zoom functions not supported\"))), \"categorical\" !== r && !u || void 0 !== t.value.property || c.push(new Rt(t.key, t.value, '\"property\" property is required')), c;\n\n      function h(t) {\n        var r = [];\n        var i = t.value,\n            o = t.key;\n        if (\"array\" !== Nr(i)) return [new Rt(o, i, \"array expected, \".concat(Nr(i), \" found\"))];\n        if (2 !== i.length) return [new Rt(o, i, \"array length 2 expected, length \".concat(i.length, \" found\"))];\n\n        if (u) {\n          if (\"object\" !== Nr(i[0])) return [new Rt(o, i, \"object expected, \".concat(Nr(i[0]), \" found\"))];\n          if (void 0 === i[0].zoom) return [new Rt(o, i, \"object stop key must have zoom\")];\n          if (void 0 === i[0].value) return [new Rt(o, i, \"object stop key must have value\")];\n          if (s && s > Ot(i[0].zoom)) return [new Rt(o, i[0].zoom, \"stop zoom values must appear in ascending order\")];\n          Ot(i[0].zoom) !== s && (s = Ot(i[0].zoom), n = void 0, a = {}), r = r.concat(ni({\n            key: \"\".concat(o, \"[0]\"),\n            value: i[0],\n            valueSpec: {\n              zoom: {}\n            },\n            style: t.style,\n            styleSpec: t.styleSpec,\n            objectElementValidators: {\n              zoom: ai,\n              value: p\n            }\n          }));\n        } else r = r.concat(p({\n          key: \"\".concat(o, \"[0]\"),\n          value: i[0],\n          valueSpec: {},\n          style: t.style,\n          styleSpec: t.styleSpec\n        }, i));\n\n        return Jr($t(i[1])) ? r.concat([new Rt(\"\".concat(o, \"[1]\"), i[1], \"expressions are not allowed in function stops.\")]) : r.concat(Mi({\n          key: \"\".concat(o, \"[1]\"),\n          value: i[1],\n          valueSpec: e,\n          style: t.style,\n          styleSpec: t.styleSpec\n        }));\n      }\n\n      function p(t, s) {\n        var o = Nr(t.value),\n            l = Ot(t.value),\n            u = null !== t.value ? t.value : s;\n\n        if (i) {\n          if (o !== i) return [new Rt(t.key, u, \"\".concat(o, \" stop domain type must match previous stop domain type \").concat(i))];\n        } else i = o;\n\n        if (\"number\" !== o && \"string\" !== o && \"boolean\" !== o) return [new Rt(t.key, u, \"stop domain value must be a number, string, or boolean\")];\n\n        if (\"number\" !== o && \"categorical\" !== r) {\n          var _i35 = \"number expected, \".concat(o, \" found\");\n\n          return Or(e) && void 0 === r && (_i35 += '\\nIf you intended to use a categorical function, specify `\"type\": \"categorical\"`.'), [new Rt(t.key, u, _i35)];\n        }\n\n        return \"categorical\" !== r || \"number\" !== o || isFinite(l) && Math.floor(l) === l ? \"categorical\" !== r && \"number\" === o && void 0 !== n && l < n ? [new Rt(t.key, u, \"stop domain values must appear in ascending order\")] : (n = l, \"categorical\" === r && l in a ? [new Rt(t.key, u, \"stop domain values must be unique\")] : (a[l] = !0, [])) : [new Rt(t.key, u, \"integer expected, found \".concat(l))];\n      }\n    }\n\n    function li(t) {\n      var e = (\"property\" === t.expressionContext ? ri : Qr)($t(t.value), t.valueSpec);\n      if (\"error\" === e.result) return e.value.map(function (e) {\n        return new Rt(\"\".concat(t.key).concat(e.key), t.value, e.message);\n      });\n      var r = e.value.expression || e.value._styleExpression.expression;\n      if (\"property\" === t.expressionContext && \"text-font\" === t.propertyKey && !r.outputDefined()) return [new Rt(t.key, t.value, \"Invalid data expression for \\\"\".concat(t.propertyKey, \"\\\". Output values must be contained as literals within the expression.\"))];\n      if (\"property\" === t.expressionContext && \"layout\" === t.propertyType && !Ze(r)) return [new Rt(t.key, t.value, '\"feature-state\" data expressions are not supported with layout properties.')];\n      if (\"filter\" === t.expressionContext && !Ze(r)) return [new Rt(t.key, t.value, '\"feature-state\" data expressions are not supported with filters.')];\n\n      if (t.expressionContext && 0 === t.expressionContext.indexOf(\"cluster\")) {\n        if (!Xe(r, [\"zoom\", \"feature-state\"])) return [new Rt(t.key, t.value, '\"zoom\" and \"feature-state\" expressions are not supported with cluster properties.')];\n        if (\"cluster-initial\" === t.expressionContext && !Ge(r)) return [new Rt(t.key, t.value, \"Feature data expressions are not supported with initial expression part of cluster properties.\")];\n      }\n\n      return [];\n    }\n\n    function ui(t) {\n      var e = t.key,\n          r = t.value,\n          i = t.valueSpec,\n          n = [];\n      return Array.isArray(i.values) ? -1 === i.values.indexOf(Ot(r)) && n.push(new Rt(e, r, \"expected one of [\".concat(i.values.join(\", \"), \"], \").concat(JSON.stringify(r), \" found\"))) : -1 === Object.keys(i.values).indexOf(Ot(r)) && n.push(new Rt(e, r, \"expected one of [\".concat(Object.keys(i.values).join(\", \"), \"], \").concat(JSON.stringify(r), \" found\"))), n;\n    }\n\n    function ci(t) {\n      if (!0 === t || !1 === t) return !0;\n      if (!Array.isArray(t) || 0 === t.length) return !1;\n\n      switch (t[0]) {\n        case \"has\":\n          return t.length >= 2 && \"$id\" !== t[1] && \"$type\" !== t[1];\n\n        case \"in\":\n          return t.length >= 3 && (\"string\" != typeof t[1] || Array.isArray(t[2]));\n\n        case \"!in\":\n        case \"!has\":\n        case \"none\":\n          return !1;\n\n        case \"==\":\n        case \"!=\":\n        case \">\":\n        case \">=\":\n        case \"<\":\n        case \"<=\":\n          return 3 !== t.length || Array.isArray(t[1]) || Array.isArray(t[2]);\n\n        case \"any\":\n        case \"all\":\n          var _iterator42 = _createForOfIteratorHelper(t.slice(1)),\n              _step42;\n\n          try {\n            for (_iterator42.s(); !(_step42 = _iterator42.n()).done;) {\n              var _e44 = _step42.value;\n              if (!ci(_e44) && \"boolean\" != typeof _e44) return !1;\n            }\n          } catch (err) {\n            _iterator42.e(err);\n          } finally {\n            _iterator42.f();\n          }\n\n          return !0;\n\n        default:\n          return !0;\n      }\n    }\n\n    var hi = {\n      type: \"boolean\",\n      default: !1,\n      transition: !1,\n      \"property-type\": \"data-driven\",\n      expression: {\n        interpolated: !1,\n        parameters: [\"zoom\", \"feature\"]\n      }\n    };\n\n    function pi(t) {\n      if (null == t) return {\n        filter: function filter() {\n          return !0;\n        },\n        needGeometry: !1\n      };\n      ci(t) || (t = fi(t));\n      var e = Qr(t, hi);\n      if (\"error\" === e.result) throw new Error(e.value.map(function (t) {\n        return \"\".concat(t.key, \": \").concat(t.message);\n      }).join(\", \"));\n      return {\n        filter: function filter(t, r, i) {\n          return e.value.evaluate(t, r, {}, i);\n        },\n        needGeometry: function t(e) {\n          if (!Array.isArray(e)) return !1;\n          if (\"within\" === e[0]) return !0;\n\n          for (var _r51 = 1; _r51 < e.length; _r51++) {\n            if (t(e[_r51])) return !0;\n          }\n\n          return !1;\n        }(t)\n      };\n    }\n\n    function di(t, e) {\n      return t < e ? -1 : t > e ? 1 : 0;\n    }\n\n    function fi(t) {\n      if (!t) return !0;\n      var e = t[0];\n      return t.length <= 1 ? \"any\" !== e : \"==\" === e ? yi(t[1], t[2], \"==\") : \"!=\" === e ? xi(yi(t[1], t[2], \"==\")) : \"<\" === e || \">\" === e || \"<=\" === e || \">=\" === e ? yi(t[1], t[2], e) : \"any\" === e ? (r = t.slice(1), [\"any\"].concat(r.map(fi))) : \"all\" === e ? [\"all\"].concat(t.slice(1).map(fi)) : \"none\" === e ? [\"all\"].concat(t.slice(1).map(fi).map(xi)) : \"in\" === e ? mi(t[1], t.slice(2)) : \"!in\" === e ? xi(mi(t[1], t.slice(2))) : \"has\" === e ? gi(t[1]) : \"!has\" === e ? xi(gi(t[1])) : \"within\" !== e || t;\n      var r;\n    }\n\n    function yi(t, e, r) {\n      switch (t) {\n        case \"$type\":\n          return [\"filter-type-\".concat(r), e];\n\n        case \"$id\":\n          return [\"filter-id-\".concat(r), e];\n\n        default:\n          return [\"filter-\".concat(r), t, e];\n      }\n    }\n\n    function mi(t, e) {\n      if (0 === e.length) return !1;\n\n      switch (t) {\n        case \"$type\":\n          return [\"filter-type-in\", [\"literal\", e]];\n\n        case \"$id\":\n          return [\"filter-id-in\", [\"literal\", e]];\n\n        default:\n          return e.length > 200 && !e.some(function (t) {\n            return _typeof(t) != _typeof(e[0]);\n          }) ? [\"filter-in-large\", t, [\"literal\", e.sort(di)]] : [\"filter-in-small\", t, [\"literal\", e]];\n      }\n    }\n\n    function gi(t) {\n      switch (t) {\n        case \"$type\":\n          return !0;\n\n        case \"$id\":\n          return [\"filter-has-id\"];\n\n        default:\n          return [\"filter-has\", t];\n      }\n    }\n\n    function xi(t) {\n      return [\"!\", t];\n    }\n\n    function vi(t) {\n      return ci($t(t.value)) ? li(Ut({}, t, {\n        expressionContext: \"filter\",\n        valueSpec: {\n          value: \"boolean\"\n        }\n      })) : function t(e) {\n        var r = e.value,\n            i = e.key;\n        if (\"array\" !== Nr(r)) return [new Rt(i, r, \"array expected, \".concat(Nr(r), \" found\"))];\n        var n = e.styleSpec;\n        var s,\n            a = [];\n        if (r.length < 1) return [new Rt(i, r, \"filter array must have at least 1 element\")];\n\n        switch (a = a.concat(ui({\n          key: \"\".concat(i, \"[0]\"),\n          value: r[0],\n          valueSpec: n.filter_operator,\n          style: e.style,\n          styleSpec: e.styleSpec\n        })), Ot(r[0])) {\n          case \"<\":\n          case \"<=\":\n          case \">\":\n          case \">=\":\n            r.length >= 2 && \"$type\" === Ot(r[1]) && a.push(new Rt(i, r, \"\\\"$type\\\" cannot be use with operator \\\"\".concat(r[0], \"\\\"\")));\n\n          case \"==\":\n          case \"!=\":\n            3 !== r.length && a.push(new Rt(i, r, \"filter array for operator \\\"\".concat(r[0], \"\\\" must have 3 elements\")));\n\n          case \"in\":\n          case \"!in\":\n            r.length >= 2 && (s = Nr(r[1]), \"string\" !== s && a.push(new Rt(\"\".concat(i, \"[1]\"), r[1], \"string expected, \".concat(s, \" found\"))));\n\n            for (var _t44 = 2; _t44 < r.length; _t44++) {\n              s = Nr(r[_t44]), \"$type\" === Ot(r[1]) ? a = a.concat(ui({\n                key: \"\".concat(i, \"[\").concat(_t44, \"]\"),\n                value: r[_t44],\n                valueSpec: n.geometry_type,\n                style: e.style,\n                styleSpec: e.styleSpec\n              })) : \"string\" !== s && \"number\" !== s && \"boolean\" !== s && a.push(new Rt(\"\".concat(i, \"[\").concat(_t44, \"]\"), r[_t44], \"string, number, or boolean expected, \".concat(s, \" found\")));\n            }\n\n            break;\n\n          case \"any\":\n          case \"all\":\n          case \"none\":\n            for (var _n26 = 1; _n26 < r.length; _n26++) {\n              a = a.concat(t({\n                key: \"\".concat(i, \"[\").concat(_n26, \"]\"),\n                value: r[_n26],\n                style: e.style,\n                styleSpec: e.styleSpec\n              }));\n            }\n\n            break;\n\n          case \"has\":\n          case \"!has\":\n            s = Nr(r[1]), 2 !== r.length ? a.push(new Rt(i, r, \"filter array for \\\"\".concat(r[0], \"\\\" operator must have 2 elements\"))) : \"string\" !== s && a.push(new Rt(\"\".concat(i, \"[1]\"), r[1], \"string expected, \".concat(s, \" found\")));\n            break;\n\n          case \"within\":\n            s = Nr(r[1]), 2 !== r.length ? a.push(new Rt(i, r, \"filter array for \\\"\".concat(r[0], \"\\\" operator must have 2 elements\"))) : \"object\" !== s && a.push(new Rt(\"\".concat(i, \"[1]\"), r[1], \"object expected, \".concat(s, \" found\")));\n        }\n\n        return a;\n      }(t);\n    }\n\n    function bi(t, e) {\n      var r = t.key,\n          i = t.style,\n          n = t.styleSpec,\n          s = t.value,\n          a = t.objectKey,\n          o = n[\"\".concat(e, \"_\").concat(t.layerType)];\n      if (!o) return [];\n      var l = a.match(/^(.*)-transition$/);\n      if (\"paint\" === e && l && o[l[1]] && o[l[1]].transition) return Mi({\n        key: r,\n        value: s,\n        valueSpec: n.transition,\n        style: i,\n        styleSpec: n\n      });\n      var u = t.valueSpec || o[a];\n      if (!u) return [new Rt(r, s, \"unknown property \\\"\".concat(a, \"\\\"\"))];\n      var c;\n      if (\"string\" === Nr(s) && Or(u) && !u.tokens && (c = /^{([^}]+)}$/.exec(s))) return [new Rt(r, s, \"\\\"\".concat(a, \"\\\" does not support interpolation syntax\\n\") + \"Use an identity property function instead: `{ \\\"type\\\": \\\"identity\\\", \\\"property\\\": \".concat(JSON.stringify(c[1]), \" }`.\"))];\n      var h = [];\n      return \"symbol\" === t.layerType && (\"text-field\" === a && i && !i.glyphs && h.push(new Rt(r, s, 'use of \"text-field\" requires a style \"glyphs\" property')), \"text-font\" === a && jr($t(s)) && \"identity\" === Ot(s.type) && h.push(new Rt(r, s, '\"text-font\" does not support identity functions'))), h.concat(Mi({\n        key: t.key,\n        value: s,\n        valueSpec: u,\n        style: i,\n        styleSpec: n,\n        expressionContext: \"property\",\n        propertyType: e,\n        propertyKey: a\n      }));\n    }\n\n    function wi(t) {\n      return bi(t, \"paint\");\n    }\n\n    function _i(t) {\n      return bi(t, \"layout\");\n    }\n\n    function ki(t) {\n      var e = [];\n      var r = t.value,\n          i = t.key,\n          n = t.style,\n          s = t.styleSpec;\n      r.type || r.ref || e.push(new Rt(i, r, 'either \"type\" or \"ref\" is required'));\n      var a = Ot(r.type);\n      var o = Ot(r.ref);\n\n      if (r.id) {\n        var _s19 = Ot(r.id);\n\n        for (var _a18 = 0; _a18 < t.arrayIndex; _a18++) {\n          var _t45 = n.layers[_a18];\n          Ot(_t45.id) === _s19 && e.push(new Rt(i, r.id, \"duplicate layer id \\\"\".concat(r.id, \"\\\", previously used at line \").concat(_t45.id.__line__)));\n        }\n      }\n\n      if (\"ref\" in r) {\n        var _t46;\n\n        [\"type\", \"source\", \"source-layer\", \"filter\", \"layout\"].forEach(function (t) {\n          t in r && e.push(new Rt(i, r[t], \"\\\"\".concat(t, \"\\\" is prohibited for ref layers\")));\n        }), n.layers.forEach(function (e) {\n          Ot(e.id) === o && (_t46 = e);\n        }), _t46 ? _t46.ref ? e.push(new Rt(i, r.ref, \"ref cannot reference another ref layer\")) : a = Ot(_t46.type) : e.push(new Rt(i, r.ref, \"ref layer \\\"\".concat(o, \"\\\" not found\")));\n      } else if (\"background\" !== a && \"sky\" !== a) if (r.source) {\n        var _t47 = n.sources && n.sources[r.source],\n            _s20 = _t47 && Ot(_t47.type);\n\n        _t47 ? \"vector\" === _s20 && \"raster\" === a ? e.push(new Rt(i, r.source, \"layer \\\"\".concat(r.id, \"\\\" requires a raster source\"))) : \"raster\" === _s20 && \"raster\" !== a ? e.push(new Rt(i, r.source, \"layer \\\"\".concat(r.id, \"\\\" requires a vector source\"))) : \"vector\" !== _s20 || r[\"source-layer\"] ? \"raster-dem\" === _s20 && \"hillshade\" !== a ? e.push(new Rt(i, r.source, \"raster-dem source can only be used with layer type 'hillshade'.\")) : \"line\" !== a || !r.paint || !r.paint[\"line-gradient\"] || \"geojson\" === _s20 && _t47.lineMetrics || e.push(new Rt(i, r, \"layer \\\"\".concat(r.id, \"\\\" specifies a line-gradient, which requires a GeoJSON source with `lineMetrics` enabled.\"))) : e.push(new Rt(i, r, \"layer \\\"\".concat(r.id, \"\\\" must specify a \\\"source-layer\\\"\"))) : e.push(new Rt(i, r.source, \"source \\\"\".concat(r.source, \"\\\" not found\")));\n      } else e.push(new Rt(i, r, 'missing required property \"source\"'));\n\n      return e = e.concat(ni({\n        key: i,\n        value: r,\n        valueSpec: s.layer,\n        style: t.style,\n        styleSpec: t.styleSpec,\n        objectElementValidators: {\n          \"*\": function _() {\n            return [];\n          },\n          type: function type() {\n            return Mi({\n              key: \"\".concat(i, \".type\"),\n              value: r.type,\n              valueSpec: s.layer.type,\n              style: t.style,\n              styleSpec: t.styleSpec,\n              object: r,\n              objectKey: \"type\"\n            });\n          },\n          filter: vi,\n          layout: function layout(t) {\n            return ni({\n              layer: r,\n              key: t.key,\n              value: t.value,\n              style: t.style,\n              styleSpec: t.styleSpec,\n              objectElementValidators: {\n                \"*\": function _(t) {\n                  return _i(Ut({\n                    layerType: a\n                  }, t));\n                }\n              }\n            });\n          },\n          paint: function paint(t) {\n            return ni({\n              layer: r,\n              key: t.key,\n              value: t.value,\n              style: t.style,\n              styleSpec: t.styleSpec,\n              objectElementValidators: {\n                \"*\": function _(t) {\n                  return wi(Ut({\n                    layerType: a\n                  }, t));\n                }\n              }\n            });\n          }\n        }\n      })), e;\n    }\n\n    function Ai(t) {\n      var e = t.value,\n          r = t.key,\n          i = Nr(e);\n      return \"string\" !== i ? [new Rt(r, e, \"string expected, \".concat(i, \" found\"))] : [];\n    }\n\n    var Si = {\n      promoteId: function promoteId(_ref135) {\n        var t = _ref135.key,\n            e = _ref135.value;\n        if (\"string\" === Nr(e)) return Ai({\n          key: t,\n          value: e\n        });\n        {\n          var _r52 = [];\n\n          for (var _i36 in e) {\n            _r52.push.apply(_r52, _toConsumableArray(Ai({\n              key: \"\".concat(t, \".\").concat(_i36),\n              value: e[_i36]\n            })));\n          }\n\n          return _r52;\n        }\n      }\n    };\n\n    function Ii(t) {\n      var e = t.value,\n          r = t.key,\n          i = t.styleSpec,\n          n = t.style;\n      if (!e.type) return [new Rt(r, e, '\"type\" is required')];\n      var s = Ot(e.type);\n      var a;\n\n      switch (s) {\n        case \"vector\":\n        case \"raster\":\n        case \"raster-dem\":\n          return a = ni({\n            key: r,\n            value: e,\n            valueSpec: i[\"source_\".concat(s.replace(\"-\", \"_\"))],\n            style: t.style,\n            styleSpec: i,\n            objectElementValidators: Si\n          }), a;\n\n        case \"geojson\":\n          if (a = ni({\n            key: r,\n            value: e,\n            valueSpec: i.source_geojson,\n            style: n,\n            styleSpec: i,\n            objectElementValidators: Si\n          }), e.cluster) for (var _t48 in e.clusterProperties) {\n            var _a19, _a20;\n\n            var _e$clusterProperties$ = _slicedToArray(e.clusterProperties[_t48], 2),\n                _i37 = _e$clusterProperties$[0],\n                _n27 = _e$clusterProperties$[1],\n                _s21 = \"string\" == typeof _i37 ? [_i37, [\"accumulated\"], [\"get\", _t48]] : _i37;\n\n            (_a19 = a).push.apply(_a19, _toConsumableArray(li({\n              key: \"\".concat(r, \".\").concat(_t48, \".map\"),\n              value: _n27,\n              expressionContext: \"cluster-map\"\n            }))), (_a20 = a).push.apply(_a20, _toConsumableArray(li({\n              key: \"\".concat(r, \".\").concat(_t48, \".reduce\"),\n              value: _s21,\n              expressionContext: \"cluster-reduce\"\n            })));\n          }\n          return a;\n\n        case \"video\":\n          return ni({\n            key: r,\n            value: e,\n            valueSpec: i.source_video,\n            style: n,\n            styleSpec: i\n          });\n\n        case \"image\":\n          return ni({\n            key: r,\n            value: e,\n            valueSpec: i.source_image,\n            style: n,\n            styleSpec: i\n          });\n\n        case \"canvas\":\n          return [new Rt(r, null, \"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.\", \"source.canvas\")];\n\n        default:\n          return ui({\n            key: \"\".concat(r, \".type\"),\n            value: e.type,\n            valueSpec: {\n              values: [\"vector\", \"raster\", \"raster-dem\", \"geojson\", \"video\", \"image\"]\n            },\n            style: n,\n            styleSpec: i\n          });\n      }\n    }\n\n    function Ti(t) {\n      var e = t.value,\n          r = t.styleSpec,\n          i = r.light,\n          n = t.style;\n      var s = [];\n      var a = Nr(e);\n      if (void 0 === e) return s;\n      if (\"object\" !== a) return s = s.concat([new Rt(\"light\", e, \"object expected, \".concat(a, \" found\"))]), s;\n\n      for (var _t49 in e) {\n        var _a21 = _t49.match(/^(.*)-transition$/);\n\n        s = s.concat(_a21 && i[_a21[1]] && i[_a21[1]].transition ? Mi({\n          key: _t49,\n          value: e[_t49],\n          valueSpec: r.transition,\n          style: n,\n          styleSpec: r\n        }) : i[_t49] ? Mi({\n          key: _t49,\n          value: e[_t49],\n          valueSpec: i[_t49],\n          style: n,\n          styleSpec: r\n        }) : [new Rt(_t49, e[_t49], \"unknown property \\\"\".concat(_t49, \"\\\"\"))]);\n      }\n\n      return s;\n    }\n\n    function zi(t) {\n      var e = t.value,\n          r = t.key,\n          i = t.style,\n          n = t.styleSpec,\n          s = n.terrain;\n      var a = [];\n      var o = Nr(e);\n      if (void 0 === e) return a;\n      if (\"object\" !== o) return a = a.concat([new Rt(\"terrain\", e, \"object expected, \".concat(o, \" found\"))]), a;\n\n      for (var _t50 in e) {\n        var _r53 = _t50.match(/^(.*)-transition$/);\n\n        a = a.concat(_r53 && s[_r53[1]] && s[_r53[1]].transition ? Mi({\n          key: _t50,\n          value: e[_t50],\n          valueSpec: n.transition,\n          style: i,\n          styleSpec: n\n        }) : s[_t50] ? Mi({\n          key: _t50,\n          value: e[_t50],\n          valueSpec: s[_t50],\n          style: i,\n          styleSpec: n\n        }) : [new Rt(_t50, e[_t50], \"unknown property \\\"\".concat(_t50, \"\\\"\"))]);\n      }\n\n      if (e.source) {\n        var _t51 = i.sources && i.sources[e.source],\n            _n28 = _t51 && Ot(_t51.type);\n\n        _t51 ? \"raster-dem\" !== _n28 && a.push(new Rt(r, e.source, \"terrain cannot be used with a source of type \".concat(_n28, \", it only be used with a \\\"raster-dem\\\" source type\"))) : a.push(new Rt(r, e.source, \"source \\\"\".concat(e.source, \"\\\" not found\")));\n      } else a.push(new Rt(r, e, 'terrain is missing required property \"source\"'));\n\n      return a;\n    }\n\n    var Ei = {\n      \"*\": function _() {\n        return [];\n      },\n      array: si,\n      boolean: function boolean(t) {\n        var e = t.value,\n            r = t.key,\n            i = Nr(e);\n        return \"boolean\" !== i ? [new Rt(r, e, \"boolean expected, \".concat(i, \" found\"))] : [];\n      },\n      number: ai,\n      color: function color(t) {\n        var e = t.key,\n            r = t.value,\n            i = Nr(r);\n        return \"string\" !== i ? [new Rt(e, r, \"color expected, \".concat(i, \" found\"))] : null === oe(r) ? [new Rt(e, r, \"color expected, \\\"\".concat(r, \"\\\" found\"))] : [];\n      },\n      constants: Lt,\n      enum: ui,\n      filter: vi,\n      function: oi,\n      layer: ki,\n      object: ni,\n      source: Ii,\n      light: Ti,\n      terrain: zi,\n      string: Ai,\n      formatted: function formatted(t) {\n        return 0 === Ai(t).length ? [] : li(t);\n      },\n      resolvedImage: function resolvedImage(t) {\n        return 0 === Ai(t).length ? [] : li(t);\n      }\n    };\n\n    function Mi(t) {\n      var e = t.value,\n          r = t.valueSpec,\n          i = t.styleSpec;\n      return r.expression && jr(Ot(e)) ? oi(t) : r.expression && Jr($t(e)) ? li(t) : r.type && Ei[r.type] ? Ei[r.type](t) : ni(Ut({}, t, {\n        valueSpec: r.type ? i[r.type] : r\n      }));\n    }\n\n    function Bi(t) {\n      var e = t.value,\n          r = t.key,\n          i = Ai(t);\n      return i.length || (-1 === e.indexOf(\"{fontstack}\") && i.push(new Rt(r, e, '\"glyphs\" url must include a \"{fontstack}\" token')), -1 === e.indexOf(\"{range}\") && i.push(new Rt(r, e, '\"glyphs\" url must include a \"{range}\" token'))), i;\n    }\n\n    function Di(t) {\n      var e = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : Ft;\n      var r = [];\n      return r = r.concat(Mi({\n        key: \"\",\n        value: t,\n        valueSpec: e.$root,\n        styleSpec: e,\n        style: t,\n        objectElementValidators: {\n          glyphs: Bi,\n          \"*\": function _() {\n            return [];\n          }\n        }\n      })), t.constants && (r = r.concat(Lt({\n        key: \"constants\",\n        value: t.constants,\n        style: t,\n        styleSpec: e\n      }))), Ci(r);\n    }\n\n    function Ci(t) {\n      return [].concat(t).sort(function (t, e) {\n        return t.line - e.line;\n      });\n    }\n\n    function Pi(t) {\n      return function () {\n        for (var _len5 = arguments.length, e = new Array(_len5), _key5 = 0; _key5 < _len5; _key5++) {\n          e[_key5] = arguments[_key5];\n        }\n\n        return Ci(t.apply(this, e));\n      };\n    }\n\n    Di.source = Pi(Ii), Di.light = Pi(Ti), Di.terrain = Pi(zi), Di.layer = Pi(ki), Di.filter = Pi(vi), Di.paintProperty = Pi(wi), Di.layoutProperty = Pi(_i);\n    var Vi = Di,\n        Fi = Vi.light,\n        Ri = Vi.paintProperty,\n        Li = Vi.layoutProperty;\n\n    function Ui(t, e) {\n      var r = !1;\n\n      if (e && e.length) {\n        var _iterator43 = _createForOfIteratorHelper(e),\n            _step43;\n\n        try {\n          for (_iterator43.s(); !(_step43 = _iterator43.n()).done;) {\n            var _i38 = _step43.value;\n            t.fire(new Pt(new Error(_i38.message))), r = !0;\n          }\n        } catch (err) {\n          _iterator43.e(err);\n        } finally {\n          _iterator43.f();\n        }\n      }\n\n      return r;\n    }\n\n    var Oi = $i;\n\n    function $i(t, e, r) {\n      var i = this.cells = [];\n\n      if (t instanceof ArrayBuffer) {\n        this.arrayBuffer = t;\n        var n = new Int32Array(this.arrayBuffer);\n        t = n[0], this.d = (e = n[1]) + 2 * (r = n[2]);\n\n        for (var s = 0; s < this.d * this.d; s++) {\n          var a = n[3 + s],\n              o = n[3 + s + 1];\n          i.push(a === o ? null : n.subarray(a, o));\n        }\n\n        var l = n[3 + i.length + 1];\n        this.keys = n.subarray(n[3 + i.length], l), this.bboxes = n.subarray(l), this.insert = this._insertReadonly;\n      } else {\n        this.d = e + 2 * r;\n\n        for (var u = 0; u < this.d * this.d; u++) {\n          i.push([]);\n        }\n\n        this.keys = [], this.bboxes = [];\n      }\n\n      this.n = e, this.extent = t, this.padding = r, this.scale = e / t, this.uid = 0;\n      var c = r / e * t;\n      this.min = -c, this.max = t + c;\n    }\n\n    $i.prototype.insert = function (t, e, r, i, n) {\n      this._forEachCell(e, r, i, n, this._insertCell, this.uid++), this.keys.push(t), this.bboxes.push(e), this.bboxes.push(r), this.bboxes.push(i), this.bboxes.push(n);\n    }, $i.prototype._insertReadonly = function () {\n      throw \"Cannot insert into a GridIndex created from an ArrayBuffer.\";\n    }, $i.prototype._insertCell = function (t, e, r, i, n, s) {\n      this.cells[n].push(s);\n    }, $i.prototype.query = function (t, e, r, i, n) {\n      var s = this.min,\n          a = this.max;\n      if (t <= s && e <= s && a <= r && a <= i && !n) return Array.prototype.slice.call(this.keys);\n      var o = [];\n      return this._forEachCell(t, e, r, i, this._queryCell, o, {}, n), o;\n    }, $i.prototype._queryCell = function (t, e, r, i, n, s, a, o) {\n      var l = this.cells[n];\n      if (null !== l) for (var u = this.keys, c = this.bboxes, h = 0; h < l.length; h++) {\n        var p = l[h];\n\n        if (void 0 === a[p]) {\n          var d = 4 * p;\n          (o ? o(c[d + 0], c[d + 1], c[d + 2], c[d + 3]) : t <= c[d + 2] && e <= c[d + 3] && r >= c[d + 0] && i >= c[d + 1]) ? (a[p] = !0, s.push(u[p])) : a[p] = !1;\n        }\n      }\n    }, $i.prototype._forEachCell = function (t, e, r, i, n, s, a, o) {\n      for (var l = this._convertToCellCoord(t), u = this._convertToCellCoord(e), c = this._convertToCellCoord(r), h = this._convertToCellCoord(i), p = l; p <= c; p++) {\n        for (var d = u; d <= h; d++) {\n          var f = this.d * d + p;\n          if ((!o || o(this._convertFromCellCoord(p), this._convertFromCellCoord(d), this._convertFromCellCoord(p + 1), this._convertFromCellCoord(d + 1))) && n.call(this, t, e, r, i, f, s, a, o)) return;\n        }\n      }\n    }, $i.prototype._convertFromCellCoord = function (t) {\n      return (t - this.padding) / this.scale;\n    }, $i.prototype._convertToCellCoord = function (t) {\n      return Math.max(0, Math.min(this.d - 1, Math.floor(t * this.scale) + this.padding));\n    }, $i.prototype.toArrayBuffer = function () {\n      if (this.arrayBuffer) return this.arrayBuffer;\n\n      for (var t = this.cells, e = 3 + this.cells.length + 1 + 1, r = 0, i = 0; i < this.cells.length; i++) {\n        r += this.cells[i].length;\n      }\n\n      var n = new Int32Array(e + r + this.keys.length + this.bboxes.length);\n      n[0] = this.extent, n[1] = this.n, n[2] = this.padding;\n\n      for (var s = e, a = 0; a < t.length; a++) {\n        var o = t[a];\n        n[3 + a] = s, n.set(o, s), s += o.length;\n      }\n\n      return n[3 + t.length] = s, n.set(this.keys, s), n[3 + t.length + 1] = s += this.keys.length, n.set(this.bboxes, s), s += this.bboxes.length, n.buffer;\n    };\n    var qi = s.ImageData,\n        Ni = s.ImageBitmap,\n        ji = {};\n\n    function Gi(t, e) {\n      var r = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n      Object.defineProperty(e, \"_classRegistryKey\", {\n        value: t,\n        writeable: !1\n      }), ji[t] = {\n        klass: e,\n        omit: r.omit || [],\n        shallow: r.shallow || []\n      };\n    }\n\n    Gi(\"Object\", Object), Oi.serialize = function (t, e) {\n      var r = t.toArrayBuffer();\n      return e && e.push(r), {\n        buffer: r\n      };\n    }, Oi.deserialize = function (t) {\n      return new Oi(t.buffer);\n    }, Gi(\"Grid\", Oi), Gi(\"Color\", le), Gi(\"Error\", Error), Gi(\"ResolvedImage\", pe), Gi(\"StylePropertyFunction\", ii), Gi(\"StyleExpression\", Wr, {\n      omit: [\"_evaluator\"]\n    }), Gi(\"ZoomDependentExpression\", ei), Gi(\"ZoomConstantExpression\", ti), Gi(\"CompoundExpression\", Te, {\n      omit: [\"_evaluate\"]\n    });\n\n    for (var _t52 in Cr) {\n      Cr[_t52]._classRegistryKey || Gi(\"Expression_\".concat(_t52), Cr[_t52]);\n    }\n\n    function Zi(t) {\n      return t && \"undefined\" != typeof ArrayBuffer && (t instanceof ArrayBuffer || t.constructor && \"ArrayBuffer\" === t.constructor.name);\n    }\n\n    function Xi(t) {\n      return Ni && t instanceof Ni;\n    }\n\n    function Ki(t, e) {\n      if (null == t || \"boolean\" == typeof t || \"number\" == typeof t || \"string\" == typeof t || t instanceof Boolean || t instanceof Number || t instanceof String || t instanceof Date || t instanceof RegExp) return t;\n      if (Zi(t) || Xi(t)) return e && e.push(t), t;\n\n      if (ArrayBuffer.isView(t)) {\n        var _r54 = t;\n        return e && e.push(_r54.buffer), _r54;\n      }\n\n      if (t instanceof qi) return e && e.push(t.data.buffer), t;\n\n      if (Array.isArray(t)) {\n        var _r55 = [];\n\n        var _iterator44 = _createForOfIteratorHelper(t),\n            _step44;\n\n        try {\n          for (_iterator44.s(); !(_step44 = _iterator44.n()).done;) {\n            var _i39 = _step44.value;\n\n            _r55.push(Ki(_i39, e));\n          }\n        } catch (err) {\n          _iterator44.e(err);\n        } finally {\n          _iterator44.f();\n        }\n\n        return _r55;\n      }\n\n      if (\"object\" == _typeof(t)) {\n        var _r56 = t.constructor,\n            _i40 = _r56._classRegistryKey;\n        if (!_i40) throw new Error(\"can't serialize object of unregistered class\");\n\n        var _n29 = _r56.serialize ? _r56.serialize(t, e) : {};\n\n        if (!_r56.serialize) {\n          for (var _r57 in t) {\n            if (!t.hasOwnProperty(_r57)) continue;\n            if (ji[_i40].omit.indexOf(_r57) >= 0) continue;\n            var _s22 = t[_r57];\n            _n29[_r57] = ji[_i40].shallow.indexOf(_r57) >= 0 ? _s22 : Ki(_s22, e);\n          }\n\n          t instanceof Error && (_n29.message = t.message);\n        }\n\n        if (_n29.$name) throw new Error(\"$name property is reserved for worker serialization logic.\");\n        return \"Object\" !== _i40 && (_n29.$name = _i40), _n29;\n      }\n\n      throw new Error(\"can't serialize object of type \".concat(_typeof(t)));\n    }\n\n    function Hi(t) {\n      if (null == t || \"boolean\" == typeof t || \"number\" == typeof t || \"string\" == typeof t || t instanceof Boolean || t instanceof Number || t instanceof String || t instanceof Date || t instanceof RegExp || Zi(t) || Xi(t) || ArrayBuffer.isView(t) || t instanceof qi) return t;\n      if (Array.isArray(t)) return t.map(Hi);\n\n      if (\"object\" == _typeof(t)) {\n        var _e45 = t.$name || \"Object\",\n            _r58 = ji[_e45].klass;\n\n        if (!_r58) throw new Error(\"can't deserialize unregistered class \".concat(_e45));\n        if (_r58.deserialize) return _r58.deserialize(t);\n\n        var _i41 = Object.create(_r58.prototype);\n\n        for (var _i42 = 0, _Object$keys = Object.keys(t); _i42 < _Object$keys.length; _i42++) {\n          var _r59 = _Object$keys[_i42];\n          if (\"$name\" === _r59) continue;\n          var _n30 = t[_r59];\n          _i41[_r59] = ji[_e45].shallow.indexOf(_r59) >= 0 ? _n30 : Hi(_n30);\n        }\n\n        return _i41;\n      }\n\n      throw new Error(\"can't deserialize object of type \".concat(_typeof(t)));\n    }\n\n    var Yi = /*#__PURE__*/function () {\n      function Yi() {\n        _classCallCheck(this, Yi);\n\n        this.first = !0;\n      }\n\n      _createClass(Yi, [{\n        key: \"update\",\n        value: function update(t, e) {\n          var r = Math.floor(t);\n          return this.first ? (this.first = !1, this.lastIntegerZoom = r, this.lastIntegerZoomTime = 0, this.lastZoom = t, this.lastFloorZoom = r, !0) : (this.lastFloorZoom > r ? (this.lastIntegerZoom = r + 1, this.lastIntegerZoomTime = e) : this.lastFloorZoom < r && (this.lastIntegerZoom = r, this.lastIntegerZoomTime = e), t !== this.lastZoom && (this.lastZoom = t, this.lastFloorZoom = r, !0));\n        }\n      }]);\n\n      return Yi;\n    }();\n\n    var Wi = function Wi(t) {\n      return t >= 1536 && t <= 1791;\n    },\n        Ji = function Ji(t) {\n      return t >= 1872 && t <= 1919;\n    },\n        Qi = function Qi(t) {\n      return t >= 2208 && t <= 2303;\n    },\n        tn = function tn(t) {\n      return t >= 11904 && t <= 12031;\n    },\n        en = function en(t) {\n      return t >= 12032 && t <= 12255;\n    },\n        rn = function rn(t) {\n      return t >= 12272 && t <= 12287;\n    },\n        nn = function nn(t) {\n      return t >= 12288 && t <= 12351;\n    },\n        sn = function sn(t) {\n      return t >= 12352 && t <= 12447;\n    },\n        an = function an(t) {\n      return t >= 12448 && t <= 12543;\n    },\n        on = function on(t) {\n      return t >= 12544 && t <= 12591;\n    },\n        ln = function ln(t) {\n      return t >= 12704 && t <= 12735;\n    },\n        un = function un(t) {\n      return t >= 12736 && t <= 12783;\n    },\n        cn = function cn(t) {\n      return t >= 12784 && t <= 12799;\n    },\n        hn = function hn(t) {\n      return t >= 12800 && t <= 13055;\n    },\n        pn = function pn(t) {\n      return t >= 13056 && t <= 13311;\n    },\n        dn = function dn(t) {\n      return t >= 13312 && t <= 19903;\n    },\n        fn = function fn(t) {\n      return t >= 19968 && t <= 40959;\n    },\n        yn = function yn(t) {\n      return t >= 40960 && t <= 42127;\n    },\n        mn = function mn(t) {\n      return t >= 42128 && t <= 42191;\n    },\n        gn = function gn(t) {\n      return t >= 44032 && t <= 55215;\n    },\n        xn = function xn(t) {\n      return t >= 63744 && t <= 64255;\n    },\n        vn = function vn(t) {\n      return t >= 64336 && t <= 65023;\n    },\n        bn = function bn(t) {\n      return t >= 65040 && t <= 65055;\n    },\n        wn = function wn(t) {\n      return t >= 65072 && t <= 65103;\n    },\n        _n = function _n(t) {\n      return t >= 65104 && t <= 65135;\n    },\n        kn = function kn(t) {\n      return t >= 65136 && t <= 65279;\n    },\n        An = function An(t) {\n      return t >= 65280 && t <= 65519;\n    };\n\n    function Sn(t) {\n      var _iterator45 = _createForOfIteratorHelper(t),\n          _step45;\n\n      try {\n        for (_iterator45.s(); !(_step45 = _iterator45.n()).done;) {\n          var _e46 = _step45.value;\n          if (zn(_e46.charCodeAt(0))) return !0;\n        }\n      } catch (err) {\n        _iterator45.e(err);\n      } finally {\n        _iterator45.f();\n      }\n\n      return !1;\n    }\n\n    function In(t) {\n      var _iterator46 = _createForOfIteratorHelper(t),\n          _step46;\n\n      try {\n        for (_iterator46.s(); !(_step46 = _iterator46.n()).done;) {\n          var _e47 = _step46.value;\n          if (!Tn(_e47.charCodeAt(0))) return !1;\n        }\n      } catch (err) {\n        _iterator46.e(err);\n      } finally {\n        _iterator46.f();\n      }\n\n      return !0;\n    }\n\n    function Tn(t) {\n      return !(Wi(t) || Ji(t) || Qi(t) || vn(t) || kn(t));\n    }\n\n    function zn(t) {\n      return !(746 !== t && 747 !== t && (t < 4352 || !(ln(t) || on(t) || wn(t) && !(t >= 65097 && t <= 65103) || xn(t) || pn(t) || tn(t) || un(t) || !(!nn(t) || t >= 12296 && t <= 12305 || t >= 12308 && t <= 12319 || 12336 === t) || dn(t) || fn(t) || hn(t) || function (t) {\n        return t >= 12592 && t <= 12687;\n      }(t) || function (t) {\n        return t >= 43360 && t <= 43391;\n      }(t) || function (t) {\n        return t >= 55216 && t <= 55295;\n      }(t) || function (t) {\n        return t >= 4352 && t <= 4607;\n      }(t) || gn(t) || sn(t) || rn(t) || function (t) {\n        return t >= 12688 && t <= 12703;\n      }(t) || en(t) || cn(t) || an(t) && 12540 !== t || !(!An(t) || 65288 === t || 65289 === t || 65293 === t || t >= 65306 && t <= 65310 || 65339 === t || 65341 === t || 65343 === t || t >= 65371 && t <= 65503 || 65507 === t || t >= 65512 && t <= 65519) || !(!_n(t) || t >= 65112 && t <= 65118 || t >= 65123 && t <= 65126) || function (t) {\n        return t >= 5120 && t <= 5759;\n      }(t) || function (t) {\n        return t >= 6320 && t <= 6399;\n      }(t) || bn(t) || function (t) {\n        return t >= 19904 && t <= 19967;\n      }(t) || yn(t) || mn(t))));\n    }\n\n    function En(t) {\n      return !(zn(t) || function (t) {\n        return !!(function (t) {\n          return t >= 128 && t <= 255;\n        }(t) && (167 === t || 169 === t || 174 === t || 177 === t || 188 === t || 189 === t || 190 === t || 215 === t || 247 === t) || function (t) {\n          return t >= 8192 && t <= 8303;\n        }(t) && (8214 === t || 8224 === t || 8225 === t || 8240 === t || 8241 === t || 8251 === t || 8252 === t || 8258 === t || 8263 === t || 8264 === t || 8265 === t || 8273 === t) || function (t) {\n          return t >= 8448 && t <= 8527;\n        }(t) || function (t) {\n          return t >= 8528 && t <= 8591;\n        }(t) || function (t) {\n          return t >= 8960 && t <= 9215;\n        }(t) && (t >= 8960 && t <= 8967 || t >= 8972 && t <= 8991 || t >= 8996 && t <= 9e3 || 9003 === t || t >= 9085 && t <= 9114 || t >= 9150 && t <= 9165 || 9167 === t || t >= 9169 && t <= 9179 || t >= 9186 && t <= 9215) || function (t) {\n          return t >= 9216 && t <= 9279;\n        }(t) && 9251 !== t || function (t) {\n          return t >= 9280 && t <= 9311;\n        }(t) || function (t) {\n          return t >= 9312 && t <= 9471;\n        }(t) || function (t) {\n          return t >= 9632 && t <= 9727;\n        }(t) || function (t) {\n          return t >= 9728 && t <= 9983;\n        }(t) && !(t >= 9754 && t <= 9759) || function (t) {\n          return t >= 11008 && t <= 11263;\n        }(t) && (t >= 11026 && t <= 11055 || t >= 11088 && t <= 11097 || t >= 11192 && t <= 11243) || nn(t) || an(t) || function (t) {\n          return t >= 57344 && t <= 63743;\n        }(t) || wn(t) || _n(t) || An(t) || 8734 === t || 8756 === t || 8757 === t || t >= 9984 && t <= 10087 || t >= 10102 && t <= 10131 || 65532 === t || 65533 === t);\n      }(t));\n    }\n\n    function Mn(t) {\n      return t >= 1424 && t <= 2303 || vn(t) || kn(t);\n    }\n\n    function Bn(t, e) {\n      return !(!e && Mn(t) || t >= 2304 && t <= 3583 || t >= 3840 && t <= 4255 || function (t) {\n        return t >= 6016 && t <= 6143;\n      }(t));\n    }\n\n    function Dn(t) {\n      var _iterator47 = _createForOfIteratorHelper(t),\n          _step47;\n\n      try {\n        for (_iterator47.s(); !(_step47 = _iterator47.n()).done;) {\n          var _e48 = _step47.value;\n          if (Mn(_e48.charCodeAt(0))) return !0;\n        }\n      } catch (err) {\n        _iterator47.e(err);\n      } finally {\n        _iterator47.f();\n      }\n\n      return !1;\n    }\n\n    var Cn = null,\n        Pn = \"unavailable\",\n        Vn = null;\n\n    var Fn = function Fn(t) {\n      t && \"string\" == typeof t && t.indexOf(\"NetworkError\") > -1 && (Pn = \"error\"), Cn && Cn(t);\n    };\n\n    function Rn() {\n      Ln.fire(new Ct(\"pluginStateChange\", {\n        pluginStatus: Pn,\n        pluginURL: Vn\n      }));\n    }\n\n    var Ln = new Vt(),\n        Un = function Un() {\n      return Pn;\n    },\n        On = function On() {\n      if (\"deferred\" !== Pn || !Vn) throw new Error(\"rtl-text-plugin cannot be downloaded unless a pluginURL is specified\");\n      Pn = \"loading\", Rn(), Vn && kt({\n        url: Vn\n      }, function (t) {\n        t ? Fn(t) : (Pn = \"loaded\", Rn());\n      });\n    },\n        $n = {\n      applyArabicShaping: null,\n      processBidirectionalText: null,\n      processStyledBidirectionalText: null,\n      isLoaded: function isLoaded() {\n        return \"loaded\" === Pn || null != $n.applyArabicShaping;\n      },\n      isLoading: function isLoading() {\n        return \"loading\" === Pn;\n      },\n      setState: function setState(t) {\n        Pn = t.pluginStatus, Vn = t.pluginURL;\n      },\n      isParsed: function isParsed() {\n        return null != $n.applyArabicShaping && null != $n.processBidirectionalText && null != $n.processStyledBidirectionalText;\n      },\n      getPluginURL: function getPluginURL() {\n        return Vn;\n      }\n    };\n\n    var qn = /*#__PURE__*/function () {\n      function qn(t, e) {\n        _classCallCheck(this, qn);\n\n        this.zoom = t, e ? (this.now = e.now, this.fadeDuration = e.fadeDuration, this.zoomHistory = e.zoomHistory, this.transition = e.transition) : (this.now = 0, this.fadeDuration = 0, this.zoomHistory = new Yi(), this.transition = {});\n      }\n\n      _createClass(qn, [{\n        key: \"isSupportedScript\",\n        value: function isSupportedScript(t) {\n          return function (t, e) {\n            var _iterator48 = _createForOfIteratorHelper(t),\n                _step48;\n\n            try {\n              for (_iterator48.s(); !(_step48 = _iterator48.n()).done;) {\n                var _r60 = _step48.value;\n                if (!Bn(_r60.charCodeAt(0), e)) return !1;\n              }\n            } catch (err) {\n              _iterator48.e(err);\n            } finally {\n              _iterator48.f();\n            }\n\n            return !0;\n          }(t, $n.isLoaded());\n        }\n      }, {\n        key: \"crossFadingFactor\",\n        value: function crossFadingFactor() {\n          return 0 === this.fadeDuration ? 1 : Math.min((this.now - this.zoomHistory.lastIntegerZoomTime) / this.fadeDuration, 1);\n        }\n      }, {\n        key: \"getCrossfadeParameters\",\n        value: function getCrossfadeParameters() {\n          var t = this.zoom,\n              e = t - Math.floor(t),\n              r = this.crossFadingFactor();\n          return t > this.zoomHistory.lastIntegerZoom ? {\n            fromScale: 2,\n            toScale: 1,\n            t: e + (1 - e) * r\n          } : {\n            fromScale: .5,\n            toScale: 1,\n            t: 1 - (1 - r) * e\n          };\n        }\n      }]);\n\n      return qn;\n    }();\n\n    var Nn = /*#__PURE__*/function () {\n      function Nn(t, e) {\n        _classCallCheck(this, Nn);\n\n        this.property = t, this.value = e, this.expression = function (t, e) {\n          if (jr(t)) return new ii(t, e);\n\n          if (Jr(t)) {\n            var _r61 = ri(t, e);\n\n            if (\"error\" === _r61.result) throw new Error(_r61.value.map(function (t) {\n              return \"\".concat(t.key, \": \").concat(t.message);\n            }).join(\", \"));\n            return _r61.value;\n          }\n\n          {\n            var _r62 = t;\n            return \"string\" == typeof t && \"color\" === e.type && (_r62 = le.parse(t)), {\n              kind: \"constant\",\n              evaluate: function evaluate() {\n                return _r62;\n              }\n            };\n          }\n        }(void 0 === e ? t.specification.default : e, t.specification);\n      }\n\n      _createClass(Nn, [{\n        key: \"isDataDriven\",\n        value: function isDataDriven() {\n          return \"source\" === this.expression.kind || \"composite\" === this.expression.kind;\n        }\n      }, {\n        key: \"possiblyEvaluate\",\n        value: function possiblyEvaluate(t, e, r) {\n          return this.property.possiblyEvaluate(this, t, e, r);\n        }\n      }]);\n\n      return Nn;\n    }();\n\n    var jn = /*#__PURE__*/function () {\n      function jn(t) {\n        _classCallCheck(this, jn);\n\n        this.property = t, this.value = new Nn(t, void 0);\n      }\n\n      _createClass(jn, [{\n        key: \"transitioned\",\n        value: function transitioned(t, e) {\n          return new Zn(this.property, this.value, e, x({}, t.transition, this.transition), t.now);\n        }\n      }, {\n        key: \"untransitioned\",\n        value: function untransitioned() {\n          return new Zn(this.property, this.value, null, {}, 0);\n        }\n      }]);\n\n      return jn;\n    }();\n\n    var Gn = /*#__PURE__*/function () {\n      function Gn(t) {\n        _classCallCheck(this, Gn);\n\n        this._properties = t, this._values = Object.create(t.defaultTransitionablePropertyValues);\n      }\n\n      _createClass(Gn, [{\n        key: \"getValue\",\n        value: function getValue(t) {\n          return T(this._values[t].value.value);\n        }\n      }, {\n        key: \"setValue\",\n        value: function setValue(t, e) {\n          this._values.hasOwnProperty(t) || (this._values[t] = new jn(this._values[t].property)), this._values[t].value = new Nn(this._values[t].property, null === e ? void 0 : T(e));\n        }\n      }, {\n        key: \"getTransition\",\n        value: function getTransition(t) {\n          return T(this._values[t].transition);\n        }\n      }, {\n        key: \"setTransition\",\n        value: function setTransition(t, e) {\n          this._values.hasOwnProperty(t) || (this._values[t] = new jn(this._values[t].property)), this._values[t].transition = T(e) || void 0;\n        }\n      }, {\n        key: \"serialize\",\n        value: function serialize() {\n          var t = {};\n\n          for (var _i43 = 0, _Object$keys2 = Object.keys(this._values); _i43 < _Object$keys2.length; _i43++) {\n            var _e49 = _Object$keys2[_i43];\n\n            var _r63 = this.getValue(_e49);\n\n            void 0 !== _r63 && (t[_e49] = _r63);\n\n            var _i44 = this.getTransition(_e49);\n\n            void 0 !== _i44 && (t[\"\".concat(_e49, \"-transition\")] = _i44);\n          }\n\n          return t;\n        }\n      }, {\n        key: \"transitioned\",\n        value: function transitioned(t, e) {\n          var r = new Xn(this._properties);\n\n          for (var _i45 = 0, _Object$keys3 = Object.keys(this._values); _i45 < _Object$keys3.length; _i45++) {\n            var _i46 = _Object$keys3[_i45];\n            r._values[_i46] = this._values[_i46].transitioned(t, e._values[_i46]);\n          }\n\n          return r;\n        }\n      }, {\n        key: \"untransitioned\",\n        value: function untransitioned() {\n          var t = new Xn(this._properties);\n\n          for (var _i47 = 0, _Object$keys4 = Object.keys(this._values); _i47 < _Object$keys4.length; _i47++) {\n            var _e50 = _Object$keys4[_i47];\n            t._values[_e50] = this._values[_e50].untransitioned();\n          }\n\n          return t;\n        }\n      }]);\n\n      return Gn;\n    }();\n\n    var Zn = /*#__PURE__*/function () {\n      function Zn(t, e, r, i, n) {\n        _classCallCheck(this, Zn);\n\n        this.property = t, this.value = e, this.begin = n + i.delay || 0, this.end = this.begin + i.duration || 0, t.specification.transition && (i.delay || i.duration) && (this.prior = r);\n      }\n\n      _createClass(Zn, [{\n        key: \"possiblyEvaluate\",\n        value: function possiblyEvaluate(t, e, r) {\n          var i = t.now || 0,\n              n = this.value.possiblyEvaluate(t, e, r),\n              s = this.prior;\n\n          if (s) {\n            if (i > this.end) return this.prior = null, n;\n            if (this.value.isDataDriven()) return this.prior = null, n;\n            if (i < this.begin) return s.possiblyEvaluate(t, e, r);\n            {\n              var _a22 = (i - this.begin) / (this.end - this.begin);\n\n              return this.property.interpolate(s.possiblyEvaluate(t, e, r), n, h(_a22));\n            }\n          }\n\n          return n;\n        }\n      }]);\n\n      return Zn;\n    }();\n\n    var Xn = /*#__PURE__*/function () {\n      function Xn(t) {\n        _classCallCheck(this, Xn);\n\n        this._properties = t, this._values = Object.create(t.defaultTransitioningPropertyValues);\n      }\n\n      _createClass(Xn, [{\n        key: \"possiblyEvaluate\",\n        value: function possiblyEvaluate(t, e, r) {\n          var i = new Yn(this._properties);\n\n          for (var _i48 = 0, _Object$keys5 = Object.keys(this._values); _i48 < _Object$keys5.length; _i48++) {\n            var _n31 = _Object$keys5[_i48];\n            i._values[_n31] = this._values[_n31].possiblyEvaluate(t, e, r);\n          }\n\n          return i;\n        }\n      }, {\n        key: \"hasTransition\",\n        value: function hasTransition() {\n          for (var _i49 = 0, _Object$keys6 = Object.keys(this._values); _i49 < _Object$keys6.length; _i49++) {\n            var _t53 = _Object$keys6[_i49];\n            if (this._values[_t53].prior) return !0;\n          }\n\n          return !1;\n        }\n      }]);\n\n      return Xn;\n    }();\n\n    var Kn = /*#__PURE__*/function () {\n      function Kn(t) {\n        _classCallCheck(this, Kn);\n\n        this._properties = t, this._values = Object.create(t.defaultPropertyValues);\n      }\n\n      _createClass(Kn, [{\n        key: \"getValue\",\n        value: function getValue(t) {\n          return T(this._values[t].value);\n        }\n      }, {\n        key: \"setValue\",\n        value: function setValue(t, e) {\n          this._values[t] = new Nn(this._values[t].property, null === e ? void 0 : T(e));\n        }\n      }, {\n        key: \"serialize\",\n        value: function serialize() {\n          var t = {};\n\n          for (var _i50 = 0, _Object$keys7 = Object.keys(this._values); _i50 < _Object$keys7.length; _i50++) {\n            var _e51 = _Object$keys7[_i50];\n\n            var _r64 = this.getValue(_e51);\n\n            void 0 !== _r64 && (t[_e51] = _r64);\n          }\n\n          return t;\n        }\n      }, {\n        key: \"possiblyEvaluate\",\n        value: function possiblyEvaluate(t, e, r) {\n          var i = new Yn(this._properties);\n\n          for (var _i51 = 0, _Object$keys8 = Object.keys(this._values); _i51 < _Object$keys8.length; _i51++) {\n            var _n32 = _Object$keys8[_i51];\n            i._values[_n32] = this._values[_n32].possiblyEvaluate(t, e, r);\n          }\n\n          return i;\n        }\n      }]);\n\n      return Kn;\n    }();\n\n    var Hn = /*#__PURE__*/function () {\n      function Hn(t, e, r) {\n        _classCallCheck(this, Hn);\n\n        this.property = t, this.value = e, this.parameters = r;\n      }\n\n      _createClass(Hn, [{\n        key: \"isConstant\",\n        value: function isConstant() {\n          return \"constant\" === this.value.kind;\n        }\n      }, {\n        key: \"constantOr\",\n        value: function constantOr(t) {\n          return \"constant\" === this.value.kind ? this.value.value : t;\n        }\n      }, {\n        key: \"evaluate\",\n        value: function evaluate(t, e, r, i) {\n          return this.property.evaluate(this.value, this.parameters, t, e, r, i);\n        }\n      }]);\n\n      return Hn;\n    }();\n\n    var Yn = /*#__PURE__*/function () {\n      function Yn(t) {\n        _classCallCheck(this, Yn);\n\n        this._properties = t, this._values = Object.create(t.defaultPossiblyEvaluatedValues);\n      }\n\n      _createClass(Yn, [{\n        key: \"get\",\n        value: function get(t) {\n          return this._values[t];\n        }\n      }]);\n\n      return Yn;\n    }();\n\n    var Wn = /*#__PURE__*/function () {\n      function Wn(t) {\n        _classCallCheck(this, Wn);\n\n        this.specification = t;\n      }\n\n      _createClass(Wn, [{\n        key: \"possiblyEvaluate\",\n        value: function possiblyEvaluate(t, e) {\n          return t.expression.evaluate(e);\n        }\n      }, {\n        key: \"interpolate\",\n        value: function interpolate(t, e, r) {\n          var i = Qe[this.specification.type];\n          return i ? i(t, e, r) : t;\n        }\n      }]);\n\n      return Wn;\n    }();\n\n    var Jn = /*#__PURE__*/function () {\n      function Jn(t, e) {\n        _classCallCheck(this, Jn);\n\n        this.specification = t, this.overrides = e;\n      }\n\n      _createClass(Jn, [{\n        key: \"possiblyEvaluate\",\n        value: function possiblyEvaluate(t, e, r, i) {\n          return new Hn(this, \"constant\" === t.expression.kind || \"camera\" === t.expression.kind ? {\n            kind: \"constant\",\n            value: t.expression.evaluate(e, null, {}, r, i)\n          } : t.expression, e);\n        }\n      }, {\n        key: \"interpolate\",\n        value: function interpolate(t, e, r) {\n          if (\"constant\" !== t.value.kind || \"constant\" !== e.value.kind) return t;\n          if (void 0 === t.value.value || void 0 === e.value.value) return new Hn(this, {\n            kind: \"constant\",\n            value: void 0\n          }, t.parameters);\n          var i = Qe[this.specification.type];\n          return i ? new Hn(this, {\n            kind: \"constant\",\n            value: i(t.value.value, e.value.value, r)\n          }, t.parameters) : t;\n        }\n      }, {\n        key: \"evaluate\",\n        value: function evaluate(t, e, r, i, n, s) {\n          return \"constant\" === t.kind ? t.value : t.evaluate(e, r, i, n, s);\n        }\n      }]);\n\n      return Jn;\n    }();\n\n    var Qn = /*#__PURE__*/function (_Jn) {\n      _inherits(Qn, _Jn);\n\n      var _super7 = _createSuper(Qn);\n\n      function Qn() {\n        _classCallCheck(this, Qn);\n\n        return _super7.apply(this, arguments);\n      }\n\n      _createClass(Qn, [{\n        key: \"possiblyEvaluate\",\n        value: function possiblyEvaluate(t, e, r, i) {\n          if (void 0 === t.value) return new Hn(this, {\n            kind: \"constant\",\n            value: void 0\n          }, e);\n\n          if (\"constant\" === t.expression.kind) {\n            var _n33 = t.expression.evaluate(e, null, {}, r, i),\n                _s23 = \"resolvedImage\" === t.property.specification.type && \"string\" != typeof _n33 ? _n33.name : _n33,\n                _a23 = this._calculate(_s23, _s23, _s23, e);\n\n            return new Hn(this, {\n              kind: \"constant\",\n              value: _a23\n            }, e);\n          }\n\n          if (\"camera\" === t.expression.kind) {\n            var _r65 = this._calculate(t.expression.evaluate({\n              zoom: e.zoom - 1\n            }), t.expression.evaluate({\n              zoom: e.zoom\n            }), t.expression.evaluate({\n              zoom: e.zoom + 1\n            }), e);\n\n            return new Hn(this, {\n              kind: \"constant\",\n              value: _r65\n            }, e);\n          }\n\n          return new Hn(this, t.expression, e);\n        }\n      }, {\n        key: \"evaluate\",\n        value: function evaluate(t, e, r, i, n, s) {\n          if (\"source\" === t.kind) {\n            var _a24 = t.evaluate(e, r, i, n, s);\n\n            return this._calculate(_a24, _a24, _a24, e);\n          }\n\n          return \"composite\" === t.kind ? this._calculate(t.evaluate({\n            zoom: Math.floor(e.zoom) - 1\n          }, r, i), t.evaluate({\n            zoom: Math.floor(e.zoom)\n          }, r, i), t.evaluate({\n            zoom: Math.floor(e.zoom) + 1\n          }, r, i), e) : t.value;\n        }\n      }, {\n        key: \"_calculate\",\n        value: function _calculate(t, e, r, i) {\n          return i.zoom > i.zoomHistory.lastIntegerZoom ? {\n            from: t,\n            to: e\n          } : {\n            from: r,\n            to: e\n          };\n        }\n      }, {\n        key: \"interpolate\",\n        value: function interpolate(t) {\n          return t;\n        }\n      }]);\n\n      return Qn;\n    }(Jn);\n\n    var ts = /*#__PURE__*/function () {\n      function ts(t) {\n        _classCallCheck(this, ts);\n\n        this.specification = t;\n      }\n\n      _createClass(ts, [{\n        key: \"possiblyEvaluate\",\n        value: function possiblyEvaluate(t, e, r, i) {\n          if (void 0 !== t.value) {\n            if (\"constant\" === t.expression.kind) {\n              var _n34 = t.expression.evaluate(e, null, {}, r, i);\n\n              return this._calculate(_n34, _n34, _n34, e);\n            }\n\n            return this._calculate(t.expression.evaluate(new qn(Math.floor(e.zoom - 1), e)), t.expression.evaluate(new qn(Math.floor(e.zoom), e)), t.expression.evaluate(new qn(Math.floor(e.zoom + 1), e)), e);\n          }\n        }\n      }, {\n        key: \"_calculate\",\n        value: function _calculate(t, e, r, i) {\n          return i.zoom > i.zoomHistory.lastIntegerZoom ? {\n            from: t,\n            to: e\n          } : {\n            from: r,\n            to: e\n          };\n        }\n      }, {\n        key: \"interpolate\",\n        value: function interpolate(t) {\n          return t;\n        }\n      }]);\n\n      return ts;\n    }();\n\n    var es = /*#__PURE__*/function () {\n      function es(t) {\n        _classCallCheck(this, es);\n\n        this.specification = t;\n      }\n\n      _createClass(es, [{\n        key: \"possiblyEvaluate\",\n        value: function possiblyEvaluate(t, e, r, i) {\n          return !!t.expression.evaluate(e, null, {}, r, i);\n        }\n      }, {\n        key: \"interpolate\",\n        value: function interpolate() {\n          return !1;\n        }\n      }]);\n\n      return es;\n    }();\n\n    var rs = function rs(t) {\n      _classCallCheck(this, rs);\n\n      this.properties = t, this.defaultPropertyValues = {}, this.defaultTransitionablePropertyValues = {}, this.defaultTransitioningPropertyValues = {}, this.defaultPossiblyEvaluatedValues = {}, this.overridableProperties = [];\n\n      for (var _e52 in t) {\n        var _r66 = t[_e52];\n        _r66.specification.overridable && this.overridableProperties.push(_e52);\n\n        var _i52 = this.defaultPropertyValues[_e52] = new Nn(_r66, void 0),\n            _n35 = this.defaultTransitionablePropertyValues[_e52] = new jn(_r66);\n\n        this.defaultTransitioningPropertyValues[_e52] = _n35.untransitioned(), this.defaultPossiblyEvaluatedValues[_e52] = _i52.possiblyEvaluate({});\n      }\n    };\n\n    function is(t, e) {\n      return 256 * (t = f(Math.floor(t), 0, 255)) + f(Math.floor(e), 0, 255);\n    }\n\n    Gi(\"DataDrivenProperty\", Jn), Gi(\"DataConstantProperty\", Wn), Gi(\"CrossFadedDataDrivenProperty\", Qn), Gi(\"CrossFadedProperty\", ts), Gi(\"ColorRampProperty\", es);\n    var ns = {\n      Int8: Int8Array,\n      Uint8: Uint8Array,\n      Int16: Int16Array,\n      Uint16: Uint16Array,\n      Int32: Int32Array,\n      Uint32: Uint32Array,\n      Float32: Float32Array\n    };\n\n    var ss = function ss(t, e) {\n      _classCallCheck(this, ss);\n\n      this._structArray = t, this._pos1 = e * this.size, this._pos2 = this._pos1 / 2, this._pos4 = this._pos1 / 4, this._pos8 = this._pos1 / 8;\n    };\n\n    var as = /*#__PURE__*/function () {\n      function as() {\n        _classCallCheck(this, as);\n\n        this.isTransferred = !1, this.capacity = -1, this.resize(0);\n      }\n\n      _createClass(as, [{\n        key: \"_trim\",\n        value: function _trim() {\n          this.length !== this.capacity && (this.capacity = this.length, this.arrayBuffer = this.arrayBuffer.slice(0, this.length * this.bytesPerElement), this._refreshViews());\n        }\n      }, {\n        key: \"clear\",\n        value: function clear() {\n          this.length = 0;\n        }\n      }, {\n        key: \"resize\",\n        value: function resize(t) {\n          this.reserve(t), this.length = t;\n        }\n      }, {\n        key: \"reserve\",\n        value: function reserve(t) {\n          if (t > this.capacity) {\n            this.capacity = Math.max(t, Math.floor(5 * this.capacity), 128), this.arrayBuffer = new ArrayBuffer(this.capacity * this.bytesPerElement);\n            var _e53 = this.uint8;\n            this._refreshViews(), _e53 && this.uint8.set(_e53);\n          }\n        }\n      }, {\n        key: \"_refreshViews\",\n        value: function _refreshViews() {\n          throw new Error(\"_refreshViews() must be implemented by each concrete StructArray layout\");\n        }\n      }], [{\n        key: \"serialize\",\n        value: function serialize(t, e) {\n          return t._trim(), e && (t.isTransferred = !0, e.push(t.arrayBuffer)), {\n            length: t.length,\n            arrayBuffer: t.arrayBuffer\n          };\n        }\n      }, {\n        key: \"deserialize\",\n        value: function deserialize(t) {\n          var e = Object.create(this.prototype);\n          return e.arrayBuffer = t.arrayBuffer, e.length = t.length, e.capacity = t.arrayBuffer.byteLength / e.bytesPerElement, e._refreshViews(), e;\n        }\n      }]);\n\n      return as;\n    }();\n\n    function os(t) {\n      var e = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 1;\n      var r = 0,\n          i = 0;\n      return {\n        members: t.map(function (t) {\n          var n = ns[t.type].BYTES_PER_ELEMENT,\n              s = r = ls(r, Math.max(e, n)),\n              a = t.components || 1;\n          return i = Math.max(i, n), r += n * a, {\n            name: t.name,\n            type: t.type,\n            components: a,\n            offset: s\n          };\n        }),\n        size: ls(r, Math.max(i, e)),\n        alignment: e\n      };\n    }\n\n    function ls(t, e) {\n      return Math.ceil(t / e) * e;\n    }\n\n    var us = /*#__PURE__*/function (_as) {\n      _inherits(us, _as);\n\n      var _super8 = _createSuper(us);\n\n      function us() {\n        _classCallCheck(this, us);\n\n        return _super8.apply(this, arguments);\n      }\n\n      _createClass(us, [{\n        key: \"_refreshViews\",\n        value: function _refreshViews() {\n          this.uint8 = new Uint8Array(this.arrayBuffer), this.int16 = new Int16Array(this.arrayBuffer);\n        }\n      }, {\n        key: \"emplaceBack\",\n        value: function emplaceBack(t, e) {\n          var r = this.length;\n          return this.resize(r + 1), this.emplace(r, t, e);\n        }\n      }, {\n        key: \"emplace\",\n        value: function emplace(t, e, r) {\n          var i = 2 * t;\n          return this.int16[i + 0] = e, this.int16[i + 1] = r, t;\n        }\n      }]);\n\n      return us;\n    }(as);\n\n    us.prototype.bytesPerElement = 4, Gi(\"StructArrayLayout2i4\", us);\n\n    var cs = /*#__PURE__*/function (_as2) {\n      _inherits(cs, _as2);\n\n      var _super9 = _createSuper(cs);\n\n      function cs() {\n        _classCallCheck(this, cs);\n\n        return _super9.apply(this, arguments);\n      }\n\n      _createClass(cs, [{\n        key: \"_refreshViews\",\n        value: function _refreshViews() {\n          this.uint8 = new Uint8Array(this.arrayBuffer), this.int16 = new Int16Array(this.arrayBuffer);\n        }\n      }, {\n        key: \"emplaceBack\",\n        value: function emplaceBack(t, e, r, i) {\n          var n = this.length;\n          return this.resize(n + 1), this.emplace(n, t, e, r, i);\n        }\n      }, {\n        key: \"emplace\",\n        value: function emplace(t, e, r, i, n) {\n          var s = 4 * t;\n          return this.int16[s + 0] = e, this.int16[s + 1] = r, this.int16[s + 2] = i, this.int16[s + 3] = n, t;\n        }\n      }]);\n\n      return cs;\n    }(as);\n\n    cs.prototype.bytesPerElement = 8, Gi(\"StructArrayLayout4i8\", cs);\n\n    var hs = /*#__PURE__*/function (_as3) {\n      _inherits(hs, _as3);\n\n      var _super10 = _createSuper(hs);\n\n      function hs() {\n        _classCallCheck(this, hs);\n\n        return _super10.apply(this, arguments);\n      }\n\n      _createClass(hs, [{\n        key: \"_refreshViews\",\n        value: function _refreshViews() {\n          this.uint8 = new Uint8Array(this.arrayBuffer), this.int16 = new Int16Array(this.arrayBuffer), this.float32 = new Float32Array(this.arrayBuffer);\n        }\n      }, {\n        key: \"emplaceBack\",\n        value: function emplaceBack(t, e, r, i, n, s, a) {\n          var o = this.length;\n          return this.resize(o + 1), this.emplace(o, t, e, r, i, n, s, a);\n        }\n      }, {\n        key: \"emplace\",\n        value: function emplace(t, e, r, i, n, s, a, o) {\n          var l = 6 * t,\n              u = 12 * t,\n              c = 3 * t;\n          return this.int16[l + 0] = e, this.int16[l + 1] = r, this.uint8[u + 4] = i, this.uint8[u + 5] = n, this.uint8[u + 6] = s, this.uint8[u + 7] = a, this.float32[c + 2] = o, t;\n        }\n      }]);\n\n      return hs;\n    }(as);\n\n    hs.prototype.bytesPerElement = 12, Gi(\"StructArrayLayout2i4ub1f12\", hs);\n\n    var ps = /*#__PURE__*/function (_as4) {\n      _inherits(ps, _as4);\n\n      var _super11 = _createSuper(ps);\n\n      function ps() {\n        _classCallCheck(this, ps);\n\n        return _super11.apply(this, arguments);\n      }\n\n      _createClass(ps, [{\n        key: \"_refreshViews\",\n        value: function _refreshViews() {\n          this.uint8 = new Uint8Array(this.arrayBuffer), this.float32 = new Float32Array(this.arrayBuffer);\n        }\n      }, {\n        key: \"emplaceBack\",\n        value: function emplaceBack(t, e) {\n          var r = this.length;\n          return this.resize(r + 1), this.emplace(r, t, e);\n        }\n      }, {\n        key: \"emplace\",\n        value: function emplace(t, e, r) {\n          var i = 2 * t;\n          return this.float32[i + 0] = e, this.float32[i + 1] = r, t;\n        }\n      }]);\n\n      return ps;\n    }(as);\n\n    ps.prototype.bytesPerElement = 8, Gi(\"StructArrayLayout2f8\", ps);\n\n    var ds = /*#__PURE__*/function (_as5) {\n      _inherits(ds, _as5);\n\n      var _super12 = _createSuper(ds);\n\n      function ds() {\n        _classCallCheck(this, ds);\n\n        return _super12.apply(this, arguments);\n      }\n\n      _createClass(ds, [{\n        key: \"_refreshViews\",\n        value: function _refreshViews() {\n          this.uint8 = new Uint8Array(this.arrayBuffer), this.uint16 = new Uint16Array(this.arrayBuffer);\n        }\n      }, {\n        key: \"emplaceBack\",\n        value: function emplaceBack(t, e, r, i, n, s, a, o, l, u) {\n          var c = this.length;\n          return this.resize(c + 1), this.emplace(c, t, e, r, i, n, s, a, o, l, u);\n        }\n      }, {\n        key: \"emplace\",\n        value: function emplace(t, e, r, i, n, s, a, o, l, u, c) {\n          var h = 10 * t;\n          return this.uint16[h + 0] = e, this.uint16[h + 1] = r, this.uint16[h + 2] = i, this.uint16[h + 3] = n, this.uint16[h + 4] = s, this.uint16[h + 5] = a, this.uint16[h + 6] = o, this.uint16[h + 7] = l, this.uint16[h + 8] = u, this.uint16[h + 9] = c, t;\n        }\n      }]);\n\n      return ds;\n    }(as);\n\n    ds.prototype.bytesPerElement = 20, Gi(\"StructArrayLayout10ui20\", ds);\n\n    var fs = /*#__PURE__*/function (_as6) {\n      _inherits(fs, _as6);\n\n      var _super13 = _createSuper(fs);\n\n      function fs() {\n        _classCallCheck(this, fs);\n\n        return _super13.apply(this, arguments);\n      }\n\n      _createClass(fs, [{\n        key: \"_refreshViews\",\n        value: function _refreshViews() {\n          this.uint8 = new Uint8Array(this.arrayBuffer), this.int16 = new Int16Array(this.arrayBuffer), this.uint16 = new Uint16Array(this.arrayBuffer);\n        }\n      }, {\n        key: \"emplaceBack\",\n        value: function emplaceBack(t, e, r, i, n, s, a, o, l, u, c, h) {\n          var p = this.length;\n          return this.resize(p + 1), this.emplace(p, t, e, r, i, n, s, a, o, l, u, c, h);\n        }\n      }, {\n        key: \"emplace\",\n        value: function emplace(t, e, r, i, n, s, a, o, l, u, c, h, p) {\n          var d = 12 * t;\n          return this.int16[d + 0] = e, this.int16[d + 1] = r, this.int16[d + 2] = i, this.int16[d + 3] = n, this.uint16[d + 4] = s, this.uint16[d + 5] = a, this.uint16[d + 6] = o, this.uint16[d + 7] = l, this.int16[d + 8] = u, this.int16[d + 9] = c, this.int16[d + 10] = h, this.int16[d + 11] = p, t;\n        }\n      }]);\n\n      return fs;\n    }(as);\n\n    fs.prototype.bytesPerElement = 24, Gi(\"StructArrayLayout4i4ui4i24\", fs);\n\n    var ys = /*#__PURE__*/function (_as7) {\n      _inherits(ys, _as7);\n\n      var _super14 = _createSuper(ys);\n\n      function ys() {\n        _classCallCheck(this, ys);\n\n        return _super14.apply(this, arguments);\n      }\n\n      _createClass(ys, [{\n        key: \"_refreshViews\",\n        value: function _refreshViews() {\n          this.uint8 = new Uint8Array(this.arrayBuffer), this.float32 = new Float32Array(this.arrayBuffer);\n        }\n      }, {\n        key: \"emplaceBack\",\n        value: function emplaceBack(t, e, r) {\n          var i = this.length;\n          return this.resize(i + 1), this.emplace(i, t, e, r);\n        }\n      }, {\n        key: \"emplace\",\n        value: function emplace(t, e, r, i) {\n          var n = 3 * t;\n          return this.float32[n + 0] = e, this.float32[n + 1] = r, this.float32[n + 2] = i, t;\n        }\n      }]);\n\n      return ys;\n    }(as);\n\n    ys.prototype.bytesPerElement = 12, Gi(\"StructArrayLayout3f12\", ys);\n\n    var ms = /*#__PURE__*/function (_as8) {\n      _inherits(ms, _as8);\n\n      var _super15 = _createSuper(ms);\n\n      function ms() {\n        _classCallCheck(this, ms);\n\n        return _super15.apply(this, arguments);\n      }\n\n      _createClass(ms, [{\n        key: \"_refreshViews\",\n        value: function _refreshViews() {\n          this.uint8 = new Uint8Array(this.arrayBuffer), this.uint32 = new Uint32Array(this.arrayBuffer);\n        }\n      }, {\n        key: \"emplaceBack\",\n        value: function emplaceBack(t) {\n          var e = this.length;\n          return this.resize(e + 1), this.emplace(e, t);\n        }\n      }, {\n        key: \"emplace\",\n        value: function emplace(t, e) {\n          return this.uint32[1 * t + 0] = e, t;\n        }\n      }]);\n\n      return ms;\n    }(as);\n\n    ms.prototype.bytesPerElement = 4, Gi(\"StructArrayLayout1ul4\", ms);\n\n    var gs = /*#__PURE__*/function (_as9) {\n      _inherits(gs, _as9);\n\n      var _super16 = _createSuper(gs);\n\n      function gs() {\n        _classCallCheck(this, gs);\n\n        return _super16.apply(this, arguments);\n      }\n\n      _createClass(gs, [{\n        key: \"_refreshViews\",\n        value: function _refreshViews() {\n          this.uint8 = new Uint8Array(this.arrayBuffer), this.int16 = new Int16Array(this.arrayBuffer), this.float32 = new Float32Array(this.arrayBuffer), this.uint32 = new Uint32Array(this.arrayBuffer), this.uint16 = new Uint16Array(this.arrayBuffer);\n        }\n      }, {\n        key: \"emplaceBack\",\n        value: function emplaceBack(t, e, r, i, n, s, a, o, l, u) {\n          var c = this.length;\n          return this.resize(c + 1), this.emplace(c, t, e, r, i, n, s, a, o, l, u);\n        }\n      }, {\n        key: \"emplace\",\n        value: function emplace(t, e, r, i, n, s, a, o, l, u, c) {\n          var h = 16 * t,\n              p = 8 * t;\n          return this.int16[h + 0] = e, this.int16[h + 1] = r, this.float32[p + 1] = i, this.float32[p + 2] = n, this.float32[p + 3] = s, this.float32[p + 4] = a, this.int16[h + 10] = o, this.uint32[p + 6] = l, this.uint16[h + 14] = u, this.uint16[h + 15] = c, t;\n        }\n      }]);\n\n      return gs;\n    }(as);\n\n    gs.prototype.bytesPerElement = 32, Gi(\"StructArrayLayout2i4f1i1ul2ui32\", gs);\n\n    var xs = /*#__PURE__*/function (_as10) {\n      _inherits(xs, _as10);\n\n      var _super17 = _createSuper(xs);\n\n      function xs() {\n        _classCallCheck(this, xs);\n\n        return _super17.apply(this, arguments);\n      }\n\n      _createClass(xs, [{\n        key: \"_refreshViews\",\n        value: function _refreshViews() {\n          this.uint8 = new Uint8Array(this.arrayBuffer), this.int16 = new Int16Array(this.arrayBuffer);\n        }\n      }, {\n        key: \"emplaceBack\",\n        value: function emplaceBack(t, e, r, i, n, s) {\n          var a = this.length;\n          return this.resize(a + 1), this.emplace(a, t, e, r, i, n, s);\n        }\n      }, {\n        key: \"emplace\",\n        value: function emplace(t, e, r, i, n, s, a) {\n          var o = 6 * t;\n          return this.int16[o + 0] = e, this.int16[o + 1] = r, this.int16[o + 2] = i, this.int16[o + 3] = n, this.int16[o + 4] = s, this.int16[o + 5] = a, t;\n        }\n      }]);\n\n      return xs;\n    }(as);\n\n    xs.prototype.bytesPerElement = 12, Gi(\"StructArrayLayout2i2i2i12\", xs);\n\n    var vs = /*#__PURE__*/function (_as11) {\n      _inherits(vs, _as11);\n\n      var _super18 = _createSuper(vs);\n\n      function vs() {\n        _classCallCheck(this, vs);\n\n        return _super18.apply(this, arguments);\n      }\n\n      _createClass(vs, [{\n        key: \"_refreshViews\",\n        value: function _refreshViews() {\n          this.uint8 = new Uint8Array(this.arrayBuffer), this.float32 = new Float32Array(this.arrayBuffer), this.int16 = new Int16Array(this.arrayBuffer);\n        }\n      }, {\n        key: \"emplaceBack\",\n        value: function emplaceBack(t, e, r, i, n) {\n          var s = this.length;\n          return this.resize(s + 1), this.emplace(s, t, e, r, i, n);\n        }\n      }, {\n        key: \"emplace\",\n        value: function emplace(t, e, r, i, n, s) {\n          var a = 4 * t,\n              o = 8 * t;\n          return this.float32[a + 0] = e, this.float32[a + 1] = r, this.float32[a + 2] = i, this.int16[o + 6] = n, this.int16[o + 7] = s, t;\n        }\n      }]);\n\n      return vs;\n    }(as);\n\n    vs.prototype.bytesPerElement = 16, Gi(\"StructArrayLayout2f1f2i16\", vs);\n\n    var bs = /*#__PURE__*/function (_as12) {\n      _inherits(bs, _as12);\n\n      var _super19 = _createSuper(bs);\n\n      function bs() {\n        _classCallCheck(this, bs);\n\n        return _super19.apply(this, arguments);\n      }\n\n      _createClass(bs, [{\n        key: \"_refreshViews\",\n        value: function _refreshViews() {\n          this.uint8 = new Uint8Array(this.arrayBuffer), this.float32 = new Float32Array(this.arrayBuffer);\n        }\n      }, {\n        key: \"emplaceBack\",\n        value: function emplaceBack(t, e, r, i) {\n          var n = this.length;\n          return this.resize(n + 1), this.emplace(n, t, e, r, i);\n        }\n      }, {\n        key: \"emplace\",\n        value: function emplace(t, e, r, i, n) {\n          var s = 12 * t,\n              a = 3 * t;\n          return this.uint8[s + 0] = e, this.uint8[s + 1] = r, this.float32[a + 1] = i, this.float32[a + 2] = n, t;\n        }\n      }]);\n\n      return bs;\n    }(as);\n\n    bs.prototype.bytesPerElement = 12, Gi(\"StructArrayLayout2ub2f12\", bs);\n\n    var ws = /*#__PURE__*/function (_as13) {\n      _inherits(ws, _as13);\n\n      var _super20 = _createSuper(ws);\n\n      function ws() {\n        _classCallCheck(this, ws);\n\n        return _super20.apply(this, arguments);\n      }\n\n      _createClass(ws, [{\n        key: \"_refreshViews\",\n        value: function _refreshViews() {\n          this.uint8 = new Uint8Array(this.arrayBuffer), this.uint16 = new Uint16Array(this.arrayBuffer);\n        }\n      }, {\n        key: \"emplaceBack\",\n        value: function emplaceBack(t, e, r) {\n          var i = this.length;\n          return this.resize(i + 1), this.emplace(i, t, e, r);\n        }\n      }, {\n        key: \"emplace\",\n        value: function emplace(t, e, r, i) {\n          var n = 3 * t;\n          return this.uint16[n + 0] = e, this.uint16[n + 1] = r, this.uint16[n + 2] = i, t;\n        }\n      }]);\n\n      return ws;\n    }(as);\n\n    ws.prototype.bytesPerElement = 6, Gi(\"StructArrayLayout3ui6\", ws);\n\n    var _s = /*#__PURE__*/function (_as14) {\n      _inherits(_s, _as14);\n\n      var _super21 = _createSuper(_s);\n\n      function _s() {\n        _classCallCheck(this, _s);\n\n        return _super21.apply(this, arguments);\n      }\n\n      _createClass(_s, [{\n        key: \"_refreshViews\",\n        value: function _refreshViews() {\n          this.uint8 = new Uint8Array(this.arrayBuffer), this.int16 = new Int16Array(this.arrayBuffer), this.uint16 = new Uint16Array(this.arrayBuffer), this.uint32 = new Uint32Array(this.arrayBuffer), this.float32 = new Float32Array(this.arrayBuffer);\n        }\n      }, {\n        key: \"emplaceBack\",\n        value: function emplaceBack(t, e, r, i, n, s, a, o, l, u, c, h, p, d, f, y, m) {\n          var g = this.length;\n          return this.resize(g + 1), this.emplace(g, t, e, r, i, n, s, a, o, l, u, c, h, p, d, f, y, m);\n        }\n      }, {\n        key: \"emplace\",\n        value: function emplace(t, e, r, i, n, s, a, o, l, u, c, h, p, d, f, y, m, g) {\n          var x = 24 * t,\n              v = 12 * t,\n              b = 48 * t;\n          return this.int16[x + 0] = e, this.int16[x + 1] = r, this.uint16[x + 2] = i, this.uint16[x + 3] = n, this.uint32[v + 2] = s, this.uint32[v + 3] = a, this.uint32[v + 4] = o, this.uint16[x + 10] = l, this.uint16[x + 11] = u, this.uint16[x + 12] = c, this.float32[v + 7] = h, this.float32[v + 8] = p, this.uint8[b + 36] = d, this.uint8[b + 37] = f, this.uint8[b + 38] = y, this.uint32[v + 10] = m, this.int16[x + 22] = g, t;\n        }\n      }]);\n\n      return _s;\n    }(as);\n\n    _s.prototype.bytesPerElement = 48, Gi(\"StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48\", _s);\n\n    var ks = /*#__PURE__*/function (_as15) {\n      _inherits(ks, _as15);\n\n      var _super22 = _createSuper(ks);\n\n      function ks() {\n        _classCallCheck(this, ks);\n\n        return _super22.apply(this, arguments);\n      }\n\n      _createClass(ks, [{\n        key: \"_refreshViews\",\n        value: function _refreshViews() {\n          this.uint8 = new Uint8Array(this.arrayBuffer), this.int16 = new Int16Array(this.arrayBuffer), this.uint16 = new Uint16Array(this.arrayBuffer), this.uint32 = new Uint32Array(this.arrayBuffer), this.float32 = new Float32Array(this.arrayBuffer);\n        }\n      }, {\n        key: \"emplaceBack\",\n        value: function emplaceBack(t, e, r, i, n, s, a, o, l, u, c, h, p, d, f, y, m, g, x, v, b, w, _, k, A, S, I, T) {\n          var z = this.length;\n          return this.resize(z + 1), this.emplace(z, t, e, r, i, n, s, a, o, l, u, c, h, p, d, f, y, m, g, x, v, b, w, _, k, A, S, I, T);\n        }\n      }, {\n        key: \"emplace\",\n        value: function emplace(t, e, r, i, n, s, a, o, l, u, c, h, p, d, f, y, m, g, x, v, b, w, _, k, A, S, I, T, z) {\n          var E = 34 * t,\n              M = 17 * t;\n          return this.int16[E + 0] = e, this.int16[E + 1] = r, this.int16[E + 2] = i, this.int16[E + 3] = n, this.int16[E + 4] = s, this.int16[E + 5] = a, this.int16[E + 6] = o, this.int16[E + 7] = l, this.uint16[E + 8] = u, this.uint16[E + 9] = c, this.uint16[E + 10] = h, this.uint16[E + 11] = p, this.uint16[E + 12] = d, this.uint16[E + 13] = f, this.uint16[E + 14] = y, this.uint16[E + 15] = m, this.uint16[E + 16] = g, this.uint16[E + 17] = x, this.uint16[E + 18] = v, this.uint16[E + 19] = b, this.uint16[E + 20] = w, this.uint16[E + 21] = _, this.uint16[E + 22] = k, this.uint32[M + 12] = A, this.float32[M + 13] = S, this.float32[M + 14] = I, this.float32[M + 15] = T, this.float32[M + 16] = z, t;\n        }\n      }]);\n\n      return ks;\n    }(as);\n\n    ks.prototype.bytesPerElement = 68, Gi(\"StructArrayLayout8i15ui1ul4f68\", ks);\n\n    var As = /*#__PURE__*/function (_as16) {\n      _inherits(As, _as16);\n\n      var _super23 = _createSuper(As);\n\n      function As() {\n        _classCallCheck(this, As);\n\n        return _super23.apply(this, arguments);\n      }\n\n      _createClass(As, [{\n        key: \"_refreshViews\",\n        value: function _refreshViews() {\n          this.uint8 = new Uint8Array(this.arrayBuffer), this.float32 = new Float32Array(this.arrayBuffer);\n        }\n      }, {\n        key: \"emplaceBack\",\n        value: function emplaceBack(t) {\n          var e = this.length;\n          return this.resize(e + 1), this.emplace(e, t);\n        }\n      }, {\n        key: \"emplace\",\n        value: function emplace(t, e) {\n          return this.float32[1 * t + 0] = e, t;\n        }\n      }]);\n\n      return As;\n    }(as);\n\n    As.prototype.bytesPerElement = 4, Gi(\"StructArrayLayout1f4\", As);\n\n    var Ss = /*#__PURE__*/function (_as17) {\n      _inherits(Ss, _as17);\n\n      var _super24 = _createSuper(Ss);\n\n      function Ss() {\n        _classCallCheck(this, Ss);\n\n        return _super24.apply(this, arguments);\n      }\n\n      _createClass(Ss, [{\n        key: \"_refreshViews\",\n        value: function _refreshViews() {\n          this.uint8 = new Uint8Array(this.arrayBuffer), this.int16 = new Int16Array(this.arrayBuffer);\n        }\n      }, {\n        key: \"emplaceBack\",\n        value: function emplaceBack(t, e, r) {\n          var i = this.length;\n          return this.resize(i + 1), this.emplace(i, t, e, r);\n        }\n      }, {\n        key: \"emplace\",\n        value: function emplace(t, e, r, i) {\n          var n = 3 * t;\n          return this.int16[n + 0] = e, this.int16[n + 1] = r, this.int16[n + 2] = i, t;\n        }\n      }]);\n\n      return Ss;\n    }(as);\n\n    Ss.prototype.bytesPerElement = 6, Gi(\"StructArrayLayout3i6\", Ss);\n\n    var Is = /*#__PURE__*/function (_as18) {\n      _inherits(Is, _as18);\n\n      var _super25 = _createSuper(Is);\n\n      function Is() {\n        _classCallCheck(this, Is);\n\n        return _super25.apply(this, arguments);\n      }\n\n      _createClass(Is, [{\n        key: \"_refreshViews\",\n        value: function _refreshViews() {\n          this.uint8 = new Uint8Array(this.arrayBuffer), this.uint32 = new Uint32Array(this.arrayBuffer), this.uint16 = new Uint16Array(this.arrayBuffer);\n        }\n      }, {\n        key: \"emplaceBack\",\n        value: function emplaceBack(t, e, r, i) {\n          var n = this.length;\n          return this.resize(n + 1), this.emplace(n, t, e, r, i);\n        }\n      }, {\n        key: \"emplace\",\n        value: function emplace(t, e, r, i, n) {\n          var s = 6 * t;\n          return this.uint32[3 * t + 0] = e, this.uint16[s + 2] = r, this.uint16[s + 3] = i, this.uint16[s + 4] = n, t;\n        }\n      }]);\n\n      return Is;\n    }(as);\n\n    Is.prototype.bytesPerElement = 12, Gi(\"StructArrayLayout1ul3ui12\", Is);\n\n    var Ts = /*#__PURE__*/function (_as19) {\n      _inherits(Ts, _as19);\n\n      var _super26 = _createSuper(Ts);\n\n      function Ts() {\n        _classCallCheck(this, Ts);\n\n        return _super26.apply(this, arguments);\n      }\n\n      _createClass(Ts, [{\n        key: \"_refreshViews\",\n        value: function _refreshViews() {\n          this.uint8 = new Uint8Array(this.arrayBuffer), this.uint16 = new Uint16Array(this.arrayBuffer);\n        }\n      }, {\n        key: \"emplaceBack\",\n        value: function emplaceBack(t, e) {\n          var r = this.length;\n          return this.resize(r + 1), this.emplace(r, t, e);\n        }\n      }, {\n        key: \"emplace\",\n        value: function emplace(t, e, r) {\n          var i = 2 * t;\n          return this.uint16[i + 0] = e, this.uint16[i + 1] = r, t;\n        }\n      }]);\n\n      return Ts;\n    }(as);\n\n    Ts.prototype.bytesPerElement = 4, Gi(\"StructArrayLayout2ui4\", Ts);\n\n    var zs = /*#__PURE__*/function (_as20) {\n      _inherits(zs, _as20);\n\n      var _super27 = _createSuper(zs);\n\n      function zs() {\n        _classCallCheck(this, zs);\n\n        return _super27.apply(this, arguments);\n      }\n\n      _createClass(zs, [{\n        key: \"_refreshViews\",\n        value: function _refreshViews() {\n          this.uint8 = new Uint8Array(this.arrayBuffer), this.uint16 = new Uint16Array(this.arrayBuffer);\n        }\n      }, {\n        key: \"emplaceBack\",\n        value: function emplaceBack(t) {\n          var e = this.length;\n          return this.resize(e + 1), this.emplace(e, t);\n        }\n      }, {\n        key: \"emplace\",\n        value: function emplace(t, e) {\n          return this.uint16[1 * t + 0] = e, t;\n        }\n      }]);\n\n      return zs;\n    }(as);\n\n    zs.prototype.bytesPerElement = 2, Gi(\"StructArrayLayout1ui2\", zs);\n\n    var Es = /*#__PURE__*/function (_as21) {\n      _inherits(Es, _as21);\n\n      var _super28 = _createSuper(Es);\n\n      function Es() {\n        _classCallCheck(this, Es);\n\n        return _super28.apply(this, arguments);\n      }\n\n      _createClass(Es, [{\n        key: \"_refreshViews\",\n        value: function _refreshViews() {\n          this.uint8 = new Uint8Array(this.arrayBuffer), this.float32 = new Float32Array(this.arrayBuffer);\n        }\n      }, {\n        key: \"emplaceBack\",\n        value: function emplaceBack(t, e, r, i) {\n          var n = this.length;\n          return this.resize(n + 1), this.emplace(n, t, e, r, i);\n        }\n      }, {\n        key: \"emplace\",\n        value: function emplace(t, e, r, i, n) {\n          var s = 4 * t;\n          return this.float32[s + 0] = e, this.float32[s + 1] = r, this.float32[s + 2] = i, this.float32[s + 3] = n, t;\n        }\n      }]);\n\n      return Es;\n    }(as);\n\n    Es.prototype.bytesPerElement = 16, Gi(\"StructArrayLayout4f16\", Es);\n\n    var Ms = /*#__PURE__*/function (_ss) {\n      _inherits(Ms, _ss);\n\n      var _super29 = _createSuper(Ms);\n\n      function Ms() {\n        _classCallCheck(this, Ms);\n\n        return _super29.apply(this, arguments);\n      }\n\n      _createClass(Ms, [{\n        key: \"anchorPointX\",\n        get: function get() {\n          return this._structArray.int16[this._pos2 + 0];\n        }\n      }, {\n        key: \"anchorPointY\",\n        get: function get() {\n          return this._structArray.int16[this._pos2 + 1];\n        }\n      }, {\n        key: \"x1\",\n        get: function get() {\n          return this._structArray.float32[this._pos4 + 1];\n        }\n      }, {\n        key: \"y1\",\n        get: function get() {\n          return this._structArray.float32[this._pos4 + 2];\n        }\n      }, {\n        key: \"x2\",\n        get: function get() {\n          return this._structArray.float32[this._pos4 + 3];\n        }\n      }, {\n        key: \"y2\",\n        get: function get() {\n          return this._structArray.float32[this._pos4 + 4];\n        }\n      }, {\n        key: \"padding\",\n        get: function get() {\n          return this._structArray.int16[this._pos2 + 10];\n        }\n      }, {\n        key: \"featureIndex\",\n        get: function get() {\n          return this._structArray.uint32[this._pos4 + 6];\n        }\n      }, {\n        key: \"sourceLayerIndex\",\n        get: function get() {\n          return this._structArray.uint16[this._pos2 + 14];\n        }\n      }, {\n        key: \"bucketIndex\",\n        get: function get() {\n          return this._structArray.uint16[this._pos2 + 15];\n        }\n      }, {\n        key: \"anchorPoint\",\n        get: function get() {\n          return new i(this.anchorPointX, this.anchorPointY);\n        }\n      }]);\n\n      return Ms;\n    }(ss);\n\n    Ms.prototype.size = 32;\n\n    var Bs = /*#__PURE__*/function (_gs) {\n      _inherits(Bs, _gs);\n\n      var _super30 = _createSuper(Bs);\n\n      function Bs() {\n        _classCallCheck(this, Bs);\n\n        return _super30.apply(this, arguments);\n      }\n\n      _createClass(Bs, [{\n        key: \"get\",\n        value: function get(t) {\n          return new Ms(this, t);\n        }\n      }]);\n\n      return Bs;\n    }(gs);\n\n    Gi(\"CollisionBoxArray\", Bs);\n\n    var Ds = /*#__PURE__*/function (_ss2) {\n      _inherits(Ds, _ss2);\n\n      var _super31 = _createSuper(Ds);\n\n      function Ds() {\n        _classCallCheck(this, Ds);\n\n        return _super31.apply(this, arguments);\n      }\n\n      _createClass(Ds, [{\n        key: \"anchorX\",\n        get: function get() {\n          return this._structArray.int16[this._pos2 + 0];\n        }\n      }, {\n        key: \"anchorY\",\n        get: function get() {\n          return this._structArray.int16[this._pos2 + 1];\n        }\n      }, {\n        key: \"glyphStartIndex\",\n        get: function get() {\n          return this._structArray.uint16[this._pos2 + 2];\n        }\n      }, {\n        key: \"numGlyphs\",\n        get: function get() {\n          return this._structArray.uint16[this._pos2 + 3];\n        }\n      }, {\n        key: \"vertexStartIndex\",\n        get: function get() {\n          return this._structArray.uint32[this._pos4 + 2];\n        }\n      }, {\n        key: \"lineStartIndex\",\n        get: function get() {\n          return this._structArray.uint32[this._pos4 + 3];\n        }\n      }, {\n        key: \"lineLength\",\n        get: function get() {\n          return this._structArray.uint32[this._pos4 + 4];\n        }\n      }, {\n        key: \"segment\",\n        get: function get() {\n          return this._structArray.uint16[this._pos2 + 10];\n        }\n      }, {\n        key: \"lowerSize\",\n        get: function get() {\n          return this._structArray.uint16[this._pos2 + 11];\n        }\n      }, {\n        key: \"upperSize\",\n        get: function get() {\n          return this._structArray.uint16[this._pos2 + 12];\n        }\n      }, {\n        key: \"lineOffsetX\",\n        get: function get() {\n          return this._structArray.float32[this._pos4 + 7];\n        }\n      }, {\n        key: \"lineOffsetY\",\n        get: function get() {\n          return this._structArray.float32[this._pos4 + 8];\n        }\n      }, {\n        key: \"writingMode\",\n        get: function get() {\n          return this._structArray.uint8[this._pos1 + 36];\n        }\n      }, {\n        key: \"placedOrientation\",\n        get: function get() {\n          return this._structArray.uint8[this._pos1 + 37];\n        },\n        set: function set(t) {\n          this._structArray.uint8[this._pos1 + 37] = t;\n        }\n      }, {\n        key: \"hidden\",\n        get: function get() {\n          return this._structArray.uint8[this._pos1 + 38];\n        },\n        set: function set(t) {\n          this._structArray.uint8[this._pos1 + 38] = t;\n        }\n      }, {\n        key: \"crossTileID\",\n        get: function get() {\n          return this._structArray.uint32[this._pos4 + 10];\n        },\n        set: function set(t) {\n          this._structArray.uint32[this._pos4 + 10] = t;\n        }\n      }, {\n        key: \"associatedIconIndex\",\n        get: function get() {\n          return this._structArray.int16[this._pos2 + 22];\n        }\n      }]);\n\n      return Ds;\n    }(ss);\n\n    Ds.prototype.size = 48;\n\n    var Cs = /*#__PURE__*/function (_s24) {\n      _inherits(Cs, _s24);\n\n      var _super32 = _createSuper(Cs);\n\n      function Cs() {\n        _classCallCheck(this, Cs);\n\n        return _super32.apply(this, arguments);\n      }\n\n      _createClass(Cs, [{\n        key: \"get\",\n        value: function get(t) {\n          return new Ds(this, t);\n        }\n      }]);\n\n      return Cs;\n    }(_s);\n\n    Gi(\"PlacedSymbolArray\", Cs);\n\n    var Ps = /*#__PURE__*/function (_ss3) {\n      _inherits(Ps, _ss3);\n\n      var _super33 = _createSuper(Ps);\n\n      function Ps() {\n        _classCallCheck(this, Ps);\n\n        return _super33.apply(this, arguments);\n      }\n\n      _createClass(Ps, [{\n        key: \"anchorX\",\n        get: function get() {\n          return this._structArray.int16[this._pos2 + 0];\n        }\n      }, {\n        key: \"anchorY\",\n        get: function get() {\n          return this._structArray.int16[this._pos2 + 1];\n        }\n      }, {\n        key: \"rightJustifiedTextSymbolIndex\",\n        get: function get() {\n          return this._structArray.int16[this._pos2 + 2];\n        }\n      }, {\n        key: \"centerJustifiedTextSymbolIndex\",\n        get: function get() {\n          return this._structArray.int16[this._pos2 + 3];\n        }\n      }, {\n        key: \"leftJustifiedTextSymbolIndex\",\n        get: function get() {\n          return this._structArray.int16[this._pos2 + 4];\n        }\n      }, {\n        key: \"verticalPlacedTextSymbolIndex\",\n        get: function get() {\n          return this._structArray.int16[this._pos2 + 5];\n        }\n      }, {\n        key: \"placedIconSymbolIndex\",\n        get: function get() {\n          return this._structArray.int16[this._pos2 + 6];\n        }\n      }, {\n        key: \"verticalPlacedIconSymbolIndex\",\n        get: function get() {\n          return this._structArray.int16[this._pos2 + 7];\n        }\n      }, {\n        key: \"key\",\n        get: function get() {\n          return this._structArray.uint16[this._pos2 + 8];\n        }\n      }, {\n        key: \"textBoxStartIndex\",\n        get: function get() {\n          return this._structArray.uint16[this._pos2 + 9];\n        }\n      }, {\n        key: \"textBoxEndIndex\",\n        get: function get() {\n          return this._structArray.uint16[this._pos2 + 10];\n        }\n      }, {\n        key: \"verticalTextBoxStartIndex\",\n        get: function get() {\n          return this._structArray.uint16[this._pos2 + 11];\n        }\n      }, {\n        key: \"verticalTextBoxEndIndex\",\n        get: function get() {\n          return this._structArray.uint16[this._pos2 + 12];\n        }\n      }, {\n        key: \"iconBoxStartIndex\",\n        get: function get() {\n          return this._structArray.uint16[this._pos2 + 13];\n        }\n      }, {\n        key: \"iconBoxEndIndex\",\n        get: function get() {\n          return this._structArray.uint16[this._pos2 + 14];\n        }\n      }, {\n        key: \"verticalIconBoxStartIndex\",\n        get: function get() {\n          return this._structArray.uint16[this._pos2 + 15];\n        }\n      }, {\n        key: \"verticalIconBoxEndIndex\",\n        get: function get() {\n          return this._structArray.uint16[this._pos2 + 16];\n        }\n      }, {\n        key: \"featureIndex\",\n        get: function get() {\n          return this._structArray.uint16[this._pos2 + 17];\n        }\n      }, {\n        key: \"numHorizontalGlyphVertices\",\n        get: function get() {\n          return this._structArray.uint16[this._pos2 + 18];\n        }\n      }, {\n        key: \"numVerticalGlyphVertices\",\n        get: function get() {\n          return this._structArray.uint16[this._pos2 + 19];\n        }\n      }, {\n        key: \"numIconVertices\",\n        get: function get() {\n          return this._structArray.uint16[this._pos2 + 20];\n        }\n      }, {\n        key: \"numVerticalIconVertices\",\n        get: function get() {\n          return this._structArray.uint16[this._pos2 + 21];\n        }\n      }, {\n        key: \"useRuntimeCollisionCircles\",\n        get: function get() {\n          return this._structArray.uint16[this._pos2 + 22];\n        }\n      }, {\n        key: \"crossTileID\",\n        get: function get() {\n          return this._structArray.uint32[this._pos4 + 12];\n        },\n        set: function set(t) {\n          this._structArray.uint32[this._pos4 + 12] = t;\n        }\n      }, {\n        key: \"textBoxScale\",\n        get: function get() {\n          return this._structArray.float32[this._pos4 + 13];\n        }\n      }, {\n        key: \"textOffset0\",\n        get: function get() {\n          return this._structArray.float32[this._pos4 + 14];\n        }\n      }, {\n        key: \"textOffset1\",\n        get: function get() {\n          return this._structArray.float32[this._pos4 + 15];\n        }\n      }, {\n        key: \"collisionCircleDiameter\",\n        get: function get() {\n          return this._structArray.float32[this._pos4 + 16];\n        }\n      }]);\n\n      return Ps;\n    }(ss);\n\n    Ps.prototype.size = 68;\n\n    var Vs = /*#__PURE__*/function (_ks) {\n      _inherits(Vs, _ks);\n\n      var _super34 = _createSuper(Vs);\n\n      function Vs() {\n        _classCallCheck(this, Vs);\n\n        return _super34.apply(this, arguments);\n      }\n\n      _createClass(Vs, [{\n        key: \"get\",\n        value: function get(t) {\n          return new Ps(this, t);\n        }\n      }]);\n\n      return Vs;\n    }(ks);\n\n    Gi(\"SymbolInstanceArray\", Vs);\n\n    var Fs = /*#__PURE__*/function (_As) {\n      _inherits(Fs, _As);\n\n      var _super35 = _createSuper(Fs);\n\n      function Fs() {\n        _classCallCheck(this, Fs);\n\n        return _super35.apply(this, arguments);\n      }\n\n      _createClass(Fs, [{\n        key: \"getoffsetX\",\n        value: function getoffsetX(t) {\n          return this.float32[1 * t + 0];\n        }\n      }]);\n\n      return Fs;\n    }(As);\n\n    Gi(\"GlyphOffsetArray\", Fs);\n\n    var Rs = /*#__PURE__*/function (_Ss) {\n      _inherits(Rs, _Ss);\n\n      var _super36 = _createSuper(Rs);\n\n      function Rs() {\n        _classCallCheck(this, Rs);\n\n        return _super36.apply(this, arguments);\n      }\n\n      _createClass(Rs, [{\n        key: \"getx\",\n        value: function getx(t) {\n          return this.int16[3 * t + 0];\n        }\n      }, {\n        key: \"gety\",\n        value: function gety(t) {\n          return this.int16[3 * t + 1];\n        }\n      }, {\n        key: \"gettileUnitDistanceFromAnchor\",\n        value: function gettileUnitDistanceFromAnchor(t) {\n          return this.int16[3 * t + 2];\n        }\n      }]);\n\n      return Rs;\n    }(Ss);\n\n    Gi(\"SymbolLineVertexArray\", Rs);\n\n    var Ls = /*#__PURE__*/function (_ss4) {\n      _inherits(Ls, _ss4);\n\n      var _super37 = _createSuper(Ls);\n\n      function Ls() {\n        _classCallCheck(this, Ls);\n\n        return _super37.apply(this, arguments);\n      }\n\n      _createClass(Ls, [{\n        key: \"featureIndex\",\n        get: function get() {\n          return this._structArray.uint32[this._pos4 + 0];\n        }\n      }, {\n        key: \"sourceLayerIndex\",\n        get: function get() {\n          return this._structArray.uint16[this._pos2 + 2];\n        }\n      }, {\n        key: \"bucketIndex\",\n        get: function get() {\n          return this._structArray.uint16[this._pos2 + 3];\n        }\n      }, {\n        key: \"layoutVertexArrayOffset\",\n        get: function get() {\n          return this._structArray.uint16[this._pos2 + 4];\n        }\n      }]);\n\n      return Ls;\n    }(ss);\n\n    Ls.prototype.size = 12;\n\n    var Us = /*#__PURE__*/function (_Is) {\n      _inherits(Us, _Is);\n\n      var _super38 = _createSuper(Us);\n\n      function Us() {\n        _classCallCheck(this, Us);\n\n        return _super38.apply(this, arguments);\n      }\n\n      _createClass(Us, [{\n        key: \"get\",\n        value: function get(t) {\n          return new Ls(this, t);\n        }\n      }]);\n\n      return Us;\n    }(Is);\n\n    Gi(\"FeatureIndexArray\", Us);\n\n    var Os = /*#__PURE__*/function (_ss5) {\n      _inherits(Os, _ss5);\n\n      var _super39 = _createSuper(Os);\n\n      function Os() {\n        _classCallCheck(this, Os);\n\n        return _super39.apply(this, arguments);\n      }\n\n      _createClass(Os, [{\n        key: \"a_centroid_pos0\",\n        get: function get() {\n          return this._structArray.uint16[this._pos2 + 0];\n        }\n      }, {\n        key: \"a_centroid_pos1\",\n        get: function get() {\n          return this._structArray.uint16[this._pos2 + 1];\n        }\n      }]);\n\n      return Os;\n    }(ss);\n\n    Os.prototype.size = 4;\n\n    var $s = /*#__PURE__*/function (_Ts) {\n      _inherits($s, _Ts);\n\n      var _super40 = _createSuper($s);\n\n      function $s() {\n        _classCallCheck(this, $s);\n\n        return _super40.apply(this, arguments);\n      }\n\n      _createClass($s, [{\n        key: \"get\",\n        value: function get(t) {\n          return new Os(this, t);\n        }\n      }]);\n\n      return $s;\n    }(Ts);\n\n    Gi(\"FillExtrusionCentroidArray\", $s);\n    var qs = os([{\n      name: \"a_pattern_to\",\n      components: 4,\n      type: \"Uint16\"\n    }, {\n      name: \"a_pattern_from\",\n      components: 4,\n      type: \"Uint16\"\n    }, {\n      name: \"a_pixel_ratio_to\",\n      components: 1,\n      type: \"Uint16\"\n    }, {\n      name: \"a_pixel_ratio_from\",\n      components: 1,\n      type: \"Uint16\"\n    }]);\n    var Ns = ae(function (t) {\n      t.exports = function (t, e) {\n        var r, i, n, s, a, o, l, u;\n\n        for (i = t.length - (r = 3 & t.length), n = e, a = 3432918353, o = 461845907, u = 0; u < i;) {\n          l = 255 & t.charCodeAt(u) | (255 & t.charCodeAt(++u)) << 8 | (255 & t.charCodeAt(++u)) << 16 | (255 & t.charCodeAt(++u)) << 24, ++u, n = 27492 + (65535 & (s = 5 * (65535 & (n = (n ^= l = (65535 & (l = (l = (65535 & l) * a + (((l >>> 16) * a & 65535) << 16) & 4294967295) << 15 | l >>> 17)) * o + (((l >>> 16) * o & 65535) << 16) & 4294967295) << 13 | n >>> 19)) + ((5 * (n >>> 16) & 65535) << 16) & 4294967295)) + ((58964 + (s >>> 16) & 65535) << 16);\n        }\n\n        switch (l = 0, r) {\n          case 3:\n            l ^= (255 & t.charCodeAt(u + 2)) << 16;\n\n          case 2:\n            l ^= (255 & t.charCodeAt(u + 1)) << 8;\n\n          case 1:\n            n ^= l = (65535 & (l = (l = (65535 & (l ^= 255 & t.charCodeAt(u))) * a + (((l >>> 16) * a & 65535) << 16) & 4294967295) << 15 | l >>> 17)) * o + (((l >>> 16) * o & 65535) << 16) & 4294967295;\n        }\n\n        return n ^= t.length, n = 2246822507 * (65535 & (n ^= n >>> 16)) + ((2246822507 * (n >>> 16) & 65535) << 16) & 4294967295, n = 3266489909 * (65535 & (n ^= n >>> 13)) + ((3266489909 * (n >>> 16) & 65535) << 16) & 4294967295, (n ^= n >>> 16) >>> 0;\n      };\n    }),\n        js = ae(function (t) {\n      t.exports = function (t, e) {\n        for (var r, i = t.length, n = e ^ i, s = 0; i >= 4;) {\n          r = 1540483477 * (65535 & (r = 255 & t.charCodeAt(s) | (255 & t.charCodeAt(++s)) << 8 | (255 & t.charCodeAt(++s)) << 16 | (255 & t.charCodeAt(++s)) << 24)) + ((1540483477 * (r >>> 16) & 65535) << 16), n = 1540483477 * (65535 & n) + ((1540483477 * (n >>> 16) & 65535) << 16) ^ (r = 1540483477 * (65535 & (r ^= r >>> 24)) + ((1540483477 * (r >>> 16) & 65535) << 16)), i -= 4, ++s;\n        }\n\n        switch (i) {\n          case 3:\n            n ^= (255 & t.charCodeAt(s + 2)) << 16;\n\n          case 2:\n            n ^= (255 & t.charCodeAt(s + 1)) << 8;\n\n          case 1:\n            n = 1540483477 * (65535 & (n ^= 255 & t.charCodeAt(s))) + ((1540483477 * (n >>> 16) & 65535) << 16);\n        }\n\n        return n = 1540483477 * (65535 & (n ^= n >>> 13)) + ((1540483477 * (n >>> 16) & 65535) << 16), (n ^= n >>> 15) >>> 0;\n      };\n    }),\n        Gs = Ns,\n        Zs = js;\n    Gs.murmur3 = Ns, Gs.murmur2 = Zs;\n\n    var Xs = /*#__PURE__*/function () {\n      function Xs() {\n        _classCallCheck(this, Xs);\n\n        this.ids = [], this.positions = [], this.indexed = !1;\n      }\n\n      _createClass(Xs, [{\n        key: \"add\",\n        value: function add(t, e, r, i) {\n          this.ids.push(Ks(t)), this.positions.push(e, r, i);\n        }\n      }, {\n        key: \"getPositions\",\n        value: function getPositions(t) {\n          var e = Ks(t);\n          var r = 0,\n              i = this.ids.length - 1;\n\n          for (; r < i;) {\n            var _t54 = r + i >> 1;\n\n            this.ids[_t54] >= e ? i = _t54 : r = _t54 + 1;\n          }\n\n          var n = [];\n\n          for (; this.ids[r] === e;) {\n            n.push({\n              index: this.positions[3 * r],\n              start: this.positions[3 * r + 1],\n              end: this.positions[3 * r + 2]\n            }), r++;\n          }\n\n          return n;\n        }\n      }], [{\n        key: \"serialize\",\n        value: function serialize(t, e) {\n          var r = new Float64Array(t.ids),\n              i = new Uint32Array(t.positions);\n          return function t(e, r, i, n) {\n            for (; i < n;) {\n              var _s25 = e[i + n >> 1];\n\n              var _a25 = i - 1,\n                  _o7 = n + 1;\n\n              for (;;) {\n                do {\n                  _a25++;\n                } while (e[_a25] < _s25);\n\n                do {\n                  _o7--;\n                } while (e[_o7] > _s25);\n\n                if (_a25 >= _o7) break;\n                Hs(e, _a25, _o7), Hs(r, 3 * _a25, 3 * _o7), Hs(r, 3 * _a25 + 1, 3 * _o7 + 1), Hs(r, 3 * _a25 + 2, 3 * _o7 + 2);\n              }\n\n              _o7 - i < n - _o7 ? (t(e, r, i, _o7), i = _o7 + 1) : (t(e, r, _o7 + 1, n), n = _o7);\n            }\n          }(r, i, 0, r.length - 1), e && e.push(r.buffer, i.buffer), {\n            ids: r,\n            positions: i\n          };\n        }\n      }, {\n        key: \"deserialize\",\n        value: function deserialize(t) {\n          var e = new Xs();\n          return e.ids = t.ids, e.positions = t.positions, e.indexed = !0, e;\n        }\n      }]);\n\n      return Xs;\n    }();\n\n    function Ks(t) {\n      var e = +t;\n      return !isNaN(e) && e <= o ? e : Gs(String(t));\n    }\n\n    function Hs(t, e, r) {\n      var i = t[e];\n      t[e] = t[r], t[r] = i;\n    }\n\n    Gi(\"FeaturePositionMap\", Xs);\n\n    var Ys = function Ys(t, e) {\n      _classCallCheck(this, Ys);\n\n      this.gl = t.gl, this.location = e;\n    };\n\n    var Ws = /*#__PURE__*/function (_Ys) {\n      _inherits(Ws, _Ys);\n\n      var _super41 = _createSuper(Ws);\n\n      function Ws(t, e) {\n        var _this13;\n\n        _classCallCheck(this, Ws);\n\n        _this13 = _super41.call(this, t, e), _this13.current = 0;\n        return _this13;\n      }\n\n      _createClass(Ws, [{\n        key: \"set\",\n        value: function set(t) {\n          this.current !== t && (this.current = t, this.gl.uniform1f(this.location, t));\n        }\n      }]);\n\n      return Ws;\n    }(Ys);\n\n    var Js = /*#__PURE__*/function (_Ys2) {\n      _inherits(Js, _Ys2);\n\n      var _super42 = _createSuper(Js);\n\n      function Js(t, e) {\n        var _this14;\n\n        _classCallCheck(this, Js);\n\n        _this14 = _super42.call(this, t, e), _this14.current = [0, 0, 0, 0];\n        return _this14;\n      }\n\n      _createClass(Js, [{\n        key: \"set\",\n        value: function set(t) {\n          t[0] === this.current[0] && t[1] === this.current[1] && t[2] === this.current[2] && t[3] === this.current[3] || (this.current = t, this.gl.uniform4f(this.location, t[0], t[1], t[2], t[3]));\n        }\n      }]);\n\n      return Js;\n    }(Ys);\n\n    var Qs = /*#__PURE__*/function (_Ys3) {\n      _inherits(Qs, _Ys3);\n\n      var _super43 = _createSuper(Qs);\n\n      function Qs(t, e) {\n        var _this15;\n\n        _classCallCheck(this, Qs);\n\n        _this15 = _super43.call(this, t, e), _this15.current = le.transparent;\n        return _this15;\n      }\n\n      _createClass(Qs, [{\n        key: \"set\",\n        value: function set(t) {\n          t.r === this.current.r && t.g === this.current.g && t.b === this.current.b && t.a === this.current.a || (this.current = t, this.gl.uniform4f(this.location, t.r, t.g, t.b, t.a));\n        }\n      }]);\n\n      return Qs;\n    }(Ys);\n\n    var ta = new Float32Array(16),\n        ea = new Float32Array(9);\n\n    function ra(t) {\n      return [is(255 * t.r, 255 * t.g), is(255 * t.b, 255 * t.a)];\n    }\n\n    var ia = /*#__PURE__*/function () {\n      function ia(t, e, r) {\n        _classCallCheck(this, ia);\n\n        this.value = t, this.uniformNames = e.map(function (t) {\n          return \"u_\".concat(t);\n        }), this.type = r;\n      }\n\n      _createClass(ia, [{\n        key: \"setUniform\",\n        value: function setUniform(t, e, r) {\n          t.set(r.constantOr(this.value));\n        }\n      }, {\n        key: \"getBinding\",\n        value: function getBinding(t, e, r) {\n          return \"color\" === this.type ? new Qs(t, e) : new Ws(t, e);\n        }\n      }]);\n\n      return ia;\n    }();\n\n    var na = /*#__PURE__*/function () {\n      function na(t, e) {\n        _classCallCheck(this, na);\n\n        this.uniformNames = e.map(function (t) {\n          return \"u_\".concat(t);\n        }), this.patternFrom = null, this.patternTo = null, this.pixelRatioFrom = 1, this.pixelRatioTo = 1;\n      }\n\n      _createClass(na, [{\n        key: \"setConstantPatternPositions\",\n        value: function setConstantPatternPositions(t, e) {\n          this.pixelRatioFrom = e.pixelRatio, this.pixelRatioTo = t.pixelRatio, this.patternFrom = e.tlbr, this.patternTo = t.tlbr;\n        }\n      }, {\n        key: \"setUniform\",\n        value: function setUniform(t, e, r, i) {\n          var n = \"u_pattern_to\" === i ? this.patternTo : \"u_pattern_from\" === i ? this.patternFrom : \"u_pixel_ratio_to\" === i ? this.pixelRatioTo : \"u_pixel_ratio_from\" === i ? this.pixelRatioFrom : null;\n          n && t.set(n);\n        }\n      }, {\n        key: \"getBinding\",\n        value: function getBinding(t, e, r) {\n          return \"u_pattern\" === r.substr(0, 9) ? new Js(t, e) : new Ws(t, e);\n        }\n      }]);\n\n      return na;\n    }();\n\n    var sa = /*#__PURE__*/function () {\n      function sa(t, e, r, i) {\n        _classCallCheck(this, sa);\n\n        this.expression = t, this.type = r, this.maxValue = 0, this.paintVertexAttributes = e.map(function (t) {\n          return {\n            name: \"a_\".concat(t),\n            type: \"Float32\",\n            components: \"color\" === r ? 2 : 1,\n            offset: 0\n          };\n        }), this.paintVertexArray = new i();\n      }\n\n      _createClass(sa, [{\n        key: \"populatePaintArray\",\n        value: function populatePaintArray(t, e, r, i, n) {\n          var s = this.paintVertexArray.length,\n              a = this.expression.evaluate(new qn(0), e, {}, i, [], n);\n          this.paintVertexArray.resize(t), this._setPaintValue(s, t, a);\n        }\n      }, {\n        key: \"updatePaintArray\",\n        value: function updatePaintArray(t, e, r, i) {\n          var n = this.expression.evaluate({\n            zoom: 0\n          }, r, i);\n\n          this._setPaintValue(t, e, n);\n        }\n      }, {\n        key: \"_setPaintValue\",\n        value: function _setPaintValue(t, e, r) {\n          if (\"color\" === this.type) {\n            var _i53 = ra(r);\n\n            for (var _r67 = t; _r67 < e; _r67++) {\n              this.paintVertexArray.emplace(_r67, _i53[0], _i53[1]);\n            }\n          } else {\n            for (var _i54 = t; _i54 < e; _i54++) {\n              this.paintVertexArray.emplace(_i54, r);\n            }\n\n            this.maxValue = Math.max(this.maxValue, Math.abs(r));\n          }\n        }\n      }, {\n        key: \"upload\",\n        value: function upload(t) {\n          this.paintVertexArray && this.paintVertexArray.arrayBuffer && (this.paintVertexBuffer && this.paintVertexBuffer.buffer ? this.paintVertexBuffer.updateData(this.paintVertexArray) : this.paintVertexBuffer = t.createVertexBuffer(this.paintVertexArray, this.paintVertexAttributes, this.expression.isStateDependent));\n        }\n      }, {\n        key: \"destroy\",\n        value: function destroy() {\n          this.paintVertexBuffer && this.paintVertexBuffer.destroy();\n        }\n      }]);\n\n      return sa;\n    }();\n\n    var aa = /*#__PURE__*/function () {\n      function aa(t, e, r, i, n, s) {\n        _classCallCheck(this, aa);\n\n        this.expression = t, this.uniformNames = e.map(function (t) {\n          return \"u_\".concat(t, \"_t\");\n        }), this.type = r, this.useIntegerZoom = i, this.zoom = n, this.maxValue = 0, this.paintVertexAttributes = e.map(function (t) {\n          return {\n            name: \"a_\".concat(t),\n            type: \"Float32\",\n            components: \"color\" === r ? 4 : 2,\n            offset: 0\n          };\n        }), this.paintVertexArray = new s();\n      }\n\n      _createClass(aa, [{\n        key: \"populatePaintArray\",\n        value: function populatePaintArray(t, e, r, i, n) {\n          var s = this.expression.evaluate(new qn(this.zoom), e, {}, i, [], n),\n              a = this.expression.evaluate(new qn(this.zoom + 1), e, {}, i, [], n),\n              o = this.paintVertexArray.length;\n          this.paintVertexArray.resize(t), this._setPaintValue(o, t, s, a);\n        }\n      }, {\n        key: \"updatePaintArray\",\n        value: function updatePaintArray(t, e, r, i) {\n          var n = this.expression.evaluate({\n            zoom: this.zoom\n          }, r, i),\n              s = this.expression.evaluate({\n            zoom: this.zoom + 1\n          }, r, i);\n\n          this._setPaintValue(t, e, n, s);\n        }\n      }, {\n        key: \"_setPaintValue\",\n        value: function _setPaintValue(t, e, r, i) {\n          if (\"color\" === this.type) {\n            var _n36 = ra(r),\n                _s26 = ra(i);\n\n            for (var _r68 = t; _r68 < e; _r68++) {\n              this.paintVertexArray.emplace(_r68, _n36[0], _n36[1], _s26[0], _s26[1]);\n            }\n          } else {\n            for (var _n37 = t; _n37 < e; _n37++) {\n              this.paintVertexArray.emplace(_n37, r, i);\n            }\n\n            this.maxValue = Math.max(this.maxValue, Math.abs(r), Math.abs(i));\n          }\n        }\n      }, {\n        key: \"upload\",\n        value: function upload(t) {\n          this.paintVertexArray && this.paintVertexArray.arrayBuffer && (this.paintVertexBuffer && this.paintVertexBuffer.buffer ? this.paintVertexBuffer.updateData(this.paintVertexArray) : this.paintVertexBuffer = t.createVertexBuffer(this.paintVertexArray, this.paintVertexAttributes, this.expression.isStateDependent));\n        }\n      }, {\n        key: \"destroy\",\n        value: function destroy() {\n          this.paintVertexBuffer && this.paintVertexBuffer.destroy();\n        }\n      }, {\n        key: \"setUniform\",\n        value: function setUniform(t, e) {\n          var r = this.useIntegerZoom ? Math.floor(e.zoom) : e.zoom,\n              i = f(this.expression.interpolationFactor(r, this.zoom, this.zoom + 1), 0, 1);\n          t.set(i);\n        }\n      }, {\n        key: \"getBinding\",\n        value: function getBinding(t, e, r) {\n          return new Ws(t, e);\n        }\n      }]);\n\n      return aa;\n    }();\n\n    var oa = /*#__PURE__*/function () {\n      function oa(t, e, r, i, n, s, a) {\n        _classCallCheck(this, oa);\n\n        this.expression = t, this.type = r, this.useIntegerZoom = i, this.zoom = n, this.layerId = a;\n\n        for (var _t55 = 0; _t55 < e.length; ++_t55) {\n          ;\n        }\n\n        this.zoomInPaintVertexArray = new s(), this.zoomOutPaintVertexArray = new s();\n      }\n\n      _createClass(oa, [{\n        key: \"populatePaintArray\",\n        value: function populatePaintArray(t, e, r) {\n          var i = this.zoomInPaintVertexArray.length;\n          this.zoomInPaintVertexArray.resize(t), this.zoomOutPaintVertexArray.resize(t), this._setPaintValues(i, t, e.patterns && e.patterns[this.layerId], r);\n        }\n      }, {\n        key: \"updatePaintArray\",\n        value: function updatePaintArray(t, e, r, i, n) {\n          this._setPaintValues(t, e, r.patterns && r.patterns[this.layerId], n);\n        }\n      }, {\n        key: \"_setPaintValues\",\n        value: function _setPaintValues(t, e, r, i) {\n          if (!i || !r) return;\n          var n = r.min,\n              s = r.mid,\n              a = r.max,\n              o = i[n],\n              l = i[s],\n              u = i[a];\n          if (o && l && u) for (var _r69 = t; _r69 < e; _r69++) {\n            this.zoomInPaintVertexArray.emplace(_r69, l.tl[0], l.tl[1], l.br[0], l.br[1], o.tl[0], o.tl[1], o.br[0], o.br[1], l.pixelRatio, o.pixelRatio), this.zoomOutPaintVertexArray.emplace(_r69, l.tl[0], l.tl[1], l.br[0], l.br[1], u.tl[0], u.tl[1], u.br[0], u.br[1], l.pixelRatio, u.pixelRatio);\n          }\n        }\n      }, {\n        key: \"upload\",\n        value: function upload(t) {\n          this.zoomInPaintVertexArray && this.zoomInPaintVertexArray.arrayBuffer && this.zoomOutPaintVertexArray && this.zoomOutPaintVertexArray.arrayBuffer && (this.zoomInPaintVertexBuffer = t.createVertexBuffer(this.zoomInPaintVertexArray, qs.members, this.expression.isStateDependent), this.zoomOutPaintVertexBuffer = t.createVertexBuffer(this.zoomOutPaintVertexArray, qs.members, this.expression.isStateDependent));\n        }\n      }, {\n        key: \"destroy\",\n        value: function destroy() {\n          this.zoomOutPaintVertexBuffer && this.zoomOutPaintVertexBuffer.destroy(), this.zoomInPaintVertexBuffer && this.zoomInPaintVertexBuffer.destroy();\n        }\n      }]);\n\n      return oa;\n    }();\n\n    var la = /*#__PURE__*/function () {\n      function la(t, e) {\n        var r = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : function () {\n          return !0;\n        };\n\n        _classCallCheck(this, la);\n\n        this.binders = {}, this._buffers = [];\n        var i = [];\n\n        for (var _n38 in t.paint._values) {\n          if (!r(_n38)) continue;\n\n          var _s27 = t.paint.get(_n38);\n\n          if (!(_s27 instanceof Hn && Or(_s27.property.specification))) continue;\n\n          var _a26 = ca(_n38, t.type),\n              _o8 = _s27.value,\n              _l7 = _s27.property.specification.type,\n              _u7 = _s27.property.useIntegerZoom,\n              _c4 = _s27.property.specification[\"property-type\"],\n              _h2 = \"cross-faded\" === _c4 || \"cross-faded-data-driven\" === _c4;\n\n          if (\"constant\" === _o8.kind) this.binders[_n38] = _h2 ? new na(_o8.value, _a26) : new ia(_o8.value, _a26, _l7), i.push(\"/u_\".concat(_n38));else if (\"source\" === _o8.kind || _h2) {\n            var _r70 = ha(_n38, _l7, \"source\");\n\n            this.binders[_n38] = _h2 ? new oa(_o8, _a26, _l7, _u7, e, _r70, t.id) : new sa(_o8, _a26, _l7, _r70), i.push(\"/a_\".concat(_n38));\n          } else {\n            var _t56 = ha(_n38, _l7, \"composite\");\n\n            this.binders[_n38] = new aa(_o8, _a26, _l7, _u7, e, _t56), i.push(\"/z_\".concat(_n38));\n          }\n        }\n\n        this.cacheKey = i.sort().join(\"\");\n      }\n\n      _createClass(la, [{\n        key: \"getMaxValue\",\n        value: function getMaxValue(t) {\n          var e = this.binders[t];\n          return e instanceof sa || e instanceof aa ? e.maxValue : 0;\n        }\n      }, {\n        key: \"populatePaintArrays\",\n        value: function populatePaintArrays(t, e, r, i, n) {\n          for (var _s28 in this.binders) {\n            var _a27 = this.binders[_s28];\n            (_a27 instanceof sa || _a27 instanceof aa || _a27 instanceof oa) && _a27.populatePaintArray(t, e, r, i, n);\n          }\n        }\n      }, {\n        key: \"setConstantPatternPositions\",\n        value: function setConstantPatternPositions(t, e) {\n          for (var _r71 in this.binders) {\n            var _i55 = this.binders[_r71];\n            _i55 instanceof na && _i55.setConstantPatternPositions(t, e);\n          }\n        }\n      }, {\n        key: \"updatePaintArrays\",\n        value: function updatePaintArrays(t, e, r, i, n) {\n          var s = !1;\n\n          for (var _a28 in t) {\n            var _o9 = e.getPositions(_a28);\n\n            var _iterator49 = _createForOfIteratorHelper(_o9),\n                _step49;\n\n            try {\n              for (_iterator49.s(); !(_step49 = _iterator49.n()).done;) {\n                var _e54 = _step49.value;\n\n                var _o10 = r.feature(_e54.index);\n\n                for (var _r72 in this.binders) {\n                  var _l8 = this.binders[_r72];\n\n                  if ((_l8 instanceof sa || _l8 instanceof aa || _l8 instanceof oa) && !0 === _l8.expression.isStateDependent) {\n                    var _u8 = i.paint.get(_r72);\n\n                    _l8.expression = _u8.value, _l8.updatePaintArray(_e54.start, _e54.end, _o10, t[_a28], n), s = !0;\n                  }\n                }\n              }\n            } catch (err) {\n              _iterator49.e(err);\n            } finally {\n              _iterator49.f();\n            }\n          }\n\n          return s;\n        }\n      }, {\n        key: \"defines\",\n        value: function defines() {\n          var t = [];\n\n          for (var _e55 in this.binders) {\n            var _r73 = this.binders[_e55];\n            (_r73 instanceof ia || _r73 instanceof na) && t.push.apply(t, _toConsumableArray(_r73.uniformNames.map(function (t) {\n              return \"#define HAS_UNIFORM_\".concat(t);\n            })));\n          }\n\n          return t;\n        }\n      }, {\n        key: \"getBinderAttributes\",\n        value: function getBinderAttributes() {\n          var t = [];\n\n          for (var _e56 in this.binders) {\n            var _r74 = this.binders[_e56];\n            if (_r74 instanceof sa || _r74 instanceof aa) for (var _e57 = 0; _e57 < _r74.paintVertexAttributes.length; _e57++) {\n              t.push(_r74.paintVertexAttributes[_e57].name);\n            } else if (_r74 instanceof oa) for (var _e58 = 0; _e58 < qs.members.length; _e58++) {\n              t.push(qs.members[_e58].name);\n            }\n          }\n\n          return t;\n        }\n      }, {\n        key: \"getBinderUniforms\",\n        value: function getBinderUniforms() {\n          var t = [];\n\n          for (var _e59 in this.binders) {\n            var _r75 = this.binders[_e59];\n\n            if (_r75 instanceof ia || _r75 instanceof na || _r75 instanceof aa) {\n              var _iterator50 = _createForOfIteratorHelper(_r75.uniformNames),\n                  _step50;\n\n              try {\n                for (_iterator50.s(); !(_step50 = _iterator50.n()).done;) {\n                  var _e60 = _step50.value;\n                  t.push(_e60);\n                }\n              } catch (err) {\n                _iterator50.e(err);\n              } finally {\n                _iterator50.f();\n              }\n            }\n          }\n\n          return t;\n        }\n      }, {\n        key: \"getPaintVertexBuffers\",\n        value: function getPaintVertexBuffers() {\n          return this._buffers;\n        }\n      }, {\n        key: \"getUniforms\",\n        value: function getUniforms(t, e) {\n          var r = [];\n\n          for (var _i56 in this.binders) {\n            var _n39 = this.binders[_i56];\n\n            if (_n39 instanceof ia || _n39 instanceof na || _n39 instanceof aa) {\n              var _iterator51 = _createForOfIteratorHelper(_n39.uniformNames),\n                  _step51;\n\n              try {\n                for (_iterator51.s(); !(_step51 = _iterator51.n()).done;) {\n                  var _s29 = _step51.value;\n\n                  if (e[_s29]) {\n                    var _a29 = _n39.getBinding(t, e[_s29], _s29);\n\n                    r.push({\n                      name: _s29,\n                      property: _i56,\n                      binding: _a29\n                    });\n                  }\n                }\n              } catch (err) {\n                _iterator51.e(err);\n              } finally {\n                _iterator51.f();\n              }\n            }\n          }\n\n          return r;\n        }\n      }, {\n        key: \"setUniforms\",\n        value: function setUniforms(t, e, r, i) {\n          var _iterator52 = _createForOfIteratorHelper(e),\n              _step52;\n\n          try {\n            for (_iterator52.s(); !(_step52 = _iterator52.n()).done;) {\n              var _ref137 = _step52.value;\n              var _t57 = _ref137.name;\n              var _n40 = _ref137.property;\n              var _s30 = _ref137.binding;\n\n              this.binders[_n40].setUniform(_s30, i, r.get(_n40), _t57);\n            }\n          } catch (err) {\n            _iterator52.e(err);\n          } finally {\n            _iterator52.f();\n          }\n        }\n      }, {\n        key: \"updatePaintBuffers\",\n        value: function updatePaintBuffers(t) {\n          this._buffers = [];\n\n          for (var _e61 in this.binders) {\n            var _r76 = this.binders[_e61];\n\n            if (t && _r76 instanceof oa) {\n              var _e62 = 2 === t.fromScale ? _r76.zoomInPaintVertexBuffer : _r76.zoomOutPaintVertexBuffer;\n\n              _e62 && this._buffers.push(_e62);\n            } else (_r76 instanceof sa || _r76 instanceof aa) && _r76.paintVertexBuffer && this._buffers.push(_r76.paintVertexBuffer);\n          }\n        }\n      }, {\n        key: \"upload\",\n        value: function upload(t) {\n          for (var _e63 in this.binders) {\n            var _r77 = this.binders[_e63];\n            (_r77 instanceof sa || _r77 instanceof aa || _r77 instanceof oa) && _r77.upload(t);\n          }\n\n          this.updatePaintBuffers();\n        }\n      }, {\n        key: \"destroy\",\n        value: function destroy() {\n          for (var _t58 in this.binders) {\n            var _e64 = this.binders[_t58];\n            (_e64 instanceof sa || _e64 instanceof aa || _e64 instanceof oa) && _e64.destroy();\n          }\n        }\n      }]);\n\n      return la;\n    }();\n\n    var ua = /*#__PURE__*/function () {\n      function ua(t, e) {\n        var r = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : function () {\n          return !0;\n        };\n\n        _classCallCheck(this, ua);\n\n        this.programConfigurations = {};\n\n        var _iterator53 = _createForOfIteratorHelper(t),\n            _step53;\n\n        try {\n          for (_iterator53.s(); !(_step53 = _iterator53.n()).done;) {\n            var _i57 = _step53.value;\n            this.programConfigurations[_i57.id] = new la(_i57, e, r);\n          }\n        } catch (err) {\n          _iterator53.e(err);\n        } finally {\n          _iterator53.f();\n        }\n\n        this.needsUpload = !1, this._featureMap = new Xs(), this._bufferOffset = 0;\n      }\n\n      _createClass(ua, [{\n        key: \"populatePaintArrays\",\n        value: function populatePaintArrays(t, e, r, i, n, s) {\n          for (var _r78 in this.programConfigurations) {\n            this.programConfigurations[_r78].populatePaintArrays(t, e, i, n, s);\n          }\n\n          void 0 !== e.id && this._featureMap.add(e.id, r, this._bufferOffset, t), this._bufferOffset = t, this.needsUpload = !0;\n        }\n      }, {\n        key: \"updatePaintArrays\",\n        value: function updatePaintArrays(t, e, r, i) {\n          var _iterator54 = _createForOfIteratorHelper(r),\n              _step54;\n\n          try {\n            for (_iterator54.s(); !(_step54 = _iterator54.n()).done;) {\n              var _n41 = _step54.value;\n              this.needsUpload = this.programConfigurations[_n41.id].updatePaintArrays(t, this._featureMap, e, _n41, i) || this.needsUpload;\n            }\n          } catch (err) {\n            _iterator54.e(err);\n          } finally {\n            _iterator54.f();\n          }\n        }\n      }, {\n        key: \"get\",\n        value: function get(t) {\n          return this.programConfigurations[t];\n        }\n      }, {\n        key: \"upload\",\n        value: function upload(t) {\n          if (this.needsUpload) {\n            for (var _e65 in this.programConfigurations) {\n              this.programConfigurations[_e65].upload(t);\n            }\n\n            this.needsUpload = !1;\n          }\n        }\n      }, {\n        key: \"destroy\",\n        value: function destroy() {\n          for (var _t59 in this.programConfigurations) {\n            this.programConfigurations[_t59].destroy();\n          }\n        }\n      }]);\n\n      return ua;\n    }();\n\n    function ca(t, e) {\n      return {\n        \"text-opacity\": [\"opacity\"],\n        \"icon-opacity\": [\"opacity\"],\n        \"text-color\": [\"fill_color\"],\n        \"icon-color\": [\"fill_color\"],\n        \"text-halo-color\": [\"halo_color\"],\n        \"icon-halo-color\": [\"halo_color\"],\n        \"text-halo-blur\": [\"halo_blur\"],\n        \"icon-halo-blur\": [\"halo_blur\"],\n        \"text-halo-width\": [\"halo_width\"],\n        \"icon-halo-width\": [\"halo_width\"],\n        \"line-gap-width\": [\"gapwidth\"],\n        \"line-pattern\": [\"pattern_to\", \"pattern_from\", \"pixel_ratio_to\", \"pixel_ratio_from\"],\n        \"fill-pattern\": [\"pattern_to\", \"pattern_from\", \"pixel_ratio_to\", \"pixel_ratio_from\"],\n        \"fill-extrusion-pattern\": [\"pattern_to\", \"pattern_from\", \"pixel_ratio_to\", \"pixel_ratio_from\"]\n      }[t] || [t.replace(\"\".concat(e, \"-\"), \"\").replace(/-/g, \"_\")];\n    }\n\n    function ha(t, e, r) {\n      var i = {\n        color: {\n          source: ps,\n          composite: Es\n        },\n        number: {\n          source: As,\n          composite: ps\n        }\n      },\n          n = function (t) {\n        return {\n          \"line-pattern\": {\n            source: ds,\n            composite: ds\n          },\n          \"fill-pattern\": {\n            source: ds,\n            composite: ds\n          },\n          \"fill-extrusion-pattern\": {\n            source: ds,\n            composite: ds\n          }\n        }[t];\n      }(t);\n\n      return n && n[r] || i[e][r];\n    }\n\n    Gi(\"ConstantBinder\", ia), Gi(\"CrossFadedConstantBinder\", na), Gi(\"SourceExpressionBinder\", sa), Gi(\"CrossFadedCompositeBinder\", oa), Gi(\"CompositeExpressionBinder\", aa), Gi(\"ProgramConfiguration\", la, {\n      omit: [\"_buffers\"]\n    }), Gi(\"ProgramConfigurationSet\", ua);\n\n    var pa = /*#__PURE__*/function (_Vt) {\n      _inherits(pa, _Vt);\n\n      var _super44 = _createSuper(pa);\n\n      function pa(t, e) {\n        var _this16;\n\n        _classCallCheck(this, pa);\n\n        if (_this16 = _super44.call(this), _this16.id = t.id, _this16.type = t.type, _this16._featureFilter = {\n          filter: function filter() {\n            return !0;\n          },\n          needGeometry: !1\n        }, \"custom\" !== t.type && (_this16.metadata = (t = t).metadata, _this16.minzoom = t.minzoom, _this16.maxzoom = t.maxzoom, \"background\" !== t.type && \"sky\" !== t.type && (_this16.source = t.source, _this16.sourceLayer = t[\"source-layer\"], _this16.filter = t.filter), e.layout && (_this16._unevaluatedLayout = new Kn(e.layout)), e.paint)) {\n          _this16._transitionablePaint = new Gn(e.paint);\n\n          for (var _e66 in t.paint) {\n            _this16.setPaintProperty(_e66, t.paint[_e66], {\n              validate: !1\n            });\n          }\n\n          for (var _e67 in t.layout) {\n            _this16.setLayoutProperty(_e67, t.layout[_e67], {\n              validate: !1\n            });\n          }\n\n          _this16._transitioningPaint = _this16._transitionablePaint.untransitioned(), _this16.paint = new Yn(e.paint);\n        }\n\n        return _possibleConstructorReturn(_this16);\n      }\n\n      _createClass(pa, [{\n        key: \"getCrossfadeParameters\",\n        value: function getCrossfadeParameters() {\n          return this._crossfadeParameters;\n        }\n      }, {\n        key: \"getLayoutProperty\",\n        value: function getLayoutProperty(t) {\n          return \"visibility\" === t ? this.visibility : this._unevaluatedLayout.getValue(t);\n        }\n      }, {\n        key: \"setLayoutProperty\",\n        value: function setLayoutProperty(t, e) {\n          var r = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n          null != e && this._validate(Li, \"layers.\".concat(this.id, \".layout.\").concat(t), t, e, r) || (\"visibility\" !== t ? this._unevaluatedLayout.setValue(t, e) : this.visibility = e);\n        }\n      }, {\n        key: \"getPaintProperty\",\n        value: function getPaintProperty(t) {\n          return A(t, \"-transition\") ? this._transitionablePaint.getTransition(t.slice(0, -\"-transition\".length)) : this._transitionablePaint.getValue(t);\n        }\n      }, {\n        key: \"setPaintProperty\",\n        value: function setPaintProperty(t, e) {\n          var r = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n          if (null != e && this._validate(Ri, \"layers.\".concat(this.id, \".paint.\").concat(t), t, e, r)) return !1;\n          if (A(t, \"-transition\")) return this._transitionablePaint.setTransition(t.slice(0, -\"-transition\".length), e || void 0), !1;\n          {\n            var _r79 = this._transitionablePaint._values[t],\n                _i58 = \"cross-faded-data-driven\" === _r79.property.specification[\"property-type\"],\n                _n42 = _r79.value.isDataDriven(),\n                _s31 = _r79.value;\n\n            this._transitionablePaint.setValue(t, e), this._handleSpecialPaintPropertyUpdate(t);\n            var _a30 = this._transitionablePaint._values[t].value;\n            return _a30.isDataDriven() || _n42 || _i58 || this._handleOverridablePaintPropertyUpdate(t, _s31, _a30);\n          }\n        }\n      }, {\n        key: \"_handleSpecialPaintPropertyUpdate\",\n        value: function _handleSpecialPaintPropertyUpdate(t) {}\n      }, {\n        key: \"getProgramIds\",\n        value: function getProgramIds() {\n          return null;\n        }\n      }, {\n        key: \"getProgramConfiguration\",\n        value: function getProgramConfiguration(t) {\n          return null;\n        }\n      }, {\n        key: \"_handleOverridablePaintPropertyUpdate\",\n        value: function _handleOverridablePaintPropertyUpdate(t, e, r) {\n          return !1;\n        }\n      }, {\n        key: \"isHidden\",\n        value: function isHidden(t) {\n          return !!(this.minzoom && t < this.minzoom) || !!(this.maxzoom && t >= this.maxzoom) || \"none\" === this.visibility;\n        }\n      }, {\n        key: \"updateTransitions\",\n        value: function updateTransitions(t) {\n          this._transitioningPaint = this._transitionablePaint.transitioned(t, this._transitioningPaint);\n        }\n      }, {\n        key: \"hasTransition\",\n        value: function hasTransition() {\n          return this._transitioningPaint.hasTransition();\n        }\n      }, {\n        key: \"recalculate\",\n        value: function recalculate(t, e) {\n          t.getCrossfadeParameters && (this._crossfadeParameters = t.getCrossfadeParameters()), this._unevaluatedLayout && (this.layout = this._unevaluatedLayout.possiblyEvaluate(t, void 0, e)), this.paint = this._transitioningPaint.possiblyEvaluate(t, void 0, e);\n        }\n      }, {\n        key: \"serialize\",\n        value: function serialize() {\n          var t = {\n            id: this.id,\n            type: this.type,\n            source: this.source,\n            \"source-layer\": this.sourceLayer,\n            metadata: this.metadata,\n            minzoom: this.minzoom,\n            maxzoom: this.maxzoom,\n            filter: this.filter,\n            layout: this._unevaluatedLayout && this._unevaluatedLayout.serialize(),\n            paint: this._transitionablePaint && this._transitionablePaint.serialize()\n          };\n          return this.visibility && (t.layout = t.layout || {}, t.layout.visibility = this.visibility), I(t, function (t, e) {\n            return !(void 0 === t || \"layout\" === e && !Object.keys(t).length || \"paint\" === e && !Object.keys(t).length);\n          });\n        }\n      }, {\n        key: \"_validate\",\n        value: function _validate(t, e, r, i) {\n          var n = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : {};\n          return (!n || !1 !== n.validate) && Ui(this, t.call(Vi, {\n            key: e,\n            layerType: this.type,\n            objectKey: r,\n            value: i,\n            styleSpec: Ft,\n            style: {\n              glyphs: !0,\n              sprite: !0\n            }\n          }));\n        }\n      }, {\n        key: \"is3D\",\n        value: function is3D() {\n          return !1;\n        }\n      }, {\n        key: \"isSky\",\n        value: function isSky() {\n          return !1;\n        }\n      }, {\n        key: \"isTileClipped\",\n        value: function isTileClipped() {\n          return !1;\n        }\n      }, {\n        key: \"hasOffscreenPass\",\n        value: function hasOffscreenPass() {\n          return !1;\n        }\n      }, {\n        key: \"resize\",\n        value: function resize() {}\n      }, {\n        key: \"isStateDependent\",\n        value: function isStateDependent() {\n          for (var _t60 in this.paint._values) {\n            var _e68 = this.paint.get(_t60);\n\n            if (_e68 instanceof Hn && Or(_e68.property.specification) && (\"source\" === _e68.value.kind || \"composite\" === _e68.value.kind) && _e68.value.isStateDependent) return !0;\n          }\n\n          return !1;\n        }\n      }]);\n\n      return pa;\n    }(Vt);\n\n    var da = os([{\n      name: \"a_pos\",\n      components: 2,\n      type: \"Int16\"\n    }], 4),\n        fa = da.members;\n\n    var ya = /*#__PURE__*/function () {\n      function ya() {\n        var t = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n\n        _classCallCheck(this, ya);\n\n        this.segments = t;\n      }\n\n      _createClass(ya, [{\n        key: \"prepareSegment\",\n        value: function prepareSegment(t, e, r, i) {\n          var n = this.segments[this.segments.length - 1];\n          return t > ya.MAX_VERTEX_ARRAY_LENGTH && E(\"Max vertices per segment is \".concat(ya.MAX_VERTEX_ARRAY_LENGTH, \": bucket requested \").concat(t)), (!n || n.vertexLength + t > ya.MAX_VERTEX_ARRAY_LENGTH || n.sortKey !== i) && (n = {\n            vertexOffset: e.length,\n            primitiveOffset: r.length,\n            vertexLength: 0,\n            primitiveLength: 0\n          }, void 0 !== i && (n.sortKey = i), this.segments.push(n)), n;\n        }\n      }, {\n        key: \"get\",\n        value: function get() {\n          return this.segments;\n        }\n      }, {\n        key: \"destroy\",\n        value: function destroy() {\n          var _iterator55 = _createForOfIteratorHelper(this.segments),\n              _step55;\n\n          try {\n            for (_iterator55.s(); !(_step55 = _iterator55.n()).done;) {\n              var _t61 = _step55.value;\n\n              for (var _e69 in _t61.vaos) {\n                _t61.vaos[_e69].destroy();\n              }\n            }\n          } catch (err) {\n            _iterator55.e(err);\n          } finally {\n            _iterator55.f();\n          }\n        }\n      }], [{\n        key: \"simpleSegment\",\n        value: function simpleSegment(t, e, r, i) {\n          return new ya([{\n            vertexOffset: t,\n            primitiveOffset: e,\n            vertexLength: r,\n            primitiveLength: i,\n            vaos: {},\n            sortKey: 0\n          }]);\n        }\n      }]);\n\n      return ya;\n    }();\n\n    ya.MAX_VERTEX_ARRAY_LENGTH = Math.pow(2, 16) - 1, Gi(\"SegmentVector\", ya);\n    var ma = Math.pow(2, 14) - 1,\n        ga = -ma - 1;\n\n    function xa(t) {\n      var e = 8192 / t.extent,\n          r = t.loadGeometry();\n\n      for (var _t62 = 0; _t62 < r.length; _t62++) {\n        var _i59 = r[_t62];\n\n        for (var _t63 = 0; _t63 < _i59.length; _t63++) {\n          var _r80 = _i59[_t63],\n              _n43 = Math.round(_r80.x * e),\n              _s32 = Math.round(_r80.y * e);\n\n          _r80.x = f(_n43, ga, ma), _r80.y = f(_s32, ga, ma), (_n43 < _r80.x || _n43 > _r80.x + 1 || _s32 < _r80.y || _s32 > _r80.y + 1) && E(\"Geometry exceeds allowed extent, reduce your vector tile buffer size\");\n        }\n      }\n\n      return r;\n    }\n\n    function va(t, e) {\n      return {\n        type: t.type,\n        id: t.id,\n        properties: t.properties,\n        geometry: e ? xa(t) : []\n      };\n    }\n\n    function ba(t, e, r, i, n) {\n      t.emplaceBack(2 * e + (i + 1) / 2, 2 * r + (n + 1) / 2);\n    }\n\n    var wa = /*#__PURE__*/function () {\n      function wa(t) {\n        _classCallCheck(this, wa);\n\n        this.zoom = t.zoom, this.overscaling = t.overscaling, this.layers = t.layers, this.layerIds = this.layers.map(function (t) {\n          return t.id;\n        }), this.index = t.index, this.hasPattern = !1, this.layoutVertexArray = new us(), this.indexArray = new ws(), this.segments = new ya(), this.programConfigurations = new ua(t.layers, t.zoom), this.stateDependentLayerIds = this.layers.filter(function (t) {\n          return t.isStateDependent();\n        }).map(function (t) {\n          return t.id;\n        });\n      }\n\n      _createClass(wa, [{\n        key: \"populate\",\n        value: function populate(t, e, r) {\n          var i = this.layers[0],\n              n = [];\n          var s = null;\n          \"circle\" === i.type && (s = i.layout.get(\"circle-sort-key\"));\n\n          var _iterator56 = _createForOfIteratorHelper(t),\n              _step56;\n\n          try {\n            for (_iterator56.s(); !(_step56 = _iterator56.n()).done;) {\n              var _ref139 = _step56.value;\n              var _e70 = _ref139.feature;\n              var _i62 = _ref139.id;\n              var _a32 = _ref139.index;\n              var _o12 = _ref139.sourceLayerIndex;\n\n              var _t64 = this.layers[0]._featureFilter.needGeometry,\n                  _l9 = va(_e70, _t64);\n\n              if (!this.layers[0]._featureFilter.filter(new qn(this.zoom), _l9, r)) continue;\n\n              var _u9 = s ? s.evaluate(_l9, {}, r) : void 0,\n                  _c5 = {\n                id: _i62,\n                properties: _e70.properties,\n                type: _e70.type,\n                sourceLayerIndex: _o12,\n                index: _a32,\n                geometry: _t64 ? _l9.geometry : xa(_e70),\n                patterns: {},\n                sortKey: _u9\n              };\n\n              n.push(_c5);\n            }\n          } catch (err) {\n            _iterator56.e(err);\n          } finally {\n            _iterator56.f();\n          }\n\n          s && n.sort(function (t, e) {\n            return t.sortKey - e.sortKey;\n          });\n\n          for (var _i60 = 0, _n44 = n; _i60 < _n44.length; _i60++) {\n            var _i61 = _n44[_i60];\n            var _n45 = _i61.geometry,\n                _s33 = _i61.index,\n                _a31 = _i61.sourceLayerIndex,\n                _o11 = t[_s33].feature;\n            this.addFeature(_i61, _n45, _s33, r), e.featureIndex.insert(_o11, _n45, _s33, _a31, this.index);\n          }\n        }\n      }, {\n        key: \"update\",\n        value: function update(t, e, r) {\n          this.stateDependentLayers.length && this.programConfigurations.updatePaintArrays(t, e, this.stateDependentLayers, r);\n        }\n      }, {\n        key: \"isEmpty\",\n        value: function isEmpty() {\n          return 0 === this.layoutVertexArray.length;\n        }\n      }, {\n        key: \"uploadPending\",\n        value: function uploadPending() {\n          return !this.uploaded || this.programConfigurations.needsUpload;\n        }\n      }, {\n        key: \"upload\",\n        value: function upload(t) {\n          this.uploaded || (this.layoutVertexBuffer = t.createVertexBuffer(this.layoutVertexArray, fa), this.indexBuffer = t.createIndexBuffer(this.indexArray)), this.programConfigurations.upload(t), this.uploaded = !0;\n        }\n      }, {\n        key: \"destroy\",\n        value: function destroy() {\n          this.layoutVertexBuffer && (this.layoutVertexBuffer.destroy(), this.indexBuffer.destroy(), this.programConfigurations.destroy(), this.segments.destroy());\n        }\n      }, {\n        key: \"addFeature\",\n        value: function addFeature(t, e, r, i) {\n          var _iterator57 = _createForOfIteratorHelper(e),\n              _step57;\n\n          try {\n            for (_iterator57.s(); !(_step57 = _iterator57.n()).done;) {\n              var _r81 = _step57.value;\n\n              var _iterator58 = _createForOfIteratorHelper(_r81),\n                  _step58;\n\n              try {\n                for (_iterator58.s(); !(_step58 = _iterator58.n()).done;) {\n                  var _e71 = _step58.value;\n                  var _r82 = _e71.x,\n                      _i63 = _e71.y;\n                  if (_r82 < 0 || _r82 >= 8192 || _i63 < 0 || _i63 >= 8192) continue;\n\n                  var _n46 = this.segments.prepareSegment(4, this.layoutVertexArray, this.indexArray, t.sortKey),\n                      _s34 = _n46.vertexLength;\n\n                  ba(this.layoutVertexArray, _r82, _i63, -1, -1), ba(this.layoutVertexArray, _r82, _i63, 1, -1), ba(this.layoutVertexArray, _r82, _i63, 1, 1), ba(this.layoutVertexArray, _r82, _i63, -1, 1), this.indexArray.emplaceBack(_s34, _s34 + 1, _s34 + 2), this.indexArray.emplaceBack(_s34, _s34 + 3, _s34 + 2), _n46.vertexLength += 4, _n46.primitiveLength += 2;\n                }\n              } catch (err) {\n                _iterator58.e(err);\n              } finally {\n                _iterator58.f();\n              }\n            }\n          } catch (err) {\n            _iterator57.e(err);\n          } finally {\n            _iterator57.f();\n          }\n\n          this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length, t, r, {}, i);\n        }\n      }]);\n\n      return wa;\n    }();\n\n    function _a(t, e) {\n      for (var _r83 = 0; _r83 < t.length; _r83++) {\n        if (Ba(e, t[_r83])) return !0;\n      }\n\n      for (var _r84 = 0; _r84 < e.length; _r84++) {\n        if (Ba(t, e[_r84])) return !0;\n      }\n\n      return !!Ia(t, e);\n    }\n\n    function ka(t, e, r) {\n      return !!Ba(t, e) || !!za(e, t, r);\n    }\n\n    function Aa(t, e) {\n      if (1 === t.length) return Ma(e, t[0]);\n\n      for (var _r85 = 0; _r85 < e.length; _r85++) {\n        var _i64 = e[_r85];\n\n        for (var _e72 = 0; _e72 < _i64.length; _e72++) {\n          if (Ba(t, _i64[_e72])) return !0;\n        }\n      }\n\n      for (var _r86 = 0; _r86 < t.length; _r86++) {\n        if (Ma(e, t[_r86])) return !0;\n      }\n\n      for (var _r87 = 0; _r87 < e.length; _r87++) {\n        if (Ia(t, e[_r87])) return !0;\n      }\n\n      return !1;\n    }\n\n    function Sa(t, e, r) {\n      if (t.length > 1) {\n        if (Ia(t, e)) return !0;\n\n        for (var _i65 = 0; _i65 < e.length; _i65++) {\n          if (za(e[_i65], t, r)) return !0;\n        }\n      }\n\n      for (var _i66 = 0; _i66 < t.length; _i66++) {\n        if (za(t[_i66], e, r)) return !0;\n      }\n\n      return !1;\n    }\n\n    function Ia(t, e) {\n      if (0 === t.length || 0 === e.length) return !1;\n\n      for (var _r88 = 0; _r88 < t.length - 1; _r88++) {\n        var _i67 = t[_r88],\n            _n47 = t[_r88 + 1];\n\n        for (var _t65 = 0; _t65 < e.length - 1; _t65++) {\n          if (Ta(_i67, _n47, e[_t65], e[_t65 + 1])) return !0;\n        }\n      }\n\n      return !1;\n    }\n\n    function Ta(t, e, r, i) {\n      return M(t, r, i) !== M(e, r, i) && M(t, e, r) !== M(t, e, i);\n    }\n\n    function za(t, e, r) {\n      var i = r * r;\n      if (1 === e.length) return t.distSqr(e[0]) < i;\n\n      for (var _r89 = 1; _r89 < e.length; _r89++) {\n        if (Ea(t, e[_r89 - 1], e[_r89]) < i) return !0;\n      }\n\n      return !1;\n    }\n\n    function Ea(t, e, r) {\n      var i = e.distSqr(r);\n      if (0 === i) return t.distSqr(e);\n      var n = ((t.x - e.x) * (r.x - e.x) + (t.y - e.y) * (r.y - e.y)) / i;\n      return t.distSqr(n < 0 ? e : n > 1 ? r : r.sub(e)._mult(n)._add(e));\n    }\n\n    function Ma(t, e) {\n      var r,\n          i,\n          n,\n          s = !1;\n\n      for (var _a33 = 0; _a33 < t.length; _a33++) {\n        r = t[_a33];\n\n        for (var _t66 = 0, _a34 = r.length - 1; _t66 < r.length; _a34 = _t66++) {\n          i = r[_t66], n = r[_a34], i.y > e.y != n.y > e.y && e.x < (n.x - i.x) * (e.y - i.y) / (n.y - i.y) + i.x && (s = !s);\n        }\n      }\n\n      return s;\n    }\n\n    function Ba(t, e) {\n      var r = !1;\n\n      for (var _i68 = 0, _n48 = t.length - 1; _i68 < t.length; _n48 = _i68++) {\n        var _s35 = t[_i68],\n            _a35 = t[_n48];\n        _s35.y > e.y != _a35.y > e.y && e.x < (_a35.x - _s35.x) * (e.y - _s35.y) / (_a35.y - _s35.y) + _s35.x && (r = !r);\n      }\n\n      return r;\n    }\n\n    function Da(t, e, r, n, s) {\n      var _iterator59 = _createForOfIteratorHelper(t),\n          _step59;\n\n      try {\n        for (_iterator59.s(); !(_step59 = _iterator59.n()).done;) {\n          var _i69 = _step59.value;\n          if (e <= _i69.x && r <= _i69.y && n >= _i69.x && s >= _i69.y) return !0;\n        }\n      } catch (err) {\n        _iterator59.e(err);\n      } finally {\n        _iterator59.f();\n      }\n\n      var a = [new i(e, r), new i(e, s), new i(n, s), new i(n, r)];\n\n      if (t.length > 2) {\n        var _iterator60 = _createForOfIteratorHelper(a),\n            _step60;\n\n        try {\n          for (_iterator60.s(); !(_step60 = _iterator60.n()).done;) {\n            var _e73 = _step60.value;\n            if (Ba(t, _e73)) return !0;\n          }\n        } catch (err) {\n          _iterator60.e(err);\n        } finally {\n          _iterator60.f();\n        }\n      }\n\n      for (var _e74 = 0; _e74 < t.length - 1; _e74++) {\n        if (Ca(t[_e74], t[_e74 + 1], a)) return !0;\n      }\n\n      return !1;\n    }\n\n    function Ca(t, e, r) {\n      var i = r[0],\n          n = r[2];\n      if (t.x < i.x && e.x < i.x || t.x > n.x && e.x > n.x || t.y < i.y && e.y < i.y || t.y > n.y && e.y > n.y) return !1;\n      var s = M(t, e, r[0]);\n      return s !== M(t, e, r[1]) || s !== M(t, e, r[2]) || s !== M(t, e, r[3]);\n    }\n\n    function Pa(t, e, r) {\n      var i = e.paint.get(t).value;\n      return \"constant\" === i.kind ? i.value : r.programConfigurations.get(e.id).getMaxValue(t);\n    }\n\n    function Va(t) {\n      return Math.sqrt(t[0] * t[0] + t[1] * t[1]);\n    }\n\n    function Fa(t, e, r, n, s) {\n      if (!e[0] && !e[1]) return t;\n\n      var a = i.convert(e)._mult(s);\n\n      \"viewport\" === r && a._rotate(-n);\n      var o = [];\n\n      for (var _e75 = 0; _e75 < t.length; _e75++) {\n        o.push(t[_e75].sub(a));\n      }\n\n      return o;\n    }\n\n    function Ra(t, e, r, n) {\n      var s = i.convert(t)._mult(n);\n\n      return \"viewport\" === e && s._rotate(-r), s;\n    }\n\n    Gi(\"CircleBucket\", wa, {\n      omit: [\"layers\"]\n    });\n    var La = new rs({\n      \"circle-sort-key\": new Jn(Ft.layout_circle[\"circle-sort-key\"])\n    });\n    var Ua = {\n      paint: new rs({\n        \"circle-radius\": new Jn(Ft.paint_circle[\"circle-radius\"]),\n        \"circle-color\": new Jn(Ft.paint_circle[\"circle-color\"]),\n        \"circle-blur\": new Jn(Ft.paint_circle[\"circle-blur\"]),\n        \"circle-opacity\": new Jn(Ft.paint_circle[\"circle-opacity\"]),\n        \"circle-translate\": new Wn(Ft.paint_circle[\"circle-translate\"]),\n        \"circle-translate-anchor\": new Wn(Ft.paint_circle[\"circle-translate-anchor\"]),\n        \"circle-pitch-scale\": new Wn(Ft.paint_circle[\"circle-pitch-scale\"]),\n        \"circle-pitch-alignment\": new Wn(Ft.paint_circle[\"circle-pitch-alignment\"]),\n        \"circle-stroke-width\": new Jn(Ft.paint_circle[\"circle-stroke-width\"]),\n        \"circle-stroke-color\": new Jn(Ft.paint_circle[\"circle-stroke-color\"]),\n        \"circle-stroke-opacity\": new Jn(Ft.paint_circle[\"circle-stroke-opacity\"])\n      }),\n      layout: La\n    },\n        Oa = \"undefined\" != typeof Float32Array ? Float32Array : Array;\n\n    function $a() {\n      var t = new Oa(9);\n      return Oa != Float32Array && (t[1] = 0, t[2] = 0, t[3] = 0, t[5] = 0, t[6] = 0, t[7] = 0), t[0] = 1, t[4] = 1, t[8] = 1, t;\n    }\n\n    function qa(t) {\n      return t[0] = 1, t[1] = 0, t[2] = 0, t[3] = 0, t[4] = 0, t[5] = 1, t[6] = 0, t[7] = 0, t[8] = 0, t[9] = 0, t[10] = 1, t[11] = 0, t[12] = 0, t[13] = 0, t[14] = 0, t[15] = 1, t;\n    }\n\n    function Na(t, e, r) {\n      var i = e[0],\n          n = e[1],\n          s = e[2],\n          a = e[3],\n          o = e[4],\n          l = e[5],\n          u = e[6],\n          c = e[7],\n          h = e[8],\n          p = e[9],\n          d = e[10],\n          f = e[11],\n          y = e[12],\n          m = e[13],\n          g = e[14],\n          x = e[15],\n          v = r[0],\n          b = r[1],\n          w = r[2],\n          _ = r[3];\n      return t[0] = v * i + b * o + w * h + _ * y, t[1] = v * n + b * l + w * p + _ * m, t[2] = v * s + b * u + w * d + _ * g, t[3] = v * a + b * c + w * f + _ * x, t[4] = (v = r[4]) * i + (b = r[5]) * o + (w = r[6]) * h + (_ = r[7]) * y, t[5] = v * n + b * l + w * p + _ * m, t[6] = v * s + b * u + w * d + _ * g, t[7] = v * a + b * c + w * f + _ * x, t[8] = (v = r[8]) * i + (b = r[9]) * o + (w = r[10]) * h + (_ = r[11]) * y, t[9] = v * n + b * l + w * p + _ * m, t[10] = v * s + b * u + w * d + _ * g, t[11] = v * a + b * c + w * f + _ * x, t[12] = (v = r[12]) * i + (b = r[13]) * o + (w = r[14]) * h + (_ = r[15]) * y, t[13] = v * n + b * l + w * p + _ * m, t[14] = v * s + b * u + w * d + _ * g, t[15] = v * a + b * c + w * f + _ * x, t;\n    }\n\n    Math.hypot || (Math.hypot = function () {\n      for (var t = 0, e = arguments.length; e--;) {\n        t += arguments[e] * arguments[e];\n      }\n\n      return Math.sqrt(t);\n    });\n    var ja = Na;\n\n    function Ga() {\n      var t = new Oa(3);\n      return Oa != Float32Array && (t[0] = 0, t[1] = 0, t[2] = 0), t;\n    }\n\n    function Za(t) {\n      var e = new Oa(3);\n      return e[0] = t[0], e[1] = t[1], e[2] = t[2], e;\n    }\n\n    function Xa(t) {\n      return Math.hypot(t[0], t[1], t[2]);\n    }\n\n    function Ka(t, e, r) {\n      var i = new Oa(3);\n      return i[0] = t, i[1] = e, i[2] = r, i;\n    }\n\n    function Ha(t, e, r) {\n      return t[0] = e[0] + r[0], t[1] = e[1] + r[1], t[2] = e[2] + r[2], t;\n    }\n\n    function Ya(t, e, r) {\n      return t[0] = e[0] - r[0], t[1] = e[1] - r[1], t[2] = e[2] - r[2], t;\n    }\n\n    function Wa(t, e, r) {\n      return t[0] = e[0] * r, t[1] = e[1] * r, t[2] = e[2] * r, t;\n    }\n\n    function Ja(t, e, r, i) {\n      return t[0] = e[0] + r[0] * i, t[1] = e[1] + r[1] * i, t[2] = e[2] + r[2] * i, t;\n    }\n\n    function Qa(t, e) {\n      var r = e[0],\n          i = e[1],\n          n = e[2],\n          s = r * r + i * i + n * n;\n      return s > 0 && (s = 1 / Math.sqrt(s)), t[0] = e[0] * s, t[1] = e[1] * s, t[2] = e[2] * s, t;\n    }\n\n    function to(t, e) {\n      return t[0] * e[0] + t[1] * e[1] + t[2] * e[2];\n    }\n\n    function eo(t, e, r) {\n      var i = e[0],\n          n = e[1],\n          s = e[2],\n          a = r[0],\n          o = r[1],\n          l = r[2];\n      return t[0] = n * l - s * o, t[1] = s * a - i * l, t[2] = i * o - n * a, t;\n    }\n\n    function ro(t, e, r) {\n      var i = e[0],\n          n = e[1],\n          s = e[2],\n          a = r[3] * i + r[7] * n + r[11] * s + r[15];\n      return t[0] = (r[0] * i + r[4] * n + r[8] * s + r[12]) / (a = a || 1), t[1] = (r[1] * i + r[5] * n + r[9] * s + r[13]) / a, t[2] = (r[2] * i + r[6] * n + r[10] * s + r[14]) / a, t;\n    }\n\n    function io(t, e, r) {\n      var i = r[0],\n          n = r[1],\n          s = r[2],\n          a = e[0],\n          o = e[1],\n          l = e[2],\n          u = n * l - s * o,\n          c = s * a - i * l,\n          h = i * o - n * a,\n          p = n * h - s * c,\n          d = s * u - i * h,\n          f = i * c - n * u,\n          y = 2 * r[3];\n      return c *= y, h *= y, d *= 2, f *= 2, t[0] = a + (u *= y) + (p *= 2), t[1] = o + c + d, t[2] = l + h + f, t;\n    }\n\n    var no,\n        so = Ya,\n        ao = Xa;\n\n    function oo(t, e, r) {\n      var i = e[0],\n          n = e[1],\n          s = e[2],\n          a = e[3];\n      return t[0] = r[0] * i + r[4] * n + r[8] * s + r[12] * a, t[1] = r[1] * i + r[5] * n + r[9] * s + r[13] * a, t[2] = r[2] * i + r[6] * n + r[10] * s + r[14] * a, t[3] = r[3] * i + r[7] * n + r[11] * s + r[15] * a, t;\n    }\n\n    function lo() {\n      var t = new Oa(4);\n      return Oa != Float32Array && (t[0] = 0, t[1] = 0, t[2] = 0), t[3] = 1, t;\n    }\n\n    function uo(t) {\n      return t[0] = 0, t[1] = 0, t[2] = 0, t[3] = 1, t;\n    }\n\n    function co(t, e, r) {\n      r *= .5;\n      var i = e[0],\n          n = e[1],\n          s = e[2],\n          a = e[3],\n          o = Math.sin(r),\n          l = Math.cos(r);\n      return t[0] = i * l + a * o, t[1] = n * l + s * o, t[2] = s * l - n * o, t[3] = a * l - i * o, t;\n    }\n\n    Ga(), no = new Oa(4), Oa != Float32Array && (no[0] = 0, no[1] = 0, no[2] = 0, no[3] = 0), Ga(), Ka(1, 0, 0), Ka(0, 1, 0), lo(), lo(), $a();\n\n    var ho = /*#__PURE__*/function () {\n      function ho(t, e) {\n        _classCallCheck(this, ho);\n\n        this.points = t, this.planes = e;\n      }\n\n      _createClass(ho, null, [{\n        key: \"fromInvProjectionMatrix\",\n        value: function fromInvProjectionMatrix(t, e, r) {\n          var i = Math.pow(2, r),\n              n = [[-1, 1, -1, 1], [1, 1, -1, 1], [1, -1, -1, 1], [-1, -1, -1, 1], [-1, 1, 1, 1], [1, 1, 1, 1], [1, -1, 1, 1], [-1, -1, 1, 1]].map(function (r) {\n            var n = oo([], r, t),\n                s = 1 / n[3] / e * i;\n            return function (t, e, r) {\n              return t[0] = e[0] * r[0], t[1] = e[1] * r[1], t[2] = e[2] * r[2], t[3] = e[3] * r[3], t;\n            }(n, n, [s, s, 1 / n[3], s]);\n          }),\n              s = [[0, 1, 2], [6, 5, 4], [0, 3, 7], [2, 1, 5], [3, 2, 6], [0, 4, 5]].map(function (t) {\n            var e = Qa([], eo([], so([], n[t[0]], n[t[1]]), so([], n[t[2]], n[t[1]]))),\n                r = -to(e, n[t[1]]);\n            return e.concat(r);\n          });\n          return new ho(n, s);\n        }\n      }]);\n\n      return ho;\n    }();\n\n    var po = /*#__PURE__*/function () {\n      function po(t, e) {\n        _classCallCheck(this, po);\n\n        this.min = t, this.max = e, this.center = Wa([], Ha([], this.min, this.max), .5);\n      }\n\n      _createClass(po, [{\n        key: \"quadrant\",\n        value: function quadrant(t) {\n          var e = [t % 2 == 0, t < 2],\n              r = Za(this.min),\n              i = Za(this.max);\n\n          for (var _t67 = 0; _t67 < e.length; _t67++) {\n            r[_t67] = e[_t67] ? this.min[_t67] : this.center[_t67], i[_t67] = e[_t67] ? this.center[_t67] : this.max[_t67];\n          }\n\n          return i[2] = this.max[2], new po(r, i);\n        }\n      }, {\n        key: \"distanceX\",\n        value: function distanceX(t) {\n          return Math.max(Math.min(this.max[0], t[0]), this.min[0]) - t[0];\n        }\n      }, {\n        key: \"distanceY\",\n        value: function distanceY(t) {\n          return Math.max(Math.min(this.max[1], t[1]), this.min[1]) - t[1];\n        }\n      }, {\n        key: \"distanceZ\",\n        value: function distanceZ(t) {\n          return Math.max(Math.min(this.max[2], t[2]), this.min[2]) - t[2];\n        }\n      }, {\n        key: \"intersects\",\n        value: function intersects(t) {\n          var e = [[this.min[0], this.min[1], this.min[2], 1], [this.max[0], this.min[1], this.min[2], 1], [this.max[0], this.max[1], this.min[2], 1], [this.min[0], this.max[1], this.min[2], 1], [this.min[0], this.min[1], this.max[2], 1], [this.max[0], this.min[1], this.max[2], 1], [this.max[0], this.max[1], this.max[2], 1], [this.min[0], this.max[1], this.max[2], 1]];\n          var r = !0;\n\n          for (var _s36 = 0; _s36 < t.planes.length; _s36++) {\n            var _a36 = t.planes[_s36];\n            var _o13 = 0;\n\n            for (var _t68 = 0; _t68 < e.length; _t68++) {\n              _o13 += (i = _a36)[0] * (n = e[_t68])[0] + i[1] * n[1] + i[2] * n[2] + i[3] * n[3] >= 0;\n            }\n\n            if (0 === _o13) return 0;\n            _o13 !== e.length && (r = !1);\n          }\n\n          var i, n;\n          if (r) return 2;\n\n          for (var _e76 = 0; _e76 < 3; _e76++) {\n            var _r90 = Number.MAX_VALUE,\n                _i70 = -Number.MAX_VALUE;\n\n            for (var _n49 = 0; _n49 < t.points.length; _n49++) {\n              var _s37 = t.points[_n49][_e76] - this.min[_e76];\n\n              _r90 = Math.min(_r90, _s37), _i70 = Math.max(_i70, _s37);\n            }\n\n            if (_i70 < 0 || _r90 > this.max[_e76] - this.min[_e76]) return 0;\n          }\n\n          return 1;\n        }\n      }]);\n\n      return po;\n    }();\n\n    function fo(t, e, r) {\n      var n = oo([], [t.x, t.y, e, 1], r);\n      return new i(n[0] / n[3], n[1] / n[3]);\n    }\n\n    var yo = Ka(0, 0, 0),\n        mo = Ka(0, 0, 1);\n\n    function go(t, e) {\n      var r = Ga();\n      return yo[2] = e, t.intersectsPlane(yo, mo, r), new i(r[0], r[1]);\n    }\n\n    var xo = /*#__PURE__*/function (_wa) {\n      _inherits(xo, _wa);\n\n      var _super45 = _createSuper(xo);\n\n      function xo() {\n        _classCallCheck(this, xo);\n\n        return _super45.apply(this, arguments);\n      }\n\n      return xo;\n    }(wa);\n\n    function vo(t, _ref140, i, n) {\n      var e = _ref140.width,\n          r = _ref140.height;\n\n      if (n) {\n        if (n instanceof Uint8ClampedArray) n = new Uint8Array(n.buffer);else if (n.length !== e * r * i) throw new RangeError(\"mismatched image size\");\n      } else n = new Uint8Array(e * r * i);\n\n      return t.width = e, t.height = r, t.data = n, t;\n    }\n\n    function bo(t, _ref141, i) {\n      var e = _ref141.width,\n          r = _ref141.height;\n      if (e === t.width && r === t.height) return;\n      var n = vo({}, {\n        width: e,\n        height: r\n      }, i);\n      wo(t, n, {\n        x: 0,\n        y: 0\n      }, {\n        x: 0,\n        y: 0\n      }, {\n        width: Math.min(t.width, e),\n        height: Math.min(t.height, r)\n      }, i), t.width = e, t.height = r, t.data = n.data;\n    }\n\n    function wo(t, e, r, i, n, s) {\n      if (0 === n.width || 0 === n.height) return e;\n      if (n.width > t.width || n.height > t.height || r.x > t.width - n.width || r.y > t.height - n.height) throw new RangeError(\"out of range source coordinates for image copy\");\n      if (n.width > e.width || n.height > e.height || i.x > e.width - n.width || i.y > e.height - n.height) throw new RangeError(\"out of range destination coordinates for image copy\");\n      var a = t.data,\n          o = e.data;\n\n      for (var _l10 = 0; _l10 < n.height; _l10++) {\n        var _u10 = ((r.y + _l10) * t.width + r.x) * s,\n            _c6 = ((i.y + _l10) * e.width + i.x) * s;\n\n        for (var _t69 = 0; _t69 < n.width * s; _t69++) {\n          o[_c6 + _t69] = a[_u10 + _t69];\n        }\n      }\n\n      return e;\n    }\n\n    Gi(\"HeatmapBucket\", xo, {\n      omit: [\"layers\"]\n    });\n\n    var _o = /*#__PURE__*/function () {\n      function _o(t, e) {\n        _classCallCheck(this, _o);\n\n        vo(this, t, 1, e);\n      }\n\n      _createClass(_o, [{\n        key: \"resize\",\n        value: function resize(t) {\n          bo(this, t, 1);\n        }\n      }, {\n        key: \"clone\",\n        value: function clone() {\n          return new _o({\n            width: this.width,\n            height: this.height\n          }, new Uint8Array(this.data));\n        }\n      }], [{\n        key: \"copy\",\n        value: function copy(t, e, r, i, n) {\n          wo(t, e, r, i, n, 1);\n        }\n      }]);\n\n      return _o;\n    }();\n\n    var ko = /*#__PURE__*/function () {\n      function ko(t, e) {\n        _classCallCheck(this, ko);\n\n        vo(this, t, 4, e);\n      }\n\n      _createClass(ko, [{\n        key: \"resize\",\n        value: function resize(t) {\n          bo(this, t, 4);\n        }\n      }, {\n        key: \"replace\",\n        value: function replace(t, e) {\n          e ? this.data.set(t) : this.data = t instanceof Uint8ClampedArray ? new Uint8Array(t.buffer) : t;\n        }\n      }, {\n        key: \"clone\",\n        value: function clone() {\n          return new ko({\n            width: this.width,\n            height: this.height\n          }, new Uint8Array(this.data));\n        }\n      }], [{\n        key: \"copy\",\n        value: function copy(t, e, r, i, n) {\n          wo(t, e, r, i, n, 4);\n        }\n      }]);\n\n      return ko;\n    }();\n\n    Gi(\"AlphaImage\", _o), Gi(\"RGBAImage\", ko);\n    var Ao = {\n      paint: new rs({\n        \"heatmap-radius\": new Jn(Ft.paint_heatmap[\"heatmap-radius\"]),\n        \"heatmap-weight\": new Jn(Ft.paint_heatmap[\"heatmap-weight\"]),\n        \"heatmap-intensity\": new Wn(Ft.paint_heatmap[\"heatmap-intensity\"]),\n        \"heatmap-color\": new es(Ft.paint_heatmap[\"heatmap-color\"]),\n        \"heatmap-opacity\": new Wn(Ft.paint_heatmap[\"heatmap-opacity\"])\n      })\n    };\n\n    function So(t) {\n      var e = {},\n          r = t.resolution || 256,\n          i = t.clips ? t.clips.length : 1,\n          n = t.image || new ko({\n        width: r,\n        height: i\n      }),\n          s = function s(r, i, _s38) {\n        e[t.evaluationKey] = _s38;\n        var a = t.expression.evaluate(e);\n        n.data[r + i + 0] = Math.floor(255 * a.r / a.a), n.data[r + i + 1] = Math.floor(255 * a.g / a.a), n.data[r + i + 2] = Math.floor(255 * a.b / a.a), n.data[r + i + 3] = Math.floor(255 * a.a);\n      };\n\n      if (t.clips) for (var _e77 = 0, _n50 = 0; _e77 < i; ++_e77, _n50 += 4 * r) {\n        for (var _i71 = 0, _a37 = 0; _i71 < r; _i71++, _a37 += 4) {\n          var _o14 = _i71 / (r - 1),\n              _t$clips$_e = t.clips[_e77],\n              _l11 = _t$clips$_e.start,\n              _u11 = _t$clips$_e.end;\n\n          s(_n50, _a37, _l11 * (1 - _o14) + _u11 * _o14);\n        }\n      } else for (var _t70 = 0, _e78 = 0; _t70 < r; _t70++, _e78 += 4) {\n        s(0, _e78, _t70 / (r - 1));\n      }\n      return n;\n    }\n\n    var Io = {\n      paint: new rs({\n        \"hillshade-illumination-direction\": new Wn(Ft.paint_hillshade[\"hillshade-illumination-direction\"]),\n        \"hillshade-illumination-anchor\": new Wn(Ft.paint_hillshade[\"hillshade-illumination-anchor\"]),\n        \"hillshade-exaggeration\": new Wn(Ft.paint_hillshade[\"hillshade-exaggeration\"]),\n        \"hillshade-shadow-color\": new Wn(Ft.paint_hillshade[\"hillshade-shadow-color\"]),\n        \"hillshade-highlight-color\": new Wn(Ft.paint_hillshade[\"hillshade-highlight-color\"]),\n        \"hillshade-accent-color\": new Wn(Ft.paint_hillshade[\"hillshade-accent-color\"])\n      })\n    };\n    var To = os([{\n      name: \"a_pos\",\n      components: 2,\n      type: \"Int16\"\n    }], 4),\n        zo = To.members;\n    var Eo = Bo,\n        Mo = Bo;\n\n    function Bo(t, e, r) {\n      r = r || 2;\n      var i,\n          n,\n          s,\n          a,\n          o,\n          l,\n          u,\n          c = e && e.length,\n          h = c ? e[0] * r : t.length,\n          p = Do(t, 0, h, r, !0),\n          d = [];\n      if (!p || p.next === p.prev) return d;\n\n      if (c && (p = function (t, e, r, i) {\n        var n,\n            s,\n            a,\n            o = [];\n\n        for (n = 0, s = e.length; n < s; n++) {\n          (a = Do(t, e[n] * i, n < s - 1 ? e[n + 1] * i : t.length, i, !1)) === a.next && (a.steiner = !0), o.push(No(a));\n        }\n\n        for (o.sort(Uo), n = 0; n < o.length; n++) {\n          Oo(o[n], r), r = Co(r, r.next);\n        }\n\n        return r;\n      }(t, e, p, r)), t.length > 80 * r) {\n        i = s = t[0], n = a = t[1];\n\n        for (var f = r; f < h; f += r) {\n          (o = t[f]) < i && (i = o), (l = t[f + 1]) < n && (n = l), o > s && (s = o), l > a && (a = l);\n        }\n\n        u = 0 !== (u = Math.max(s - i, a - n)) ? 1 / u : 0;\n      }\n\n      return Po(p, d, r, i, n, u), d;\n    }\n\n    function Do(t, e, r, i, n) {\n      var s, a;\n      if (n === rl(t, e, r, i) > 0) for (s = e; s < r; s += i) {\n        a = Qo(s, t[s], t[s + 1], a);\n      } else for (s = r - i; s >= e; s -= i) {\n        a = Qo(s, t[s], t[s + 1], a);\n      }\n      return a && Xo(a, a.next) && (tl(a), a = a.next), a;\n    }\n\n    function Co(t, e) {\n      if (!t) return t;\n      e || (e = t);\n      var r,\n          i = t;\n\n      do {\n        if (r = !1, i.steiner || !Xo(i, i.next) && 0 !== Zo(i.prev, i, i.next)) i = i.next;else {\n          if (tl(i), (i = e = i.prev) === i.next) break;\n          r = !0;\n        }\n      } while (r || i !== e);\n\n      return e;\n    }\n\n    function Po(t, e, r, i, n, s, a) {\n      if (t) {\n        !a && s && function (t, e, r, i) {\n          var n = t;\n\n          do {\n            null === n.z && (n.z = qo(n.x, n.y, e, r, i)), n.prevZ = n.prev, n.nextZ = n.next, n = n.next;\n          } while (n !== t);\n\n          n.prevZ.nextZ = null, n.prevZ = null, function (t) {\n            var e,\n                r,\n                i,\n                n,\n                s,\n                a,\n                o,\n                l,\n                u = 1;\n\n            do {\n              for (r = t, t = null, s = null, a = 0; r;) {\n                for (a++, i = r, o = 0, e = 0; e < u && (o++, i = i.nextZ); e++) {\n                  ;\n                }\n\n                for (l = u; o > 0 || l > 0 && i;) {\n                  0 !== o && (0 === l || !i || r.z <= i.z) ? (n = r, r = r.nextZ, o--) : (n = i, i = i.nextZ, l--), s ? s.nextZ = n : t = n, n.prevZ = s, s = n;\n                }\n\n                r = i;\n              }\n\n              s.nextZ = null, u *= 2;\n            } while (a > 1);\n          }(n);\n        }(t, i, n, s);\n\n        for (var o, l, u = t; t.prev !== t.next;) {\n          if (o = t.prev, l = t.next, s ? Fo(t, i, n, s) : Vo(t)) e.push(o.i / r), e.push(t.i / r), e.push(l.i / r), tl(t), t = l.next, u = l.next;else if ((t = l) === u) {\n            a ? 1 === a ? Po(t = Ro(Co(t), e, r), e, r, i, n, s, 2) : 2 === a && Lo(t, e, r, i, n, s) : Po(Co(t), e, r, i, n, s, 1);\n            break;\n          }\n        }\n      }\n    }\n\n    function Vo(t) {\n      var e = t.prev,\n          r = t,\n          i = t.next;\n      if (Zo(e, r, i) >= 0) return !1;\n\n      for (var n = t.next.next; n !== t.prev;) {\n        if (jo(e.x, e.y, r.x, r.y, i.x, i.y, n.x, n.y) && Zo(n.prev, n, n.next) >= 0) return !1;\n        n = n.next;\n      }\n\n      return !0;\n    }\n\n    function Fo(t, e, r, i) {\n      var n = t.prev,\n          s = t,\n          a = t.next;\n      if (Zo(n, s, a) >= 0) return !1;\n\n      for (var o = n.x > s.x ? n.x > a.x ? n.x : a.x : s.x > a.x ? s.x : a.x, l = n.y > s.y ? n.y > a.y ? n.y : a.y : s.y > a.y ? s.y : a.y, u = qo(n.x < s.x ? n.x < a.x ? n.x : a.x : s.x < a.x ? s.x : a.x, n.y < s.y ? n.y < a.y ? n.y : a.y : s.y < a.y ? s.y : a.y, e, r, i), c = qo(o, l, e, r, i), h = t.prevZ, p = t.nextZ; h && h.z >= u && p && p.z <= c;) {\n        if (h !== t.prev && h !== t.next && jo(n.x, n.y, s.x, s.y, a.x, a.y, h.x, h.y) && Zo(h.prev, h, h.next) >= 0) return !1;\n        if (h = h.prevZ, p !== t.prev && p !== t.next && jo(n.x, n.y, s.x, s.y, a.x, a.y, p.x, p.y) && Zo(p.prev, p, p.next) >= 0) return !1;\n        p = p.nextZ;\n      }\n\n      for (; h && h.z >= u;) {\n        if (h !== t.prev && h !== t.next && jo(n.x, n.y, s.x, s.y, a.x, a.y, h.x, h.y) && Zo(h.prev, h, h.next) >= 0) return !1;\n        h = h.prevZ;\n      }\n\n      for (; p && p.z <= c;) {\n        if (p !== t.prev && p !== t.next && jo(n.x, n.y, s.x, s.y, a.x, a.y, p.x, p.y) && Zo(p.prev, p, p.next) >= 0) return !1;\n        p = p.nextZ;\n      }\n\n      return !0;\n    }\n\n    function Ro(t, e, r) {\n      var i = t;\n\n      do {\n        var n = i.prev,\n            s = i.next.next;\n        !Xo(n, s) && Ko(n, i, i.next, s) && Wo(n, s) && Wo(s, n) && (e.push(n.i / r), e.push(i.i / r), e.push(s.i / r), tl(i), tl(i.next), i = t = s), i = i.next;\n      } while (i !== t);\n\n      return Co(i);\n    }\n\n    function Lo(t, e, r, i, n, s) {\n      var a = t;\n\n      do {\n        for (var o = a.next.next; o !== a.prev;) {\n          if (a.i !== o.i && Go(a, o)) {\n            var l = Jo(a, o);\n            return a = Co(a, a.next), l = Co(l, l.next), Po(a, e, r, i, n, s), void Po(l, e, r, i, n, s);\n          }\n\n          o = o.next;\n        }\n\n        a = a.next;\n      } while (a !== t);\n    }\n\n    function Uo(t, e) {\n      return t.x - e.x;\n    }\n\n    function Oo(t, e) {\n      if (e = function (t, e) {\n        var r,\n            i = e,\n            n = t.x,\n            s = t.y,\n            a = -1 / 0;\n\n        do {\n          if (s <= i.y && s >= i.next.y && i.next.y !== i.y) {\n            var o = i.x + (s - i.y) * (i.next.x - i.x) / (i.next.y - i.y);\n\n            if (o <= n && o > a) {\n              if (a = o, o === n) {\n                if (s === i.y) return i;\n                if (s === i.next.y) return i.next;\n              }\n\n              r = i.x < i.next.x ? i : i.next;\n            }\n          }\n\n          i = i.next;\n        } while (i !== e);\n\n        if (!r) return null;\n        if (n === a) return r;\n        var l,\n            u = r,\n            c = r.x,\n            h = r.y,\n            p = 1 / 0;\n        i = r;\n\n        do {\n          n >= i.x && i.x >= c && n !== i.x && jo(s < h ? n : a, s, c, h, s < h ? a : n, s, i.x, i.y) && (l = Math.abs(s - i.y) / (n - i.x), Wo(i, t) && (l < p || l === p && (i.x > r.x || i.x === r.x && $o(r, i))) && (r = i, p = l)), i = i.next;\n        } while (i !== u);\n\n        return r;\n      }(t, e)) {\n        var r = Jo(e, t);\n        Co(e, e.next), Co(r, r.next);\n      }\n    }\n\n    function $o(t, e) {\n      return Zo(t.prev, t, e.prev) < 0 && Zo(e.next, t, t.next) < 0;\n    }\n\n    function qo(t, e, r, i, n) {\n      return (t = 1431655765 & ((t = 858993459 & ((t = 252645135 & ((t = 16711935 & ((t = 32767 * (t - r) * n) | t << 8)) | t << 4)) | t << 2)) | t << 1)) | (e = 1431655765 & ((e = 858993459 & ((e = 252645135 & ((e = 16711935 & ((e = 32767 * (e - i) * n) | e << 8)) | e << 4)) | e << 2)) | e << 1)) << 1;\n    }\n\n    function No(t) {\n      var e = t,\n          r = t;\n\n      do {\n        (e.x < r.x || e.x === r.x && e.y < r.y) && (r = e), e = e.next;\n      } while (e !== t);\n\n      return r;\n    }\n\n    function jo(t, e, r, i, n, s, a, o) {\n      return (n - a) * (e - o) - (t - a) * (s - o) >= 0 && (t - a) * (i - o) - (r - a) * (e - o) >= 0 && (r - a) * (s - o) - (n - a) * (i - o) >= 0;\n    }\n\n    function Go(t, e) {\n      return t.next.i !== e.i && t.prev.i !== e.i && !function (t, e) {\n        var r = t;\n\n        do {\n          if (r.i !== t.i && r.next.i !== t.i && r.i !== e.i && r.next.i !== e.i && Ko(r, r.next, t, e)) return !0;\n          r = r.next;\n        } while (r !== t);\n\n        return !1;\n      }(t, e) && (Wo(t, e) && Wo(e, t) && function (t, e) {\n        var r = t,\n            i = !1,\n            n = (t.x + e.x) / 2,\n            s = (t.y + e.y) / 2;\n\n        do {\n          r.y > s != r.next.y > s && r.next.y !== r.y && n < (r.next.x - r.x) * (s - r.y) / (r.next.y - r.y) + r.x && (i = !i), r = r.next;\n        } while (r !== t);\n\n        return i;\n      }(t, e) && (Zo(t.prev, t, e.prev) || Zo(t, e.prev, e)) || Xo(t, e) && Zo(t.prev, t, t.next) > 0 && Zo(e.prev, e, e.next) > 0);\n    }\n\n    function Zo(t, e, r) {\n      return (e.y - t.y) * (r.x - e.x) - (e.x - t.x) * (r.y - e.y);\n    }\n\n    function Xo(t, e) {\n      return t.x === e.x && t.y === e.y;\n    }\n\n    function Ko(t, e, r, i) {\n      var n = Yo(Zo(t, e, r)),\n          s = Yo(Zo(t, e, i)),\n          a = Yo(Zo(r, i, t)),\n          o = Yo(Zo(r, i, e));\n      return n !== s && a !== o || !(0 !== n || !Ho(t, r, e)) || !(0 !== s || !Ho(t, i, e)) || !(0 !== a || !Ho(r, t, i)) || !(0 !== o || !Ho(r, e, i));\n    }\n\n    function Ho(t, e, r) {\n      return e.x <= Math.max(t.x, r.x) && e.x >= Math.min(t.x, r.x) && e.y <= Math.max(t.y, r.y) && e.y >= Math.min(t.y, r.y);\n    }\n\n    function Yo(t) {\n      return t > 0 ? 1 : t < 0 ? -1 : 0;\n    }\n\n    function Wo(t, e) {\n      return Zo(t.prev, t, t.next) < 0 ? Zo(t, e, t.next) >= 0 && Zo(t, t.prev, e) >= 0 : Zo(t, e, t.prev) < 0 || Zo(t, t.next, e) < 0;\n    }\n\n    function Jo(t, e) {\n      var r = new el(t.i, t.x, t.y),\n          i = new el(e.i, e.x, e.y),\n          n = t.next,\n          s = e.prev;\n      return t.next = e, e.prev = t, r.next = n, n.prev = r, i.next = r, r.prev = i, s.next = i, i.prev = s, i;\n    }\n\n    function Qo(t, e, r, i) {\n      var n = new el(t, e, r);\n      return i ? (n.next = i.next, n.prev = i, i.next.prev = n, i.next = n) : (n.prev = n, n.next = n), n;\n    }\n\n    function tl(t) {\n      t.next.prev = t.prev, t.prev.next = t.next, t.prevZ && (t.prevZ.nextZ = t.nextZ), t.nextZ && (t.nextZ.prevZ = t.prevZ);\n    }\n\n    function el(t, e, r) {\n      this.i = t, this.x = e, this.y = r, this.prev = null, this.next = null, this.z = null, this.prevZ = null, this.nextZ = null, this.steiner = !1;\n    }\n\n    function rl(t, e, r, i) {\n      for (var n = 0, s = e, a = r - i; s < r; s += i) {\n        n += (t[a] - t[s]) * (t[s + 1] + t[a + 1]), a = s;\n      }\n\n      return n;\n    }\n\n    function il(t, e, r, i, n) {\n      !function t(e, r, i, n, s) {\n        for (; n > i;) {\n          if (n - i > 600) {\n            var a = n - i + 1,\n                o = r - i + 1,\n                l = Math.log(a),\n                u = .5 * Math.exp(2 * l / 3),\n                c = .5 * Math.sqrt(l * u * (a - u) / a) * (o - a / 2 < 0 ? -1 : 1);\n            t(e, r, Math.max(i, Math.floor(r - o * u / a + c)), Math.min(n, Math.floor(r + (a - o) * u / a + c)), s);\n          }\n\n          var h = e[r],\n              p = i,\n              d = n;\n\n          for (nl(e, i, r), s(e[n], h) > 0 && nl(e, i, n); p < d;) {\n            for (nl(e, p, d), p++, d--; s(e[p], h) < 0;) {\n              p++;\n            }\n\n            for (; s(e[d], h) > 0;) {\n              d--;\n            }\n          }\n\n          0 === s(e[i], h) ? nl(e, i, d) : nl(e, ++d, n), d <= r && (i = d + 1), r <= d && (n = d - 1);\n        }\n      }(t, e, r || 0, i || t.length - 1, n || sl);\n    }\n\n    function nl(t, e, r) {\n      var i = t[e];\n      t[e] = t[r], t[r] = i;\n    }\n\n    function sl(t, e) {\n      return t < e ? -1 : t > e ? 1 : 0;\n    }\n\n    function al(t, e) {\n      var r = t.length;\n      if (r <= 1) return [t];\n      var i = [];\n      var n, s;\n\n      for (var _e79 = 0; _e79 < r; _e79++) {\n        var _r91 = B(t[_e79]);\n\n        0 !== _r91 && (t[_e79].area = Math.abs(_r91), void 0 === s && (s = _r91 < 0), s === _r91 < 0 ? (n && i.push(n), n = [t[_e79]]) : n.push(t[_e79]));\n      }\n\n      if (n && i.push(n), e > 1) for (var _t71 = 0; _t71 < i.length; _t71++) {\n        i[_t71].length <= e || (il(i[_t71], e, 1, i[_t71].length - 1, ol), i[_t71] = i[_t71].slice(0, e));\n      }\n      return i;\n    }\n\n    function ol(t, e) {\n      return e.area - t.area;\n    }\n\n    function ll(t, e, r) {\n      var i = r.patternDependencies;\n      var n = !1;\n\n      var _iterator61 = _createForOfIteratorHelper(e),\n          _step61;\n\n      try {\n        for (_iterator61.s(); !(_step61 = _iterator61.n()).done;) {\n          var _r92 = _step61.value;\n\n          var _e80 = _r92.paint.get(\"\".concat(t, \"-pattern\"));\n\n          _e80.isConstant() || (n = !0);\n\n          var _s39 = _e80.constantOr(null);\n\n          _s39 && (n = !0, i[_s39.to] = !0, i[_s39.from] = !0);\n        }\n      } catch (err) {\n        _iterator61.e(err);\n      } finally {\n        _iterator61.f();\n      }\n\n      return n;\n    }\n\n    function ul(t, e, r, i, n) {\n      var s = n.patternDependencies;\n\n      var _iterator62 = _createForOfIteratorHelper(e),\n          _step62;\n\n      try {\n        for (_iterator62.s(); !(_step62 = _iterator62.n()).done;) {\n          var _a38 = _step62.value;\n\n          var _e81 = _a38.paint.get(\"\".concat(t, \"-pattern\")).value;\n\n          if (\"constant\" !== _e81.kind) {\n            var _t72 = _e81.evaluate({\n              zoom: i - 1\n            }, r, {}, n.availableImages),\n                _o15 = _e81.evaluate({\n              zoom: i\n            }, r, {}, n.availableImages),\n                _l12 = _e81.evaluate({\n              zoom: i + 1\n            }, r, {}, n.availableImages);\n\n            _t72 = _t72 && _t72.name ? _t72.name : _t72, _o15 = _o15 && _o15.name ? _o15.name : _o15, _l12 = _l12 && _l12.name ? _l12.name : _l12, s[_t72] = !0, s[_o15] = !0, s[_l12] = !0, r.patterns[_a38.id] = {\n              min: _t72,\n              mid: _o15,\n              max: _l12\n            };\n          }\n        }\n      } catch (err) {\n        _iterator62.e(err);\n      } finally {\n        _iterator62.f();\n      }\n\n      return r;\n    }\n\n    Bo.deviation = function (t, e, r, i) {\n      var n = e && e.length,\n          s = Math.abs(rl(t, 0, n ? e[0] * r : t.length, r));\n      if (n) for (var a = 0, o = e.length; a < o; a++) {\n        s -= Math.abs(rl(t, e[a] * r, a < o - 1 ? e[a + 1] * r : t.length, r));\n      }\n      var l = 0;\n\n      for (a = 0; a < i.length; a += 3) {\n        var u = i[a] * r,\n            c = i[a + 1] * r,\n            h = i[a + 2] * r;\n        l += Math.abs((t[u] - t[h]) * (t[c + 1] - t[u + 1]) - (t[u] - t[c]) * (t[h + 1] - t[u + 1]));\n      }\n\n      return 0 === s && 0 === l ? 0 : Math.abs((l - s) / s);\n    }, Bo.flatten = function (t) {\n      for (var e = t[0][0].length, r = {\n        vertices: [],\n        holes: [],\n        dimensions: e\n      }, i = 0, n = 0; n < t.length; n++) {\n        for (var s = 0; s < t[n].length; s++) {\n          for (var a = 0; a < e; a++) {\n            r.vertices.push(t[n][s][a]);\n          }\n        }\n\n        n > 0 && r.holes.push(i += t[n - 1].length);\n      }\n\n      return r;\n    }, Eo.default = Mo;\n\n    var cl = /*#__PURE__*/function () {\n      function cl(t) {\n        _classCallCheck(this, cl);\n\n        this.zoom = t.zoom, this.overscaling = t.overscaling, this.layers = t.layers, this.layerIds = this.layers.map(function (t) {\n          return t.id;\n        }), this.index = t.index, this.hasPattern = !1, this.patternFeatures = [], this.layoutVertexArray = new us(), this.indexArray = new ws(), this.indexArray2 = new Ts(), this.programConfigurations = new ua(t.layers, t.zoom), this.segments = new ya(), this.segments2 = new ya(), this.stateDependentLayerIds = this.layers.filter(function (t) {\n          return t.isStateDependent();\n        }).map(function (t) {\n          return t.id;\n        });\n      }\n\n      _createClass(cl, [{\n        key: \"populate\",\n        value: function populate(t, e, r) {\n          this.hasPattern = ll(\"fill\", this.layers, e);\n          var i = this.layers[0].layout.get(\"fill-sort-key\"),\n              n = [];\n\n          var _iterator63 = _createForOfIteratorHelper(t),\n              _step63;\n\n          try {\n            for (_iterator63.s(); !(_step63 = _iterator63.n()).done;) {\n              var _ref143 = _step63.value;\n              var _s41 = _ref143.feature;\n              var _a40 = _ref143.id;\n              var _o16 = _ref143.index;\n              var _l13 = _ref143.sourceLayerIndex;\n\n              var _t74 = this.layers[0]._featureFilter.needGeometry,\n                  _u12 = va(_s41, _t74);\n\n              if (!this.layers[0]._featureFilter.filter(new qn(this.zoom), _u12, r)) continue;\n\n              var _c7 = i ? i.evaluate(_u12, {}, r, e.availableImages) : void 0,\n                  _h3 = {\n                id: _a40,\n                properties: _s41.properties,\n                type: _s41.type,\n                sourceLayerIndex: _l13,\n                index: _o16,\n                geometry: _t74 ? _u12.geometry : xa(_s41),\n                patterns: {},\n                sortKey: _c7\n              };\n\n              n.push(_h3);\n            }\n          } catch (err) {\n            _iterator63.e(err);\n          } finally {\n            _iterator63.f();\n          }\n\n          i && n.sort(function (t, e) {\n            return t.sortKey - e.sortKey;\n          });\n\n          for (var _i72 = 0, _n51 = n; _i72 < _n51.length; _i72++) {\n            var _i73 = _n51[_i72];\n            var _n52 = _i73.geometry,\n                _s40 = _i73.index,\n                _a39 = _i73.sourceLayerIndex;\n\n            if (this.hasPattern) {\n              var _t73 = ul(\"fill\", this.layers, _i73, this.zoom, e);\n\n              this.patternFeatures.push(_t73);\n            } else this.addFeature(_i73, _n52, _s40, r, {});\n\n            e.featureIndex.insert(t[_s40].feature, _n52, _s40, _a39, this.index);\n          }\n        }\n      }, {\n        key: \"update\",\n        value: function update(t, e, r) {\n          this.stateDependentLayers.length && this.programConfigurations.updatePaintArrays(t, e, this.stateDependentLayers, r);\n        }\n      }, {\n        key: \"addFeatures\",\n        value: function addFeatures(t, e, r) {\n          var _iterator64 = _createForOfIteratorHelper(this.patternFeatures),\n              _step64;\n\n          try {\n            for (_iterator64.s(); !(_step64 = _iterator64.n()).done;) {\n              var _t75 = _step64.value;\n              this.addFeature(_t75, _t75.geometry, _t75.index, e, r);\n            }\n          } catch (err) {\n            _iterator64.e(err);\n          } finally {\n            _iterator64.f();\n          }\n        }\n      }, {\n        key: \"isEmpty\",\n        value: function isEmpty() {\n          return 0 === this.layoutVertexArray.length;\n        }\n      }, {\n        key: \"uploadPending\",\n        value: function uploadPending() {\n          return !this.uploaded || this.programConfigurations.needsUpload;\n        }\n      }, {\n        key: \"upload\",\n        value: function upload(t) {\n          this.uploaded || (this.layoutVertexBuffer = t.createVertexBuffer(this.layoutVertexArray, zo), this.indexBuffer = t.createIndexBuffer(this.indexArray), this.indexBuffer2 = t.createIndexBuffer(this.indexArray2)), this.programConfigurations.upload(t), this.uploaded = !0;\n        }\n      }, {\n        key: \"destroy\",\n        value: function destroy() {\n          this.layoutVertexBuffer && (this.layoutVertexBuffer.destroy(), this.indexBuffer.destroy(), this.indexBuffer2.destroy(), this.programConfigurations.destroy(), this.segments.destroy(), this.segments2.destroy());\n        }\n      }, {\n        key: \"addFeature\",\n        value: function addFeature(t, e, r, i, n) {\n          var _iterator65 = _createForOfIteratorHelper(al(e, 500)),\n              _step65;\n\n          try {\n            for (_iterator65.s(); !(_step65 = _iterator65.n()).done;) {\n              var _t76 = _step65.value;\n              var _e82 = 0;\n\n              var _iterator66 = _createForOfIteratorHelper(_t76),\n                  _step66;\n\n              try {\n                for (_iterator66.s(); !(_step66 = _iterator66.n()).done;) {\n                  var _r94 = _step66.value;\n                  _e82 += _r94.length;\n                }\n              } catch (err) {\n                _iterator66.e(err);\n              } finally {\n                _iterator66.f();\n              }\n\n              var _r93 = this.segments.prepareSegment(_e82, this.layoutVertexArray, this.indexArray),\n                  _i74 = _r93.vertexLength,\n                  _n53 = [],\n                  _s42 = [];\n\n              var _iterator67 = _createForOfIteratorHelper(_t76),\n                  _step67;\n\n              try {\n                for (_iterator67.s(); !(_step67 = _iterator67.n()).done;) {\n                  var _e83 = _step67.value;\n                  if (0 === _e83.length) continue;\n                  _e83 !== _t76[0] && _s42.push(_n53.length / 2);\n\n                  var _r95 = this.segments2.prepareSegment(_e83.length, this.layoutVertexArray, this.indexArray2),\n                      _i75 = _r95.vertexLength;\n\n                  this.layoutVertexArray.emplaceBack(_e83[0].x, _e83[0].y), this.indexArray2.emplaceBack(_i75 + _e83.length - 1, _i75), _n53.push(_e83[0].x), _n53.push(_e83[0].y);\n\n                  for (var _t78 = 1; _t78 < _e83.length; _t78++) {\n                    this.layoutVertexArray.emplaceBack(_e83[_t78].x, _e83[_t78].y), this.indexArray2.emplaceBack(_i75 + _t78 - 1, _i75 + _t78), _n53.push(_e83[_t78].x), _n53.push(_e83[_t78].y);\n                  }\n\n                  _r95.vertexLength += _e83.length, _r95.primitiveLength += _e83.length;\n                }\n              } catch (err) {\n                _iterator67.e(err);\n              } finally {\n                _iterator67.f();\n              }\n\n              var _a41 = Eo(_n53, _s42);\n\n              for (var _t77 = 0; _t77 < _a41.length; _t77 += 3) {\n                this.indexArray.emplaceBack(_i74 + _a41[_t77], _i74 + _a41[_t77 + 1], _i74 + _a41[_t77 + 2]);\n              }\n\n              _r93.vertexLength += _e82, _r93.primitiveLength += _a41.length / 3;\n            }\n          } catch (err) {\n            _iterator65.e(err);\n          } finally {\n            _iterator65.f();\n          }\n\n          this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length, t, r, n, i);\n        }\n      }]);\n\n      return cl;\n    }();\n\n    Gi(\"FillBucket\", cl, {\n      omit: [\"layers\", \"patternFeatures\"]\n    });\n    var hl = new rs({\n      \"fill-sort-key\": new Jn(Ft.layout_fill[\"fill-sort-key\"])\n    });\n    var pl = {\n      paint: new rs({\n        \"fill-antialias\": new Wn(Ft.paint_fill[\"fill-antialias\"]),\n        \"fill-opacity\": new Jn(Ft.paint_fill[\"fill-opacity\"]),\n        \"fill-color\": new Jn(Ft.paint_fill[\"fill-color\"]),\n        \"fill-outline-color\": new Jn(Ft.paint_fill[\"fill-outline-color\"]),\n        \"fill-translate\": new Wn(Ft.paint_fill[\"fill-translate\"]),\n        \"fill-translate-anchor\": new Wn(Ft.paint_fill[\"fill-translate-anchor\"]),\n        \"fill-pattern\": new Qn(Ft.paint_fill[\"fill-pattern\"])\n      }),\n      layout: hl\n    };\n    var dl = os([{\n      name: \"a_pos_normal_ed\",\n      components: 4,\n      type: \"Int16\"\n    }]),\n        fl = os([{\n      name: \"a_centroid_pos\",\n      components: 2,\n      type: \"Uint16\"\n    }]),\n        yl = dl.members;\n    var ml = gl;\n\n    function gl(t, e, r, i, n) {\n      this.properties = {}, this.extent = r, this.type = 0, this._pbf = t, this._geometry = -1, this._keys = i, this._values = n, t.readFields(xl, this, e);\n    }\n\n    function xl(t, e, r) {\n      1 == t ? e.id = r.readVarint() : 2 == t ? function (t, e) {\n        for (var r = t.readVarint() + t.pos; t.pos < r;) {\n          var i = e._keys[t.readVarint()],\n              n = e._values[t.readVarint()];\n\n          e.properties[i] = n;\n        }\n      }(r, e) : 3 == t ? e.type = r.readVarint() : 4 == t && (e._geometry = r.pos);\n    }\n\n    function vl(t) {\n      for (var e, r, i = 0, n = 0, s = t.length, a = s - 1; n < s; a = n++) {\n        i += ((r = t[a]).x - (e = t[n]).x) * (e.y + r.y);\n      }\n\n      return i;\n    }\n\n    gl.types = [\"Unknown\", \"Point\", \"LineString\", \"Polygon\"], gl.prototype.loadGeometry = function () {\n      var t = this._pbf;\n      t.pos = this._geometry;\n\n      for (var e, r = t.readVarint() + t.pos, n = 1, s = 0, a = 0, o = 0, l = []; t.pos < r;) {\n        if (s <= 0) {\n          var u = t.readVarint();\n          n = 7 & u, s = u >> 3;\n        }\n\n        if (s--, 1 === n || 2 === n) a += t.readSVarint(), o += t.readSVarint(), 1 === n && (e && l.push(e), e = []), e.push(new i(a, o));else {\n          if (7 !== n) throw new Error(\"unknown command \" + n);\n          e && e.push(e[0].clone());\n        }\n      }\n\n      return e && l.push(e), l;\n    }, gl.prototype.bbox = function () {\n      var t = this._pbf;\n      t.pos = this._geometry;\n\n      for (var e = t.readVarint() + t.pos, r = 1, i = 0, n = 0, s = 0, a = 1 / 0, o = -1 / 0, l = 1 / 0, u = -1 / 0; t.pos < e;) {\n        if (i <= 0) {\n          var c = t.readVarint();\n          r = 7 & c, i = c >> 3;\n        }\n\n        if (i--, 1 === r || 2 === r) (n += t.readSVarint()) < a && (a = n), n > o && (o = n), (s += t.readSVarint()) < l && (l = s), s > u && (u = s);else if (7 !== r) throw new Error(\"unknown command \" + r);\n      }\n\n      return [a, l, o, u];\n    }, gl.prototype.toGeoJSON = function (t, e, r) {\n      var i,\n          n,\n          s = this.extent * Math.pow(2, r),\n          a = this.extent * t,\n          o = this.extent * e,\n          l = this.loadGeometry(),\n          u = gl.types[this.type];\n\n      function c(t) {\n        for (var e = 0; e < t.length; e++) {\n          var r = t[e];\n          t[e] = [360 * (r.x + a) / s - 180, 360 / Math.PI * Math.atan(Math.exp((180 - 360 * (r.y + o) / s) * Math.PI / 180)) - 90];\n        }\n      }\n\n      switch (this.type) {\n        case 1:\n          var h = [];\n\n          for (i = 0; i < l.length; i++) {\n            h[i] = l[i][0];\n          }\n\n          c(l = h);\n          break;\n\n        case 2:\n          for (i = 0; i < l.length; i++) {\n            c(l[i]);\n          }\n\n          break;\n\n        case 3:\n          for (l = function (t) {\n            var e = t.length;\n            if (e <= 1) return [t];\n\n            for (var r, i, n = [], s = 0; s < e; s++) {\n              var a = vl(t[s]);\n              0 !== a && (void 0 === i && (i = a < 0), i === a < 0 ? (r && n.push(r), r = [t[s]]) : r.push(t[s]));\n            }\n\n            return r && n.push(r), n;\n          }(l), i = 0; i < l.length; i++) {\n            for (n = 0; n < l[i].length; n++) {\n              c(l[i][n]);\n            }\n          }\n\n      }\n\n      1 === l.length ? l = l[0] : u = \"Multi\" + u;\n      var p = {\n        type: \"Feature\",\n        geometry: {\n          type: u,\n          coordinates: l\n        },\n        properties: this.properties\n      };\n      return \"id\" in this && (p.id = this.id), p;\n    };\n    var bl = wl;\n\n    function wl(t, e) {\n      this.version = 1, this.name = null, this.extent = 4096, this.length = 0, this._pbf = t, this._keys = [], this._values = [], this._features = [], t.readFields(_l, this, e), this.length = this._features.length;\n    }\n\n    function _l(t, e, r) {\n      15 === t ? e.version = r.readVarint() : 1 === t ? e.name = r.readString() : 5 === t ? e.extent = r.readVarint() : 2 === t ? e._features.push(r.pos) : 3 === t ? e._keys.push(r.readString()) : 4 === t && e._values.push(function (t) {\n        for (var e = null, r = t.readVarint() + t.pos; t.pos < r;) {\n          var i = t.readVarint() >> 3;\n          e = 1 === i ? t.readString() : 2 === i ? t.readFloat() : 3 === i ? t.readDouble() : 4 === i ? t.readVarint64() : 5 === i ? t.readVarint() : 6 === i ? t.readSVarint() : 7 === i ? t.readBoolean() : null;\n        }\n\n        return e;\n      }(r));\n    }\n\n    function kl(t, e, r) {\n      if (3 === t) {\n        var i = new bl(r, r.readVarint() + r.pos);\n        i.length && (e[i.name] = i);\n      }\n    }\n\n    wl.prototype.feature = function (t) {\n      if (t < 0 || t >= this._features.length) throw new Error(\"feature index out of bounds\");\n      this._pbf.pos = this._features[t];\n\n      var e = this._pbf.readVarint() + this._pbf.pos;\n\n      return new ml(this._pbf, e, this.extent, this._keys, this._values);\n    };\n\n    var Al = {\n      VectorTile: function VectorTile(t, e) {\n        this.layers = t.readFields(kl, {}, e);\n      },\n      VectorTileFeature: ml,\n      VectorTileLayer: bl\n    };\n    var Sl = Al.VectorTileFeature.types,\n        Il = Math.pow(2, 13);\n\n    function Tl(t, e, r, i, n, s, a, o) {\n      t.emplaceBack((e << 1) + a, (r << 1) + s, (Math.floor(i * Il) << 1) + n, Math.round(o));\n    }\n\n    var zl = /*#__PURE__*/function () {\n      function zl() {\n        _classCallCheck(this, zl);\n\n        this.acc = new i(0, 0), this.polyCount = [];\n      }\n\n      _createClass(zl, [{\n        key: \"startRing\",\n        value: function startRing(t) {\n          this.currentPolyCount = {\n            edges: 0,\n            top: 0\n          }, this.polyCount.push(this.currentPolyCount), this.min || (this.min = new i(t.x, t.y), this.max = new i(t.x, t.y));\n        }\n      }, {\n        key: \"append\",\n        value: function append(t, e) {\n          this.currentPolyCount.edges++, this.acc._add(t);\n          var r = !!this.borders;\n          var i = this.min,\n              n = this.max;\n          t.x < i.x ? (i.x = t.x, r = !0) : t.x > n.x && (n.x = t.x, r = !0), t.y < i.y ? (i.y = t.y, r = !0) : t.y > n.y && (n.y = t.y, r = !0), ((0 === t.x || 8192 === t.x) && t.x === e.x) != ((0 === t.y || 8192 === t.y) && t.y === e.y) && this.processBorderOverlap(t, e), r && this.checkBorderIntersection(t, e);\n        }\n      }, {\n        key: \"checkBorderIntersection\",\n        value: function checkBorderIntersection(t, e) {\n          e.x < 0 != t.x < 0 && this.addBorderIntersection(0, Je(e.y, t.y, (0 - e.x) / (t.x - e.x))), e.x > 8192 != t.x > 8192 && this.addBorderIntersection(1, Je(e.y, t.y, (8192 - e.x) / (t.x - e.x))), e.y < 0 != t.y < 0 && this.addBorderIntersection(2, Je(e.x, t.x, (0 - e.y) / (t.y - e.y))), e.y > 8192 != t.y > 8192 && this.addBorderIntersection(3, Je(e.x, t.x, (8192 - e.y) / (t.y - e.y)));\n        }\n      }, {\n        key: \"addBorderIntersection\",\n        value: function addBorderIntersection(t, e) {\n          this.borders || (this.borders = [[Number.MAX_VALUE, -Number.MAX_VALUE], [Number.MAX_VALUE, -Number.MAX_VALUE], [Number.MAX_VALUE, -Number.MAX_VALUE], [Number.MAX_VALUE, -Number.MAX_VALUE]]);\n          var r = this.borders[t];\n          e < r[0] && (r[0] = e), e > r[1] && (r[1] = e);\n        }\n      }, {\n        key: \"processBorderOverlap\",\n        value: function processBorderOverlap(t, e) {\n          if (t.x === e.x) {\n            if (t.y === e.y) return;\n\n            var _r96 = 0 === t.x ? 0 : 1;\n\n            this.addBorderIntersection(_r96, e.y), this.addBorderIntersection(_r96, t.y);\n          } else {\n            var _r97 = 0 === t.y ? 2 : 3;\n\n            this.addBorderIntersection(_r97, e.x), this.addBorderIntersection(_r97, t.x);\n          }\n        }\n      }, {\n        key: \"centroid\",\n        value: function centroid() {\n          var t = this.polyCount.reduce(function (t, e) {\n            return t + e.edges;\n          }, 0);\n          return 0 !== t ? this.acc.div(t)._round() : new i(0, 0);\n        }\n      }, {\n        key: \"span\",\n        value: function span() {\n          return new i(this.max.x - this.min.x, this.max.y - this.min.y);\n        }\n      }, {\n        key: \"intersectsCount\",\n        value: function intersectsCount() {\n          return this.borders.reduce(function (t, e) {\n            return t + +(e[0] !== Number.MAX_VALUE);\n          }, 0);\n        }\n      }]);\n\n      return zl;\n    }();\n\n    var El = /*#__PURE__*/function () {\n      function El(t) {\n        _classCallCheck(this, El);\n\n        this.zoom = t.zoom, this.overscaling = t.overscaling, this.layers = t.layers, this.layerIds = this.layers.map(function (t) {\n          return t.id;\n        }), this.index = t.index, this.hasPattern = !1, this.layoutVertexArray = new cs(), this.centroidVertexArray = new $s(), this.indexArray = new ws(), this.programConfigurations = new ua(t.layers, t.zoom), this.segments = new ya(), this.stateDependentLayerIds = this.layers.filter(function (t) {\n          return t.isStateDependent();\n        }).map(function (t) {\n          return t.id;\n        }), this.enableTerrain = t.enableTerrain;\n      }\n\n      _createClass(El, [{\n        key: \"populate\",\n        value: function populate(t, e, r) {\n          this.features = [], this.hasPattern = ll(\"fill-extrusion\", this.layers, e), this.featuresOnBorder = [], this.borders = [[], [], [], []], this.borderDone = [!1, !1, !1, !1], this.tileToMeter = function (t) {\n            var e = Math.exp(Math.PI * (1 - t.y / (1 << t.z) * 2));\n            return 80150034 * e / (e * e + 1) / 8192 / (1 << t.z);\n          }(r);\n\n          var _iterator68 = _createForOfIteratorHelper(t),\n              _step68;\n\n          try {\n            for (_iterator68.s(); !(_step68 = _iterator68.n()).done;) {\n              var _ref145 = _step68.value;\n              var _i76 = _ref145.feature;\n              var _n54 = _ref145.id;\n              var _s43 = _ref145.index;\n              var _a42 = _ref145.sourceLayerIndex;\n\n              var _t79 = this.layers[0]._featureFilter.needGeometry,\n                  _o17 = va(_i76, _t79);\n\n              if (!this.layers[0]._featureFilter.filter(new qn(this.zoom), _o17, r)) continue;\n              var _l14 = {\n                id: _n54,\n                sourceLayerIndex: _a42,\n                index: _s43,\n                geometry: _t79 ? _o17.geometry : xa(_i76),\n                properties: _i76.properties,\n                type: _i76.type,\n                patterns: {}\n              },\n                  _u13 = this.layoutVertexArray.length;\n              this.hasPattern ? this.features.push(ul(\"fill-extrusion\", this.layers, _l14, this.zoom, e)) : this.addFeature(_l14, _l14.geometry, _s43, r, {}), e.featureIndex.insert(_i76, _l14.geometry, _s43, _a42, this.index, _u13);\n            }\n          } catch (err) {\n            _iterator68.e(err);\n          } finally {\n            _iterator68.f();\n          }\n\n          this.sortBorders();\n        }\n      }, {\n        key: \"addFeatures\",\n        value: function addFeatures(t, e, r) {\n          var _iterator69 = _createForOfIteratorHelper(this.features),\n              _step69;\n\n          try {\n            for (_iterator69.s(); !(_step69 = _iterator69.n()).done;) {\n              var _t80 = _step69.value;\n              var _i77 = _t80.geometry;\n              this.addFeature(_t80, _i77, _t80.index, e, r);\n            }\n          } catch (err) {\n            _iterator69.e(err);\n          } finally {\n            _iterator69.f();\n          }\n\n          this.sortBorders();\n        }\n      }, {\n        key: \"update\",\n        value: function update(t, e, r) {\n          this.stateDependentLayers.length && this.programConfigurations.updatePaintArrays(t, e, this.stateDependentLayers, r);\n        }\n      }, {\n        key: \"isEmpty\",\n        value: function isEmpty() {\n          return 0 === this.layoutVertexArray.length;\n        }\n      }, {\n        key: \"uploadPending\",\n        value: function uploadPending() {\n          return !this.uploaded || this.programConfigurations.needsUpload;\n        }\n      }, {\n        key: \"upload\",\n        value: function upload(t) {\n          this.uploaded || (this.layoutVertexBuffer = t.createVertexBuffer(this.layoutVertexArray, yl), this.indexBuffer = t.createIndexBuffer(this.indexArray)), this.programConfigurations.upload(t), this.uploaded = !0;\n        }\n      }, {\n        key: \"uploadCentroid\",\n        value: function uploadCentroid(t) {\n          0 !== this.centroidVertexArray.length && (this.centroidVertexBuffer ? this.needsCentroidUpdate && this.centroidVertexBuffer.updateData(this.centroidVertexArray) : this.centroidVertexBuffer = t.createVertexBuffer(this.centroidVertexArray, fl.members, !0), this.needsCentroidUpdate = !1);\n        }\n      }, {\n        key: \"destroy\",\n        value: function destroy() {\n          this.layoutVertexBuffer && (this.layoutVertexBuffer.destroy(), this.centroidVertexBuffer && this.centroidVertexBuffer.destroy(), this.indexBuffer.destroy(), this.programConfigurations.destroy(), this.segments.destroy());\n        }\n      }, {\n        key: \"addFeature\",\n        value: function addFeature(t, e, r, i, n) {\n          var s = this.enableTerrain && t.properties && t.properties.hasOwnProperty(\"type\") && t.properties.hasOwnProperty(\"height\") && \"Polygon\" === Sl[t.type] ? new zl() : null;\n\n          var _iterator70 = _createForOfIteratorHelper(al(e, 500)),\n              _step70;\n\n          try {\n            for (_iterator70.s(); !(_step70 = _iterator70.n()).done;) {\n              var _r99 = _step70.value;\n\n              var _e85 = 0,\n                  _i78 = this.segments.prepareSegment(4, this.layoutVertexArray, this.indexArray);\n\n              if (0 === _r99.length || (a = _r99[0]).every(function (t) {\n                return t.x <= 0;\n              }) || a.every(function (t) {\n                return t.x >= 8192;\n              }) || a.every(function (t) {\n                return t.y <= 0;\n              }) || a.every(function (t) {\n                return t.y >= 8192;\n              })) continue;\n\n              for (var _t82 = 0; _t82 < _r99.length; _t82++) {\n                var _n56 = _r99[_t82];\n                if (0 === _n56.length) continue;\n                _e85 += _n56.length;\n                var _a43 = 0;\n                s && s.startRing(_n56[0]);\n\n                for (var _t83 = 0; _t83 < _n56.length; _t83++) {\n                  var _e86 = _n56[_t83];\n\n                  if (_t83 >= 1) {\n                    var _r100 = _n56[_t83 - 1];\n\n                    if (!Ml(_e86, _r100)) {\n                      s && s.append(_e86, _r100), _i78.vertexLength + 4 > ya.MAX_VERTEX_ARRAY_LENGTH && (_i78 = this.segments.prepareSegment(4, this.layoutVertexArray, this.indexArray));\n\n                      var _t84 = _e86.sub(_r100)._perp(),\n                          _n57 = _t84.x / (Math.abs(_t84.x) + Math.abs(_t84.y)),\n                          _o19 = _t84.y > 0 ? 1 : 0,\n                          _l16 = _r100.dist(_e86);\n\n                      _a43 + _l16 > 32768 && (_a43 = 0), Tl(this.layoutVertexArray, _e86.x, _e86.y, _n57, _o19, 0, 0, _a43), Tl(this.layoutVertexArray, _e86.x, _e86.y, _n57, _o19, 0, 1, _a43), _a43 += _l16, Tl(this.layoutVertexArray, _r100.x, _r100.y, _n57, _o19, 0, 0, _a43), Tl(this.layoutVertexArray, _r100.x, _r100.y, _n57, _o19, 0, 1, _a43);\n                      var _u15 = _i78.vertexLength;\n                      this.indexArray.emplaceBack(_u15, _u15 + 2, _u15 + 1), this.indexArray.emplaceBack(_u15 + 1, _u15 + 2, _u15 + 3), _i78.vertexLength += 4, _i78.primitiveLength += 2;\n                    }\n                  }\n                }\n              }\n\n              if (_i78.vertexLength + _e85 > ya.MAX_VERTEX_ARRAY_LENGTH && (_i78 = this.segments.prepareSegment(_e85, this.layoutVertexArray, this.indexArray)), \"Polygon\" !== Sl[t.type]) continue;\n              var _n55 = [],\n                  _o18 = [],\n                  _l15 = _i78.vertexLength;\n\n              for (var _t85 = 0; _t85 < _r99.length; _t85++) {\n                var _e87 = _r99[_t85];\n\n                if (0 !== _e87.length) {\n                  _e87 !== _r99[0] && _o18.push(_n55.length / 2);\n\n                  for (var _t86 = 0; _t86 < _e87.length; _t86++) {\n                    var _r101 = _e87[_t86];\n                    Tl(this.layoutVertexArray, _r101.x, _r101.y, 0, 0, 1, 1, 0), _n55.push(_r101.x), _n55.push(_r101.y), s && s.currentPolyCount.top++;\n                  }\n                }\n              }\n\n              var _u14 = Eo(_n55, _o18);\n\n              for (var _t87 = 0; _t87 < _u14.length; _t87 += 3) {\n                this.indexArray.emplaceBack(_l15 + _u14[_t87], _l15 + _u14[_t87 + 2], _l15 + _u14[_t87 + 1]);\n              }\n\n              _i78.primitiveLength += _u14.length / 3, _i78.vertexLength += _e85;\n            }\n          } catch (err) {\n            _iterator70.e(err);\n          } finally {\n            _iterator70.f();\n          }\n\n          var a;\n\n          if (s && s.polyCount.length > 0) {\n            if (s.borders) {\n              s.vertexArrayOffset = this.centroidVertexArray.length;\n\n              var _t81 = s.borders,\n                  _e84 = this.featuresOnBorder.push(s) - 1;\n\n              for (var _r98 = 0; _r98 < 4; _r98++) {\n                _t81[_r98][0] !== Number.MAX_VALUE && this.borders[_r98].push(_e84);\n              }\n            }\n\n            this.encodeCentroid(s.borders ? void 0 : s.centroid(), s);\n          }\n\n          this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length, t, r, n, i);\n        }\n      }, {\n        key: \"sortBorders\",\n        value: function sortBorders() {\n          var _this17 = this;\n\n          var _loop = function _loop(_t88) {\n            _this17.borders[_t88].sort(function (e, r) {\n              return _this17.featuresOnBorder[e].borders[_t88][0] - _this17.featuresOnBorder[r].borders[_t88][0];\n            });\n          };\n\n          for (var _t88 = 0; _t88 < 4; _t88++) {\n            _loop(_t88);\n          }\n        }\n      }, {\n        key: \"encodeCentroid\",\n        value: function encodeCentroid(t, e) {\n          var r = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : !0;\n          var i, n;\n          if (t) {\n            if (0 !== t.y) {\n              var _r102 = e.span()._mult(this.tileToMeter);\n\n              i = (Math.max(t.x, 1) << 3) + Math.min(7, Math.round(_r102.x / 10)), n = (Math.max(t.y, 1) << 3) + Math.min(7, Math.round(_r102.y / 10));\n            } else i = Math.ceil(7.3 * t.x), n = 0;\n          } else i = 0, n = +r;\n          var s = r ? this.centroidVertexArray.length : e.vertexArrayOffset;\n\n          var _iterator71 = _createForOfIteratorHelper(e.polyCount),\n              _step71;\n\n          try {\n            for (_iterator71.s(); !(_step71 = _iterator71.n()).done;) {\n              var _t89 = _step71.value;\n              r && this.centroidVertexArray.resize(this.centroidVertexArray.length + 4 * _t89.edges + _t89.top);\n\n              for (var _e88 = 0; _e88 < 2 * _t89.edges; _e88++) {\n                this.centroidVertexArray.emplace(s++, 0, n), this.centroidVertexArray.emplace(s++, i, n);\n              }\n\n              for (var _e89 = 0; _e89 < _t89.top; _e89++) {\n                this.centroidVertexArray.emplace(s++, i, n);\n              }\n            }\n          } catch (err) {\n            _iterator71.e(err);\n          } finally {\n            _iterator71.f();\n          }\n        }\n      }]);\n\n      return El;\n    }();\n\n    function Ml(t, e) {\n      return t.x === e.x && (t.x < 0 || t.x > 8192) || t.y === e.y && (t.y < 0 || t.y > 8192);\n    }\n\n    Gi(\"FillExtrusionBucket\", El, {\n      omit: [\"layers\", \"features\"]\n    }), Gi(\"PartMetadata\", zl);\n    var Bl = {\n      paint: new rs({\n        \"fill-extrusion-opacity\": new Wn(Ft[\"paint_fill-extrusion\"][\"fill-extrusion-opacity\"]),\n        \"fill-extrusion-color\": new Jn(Ft[\"paint_fill-extrusion\"][\"fill-extrusion-color\"]),\n        \"fill-extrusion-translate\": new Wn(Ft[\"paint_fill-extrusion\"][\"fill-extrusion-translate\"]),\n        \"fill-extrusion-translate-anchor\": new Wn(Ft[\"paint_fill-extrusion\"][\"fill-extrusion-translate-anchor\"]),\n        \"fill-extrusion-pattern\": new Qn(Ft[\"paint_fill-extrusion\"][\"fill-extrusion-pattern\"]),\n        \"fill-extrusion-height\": new Jn(Ft[\"paint_fill-extrusion\"][\"fill-extrusion-height\"]),\n        \"fill-extrusion-base\": new Jn(Ft[\"paint_fill-extrusion\"][\"fill-extrusion-base\"]),\n        \"fill-extrusion-vertical-gradient\": new Wn(Ft[\"paint_fill-extrusion\"][\"fill-extrusion-vertical-gradient\"])\n      })\n    };\n\n    function Dl(t, e) {\n      return t.x * e.x + t.y * e.y;\n    }\n\n    function Cl(t, e) {\n      if (1 === t.length) {\n        var _r103 = 0;\n        var _i79 = e[_r103++];\n\n        var _n58;\n\n        for (; !_n58 || _i79.equals(_n58);) {\n          if (_n58 = e[_r103++], !_n58) return 1 / 0;\n        }\n\n        for (; _r103 < e.length; _r103++) {\n          var _s44 = e[_r103],\n              _a44 = t[0],\n              _o20 = _n58.sub(_i79),\n              _l17 = _s44.sub(_i79),\n              _u16 = _a44.sub(_i79),\n              _c8 = Dl(_o20, _o20),\n              _h4 = Dl(_o20, _l17),\n              _p2 = Dl(_l17, _l17),\n              _d2 = Dl(_u16, _o20),\n              _f = Dl(_u16, _l17),\n              _y = _c8 * _p2 - _h4 * _h4,\n              _m = (_p2 * _d2 - _h4 * _f) / _y,\n              _g = (_c8 * _f - _h4 * _d2) / _y,\n              _x = _i79.z * (1 - _m - _g) + _n58.z * _m + _s44.z * _g;\n\n          if (isFinite(_x)) return _x;\n        }\n\n        return 1 / 0;\n      }\n\n      {\n        var _t90 = 1 / 0;\n\n        var _iterator72 = _createForOfIteratorHelper(e),\n            _step72;\n\n        try {\n          for (_iterator72.s(); !(_step72 = _iterator72.n()).done;) {\n            var _r104 = _step72.value;\n            _t90 = Math.min(_t90, _r104.z);\n          }\n        } catch (err) {\n          _iterator72.e(err);\n        } finally {\n          _iterator72.f();\n        }\n\n        return _t90;\n      }\n    }\n\n    function Pl(t) {\n      var e = new i(t[0], t[1]);\n      return e.z = t[2], e;\n    }\n\n    function Vl(t, e, r, i, n, s, a, o) {\n      var l = a * n.getElevationAt(t, e, !0, !0),\n          u = 0 !== s[0],\n          c = u ? 0 === s[1] ? a * (s[0] / 7.3) : a * function (t, e, r) {\n        var i = Math.floor(e[0] / 8),\n            n = Math.floor(e[1] / 8),\n            s = 10 * (e[0] - 8 * i),\n            a = 10 * (e[1] - 8 * n),\n            o = t.getElevationAt(i, n, !0, !0),\n            l = t.getMeterToDEM(r),\n            u = Math.floor(.5 * (s * l - 1)),\n            c = Math.floor(.5 * (a * l - 1)),\n            h = t.tileCoordToPixel(i, n),\n            p = 2 * u + 1,\n            d = 2 * c + 1,\n            f = function (t, e, r, i, n) {\n          return [t.getElevationAtPixel(e, r, !0), t.getElevationAtPixel(e + n, r, !0), t.getElevationAtPixel(e, r + n, !0), t.getElevationAtPixel(e + i, r + n, !0)];\n        }(t, h.x - u, h.y - c, p, d),\n            y = Math.abs(f[0] - f[1]),\n            m = Math.abs(f[2] - f[3]),\n            g = Math.abs(f[0] - f[2]) + Math.abs(f[1] - f[3]),\n            x = Math.min(.25, .5 * l * (y + m) / p),\n            v = Math.min(.25, .5 * l * g / d);\n\n        return o + Math.max(x * s, v * a);\n      }(n, s, o) : l;\n      return {\n        base: l + (0 === r) ? -1 : r,\n        top: u ? Math.max(c + i, l + r + 2) : l + i\n      };\n    }\n\n    var Fl = os([{\n      name: \"a_pos_normal\",\n      components: 2,\n      type: \"Int16\"\n    }, {\n      name: \"a_data\",\n      components: 4,\n      type: \"Uint8\"\n    }, {\n      name: \"a_linesofar\",\n      components: 1,\n      type: \"Float32\"\n    }], 4),\n        Rl = Fl.members,\n        Ll = os([{\n      name: \"a_uv_x\",\n      components: 1,\n      type: \"Float32\"\n    }, {\n      name: \"a_split_index\",\n      components: 1,\n      type: \"Float32\"\n    }]),\n        Ul = Ll.members,\n        Ol = Al.VectorTileFeature.types,\n        $l = Math.cos(Math.PI / 180 * 37.5);\n\n    var ql = /*#__PURE__*/function () {\n      function ql(t) {\n        var _this18 = this;\n\n        _classCallCheck(this, ql);\n\n        this.zoom = t.zoom, this.overscaling = t.overscaling, this.layers = t.layers, this.layerIds = this.layers.map(function (t) {\n          return t.id;\n        }), this.index = t.index, this.hasPattern = !1, this.patternFeatures = [], this.lineClipsArray = [], this.gradients = {}, this.layers.forEach(function (t) {\n          _this18.gradients[t.id] = {};\n        }), this.layoutVertexArray = new hs(), this.layoutVertexArray2 = new ps(), this.indexArray = new ws(), this.programConfigurations = new ua(t.layers, t.zoom), this.segments = new ya(), this.maxLineLength = 0, this.stateDependentLayerIds = this.layers.filter(function (t) {\n          return t.isStateDependent();\n        }).map(function (t) {\n          return t.id;\n        });\n      }\n\n      _createClass(ql, [{\n        key: \"populate\",\n        value: function populate(t, e, r) {\n          this.hasPattern = ll(\"line\", this.layers, e);\n          var i = this.layers[0].layout.get(\"line-sort-key\"),\n              n = [];\n\n          var _iterator73 = _createForOfIteratorHelper(t),\n              _step73;\n\n          try {\n            for (_iterator73.s(); !(_step73 = _iterator73.n()).done;) {\n              var _ref147 = _step73.value;\n              var _e90 = _ref147.feature;\n              var _s46 = _ref147.id;\n              var _a46 = _ref147.index;\n              var _o21 = _ref147.sourceLayerIndex;\n\n              var _t92 = this.layers[0]._featureFilter.needGeometry,\n                  _l18 = va(_e90, _t92);\n\n              if (!this.layers[0]._featureFilter.filter(new qn(this.zoom), _l18, r)) continue;\n\n              var _u17 = i ? i.evaluate(_l18, {}, r) : void 0,\n                  _c9 = {\n                id: _s46,\n                properties: _e90.properties,\n                type: _e90.type,\n                sourceLayerIndex: _o21,\n                index: _a46,\n                geometry: _t92 ? _l18.geometry : xa(_e90),\n                patterns: {},\n                sortKey: _u17\n              };\n\n              n.push(_c9);\n            }\n          } catch (err) {\n            _iterator73.e(err);\n          } finally {\n            _iterator73.f();\n          }\n\n          i && n.sort(function (t, e) {\n            return t.sortKey - e.sortKey;\n          });\n\n          for (var _i80 = 0, _n59 = n; _i80 < _n59.length; _i80++) {\n            var _i81 = _n59[_i80];\n            var _n60 = _i81.geometry,\n                _s45 = _i81.index,\n                _a45 = _i81.sourceLayerIndex;\n\n            if (this.hasPattern) {\n              var _t91 = ul(\"line\", this.layers, _i81, this.zoom, e);\n\n              this.patternFeatures.push(_t91);\n            } else this.addFeature(_i81, _n60, _s45, r, {});\n\n            e.featureIndex.insert(t[_s45].feature, _n60, _s45, _a45, this.index);\n          }\n        }\n      }, {\n        key: \"update\",\n        value: function update(t, e, r) {\n          this.stateDependentLayers.length && this.programConfigurations.updatePaintArrays(t, e, this.stateDependentLayers, r);\n        }\n      }, {\n        key: \"addFeatures\",\n        value: function addFeatures(t, e, r) {\n          var _iterator74 = _createForOfIteratorHelper(this.patternFeatures),\n              _step74;\n\n          try {\n            for (_iterator74.s(); !(_step74 = _iterator74.n()).done;) {\n              var _t93 = _step74.value;\n              this.addFeature(_t93, _t93.geometry, _t93.index, e, r);\n            }\n          } catch (err) {\n            _iterator74.e(err);\n          } finally {\n            _iterator74.f();\n          }\n        }\n      }, {\n        key: \"isEmpty\",\n        value: function isEmpty() {\n          return 0 === this.layoutVertexArray.length;\n        }\n      }, {\n        key: \"uploadPending\",\n        value: function uploadPending() {\n          return !this.uploaded || this.programConfigurations.needsUpload;\n        }\n      }, {\n        key: \"upload\",\n        value: function upload(t) {\n          this.uploaded || (0 !== this.layoutVertexArray2.length && (this.layoutVertexBuffer2 = t.createVertexBuffer(this.layoutVertexArray2, Ul)), this.layoutVertexBuffer = t.createVertexBuffer(this.layoutVertexArray, Rl), this.indexBuffer = t.createIndexBuffer(this.indexArray)), this.programConfigurations.upload(t), this.uploaded = !0;\n        }\n      }, {\n        key: \"destroy\",\n        value: function destroy() {\n          this.layoutVertexBuffer && (this.layoutVertexBuffer.destroy(), this.indexBuffer.destroy(), this.programConfigurations.destroy(), this.segments.destroy());\n        }\n      }, {\n        key: \"lineFeatureClips\",\n        value: function lineFeatureClips(t) {\n          if (t.properties && t.properties.hasOwnProperty(\"mapbox_clip_start\") && t.properties.hasOwnProperty(\"mapbox_clip_end\")) return {\n            start: +t.properties.mapbox_clip_start,\n            end: +t.properties.mapbox_clip_end\n          };\n        }\n      }, {\n        key: \"addFeature\",\n        value: function addFeature(t, e, r, i, n) {\n          var s = this.layers[0].layout,\n              a = s.get(\"line-join\").evaluate(t, {}),\n              o = s.get(\"line-cap\"),\n              l = s.get(\"line-miter-limit\"),\n              u = s.get(\"line-round-limit\");\n          this.lineClips = this.lineFeatureClips(t);\n\n          var _iterator75 = _createForOfIteratorHelper(e),\n              _step75;\n\n          try {\n            for (_iterator75.s(); !(_step75 = _iterator75.n()).done;) {\n              var _r105 = _step75.value;\n              this.addLine(_r105, t, a, o, l, u);\n            }\n          } catch (err) {\n            _iterator75.e(err);\n          } finally {\n            _iterator75.f();\n          }\n\n          this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length, t, r, n, i);\n        }\n      }, {\n        key: \"addLine\",\n        value: function addLine(t, e, r, i, n, s) {\n          if (this.distance = 0, this.scaledDistance = 0, this.totalDistance = 0, this.lineSoFar = 0, this.lineClips) {\n            this.lineClipsArray.push(this.lineClips);\n\n            for (var _e91 = 0; _e91 < t.length - 1; _e91++) {\n              this.totalDistance += t[_e91].dist(t[_e91 + 1]);\n            }\n\n            this.updateScaledDistance(), this.maxLineLength = Math.max(this.maxLineLength, this.totalDistance);\n          }\n\n          var a = \"Polygon\" === Ol[e.type];\n          var o = t.length;\n\n          for (; o >= 2 && t[o - 1].equals(t[o - 2]);) {\n            o--;\n          }\n\n          var l = 0;\n\n          for (; l < o - 1 && t[l].equals(t[l + 1]);) {\n            l++;\n          }\n\n          if (o < (a ? 3 : 2)) return;\n          \"bevel\" === r && (n = 1.05);\n          var u = this.overscaling <= 16 ? 122880 / (512 * this.overscaling) : 0,\n              c = this.segments.prepareSegment(10 * o, this.layoutVertexArray, this.indexArray);\n          var h,\n              p = void 0,\n              d = void 0,\n              f = void 0,\n              y = void 0;\n          this.e1 = this.e2 = -1, a && (h = t[o - 2], y = t[l].sub(h)._unit()._perp());\n\n          for (var _e92 = l; _e92 < o; _e92++) {\n            if (d = _e92 === o - 1 ? a ? t[l + 1] : void 0 : t[_e92 + 1], d && t[_e92].equals(d)) continue;\n            y && (f = y), h && (p = h), h = t[_e92], y = d ? d.sub(h)._unit()._perp() : f, f = f || y;\n\n            var _m2 = f.add(y);\n\n            0 === _m2.x && 0 === _m2.y || _m2._unit();\n\n            var _g2 = f.x * y.x + f.y * y.y,\n                _x2 = _m2.x * y.x + _m2.y * y.y,\n                _v = 0 !== _x2 ? 1 / _x2 : 1 / 0,\n                _b = 2 * Math.sqrt(2 - 2 * _x2),\n                _w = _x2 < $l && p && d,\n                _2 = f.x * y.y - f.y * y.x > 0;\n\n            if (_w && _e92 > l) {\n              var _t94 = h.dist(p);\n\n              if (_t94 > 2 * u) {\n                var _e93 = h.sub(h.sub(p)._mult(u / _t94)._round());\n\n                this.updateDistance(p, _e93), this.addCurrentVertex(_e93, f, 0, 0, c), p = _e93;\n              }\n            }\n\n            var _k = p && d;\n\n            var _A = _k ? r : a ? \"butt\" : i;\n\n            if (_k && \"round\" === _A && (_v < s ? _A = \"miter\" : _v <= 2 && (_A = \"fakeround\")), \"miter\" === _A && _v > n && (_A = \"bevel\"), \"bevel\" === _A && (_v > 2 && (_A = \"flipbevel\"), _v < n && (_A = \"miter\")), p && this.updateDistance(p, h), \"miter\" === _A) _m2._mult(_v), this.addCurrentVertex(h, _m2, 0, 0, c);else if (\"flipbevel\" === _A) {\n              if (_v > 100) _m2 = y.mult(-1);else {\n                var _t95 = _v * f.add(y).mag() / f.sub(y).mag();\n\n                _m2._perp()._mult(_t95 * (_2 ? -1 : 1));\n              }\n              this.addCurrentVertex(h, _m2, 0, 0, c), this.addCurrentVertex(h, _m2.mult(-1), 0, 0, c);\n            } else if (\"bevel\" === _A || \"fakeround\" === _A) {\n              var _t96 = -Math.sqrt(_v * _v - 1),\n                  _e94 = _2 ? _t96 : 0,\n                  _r106 = _2 ? 0 : _t96;\n\n              if (p && this.addCurrentVertex(h, f, _e94, _r106, c), \"fakeround\" === _A) {\n                var _t97 = Math.round(180 * _b / Math.PI / 20);\n\n                for (var _e95 = 1; _e95 < _t97; _e95++) {\n                  var _r107 = _e95 / _t97;\n\n                  if (.5 !== _r107) {\n                    var _t98 = _r107 - .5;\n\n                    _r107 += _r107 * _t98 * (_r107 - 1) * ((1.0904 + _g2 * (_g2 * (3.55645 - 1.43519 * _g2) - 3.2452)) * _t98 * _t98 + (.848013 + _g2 * (.215638 * _g2 - 1.06021)));\n                  }\n\n                  var _i82 = y.sub(f)._mult(_r107)._add(f)._unit()._mult(_2 ? -1 : 1);\n\n                  this.addHalfVertex(h, _i82.x, _i82.y, !1, _2, 0, c);\n                }\n              }\n\n              d && this.addCurrentVertex(h, y, -_e94, -_r106, c);\n            } else if (\"butt\" === _A) this.addCurrentVertex(h, _m2, 0, 0, c);else if (\"square\" === _A) {\n              var _t99 = p ? 1 : -1;\n\n              this.addCurrentVertex(h, _m2, _t99, _t99, c);\n            } else \"round\" === _A && (p && (this.addCurrentVertex(h, f, 0, 0, c), this.addCurrentVertex(h, f, 1, 1, c, !0)), d && (this.addCurrentVertex(h, y, -1, -1, c, !0), this.addCurrentVertex(h, y, 0, 0, c)));\n\n            if (_w && _e92 < o - 1) {\n              var _t100 = h.dist(d);\n\n              if (_t100 > 2 * u) {\n                var _e96 = h.add(d.sub(h)._mult(u / _t100)._round());\n\n                this.updateDistance(h, _e96), this.addCurrentVertex(_e96, y, 0, 0, c), h = _e96;\n              }\n            }\n          }\n        }\n      }, {\n        key: \"addCurrentVertex\",\n        value: function addCurrentVertex(t, e, r, i, n) {\n          var s = arguments.length > 5 && arguments[5] !== undefined ? arguments[5] : !1;\n          var a = e.y * i - e.x,\n              o = -e.y - e.x * i;\n          this.addHalfVertex(t, e.x + e.y * r, e.y - e.x * r, s, !1, r, n), this.addHalfVertex(t, a, o, s, !0, -i, n);\n        }\n      }, {\n        key: \"addHalfVertex\",\n        value: function addHalfVertex(_ref148, r, i, n, s, a, o) {\n          var t = _ref148.x,\n              e = _ref148.y;\n          this.layoutVertexArray.emplaceBack((t << 1) + (n ? 1 : 0), (e << 1) + (s ? 1 : 0), Math.round(63 * r) + 128, Math.round(63 * i) + 128, 1 + (0 === a ? 0 : a < 0 ? -1 : 1), 0, this.lineSoFar), this.lineClips && this.layoutVertexArray2.emplaceBack(this.scaledDistance, this.lineClipsArray.length);\n          var l = o.vertexLength++;\n          this.e1 >= 0 && this.e2 >= 0 && (this.indexArray.emplaceBack(this.e1, this.e2, l), o.primitiveLength++), s ? this.e2 = l : this.e1 = l;\n        }\n      }, {\n        key: \"updateScaledDistance\",\n        value: function updateScaledDistance() {\n          if (this.lineClips) {\n            var _t101 = this.totalDistance / (this.lineClips.end - this.lineClips.start);\n\n            this.scaledDistance = this.distance / this.totalDistance, this.lineSoFar = _t101 * this.lineClips.start + this.distance;\n          } else this.lineSoFar = this.distance;\n        }\n      }, {\n        key: \"updateDistance\",\n        value: function updateDistance(t, e) {\n          this.distance += t.dist(e), this.updateScaledDistance();\n        }\n      }]);\n\n      return ql;\n    }();\n\n    Gi(\"LineBucket\", ql, {\n      omit: [\"layers\", \"patternFeatures\"]\n    });\n    var Nl = new rs({\n      \"line-cap\": new Wn(Ft.layout_line[\"line-cap\"]),\n      \"line-join\": new Jn(Ft.layout_line[\"line-join\"]),\n      \"line-miter-limit\": new Wn(Ft.layout_line[\"line-miter-limit\"]),\n      \"line-round-limit\": new Wn(Ft.layout_line[\"line-round-limit\"]),\n      \"line-sort-key\": new Jn(Ft.layout_line[\"line-sort-key\"])\n    });\n    var jl = {\n      paint: new rs({\n        \"line-opacity\": new Jn(Ft.paint_line[\"line-opacity\"]),\n        \"line-color\": new Jn(Ft.paint_line[\"line-color\"]),\n        \"line-translate\": new Wn(Ft.paint_line[\"line-translate\"]),\n        \"line-translate-anchor\": new Wn(Ft.paint_line[\"line-translate-anchor\"]),\n        \"line-width\": new Jn(Ft.paint_line[\"line-width\"]),\n        \"line-gap-width\": new Jn(Ft.paint_line[\"line-gap-width\"]),\n        \"line-offset\": new Jn(Ft.paint_line[\"line-offset\"]),\n        \"line-blur\": new Jn(Ft.paint_line[\"line-blur\"]),\n        \"line-dasharray\": new ts(Ft.paint_line[\"line-dasharray\"]),\n        \"line-pattern\": new Qn(Ft.paint_line[\"line-pattern\"]),\n        \"line-gradient\": new es(Ft.paint_line[\"line-gradient\"])\n      }),\n      layout: Nl\n    };\n    var Gl = new ( /*#__PURE__*/function (_Jn2) {\n      _inherits(_class4, _Jn2);\n\n      var _super46 = _createSuper(_class4);\n\n      function _class4() {\n        _classCallCheck(this, _class4);\n\n        return _super46.apply(this, arguments);\n      }\n\n      _createClass(_class4, [{\n        key: \"possiblyEvaluate\",\n        value: function possiblyEvaluate(t, e) {\n          return e = new qn(Math.floor(e.zoom), {\n            now: e.now,\n            fadeDuration: e.fadeDuration,\n            zoomHistory: e.zoomHistory,\n            transition: e.transition\n          }), _get(_getPrototypeOf(_class4.prototype), \"possiblyEvaluate\", this).call(this, t, e);\n        }\n      }, {\n        key: \"evaluate\",\n        value: function evaluate(t, e, r, i) {\n          return e = x({}, e, {\n            zoom: Math.floor(e.zoom)\n          }), _get(_getPrototypeOf(_class4.prototype), \"evaluate\", this).call(this, t, e, r, i);\n        }\n      }]);\n\n      return _class4;\n    }(Jn))(jl.paint.properties[\"line-width\"].specification);\n\n    function Zl(t, e) {\n      return e > 0 ? e + 2 * t : t;\n    }\n\n    Gl.useIntegerZoom = !0;\n    var Xl = os([{\n      name: \"a_pos_offset\",\n      components: 4,\n      type: \"Int16\"\n    }, {\n      name: \"a_data\",\n      components: 4,\n      type: \"Uint16\"\n    }, {\n      name: \"a_pixeloffset\",\n      components: 4,\n      type: \"Int16\"\n    }], 4),\n        Kl = os([{\n      name: \"a_projected_pos\",\n      components: 3,\n      type: \"Float32\"\n    }], 4),\n        Hl = (os([{\n      name: \"a_fade_opacity\",\n      components: 1,\n      type: \"Uint32\"\n    }], 4), os([{\n      name: \"a_placed\",\n      components: 2,\n      type: \"Uint8\"\n    }, {\n      name: \"a_shift\",\n      components: 2,\n      type: \"Float32\"\n    }])),\n        Yl = os([{\n      name: \"a_size_scale\",\n      components: 1,\n      type: \"Float32\"\n    }, {\n      name: \"a_padding\",\n      components: 2,\n      type: \"Float32\"\n    }]),\n        Wl = (os([{\n      type: \"Int16\",\n      name: \"anchorPointX\"\n    }, {\n      type: \"Int16\",\n      name: \"anchorPointY\"\n    }, {\n      type: \"Float32\",\n      name: \"x1\"\n    }, {\n      type: \"Float32\",\n      name: \"y1\"\n    }, {\n      type: \"Float32\",\n      name: \"x2\"\n    }, {\n      type: \"Float32\",\n      name: \"y2\"\n    }, {\n      type: \"Int16\",\n      name: \"padding\"\n    }, {\n      type: \"Uint32\",\n      name: \"featureIndex\"\n    }, {\n      type: \"Uint16\",\n      name: \"sourceLayerIndex\"\n    }, {\n      type: \"Uint16\",\n      name: \"bucketIndex\"\n    }]), os([{\n      name: \"a_pos\",\n      components: 2,\n      type: \"Int16\"\n    }, {\n      name: \"a_anchor_pos\",\n      components: 2,\n      type: \"Int16\"\n    }, {\n      name: \"a_extrude\",\n      components: 2,\n      type: \"Int16\"\n    }], 4)),\n        Jl = os([{\n      name: \"a_pos_2f\",\n      components: 2,\n      type: \"Float32\"\n    }, {\n      name: \"a_radius\",\n      components: 1,\n      type: \"Float32\"\n    }, {\n      name: \"a_flags\",\n      components: 2,\n      type: \"Int16\"\n    }], 4);\n\n    function Ql(t, e) {\n      var r = e.expression;\n      if (\"constant\" === r.kind) return {\n        kind: \"constant\",\n        layoutSize: r.evaluate(new qn(t + 1))\n      };\n      if (\"source\" === r.kind) return {\n        kind: \"source\"\n      };\n      {\n        var _e97 = r.zoomStops,\n            _i83 = r.interpolationType;\n        var _n61 = 0;\n\n        for (; _n61 < _e97.length && _e97[_n61] <= t;) {\n          _n61++;\n        }\n\n        _n61 = Math.max(0, _n61 - 1);\n        var _s47 = _n61;\n\n        for (; _s47 < _e97.length && _e97[_s47] < t + 1;) {\n          _s47++;\n        }\n\n        _s47 = Math.min(_e97.length - 1, _s47);\n        var _a47 = _e97[_n61],\n            _o22 = _e97[_s47];\n        return \"composite\" === r.kind ? {\n          kind: \"composite\",\n          minZoom: _a47,\n          maxZoom: _o22,\n          interpolationType: _i83\n        } : {\n          kind: \"camera\",\n          minZoom: _a47,\n          maxZoom: _o22,\n          minSize: r.evaluate(new qn(_a47)),\n          maxSize: r.evaluate(new qn(_o22)),\n          interpolationType: _i83\n        };\n      }\n    }\n\n    function tu(t, _ref149, _ref150) {\n      var e = _ref149.uSize,\n          r = _ref149.uSizeT;\n      var i = _ref150.lowerSize,\n          n = _ref150.upperSize;\n      return \"source\" === t.kind ? i / 128 : \"composite\" === t.kind ? Je(i / 128, n / 128, r) : e;\n    }\n\n    function eu(t, e) {\n      var r = 0,\n          i = 0;\n      if (\"constant\" === t.kind) i = t.layoutSize;else if (\"source\" !== t.kind) {\n        var _n62 = t.interpolationType,\n            _s48 = t.minZoom,\n            _a48 = t.maxZoom,\n            _o23 = _n62 ? f(dr.interpolationFactor(_n62, e, _s48, _a48), 0, 1) : 0;\n\n        \"camera\" === t.kind ? i = Je(t.minSize, t.maxSize, _o23) : r = _o23;\n      }\n      return {\n        uSizeT: r,\n        uSize: i\n      };\n    }\n\n    os([{\n      name: \"triangle\",\n      components: 3,\n      type: \"Uint16\"\n    }]), os([{\n      type: \"Int16\",\n      name: \"anchorX\"\n    }, {\n      type: \"Int16\",\n      name: \"anchorY\"\n    }, {\n      type: \"Uint16\",\n      name: \"glyphStartIndex\"\n    }, {\n      type: \"Uint16\",\n      name: \"numGlyphs\"\n    }, {\n      type: \"Uint32\",\n      name: \"vertexStartIndex\"\n    }, {\n      type: \"Uint32\",\n      name: \"lineStartIndex\"\n    }, {\n      type: \"Uint32\",\n      name: \"lineLength\"\n    }, {\n      type: \"Uint16\",\n      name: \"segment\"\n    }, {\n      type: \"Uint16\",\n      name: \"lowerSize\"\n    }, {\n      type: \"Uint16\",\n      name: \"upperSize\"\n    }, {\n      type: \"Float32\",\n      name: \"lineOffsetX\"\n    }, {\n      type: \"Float32\",\n      name: \"lineOffsetY\"\n    }, {\n      type: \"Uint8\",\n      name: \"writingMode\"\n    }, {\n      type: \"Uint8\",\n      name: \"placedOrientation\"\n    }, {\n      type: \"Uint8\",\n      name: \"hidden\"\n    }, {\n      type: \"Uint32\",\n      name: \"crossTileID\"\n    }, {\n      type: \"Int16\",\n      name: \"associatedIconIndex\"\n    }]), os([{\n      type: \"Int16\",\n      name: \"anchorX\"\n    }, {\n      type: \"Int16\",\n      name: \"anchorY\"\n    }, {\n      type: \"Int16\",\n      name: \"rightJustifiedTextSymbolIndex\"\n    }, {\n      type: \"Int16\",\n      name: \"centerJustifiedTextSymbolIndex\"\n    }, {\n      type: \"Int16\",\n      name: \"leftJustifiedTextSymbolIndex\"\n    }, {\n      type: \"Int16\",\n      name: \"verticalPlacedTextSymbolIndex\"\n    }, {\n      type: \"Int16\",\n      name: \"placedIconSymbolIndex\"\n    }, {\n      type: \"Int16\",\n      name: \"verticalPlacedIconSymbolIndex\"\n    }, {\n      type: \"Uint16\",\n      name: \"key\"\n    }, {\n      type: \"Uint16\",\n      name: \"textBoxStartIndex\"\n    }, {\n      type: \"Uint16\",\n      name: \"textBoxEndIndex\"\n    }, {\n      type: \"Uint16\",\n      name: \"verticalTextBoxStartIndex\"\n    }, {\n      type: \"Uint16\",\n      name: \"verticalTextBoxEndIndex\"\n    }, {\n      type: \"Uint16\",\n      name: \"iconBoxStartIndex\"\n    }, {\n      type: \"Uint16\",\n      name: \"iconBoxEndIndex\"\n    }, {\n      type: \"Uint16\",\n      name: \"verticalIconBoxStartIndex\"\n    }, {\n      type: \"Uint16\",\n      name: \"verticalIconBoxEndIndex\"\n    }, {\n      type: \"Uint16\",\n      name: \"featureIndex\"\n    }, {\n      type: \"Uint16\",\n      name: \"numHorizontalGlyphVertices\"\n    }, {\n      type: \"Uint16\",\n      name: \"numVerticalGlyphVertices\"\n    }, {\n      type: \"Uint16\",\n      name: \"numIconVertices\"\n    }, {\n      type: \"Uint16\",\n      name: \"numVerticalIconVertices\"\n    }, {\n      type: \"Uint16\",\n      name: \"useRuntimeCollisionCircles\"\n    }, {\n      type: \"Uint32\",\n      name: \"crossTileID\"\n    }, {\n      type: \"Float32\",\n      name: \"textBoxScale\"\n    }, {\n      type: \"Float32\",\n      components: 2,\n      name: \"textOffset\"\n    }, {\n      type: \"Float32\",\n      name: \"collisionCircleDiameter\"\n    }]), os([{\n      type: \"Float32\",\n      name: \"offsetX\"\n    }]), os([{\n      type: \"Int16\",\n      name: \"x\"\n    }, {\n      type: \"Int16\",\n      name: \"y\"\n    }, {\n      type: \"Int16\",\n      name: \"tileUnitDistanceFromAnchor\"\n    }]);\n    var ru = Object.freeze({\n      __proto__: null,\n      getSizeData: Ql,\n      evaluateSizeForFeature: tu,\n      evaluateSizeForZoom: eu,\n      SIZE_PACK_FACTOR: 128\n    });\n\n    function iu(t, e, r) {\n      return t.sections.forEach(function (t) {\n        t.text = function (t, e, r) {\n          var i = e.layout.get(\"text-transform\").evaluate(r, {});\n          return \"uppercase\" === i ? t = t.toLocaleUpperCase() : \"lowercase\" === i && (t = t.toLocaleLowerCase()), $n.applyArabicShaping && (t = $n.applyArabicShaping(t)), t;\n        }(t.text, e, r);\n      }), t;\n    }\n\n    var nu = {\n      \"!\": \"ï¸\",\n      \"#\": \"ï¼\",\n      $: \"ï¼\",\n      \"%\": \"ï¼\",\n      \"&\": \"ï¼\",\n      \"(\": \"ï¸µ\",\n      \")\": \"ï¸¶\",\n      \"*\": \"ï¼\",\n      \"+\": \"ï¼\",\n      \",\": \"ï¸\",\n      \"-\": \"ï¸²\",\n      \".\": \"ã»\",\n      \"/\": \"ï¼\",\n      \":\": \"ï¸\",\n      \";\": \"ï¸\",\n      \"<\": \"ï¸¿\",\n      \"=\": \"ï¼\",\n      \">\": \"ï¹\",\n      \"?\": \"ï¸\",\n      \"@\": \"ï¼ \",\n      \"[\": \"ï¹\",\n      \"\\\\\": \"ï¼¼\",\n      \"]\": \"ï¹\",\n      \"^\": \"ï¼¾\",\n      _: \"ï¸³\",\n      \"`\": \"ï½\",\n      \"{\": \"ï¸·\",\n      \"|\": \"â\",\n      \"}\": \"ï¸¸\",\n      \"~\": \"ï½\",\n      \"Â¢\": \"ï¿ \",\n      \"Â£\": \"ï¿¡\",\n      \"Â¥\": \"ï¿¥\",\n      \"Â¦\": \"ï¿¤\",\n      \"Â¬\": \"ï¿¢\",\n      \"Â¯\": \"ï¿£\",\n      \"â\": \"ï¸²\",\n      \"â\": \"ï¸±\",\n      \"â\": \"ï¹\",\n      \"â\": \"ï¹\",\n      \"â\": \"ï¹\",\n      \"â\": \"ï¹\",\n      \"â¦\": \"ï¸\",\n      \"â§\": \"ã»\",\n      \"â©\": \"ï¿¦\",\n      \"ã\": \"ï¸\",\n      \"ã\": \"ï¸\",\n      \"ã\": \"ï¸¿\",\n      \"ã\": \"ï¹\",\n      \"ã\": \"ï¸½\",\n      \"ã\": \"ï¸¾\",\n      \"ã\": \"ï¹\",\n      \"ã\": \"ï¹\",\n      \"ã\": \"ï¹\",\n      \"ã\": \"ï¹\",\n      \"ã\": \"ï¸»\",\n      \"ã\": \"ï¸¼\",\n      \"ã\": \"ï¸¹\",\n      \"ã\": \"ï¸º\",\n      \"ã\": \"ï¸\",\n      \"ã\": \"ï¸\",\n      \"ï¼\": \"ï¸\",\n      \"ï¼\": \"ï¸µ\",\n      \"ï¼\": \"ï¸¶\",\n      \"ï¼\": \"ï¸\",\n      \"ï¼\": \"ï¸²\",\n      \"ï¼\": \"ã»\",\n      \"ï¼\": \"ï¸\",\n      \"ï¼\": \"ï¸\",\n      \"ï¼\": \"ï¸¿\",\n      \"ï¼\": \"ï¹\",\n      \"ï¼\": \"ï¸\",\n      \"ï¼»\": \"ï¹\",\n      \"ï¼½\": \"ï¹\",\n      \"ï¼¿\": \"ï¸³\",\n      \"ï½\": \"ï¸·\",\n      \"ï½\": \"â\",\n      \"ï½\": \"ï¸¸\",\n      \"ï½\": \"ï¸µ\",\n      \"ï½ \": \"ï¸¶\",\n      \"ï½¡\": \"ï¸\",\n      \"ï½¢\": \"ï¹\",\n      \"ï½£\": \"ï¹\"\n    };\n\n    var su = function su(t, e, r, i, n) {\n      var s,\n          a,\n          o = 8 * n - i - 1,\n          l = (1 << o) - 1,\n          u = l >> 1,\n          c = -7,\n          h = r ? n - 1 : 0,\n          p = r ? -1 : 1,\n          d = t[e + h];\n\n      for (h += p, s = d & (1 << -c) - 1, d >>= -c, c += o; c > 0; s = 256 * s + t[e + h], h += p, c -= 8) {\n        ;\n      }\n\n      for (a = s & (1 << -c) - 1, s >>= -c, c += i; c > 0; a = 256 * a + t[e + h], h += p, c -= 8) {\n        ;\n      }\n\n      if (0 === s) s = 1 - u;else {\n        if (s === l) return a ? NaN : 1 / 0 * (d ? -1 : 1);\n        a += Math.pow(2, i), s -= u;\n      }\n      return (d ? -1 : 1) * a * Math.pow(2, s - i);\n    },\n        au = function au(t, e, r, i, n, s) {\n      var a,\n          o,\n          l,\n          u = 8 * s - n - 1,\n          c = (1 << u) - 1,\n          h = c >> 1,\n          p = 23 === n ? Math.pow(2, -24) - Math.pow(2, -77) : 0,\n          d = i ? 0 : s - 1,\n          f = i ? 1 : -1,\n          y = e < 0 || 0 === e && 1 / e < 0 ? 1 : 0;\n\n      for (e = Math.abs(e), isNaN(e) || e === 1 / 0 ? (o = isNaN(e) ? 1 : 0, a = c) : (a = Math.floor(Math.log(e) / Math.LN2), e * (l = Math.pow(2, -a)) < 1 && (a--, l *= 2), (e += a + h >= 1 ? p / l : p * Math.pow(2, 1 - h)) * l >= 2 && (a++, l /= 2), a + h >= c ? (o = 0, a = c) : a + h >= 1 ? (o = (e * l - 1) * Math.pow(2, n), a += h) : (o = e * Math.pow(2, h - 1) * Math.pow(2, n), a = 0)); n >= 8; t[r + d] = 255 & o, d += f, o /= 256, n -= 8) {\n        ;\n      }\n\n      for (a = a << n | o, u += n; u > 0; t[r + d] = 255 & a, d += f, a /= 256, u -= 8) {\n        ;\n      }\n\n      t[r + d - f] |= 128 * y;\n    },\n        ou = lu;\n\n    function lu(t) {\n      this.buf = ArrayBuffer.isView && ArrayBuffer.isView(t) ? t : new Uint8Array(t || 0), this.pos = 0, this.type = 0, this.length = this.buf.length;\n    }\n\n    lu.Varint = 0, lu.Fixed64 = 1, lu.Bytes = 2, lu.Fixed32 = 5;\n    var uu = \"undefined\" == typeof TextDecoder ? null : new TextDecoder(\"utf8\");\n\n    function cu(t) {\n      return t.type === lu.Bytes ? t.readVarint() + t.pos : t.pos + 1;\n    }\n\n    function hu(t, e, r) {\n      return r ? 4294967296 * e + (t >>> 0) : 4294967296 * (e >>> 0) + (t >>> 0);\n    }\n\n    function pu(t, e, r) {\n      var i = e <= 16383 ? 1 : e <= 2097151 ? 2 : e <= 268435455 ? 3 : Math.floor(Math.log(e) / (7 * Math.LN2));\n      r.realloc(i);\n\n      for (var n = r.pos - 1; n >= t; n--) {\n        r.buf[n + i] = r.buf[n];\n      }\n    }\n\n    function du(t, e) {\n      for (var r = 0; r < t.length; r++) {\n        e.writeVarint(t[r]);\n      }\n    }\n\n    function fu(t, e) {\n      for (var r = 0; r < t.length; r++) {\n        e.writeSVarint(t[r]);\n      }\n    }\n\n    function yu(t, e) {\n      for (var r = 0; r < t.length; r++) {\n        e.writeFloat(t[r]);\n      }\n    }\n\n    function mu(t, e) {\n      for (var r = 0; r < t.length; r++) {\n        e.writeDouble(t[r]);\n      }\n    }\n\n    function gu(t, e) {\n      for (var r = 0; r < t.length; r++) {\n        e.writeBoolean(t[r]);\n      }\n    }\n\n    function xu(t, e) {\n      for (var r = 0; r < t.length; r++) {\n        e.writeFixed32(t[r]);\n      }\n    }\n\n    function vu(t, e) {\n      for (var r = 0; r < t.length; r++) {\n        e.writeSFixed32(t[r]);\n      }\n    }\n\n    function bu(t, e) {\n      for (var r = 0; r < t.length; r++) {\n        e.writeFixed64(t[r]);\n      }\n    }\n\n    function wu(t, e) {\n      for (var r = 0; r < t.length; r++) {\n        e.writeSFixed64(t[r]);\n      }\n    }\n\n    function _u(t, e) {\n      return (t[e] | t[e + 1] << 8 | t[e + 2] << 16) + 16777216 * t[e + 3];\n    }\n\n    function ku(t, e, r) {\n      t[r] = e, t[r + 1] = e >>> 8, t[r + 2] = e >>> 16, t[r + 3] = e >>> 24;\n    }\n\n    function Au(t, e) {\n      return (t[e] | t[e + 1] << 8 | t[e + 2] << 16) + (t[e + 3] << 24);\n    }\n\n    function Su(t, e, r) {\n      1 === t && r.readMessage(Iu, e);\n    }\n\n    function Iu(t, e, r) {\n      if (3 === t) {\n        var _r$readMessage = r.readMessage(Tu, {}),\n            _t102 = _r$readMessage.id,\n            _i84 = _r$readMessage.bitmap,\n            _n63 = _r$readMessage.width,\n            _s49 = _r$readMessage.height,\n            _a49 = _r$readMessage.left,\n            _o24 = _r$readMessage.top,\n            _l19 = _r$readMessage.advance;\n\n        e.push({\n          id: _t102,\n          bitmap: new _o({\n            width: _n63 + 6,\n            height: _s49 + 6\n          }, _i84),\n          metrics: {\n            width: _n63,\n            height: _s49,\n            left: _a49,\n            top: _o24,\n            advance: _l19\n          }\n        });\n      }\n    }\n\n    function Tu(t, e, r) {\n      1 === t ? e.id = r.readVarint() : 2 === t ? e.bitmap = r.readBytes() : 3 === t ? e.width = r.readVarint() : 4 === t ? e.height = r.readVarint() : 5 === t ? e.left = r.readSVarint() : 6 === t ? e.top = r.readSVarint() : 7 === t && (e.advance = r.readVarint());\n    }\n\n    function zu(t) {\n      var e = 0,\n          r = 0;\n\n      var _iterator76 = _createForOfIteratorHelper(t),\n          _step76;\n\n      try {\n        for (_iterator76.s(); !(_step76 = _iterator76.n()).done;) {\n          var _i85 = _step76.value;\n          e += _i85.w * _i85.h, r = Math.max(r, _i85.w);\n        }\n      } catch (err) {\n        _iterator76.e(err);\n      } finally {\n        _iterator76.f();\n      }\n\n      t.sort(function (t, e) {\n        return e.h - t.h;\n      });\n      var i = [{\n        x: 0,\n        y: 0,\n        w: Math.max(Math.ceil(Math.sqrt(e / .95)), r),\n        h: 1 / 0\n      }];\n      var n = 0,\n          s = 0;\n\n      var _iterator77 = _createForOfIteratorHelper(t),\n          _step77;\n\n      try {\n        for (_iterator77.s(); !(_step77 = _iterator77.n()).done;) {\n          var _e98 = _step77.value;\n\n          for (var _t103 = i.length - 1; _t103 >= 0; _t103--) {\n            var _r108 = i[_t103];\n\n            if (!(_e98.w > _r108.w || _e98.h > _r108.h)) {\n              if (_e98.x = _r108.x, _e98.y = _r108.y, s = Math.max(s, _e98.y + _e98.h), n = Math.max(n, _e98.x + _e98.w), _e98.w === _r108.w && _e98.h === _r108.h) {\n                var _e99 = i.pop();\n\n                _t103 < i.length && (i[_t103] = _e99);\n              } else _e98.h === _r108.h ? (_r108.x += _e98.w, _r108.w -= _e98.w) : _e98.w === _r108.w ? (_r108.y += _e98.h, _r108.h -= _e98.h) : (i.push({\n                x: _r108.x + _e98.w,\n                y: _r108.y,\n                w: _r108.w - _e98.w,\n                h: _e98.h\n              }), _r108.y += _e98.h, _r108.h -= _e98.h);\n\n              break;\n            }\n          }\n        }\n      } catch (err) {\n        _iterator77.e(err);\n      } finally {\n        _iterator77.f();\n      }\n\n      return {\n        w: n,\n        h: s,\n        fill: e / (n * s) || 0\n      };\n    }\n\n    lu.prototype = {\n      destroy: function destroy() {\n        this.buf = null;\n      },\n      readFields: function readFields(t, e, r) {\n        for (r = r || this.length; this.pos < r;) {\n          var i = this.readVarint(),\n              n = i >> 3,\n              s = this.pos;\n          this.type = 7 & i, t(n, e, this), this.pos === s && this.skip(i);\n        }\n\n        return e;\n      },\n      readMessage: function readMessage(t, e) {\n        return this.readFields(t, e, this.readVarint() + this.pos);\n      },\n      readFixed32: function readFixed32() {\n        var t = _u(this.buf, this.pos);\n\n        return this.pos += 4, t;\n      },\n      readSFixed32: function readSFixed32() {\n        var t = Au(this.buf, this.pos);\n        return this.pos += 4, t;\n      },\n      readFixed64: function readFixed64() {\n        var t = _u(this.buf, this.pos) + 4294967296 * _u(this.buf, this.pos + 4);\n\n        return this.pos += 8, t;\n      },\n      readSFixed64: function readSFixed64() {\n        var t = _u(this.buf, this.pos) + 4294967296 * Au(this.buf, this.pos + 4);\n        return this.pos += 8, t;\n      },\n      readFloat: function readFloat() {\n        var t = su(this.buf, this.pos, !0, 23, 4);\n        return this.pos += 4, t;\n      },\n      readDouble: function readDouble() {\n        var t = su(this.buf, this.pos, !0, 52, 8);\n        return this.pos += 8, t;\n      },\n      readVarint: function readVarint(t) {\n        var e,\n            r,\n            i = this.buf;\n        return e = 127 & (r = i[this.pos++]), r < 128 ? e : (e |= (127 & (r = i[this.pos++])) << 7, r < 128 ? e : (e |= (127 & (r = i[this.pos++])) << 14, r < 128 ? e : (e |= (127 & (r = i[this.pos++])) << 21, r < 128 ? e : function (t, e, r) {\n          var i,\n              n,\n              s = r.buf;\n          if (i = (112 & (n = s[r.pos++])) >> 4, n < 128) return hu(t, i, e);\n          if (i |= (127 & (n = s[r.pos++])) << 3, n < 128) return hu(t, i, e);\n          if (i |= (127 & (n = s[r.pos++])) << 10, n < 128) return hu(t, i, e);\n          if (i |= (127 & (n = s[r.pos++])) << 17, n < 128) return hu(t, i, e);\n          if (i |= (127 & (n = s[r.pos++])) << 24, n < 128) return hu(t, i, e);\n          if (i |= (1 & (n = s[r.pos++])) << 31, n < 128) return hu(t, i, e);\n          throw new Error(\"Expected varint not more than 10 bytes\");\n        }(e |= (15 & (r = i[this.pos])) << 28, t, this))));\n      },\n      readVarint64: function readVarint64() {\n        return this.readVarint(!0);\n      },\n      readSVarint: function readSVarint() {\n        var t = this.readVarint();\n        return t % 2 == 1 ? (t + 1) / -2 : t / 2;\n      },\n      readBoolean: function readBoolean() {\n        return Boolean(this.readVarint());\n      },\n      readString: function readString() {\n        var t = this.readVarint() + this.pos,\n            e = this.pos;\n        return this.pos = t, t - e >= 12 && uu ? function (t, e, r) {\n          return uu.decode(t.subarray(e, r));\n        }(this.buf, e, t) : function (t, e, r) {\n          for (var i = \"\", n = e; n < r;) {\n            var s,\n                a,\n                o,\n                l = t[n],\n                u = null,\n                c = l > 239 ? 4 : l > 223 ? 3 : l > 191 ? 2 : 1;\n            if (n + c > r) break;\n            1 === c ? l < 128 && (u = l) : 2 === c ? 128 == (192 & (s = t[n + 1])) && (u = (31 & l) << 6 | 63 & s) <= 127 && (u = null) : 3 === c ? (a = t[n + 2], 128 == (192 & (s = t[n + 1])) && 128 == (192 & a) && ((u = (15 & l) << 12 | (63 & s) << 6 | 63 & a) <= 2047 || u >= 55296 && u <= 57343) && (u = null)) : 4 === c && (a = t[n + 2], o = t[n + 3], 128 == (192 & (s = t[n + 1])) && 128 == (192 & a) && 128 == (192 & o) && ((u = (15 & l) << 18 | (63 & s) << 12 | (63 & a) << 6 | 63 & o) <= 65535 || u >= 1114112) && (u = null)), null === u ? (u = 65533, c = 1) : u > 65535 && (u -= 65536, i += String.fromCharCode(u >>> 10 & 1023 | 55296), u = 56320 | 1023 & u), i += String.fromCharCode(u), n += c;\n          }\n\n          return i;\n        }(this.buf, e, t);\n      },\n      readBytes: function readBytes() {\n        var t = this.readVarint() + this.pos,\n            e = this.buf.subarray(this.pos, t);\n        return this.pos = t, e;\n      },\n      readPackedVarint: function readPackedVarint(t, e) {\n        if (this.type !== lu.Bytes) return t.push(this.readVarint(e));\n        var r = cu(this);\n\n        for (t = t || []; this.pos < r;) {\n          t.push(this.readVarint(e));\n        }\n\n        return t;\n      },\n      readPackedSVarint: function readPackedSVarint(t) {\n        if (this.type !== lu.Bytes) return t.push(this.readSVarint());\n        var e = cu(this);\n\n        for (t = t || []; this.pos < e;) {\n          t.push(this.readSVarint());\n        }\n\n        return t;\n      },\n      readPackedBoolean: function readPackedBoolean(t) {\n        if (this.type !== lu.Bytes) return t.push(this.readBoolean());\n        var e = cu(this);\n\n        for (t = t || []; this.pos < e;) {\n          t.push(this.readBoolean());\n        }\n\n        return t;\n      },\n      readPackedFloat: function readPackedFloat(t) {\n        if (this.type !== lu.Bytes) return t.push(this.readFloat());\n        var e = cu(this);\n\n        for (t = t || []; this.pos < e;) {\n          t.push(this.readFloat());\n        }\n\n        return t;\n      },\n      readPackedDouble: function readPackedDouble(t) {\n        if (this.type !== lu.Bytes) return t.push(this.readDouble());\n        var e = cu(this);\n\n        for (t = t || []; this.pos < e;) {\n          t.push(this.readDouble());\n        }\n\n        return t;\n      },\n      readPackedFixed32: function readPackedFixed32(t) {\n        if (this.type !== lu.Bytes) return t.push(this.readFixed32());\n        var e = cu(this);\n\n        for (t = t || []; this.pos < e;) {\n          t.push(this.readFixed32());\n        }\n\n        return t;\n      },\n      readPackedSFixed32: function readPackedSFixed32(t) {\n        if (this.type !== lu.Bytes) return t.push(this.readSFixed32());\n        var e = cu(this);\n\n        for (t = t || []; this.pos < e;) {\n          t.push(this.readSFixed32());\n        }\n\n        return t;\n      },\n      readPackedFixed64: function readPackedFixed64(t) {\n        if (this.type !== lu.Bytes) return t.push(this.readFixed64());\n        var e = cu(this);\n\n        for (t = t || []; this.pos < e;) {\n          t.push(this.readFixed64());\n        }\n\n        return t;\n      },\n      readPackedSFixed64: function readPackedSFixed64(t) {\n        if (this.type !== lu.Bytes) return t.push(this.readSFixed64());\n        var e = cu(this);\n\n        for (t = t || []; this.pos < e;) {\n          t.push(this.readSFixed64());\n        }\n\n        return t;\n      },\n      skip: function skip(t) {\n        var e = 7 & t;\n        if (e === lu.Varint) for (; this.buf[this.pos++] > 127;) {\n          ;\n        } else if (e === lu.Bytes) this.pos = this.readVarint() + this.pos;else if (e === lu.Fixed32) this.pos += 4;else {\n          if (e !== lu.Fixed64) throw new Error(\"Unimplemented type: \" + e);\n          this.pos += 8;\n        }\n      },\n      writeTag: function writeTag(t, e) {\n        this.writeVarint(t << 3 | e);\n      },\n      realloc: function realloc(t) {\n        for (var e = this.length || 16; e < this.pos + t;) {\n          e *= 2;\n        }\n\n        if (e !== this.length) {\n          var r = new Uint8Array(e);\n          r.set(this.buf), this.buf = r, this.length = e;\n        }\n      },\n      finish: function finish() {\n        return this.length = this.pos, this.pos = 0, this.buf.subarray(0, this.length);\n      },\n      writeFixed32: function writeFixed32(t) {\n        this.realloc(4), ku(this.buf, t, this.pos), this.pos += 4;\n      },\n      writeSFixed32: function writeSFixed32(t) {\n        this.realloc(4), ku(this.buf, t, this.pos), this.pos += 4;\n      },\n      writeFixed64: function writeFixed64(t) {\n        this.realloc(8), ku(this.buf, -1 & t, this.pos), ku(this.buf, Math.floor(t * (1 / 4294967296)), this.pos + 4), this.pos += 8;\n      },\n      writeSFixed64: function writeSFixed64(t) {\n        this.realloc(8), ku(this.buf, -1 & t, this.pos), ku(this.buf, Math.floor(t * (1 / 4294967296)), this.pos + 4), this.pos += 8;\n      },\n      writeVarint: function writeVarint(t) {\n        (t = +t || 0) > 268435455 || t < 0 ? function (t, e) {\n          var r, i;\n          if (t >= 0 ? (r = t % 4294967296 | 0, i = t / 4294967296 | 0) : (i = ~(-t / 4294967296), 4294967295 ^ (r = ~(-t % 4294967296)) ? r = r + 1 | 0 : (r = 0, i = i + 1 | 0)), t >= 0x10000000000000000 || t < -0x10000000000000000) throw new Error(\"Given varint doesn't fit into 10 bytes\");\n          e.realloc(10), function (t, e, r) {\n            r.buf[r.pos++] = 127 & t | 128, t >>>= 7, r.buf[r.pos++] = 127 & t | 128, t >>>= 7, r.buf[r.pos++] = 127 & t | 128, t >>>= 7, r.buf[r.pos++] = 127 & t | 128, r.buf[r.pos] = 127 & (t >>>= 7);\n          }(r, 0, e), function (t, e) {\n            var r = (7 & t) << 4;\n            e.buf[e.pos++] |= r | ((t >>>= 3) ? 128 : 0), t && (e.buf[e.pos++] = 127 & t | ((t >>>= 7) ? 128 : 0), t && (e.buf[e.pos++] = 127 & t | ((t >>>= 7) ? 128 : 0), t && (e.buf[e.pos++] = 127 & t | ((t >>>= 7) ? 128 : 0), t && (e.buf[e.pos++] = 127 & t | ((t >>>= 7) ? 128 : 0), t && (e.buf[e.pos++] = 127 & t)))));\n          }(i, e);\n        }(t, this) : (this.realloc(4), this.buf[this.pos++] = 127 & t | (t > 127 ? 128 : 0), t <= 127 || (this.buf[this.pos++] = 127 & (t >>>= 7) | (t > 127 ? 128 : 0), t <= 127 || (this.buf[this.pos++] = 127 & (t >>>= 7) | (t > 127 ? 128 : 0), t <= 127 || (this.buf[this.pos++] = t >>> 7 & 127))));\n      },\n      writeSVarint: function writeSVarint(t) {\n        this.writeVarint(t < 0 ? 2 * -t - 1 : 2 * t);\n      },\n      writeBoolean: function writeBoolean(t) {\n        this.writeVarint(Boolean(t));\n      },\n      writeString: function writeString(t) {\n        t = String(t), this.realloc(4 * t.length), this.pos++;\n        var e = this.pos;\n\n        this.pos = function (t, e, r) {\n          for (var i, n, s = 0; s < e.length; s++) {\n            if ((i = e.charCodeAt(s)) > 55295 && i < 57344) {\n              if (!n) {\n                i > 56319 || s + 1 === e.length ? (t[r++] = 239, t[r++] = 191, t[r++] = 189) : n = i;\n                continue;\n              }\n\n              if (i < 56320) {\n                t[r++] = 239, t[r++] = 191, t[r++] = 189, n = i;\n                continue;\n              }\n\n              i = n - 55296 << 10 | i - 56320 | 65536, n = null;\n            } else n && (t[r++] = 239, t[r++] = 191, t[r++] = 189, n = null);\n\n            i < 128 ? t[r++] = i : (i < 2048 ? t[r++] = i >> 6 | 192 : (i < 65536 ? t[r++] = i >> 12 | 224 : (t[r++] = i >> 18 | 240, t[r++] = i >> 12 & 63 | 128), t[r++] = i >> 6 & 63 | 128), t[r++] = 63 & i | 128);\n          }\n\n          return r;\n        }(this.buf, t, this.pos);\n\n        var r = this.pos - e;\n        r >= 128 && pu(e, r, this), this.pos = e - 1, this.writeVarint(r), this.pos += r;\n      },\n      writeFloat: function writeFloat(t) {\n        this.realloc(4), au(this.buf, t, this.pos, !0, 23, 4), this.pos += 4;\n      },\n      writeDouble: function writeDouble(t) {\n        this.realloc(8), au(this.buf, t, this.pos, !0, 52, 8), this.pos += 8;\n      },\n      writeBytes: function writeBytes(t) {\n        var e = t.length;\n        this.writeVarint(e), this.realloc(e);\n\n        for (var r = 0; r < e; r++) {\n          this.buf[this.pos++] = t[r];\n        }\n      },\n      writeRawMessage: function writeRawMessage(t, e) {\n        this.pos++;\n        var r = this.pos;\n        t(e, this);\n        var i = this.pos - r;\n        i >= 128 && pu(r, i, this), this.pos = r - 1, this.writeVarint(i), this.pos += i;\n      },\n      writeMessage: function writeMessage(t, e, r) {\n        this.writeTag(t, lu.Bytes), this.writeRawMessage(e, r);\n      },\n      writePackedVarint: function writePackedVarint(t, e) {\n        e.length && this.writeMessage(t, du, e);\n      },\n      writePackedSVarint: function writePackedSVarint(t, e) {\n        e.length && this.writeMessage(t, fu, e);\n      },\n      writePackedBoolean: function writePackedBoolean(t, e) {\n        e.length && this.writeMessage(t, gu, e);\n      },\n      writePackedFloat: function writePackedFloat(t, e) {\n        e.length && this.writeMessage(t, yu, e);\n      },\n      writePackedDouble: function writePackedDouble(t, e) {\n        e.length && this.writeMessage(t, mu, e);\n      },\n      writePackedFixed32: function writePackedFixed32(t, e) {\n        e.length && this.writeMessage(t, xu, e);\n      },\n      writePackedSFixed32: function writePackedSFixed32(t, e) {\n        e.length && this.writeMessage(t, vu, e);\n      },\n      writePackedFixed64: function writePackedFixed64(t, e) {\n        e.length && this.writeMessage(t, bu, e);\n      },\n      writePackedSFixed64: function writePackedSFixed64(t, e) {\n        e.length && this.writeMessage(t, wu, e);\n      },\n      writeBytesField: function writeBytesField(t, e) {\n        this.writeTag(t, lu.Bytes), this.writeBytes(e);\n      },\n      writeFixed32Field: function writeFixed32Field(t, e) {\n        this.writeTag(t, lu.Fixed32), this.writeFixed32(e);\n      },\n      writeSFixed32Field: function writeSFixed32Field(t, e) {\n        this.writeTag(t, lu.Fixed32), this.writeSFixed32(e);\n      },\n      writeFixed64Field: function writeFixed64Field(t, e) {\n        this.writeTag(t, lu.Fixed64), this.writeFixed64(e);\n      },\n      writeSFixed64Field: function writeSFixed64Field(t, e) {\n        this.writeTag(t, lu.Fixed64), this.writeSFixed64(e);\n      },\n      writeVarintField: function writeVarintField(t, e) {\n        this.writeTag(t, lu.Varint), this.writeVarint(e);\n      },\n      writeSVarintField: function writeSVarintField(t, e) {\n        this.writeTag(t, lu.Varint), this.writeSVarint(e);\n      },\n      writeStringField: function writeStringField(t, e) {\n        this.writeTag(t, lu.Bytes), this.writeString(e);\n      },\n      writeFloatField: function writeFloatField(t, e) {\n        this.writeTag(t, lu.Fixed32), this.writeFloat(e);\n      },\n      writeDoubleField: function writeDoubleField(t, e) {\n        this.writeTag(t, lu.Fixed64), this.writeDouble(e);\n      },\n      writeBooleanField: function writeBooleanField(t, e) {\n        this.writeVarintField(t, Boolean(e));\n      }\n    };\n\n    var Eu = /*#__PURE__*/function () {\n      function Eu(t, _ref151) {\n        var e = _ref151.pixelRatio,\n            r = _ref151.version,\n            i = _ref151.stretchX,\n            n = _ref151.stretchY,\n            s = _ref151.content;\n\n        _classCallCheck(this, Eu);\n\n        this.paddedRect = t, this.pixelRatio = e, this.stretchX = i, this.stretchY = n, this.content = s, this.version = r;\n      }\n\n      _createClass(Eu, [{\n        key: \"tl\",\n        get: function get() {\n          return [this.paddedRect.x + 1, this.paddedRect.y + 1];\n        }\n      }, {\n        key: \"br\",\n        get: function get() {\n          return [this.paddedRect.x + this.paddedRect.w - 1, this.paddedRect.y + this.paddedRect.h - 1];\n        }\n      }, {\n        key: \"tlbr\",\n        get: function get() {\n          return this.tl.concat(this.br);\n        }\n      }, {\n        key: \"displaySize\",\n        get: function get() {\n          return [(this.paddedRect.w - 2) / this.pixelRatio, (this.paddedRect.h - 2) / this.pixelRatio];\n        }\n      }]);\n\n      return Eu;\n    }();\n\n    var Mu = /*#__PURE__*/function () {\n      function Mu(t, e) {\n        _classCallCheck(this, Mu);\n\n        var r = {},\n            i = {};\n        this.haveRenderCallbacks = [];\n        var n = [];\n        this.addImages(t, r, n), this.addImages(e, i, n);\n\n        var _zu = zu(n),\n            s = _zu.w,\n            a = _zu.h,\n            o = new ko({\n          width: s || 1,\n          height: a || 1\n        });\n\n        for (var _e100 in t) {\n          var _i86 = t[_e100],\n              _n64 = r[_e100].paddedRect;\n          ko.copy(_i86.data, o, {\n            x: 0,\n            y: 0\n          }, {\n            x: _n64.x + 1,\n            y: _n64.y + 1\n          }, _i86.data);\n        }\n\n        for (var _t104 in e) {\n          var _r109 = e[_t104],\n              _n65 = i[_t104].paddedRect,\n              _s50 = _n65.x + 1,\n              _a50 = _n65.y + 1,\n              _l20 = _r109.data.width,\n              _u18 = _r109.data.height;\n\n          ko.copy(_r109.data, o, {\n            x: 0,\n            y: 0\n          }, {\n            x: _s50,\n            y: _a50\n          }, _r109.data), ko.copy(_r109.data, o, {\n            x: 0,\n            y: _u18 - 1\n          }, {\n            x: _s50,\n            y: _a50 - 1\n          }, {\n            width: _l20,\n            height: 1\n          }), ko.copy(_r109.data, o, {\n            x: 0,\n            y: 0\n          }, {\n            x: _s50,\n            y: _a50 + _u18\n          }, {\n            width: _l20,\n            height: 1\n          }), ko.copy(_r109.data, o, {\n            x: _l20 - 1,\n            y: 0\n          }, {\n            x: _s50 - 1,\n            y: _a50\n          }, {\n            width: 1,\n            height: _u18\n          }), ko.copy(_r109.data, o, {\n            x: 0,\n            y: 0\n          }, {\n            x: _s50 + _l20,\n            y: _a50\n          }, {\n            width: 1,\n            height: _u18\n          });\n        }\n\n        this.image = o, this.iconPositions = r, this.patternPositions = i;\n      }\n\n      _createClass(Mu, [{\n        key: \"addImages\",\n        value: function addImages(t, e, r) {\n          for (var _i87 in t) {\n            var _n66 = t[_i87],\n                _s51 = {\n              x: 0,\n              y: 0,\n              w: _n66.data.width + 2,\n              h: _n66.data.height + 2\n            };\n            r.push(_s51), e[_i87] = new Eu(_s51, _n66), _n66.hasRenderCallback && this.haveRenderCallbacks.push(_i87);\n          }\n        }\n      }, {\n        key: \"patchUpdatedImages\",\n        value: function patchUpdatedImages(t, e) {\n          t.dispatchRenderCallbacks(this.haveRenderCallbacks);\n\n          for (var _r110 in t.updatedImages) {\n            this.patchUpdatedImage(this.iconPositions[_r110], t.getImage(_r110), e), this.patchUpdatedImage(this.patternPositions[_r110], t.getImage(_r110), e);\n          }\n        }\n      }, {\n        key: \"patchUpdatedImage\",\n        value: function patchUpdatedImage(t, e, r) {\n          if (!t || !e) return;\n          if (t.version === e.version) return;\n          t.version = e.version;\n\n          var _t$tl = _slicedToArray(t.tl, 2),\n              i = _t$tl[0],\n              n = _t$tl[1];\n\n          r.update(e.data, void 0, {\n            x: i,\n            y: n\n          });\n        }\n      }]);\n\n      return Mu;\n    }();\n\n    Gi(\"ImagePosition\", Eu), Gi(\"ImageAtlas\", Mu);\n    var Bu = {\n      horizontal: 1,\n      vertical: 2,\n      horizontalOnly: 3\n    };\n\n    var Du = /*#__PURE__*/function () {\n      function Du() {\n        _classCallCheck(this, Du);\n\n        this.scale = 1, this.fontStack = \"\", this.imageName = null;\n      }\n\n      _createClass(Du, null, [{\n        key: \"forText\",\n        value: function forText(t, e) {\n          var r = new Du();\n          return r.scale = t || 1, r.fontStack = e, r;\n        }\n      }, {\n        key: \"forImage\",\n        value: function forImage(t) {\n          var e = new Du();\n          return e.imageName = t, e;\n        }\n      }]);\n\n      return Du;\n    }();\n\n    var Cu = /*#__PURE__*/function () {\n      function Cu() {\n        _classCallCheck(this, Cu);\n\n        this.text = \"\", this.sectionIndex = [], this.sections = [], this.imageSectionID = null;\n      }\n\n      _createClass(Cu, [{\n        key: \"length\",\n        value: function length() {\n          return this.text.length;\n        }\n      }, {\n        key: \"getSection\",\n        value: function getSection(t) {\n          return this.sections[this.sectionIndex[t]];\n        }\n      }, {\n        key: \"getSectionIndex\",\n        value: function getSectionIndex(t) {\n          return this.sectionIndex[t];\n        }\n      }, {\n        key: \"getCharCode\",\n        value: function getCharCode(t) {\n          return this.text.charCodeAt(t);\n        }\n      }, {\n        key: \"verticalizePunctuation\",\n        value: function verticalizePunctuation() {\n          this.text = function (t) {\n            var e = \"\";\n\n            for (var _r111 = 0; _r111 < t.length; _r111++) {\n              var _i88 = t.charCodeAt(_r111 + 1) || null,\n                  _n67 = t.charCodeAt(_r111 - 1) || null;\n\n              e += _i88 && En(_i88) && !nu[t[_r111 + 1]] || _n67 && En(_n67) && !nu[t[_r111 - 1]] || !nu[t[_r111]] ? t[_r111] : nu[t[_r111]];\n            }\n\n            return e;\n          }(this.text);\n        }\n      }, {\n        key: \"trim\",\n        value: function trim() {\n          var t = 0;\n\n          for (var _e101 = 0; _e101 < this.text.length && Vu[this.text.charCodeAt(_e101)]; _e101++) {\n            t++;\n          }\n\n          var e = this.text.length;\n\n          for (var _r112 = this.text.length - 1; _r112 >= 0 && _r112 >= t && Vu[this.text.charCodeAt(_r112)]; _r112--) {\n            e--;\n          }\n\n          this.text = this.text.substring(t, e), this.sectionIndex = this.sectionIndex.slice(t, e);\n        }\n      }, {\n        key: \"substring\",\n        value: function substring(t, e) {\n          var r = new Cu();\n          return r.text = this.text.substring(t, e), r.sectionIndex = this.sectionIndex.slice(t, e), r.sections = this.sections, r;\n        }\n      }, {\n        key: \"toString\",\n        value: function toString() {\n          return this.text;\n        }\n      }, {\n        key: \"getMaxScale\",\n        value: function getMaxScale() {\n          var _this19 = this;\n\n          return this.sectionIndex.reduce(function (t, e) {\n            return Math.max(t, _this19.sections[e].scale);\n          }, 0);\n        }\n      }, {\n        key: \"addTextSection\",\n        value: function addTextSection(t, e) {\n          this.text += t.text, this.sections.push(Du.forText(t.scale, t.fontStack || e));\n          var r = this.sections.length - 1;\n\n          for (var _e102 = 0; _e102 < t.text.length; ++_e102) {\n            this.sectionIndex.push(r);\n          }\n        }\n      }, {\n        key: \"addImageSection\",\n        value: function addImageSection(t) {\n          var e = t.image ? t.image.name : \"\";\n          if (0 === e.length) return void E(\"Can't add FormattedSection with an empty image.\");\n          var r = this.getNextImageSectionCharCode();\n          r ? (this.text += String.fromCharCode(r), this.sections.push(Du.forImage(e)), this.sectionIndex.push(this.sections.length - 1)) : E(\"Reached maximum number of images 6401\");\n        }\n      }, {\n        key: \"getNextImageSectionCharCode\",\n        value: function getNextImageSectionCharCode() {\n          return this.imageSectionID ? this.imageSectionID >= 63743 ? null : ++this.imageSectionID : (this.imageSectionID = 57344, this.imageSectionID);\n        }\n      }], [{\n        key: \"fromFeature\",\n        value: function fromFeature(t, e) {\n          var r = new Cu();\n\n          for (var _i89 = 0; _i89 < t.sections.length; _i89++) {\n            var _n68 = t.sections[_i89];\n            _n68.image ? r.addImageSection(_n68) : r.addTextSection(_n68, e);\n          }\n\n          return r;\n        }\n      }]);\n\n      return Cu;\n    }();\n\n    function Pu(t, e, r, i, n, s, a, o, l, u, c, h, p, d, f, y) {\n      var m = Cu.fromFeature(t, n);\n      var g;\n      h === Bu.vertical && m.verticalizePunctuation();\n      var x = $n.processBidirectionalText,\n          v = $n.processStyledBidirectionalText;\n\n      if (x && 1 === m.sections.length) {\n        g = [];\n\n        var _t105 = x(m.toString(), $u(m, u, s, e, i, d, f));\n\n        var _iterator78 = _createForOfIteratorHelper(_t105),\n            _step78;\n\n        try {\n          for (_iterator78.s(); !(_step78 = _iterator78.n()).done;) {\n            var _e103 = _step78.value;\n\n            var _t106 = new Cu();\n\n            _t106.text = _e103, _t106.sections = m.sections;\n\n            for (var _r113 = 0; _r113 < _e103.length; _r113++) {\n              _t106.sectionIndex.push(0);\n            }\n\n            g.push(_t106);\n          }\n        } catch (err) {\n          _iterator78.e(err);\n        } finally {\n          _iterator78.f();\n        }\n      } else if (v) {\n        g = [];\n\n        var _t107 = v(m.text, m.sectionIndex, $u(m, u, s, e, i, d, f));\n\n        var _iterator79 = _createForOfIteratorHelper(_t107),\n            _step79;\n\n        try {\n          for (_iterator79.s(); !(_step79 = _iterator79.n()).done;) {\n            var _e104 = _step79.value;\n\n            var _t108 = new Cu();\n\n            _t108.text = _e104[0], _t108.sectionIndex = _e104[1], _t108.sections = m.sections, g.push(_t108);\n          }\n        } catch (err) {\n          _iterator79.e(err);\n        } finally {\n          _iterator79.f();\n        }\n      } else g = function (t, e) {\n        var r = [],\n            i = t.text;\n        var n = 0;\n\n        var _iterator80 = _createForOfIteratorHelper(e),\n            _step80;\n\n        try {\n          for (_iterator80.s(); !(_step80 = _iterator80.n()).done;) {\n            var _i90 = _step80.value;\n            r.push(t.substring(n, _i90)), n = _i90;\n          }\n        } catch (err) {\n          _iterator80.e(err);\n        } finally {\n          _iterator80.f();\n        }\n\n        return n < i.length && r.push(t.substring(n, i.length)), r;\n      }(m, $u(m, u, s, e, i, d, f));\n\n      var b = [],\n          w = {\n        positionedLines: b,\n        text: m.toString(),\n        top: c[1],\n        bottom: c[1],\n        left: c[0],\n        right: c[0],\n        writingMode: h,\n        iconsInText: !1,\n        verticalizable: !1\n      };\n      return function (t, e, r, i, n, s, a, o, l, u, c, h) {\n        var p = 0,\n            d = -17,\n            f = 0,\n            y = 0;\n        var m = \"right\" === o ? 1 : \"left\" === o ? 0 : .5;\n        var g = 0;\n\n        var _iterator81 = _createForOfIteratorHelper(n),\n            _step81;\n\n        try {\n          for (_iterator81.s(); !(_step81 = _iterator81.n()).done;) {\n            var _a51 = _step81.value;\n\n            _a51.trim();\n\n            var _n69 = _a51.getMaxScale(),\n                _o25 = 24 * (_n69 - 1),\n                _v2 = {\n              positionedGlyphs: [],\n              lineOffset: 0\n            };\n\n            t.positionedLines[g] = _v2;\n            var _b2 = _v2.positionedGlyphs;\n            var _w2 = 0;\n\n            if (!_a51.length()) {\n              d += s, ++g;\n              continue;\n            }\n\n            for (var _s52 = 0; _s52 < _a51.length(); _s52++) {\n              var _f2 = _a51.getSection(_s52),\n                  _y2 = _a51.getSectionIndex(_s52),\n                  _m3 = _a51.getCharCode(_s52);\n\n              var _g3 = 0,\n                  _v3 = null,\n                  _4 = null,\n                  _k2 = null,\n                  _A2 = 24;\n\n              var _S = !(l === Bu.horizontal || !c && !zn(_m3) || c && (Vu[_m3] || (x = _m3, Wi(x) || Ji(x) || Qi(x) || vn(x) || kn(x))));\n\n              if (_f2.imageName) {\n                var _e106 = i[_f2.imageName];\n                if (!_e106) continue;\n                _k2 = _f2.imageName, t.iconsInText = t.iconsInText || !0, _4 = _e106.paddedRect;\n                var _r114 = _e106.displaySize;\n                _f2.scale = 24 * _f2.scale / h, _v3 = {\n                  width: _r114[0],\n                  height: _r114[1],\n                  left: 1,\n                  top: -3,\n                  advance: _S ? _r114[1] : _r114[0],\n                  localGlyph: !1\n                }, _g3 = _o25 + (24 - _r114[1] * _f2.scale), _A2 = _v3.advance;\n\n                var _s53 = _S ? _r114[0] * _f2.scale - 24 * _n69 : _r114[1] * _f2.scale - 24 * _n69;\n\n                _s53 > 0 && _s53 > _w2 && (_w2 = _s53);\n              } else {\n                var _t110 = r[_f2.fontStack],\n                    _i91 = _t110 && _t110[_m3];\n\n                if (_i91 && _i91.rect) _4 = _i91.rect, _v3 = _i91.metrics;else {\n                  var _t111 = e[_f2.fontStack],\n                      _r115 = _t111 && _t111[_m3];\n\n                  if (!_r115) continue;\n                  _v3 = _r115.metrics;\n                }\n                _g3 = 24 * (_n69 - _f2.scale);\n              }\n\n              _S ? (t.verticalizable = !0, _b2.push({\n                glyph: _m3,\n                imageName: _k2,\n                x: p,\n                y: d + _g3,\n                vertical: _S,\n                scale: _f2.scale,\n                localGlyph: _v3.localGlyph,\n                fontStack: _f2.fontStack,\n                sectionIndex: _y2,\n                metrics: _v3,\n                rect: _4\n              }), p += _A2 * _f2.scale + u) : (_b2.push({\n                glyph: _m3,\n                imageName: _k2,\n                x: p,\n                y: d + _g3,\n                vertical: _S,\n                scale: _f2.scale,\n                localGlyph: _v3.localGlyph,\n                fontStack: _f2.fontStack,\n                sectionIndex: _y2,\n                metrics: _v3,\n                rect: _4\n              }), p += _v3.advance * _f2.scale + u);\n            }\n\n            0 !== _b2.length && (f = Math.max(p - u, f), Nu(_b2, 0, _b2.length - 1, m, _w2)), p = 0;\n\n            var _3 = s * _n69 + _w2;\n\n            _v2.lineOffset = Math.max(_w2, _o25), d += _3, y = Math.max(_3, y), ++g;\n          }\n        } catch (err) {\n          _iterator81.e(err);\n        } finally {\n          _iterator81.f();\n        }\n\n        var x;\n\n        var v = d - -17,\n            _qu = qu(a),\n            b = _qu.horizontalAlign,\n            w = _qu.verticalAlign;\n\n        (function (t, e, r, i, n, s, a, o, l) {\n          var u = (e - r) * n;\n          var c = 0;\n          c = s !== a ? -o * i - -17 : (-i * l + .5) * a;\n\n          var _iterator82 = _createForOfIteratorHelper(t),\n              _step82;\n\n          try {\n            for (_iterator82.s(); !(_step82 = _iterator82.n()).done;) {\n              var _e105 = _step82.value;\n\n              var _iterator83 = _createForOfIteratorHelper(_e105.positionedGlyphs),\n                  _step83;\n\n              try {\n                for (_iterator83.s(); !(_step83 = _iterator83.n()).done;) {\n                  var _t109 = _step83.value;\n                  _t109.x += u, _t109.y += c;\n                }\n              } catch (err) {\n                _iterator83.e(err);\n              } finally {\n                _iterator83.f();\n              }\n            }\n          } catch (err) {\n            _iterator82.e(err);\n          } finally {\n            _iterator82.f();\n          }\n        })(t.positionedLines, m, b, w, f, y, s, v, n.length), t.top += -w * v, t.bottom = t.top + v, t.left += -b * f, t.right = t.left + f;\n      }(w, e, r, i, g, a, o, l, h, u, p, y), !function (t) {\n        var _iterator84 = _createForOfIteratorHelper(t),\n            _step84;\n\n        try {\n          for (_iterator84.s(); !(_step84 = _iterator84.n()).done;) {\n            var _e107 = _step84.value;\n            if (0 !== _e107.positionedGlyphs.length) return !1;\n          }\n        } catch (err) {\n          _iterator84.e(err);\n        } finally {\n          _iterator84.f();\n        }\n\n        return !0;\n      }(b) && w;\n    }\n\n    var Vu = {\n      9: !0,\n      10: !0,\n      11: !0,\n      12: !0,\n      13: !0,\n      32: !0\n    },\n        Fu = {\n      10: !0,\n      32: !0,\n      38: !0,\n      40: !0,\n      41: !0,\n      43: !0,\n      45: !0,\n      47: !0,\n      173: !0,\n      183: !0,\n      8203: !0,\n      8208: !0,\n      8211: !0,\n      8231: !0\n    };\n\n    function Ru(t, e, r, i, n, s) {\n      if (e.imageName) {\n        var _t112 = i[e.imageName];\n        return _t112 ? _t112.displaySize[0] * e.scale * 24 / s + n : 0;\n      }\n\n      {\n        var _i92 = r[e.fontStack],\n            _s54 = _i92 && _i92[t];\n\n        return _s54 ? _s54.metrics.advance * e.scale + n : 0;\n      }\n    }\n\n    function Lu(t, e, r, i) {\n      var n = Math.pow(t - e, 2);\n      return i ? t < e ? n / 2 : 2 * n : n + Math.abs(r) * r;\n    }\n\n    function Uu(t, e, r) {\n      var i = 0;\n      return 10 === t && (i -= 1e4), r && (i += 150), 40 !== t && 65288 !== t || (i += 50), 41 !== e && 65289 !== e || (i += 50), i;\n    }\n\n    function Ou(t, e, r, i, n, s) {\n      var a = null,\n          o = Lu(e, r, n, s);\n\n      var _iterator85 = _createForOfIteratorHelper(i),\n          _step85;\n\n      try {\n        for (_iterator85.s(); !(_step85 = _iterator85.n()).done;) {\n          var _t113 = _step85.value;\n\n          var _i93 = Lu(e - _t113.x, r, n, s) + _t113.badness;\n\n          _i93 <= o && (a = _t113, o = _i93);\n        }\n      } catch (err) {\n        _iterator85.e(err);\n      } finally {\n        _iterator85.f();\n      }\n\n      return {\n        index: t,\n        x: e,\n        priorBreak: a,\n        badness: o\n      };\n    }\n\n    function $u(t, e, r, i, n, s, a) {\n      if (\"point\" !== s) return [];\n      if (!t) return [];\n\n      var o = [],\n          l = function (t, e, r, i, n, s) {\n        var a = 0;\n\n        for (var _r116 = 0; _r116 < t.length(); _r116++) {\n          var _o26 = t.getSection(_r116);\n\n          a += Ru(t.getCharCode(_r116), _o26, i, n, e, s);\n        }\n\n        return a / Math.max(1, Math.ceil(a / r));\n      }(t, e, r, i, n, a),\n          u = t.text.indexOf(\"â\") >= 0;\n\n      var c = 0;\n\n      for (var _r117 = 0; _r117 < t.length(); _r117++) {\n        var _s55 = t.getSection(_r117),\n            _p3 = t.getCharCode(_r117);\n\n        if (Vu[_p3] || (c += Ru(_p3, _s55, i, n, e, a)), _r117 < t.length() - 1) {\n          var _e108 = !((h = _p3) < 11904 || !(ln(h) || on(h) || wn(h) || xn(h) || pn(h) || tn(h) || un(h) || nn(h) || dn(h) || fn(h) || hn(h) || An(h) || sn(h) || rn(h) || en(h) || cn(h) || an(h) || bn(h) || mn(h) || yn(h)));\n\n          (Fu[_p3] || _e108 || _s55.imageName) && o.push(Ou(_r117 + 1, c, l, o, Uu(_p3, t.getCharCode(_r117 + 1), _e108 && u), !1));\n        }\n      }\n\n      var h;\n      return function t(e) {\n        return e ? t(e.priorBreak).concat(e.index) : [];\n      }(Ou(t.length(), c, l, o, 0, !0));\n    }\n\n    function qu(t) {\n      var e = .5,\n          r = .5;\n\n      switch (t) {\n        case \"right\":\n        case \"top-right\":\n        case \"bottom-right\":\n          e = 1;\n          break;\n\n        case \"left\":\n        case \"top-left\":\n        case \"bottom-left\":\n          e = 0;\n      }\n\n      switch (t) {\n        case \"bottom\":\n        case \"bottom-right\":\n        case \"bottom-left\":\n          r = 1;\n          break;\n\n        case \"top\":\n        case \"top-right\":\n        case \"top-left\":\n          r = 0;\n      }\n\n      return {\n        horizontalAlign: e,\n        verticalAlign: r\n      };\n    }\n\n    function Nu(t, e, r, i, n) {\n      if (!i && !n) return;\n      var s = t[r],\n          a = (t[r].x + s.metrics.advance * s.scale) * i;\n\n      for (var _i94 = e; _i94 <= r; _i94++) {\n        t[_i94].x -= a, t[_i94].y += n;\n      }\n    }\n\n    function ju(t, e, r) {\n      var _qu2 = qu(r),\n          i = _qu2.horizontalAlign,\n          n = _qu2.verticalAlign,\n          s = e[0] - t.displaySize[0] * i,\n          a = e[1] - t.displaySize[1] * n;\n\n      return {\n        image: t,\n        top: a,\n        bottom: a + t.displaySize[1],\n        left: s,\n        right: s + t.displaySize[0]\n      };\n    }\n\n    function Gu(t, e, r, i, n, s) {\n      var a = t.image;\n      var o;\n\n      if (a.content) {\n        var _t114 = a.content,\n            _e109 = a.pixelRatio || 1;\n\n        o = [_t114[0] / _e109, _t114[1] / _e109, a.displaySize[0] - _t114[2] / _e109, a.displaySize[1] - _t114[3] / _e109];\n      }\n\n      var l = e.left * s,\n          u = e.right * s;\n      var c, h, p, d;\n      \"width\" === r || \"both\" === r ? (d = n[0] + l - i[3], h = n[0] + u + i[1]) : (d = n[0] + (l + u - a.displaySize[0]) / 2, h = d + a.displaySize[0]);\n      var f = e.top * s,\n          y = e.bottom * s;\n      return \"height\" === r || \"both\" === r ? (c = n[1] + f - i[0], p = n[1] + y + i[2]) : (c = n[1] + (f + y - a.displaySize[1]) / 2, p = c + a.displaySize[1]), {\n        image: a,\n        top: c,\n        right: h,\n        bottom: p,\n        left: d,\n        collisionPadding: o\n      };\n    }\n\n    var Zu = /*#__PURE__*/function (_i95) {\n      _inherits(Zu, _i95);\n\n      var _super47 = _createSuper(Zu);\n\n      function Zu(t, e, r, i) {\n        var _this20;\n\n        _classCallCheck(this, Zu);\n\n        _this20 = _super47.call(this, t, e), _this20.angle = r, void 0 !== i && (_this20.segment = i);\n        return _this20;\n      }\n\n      _createClass(Zu, [{\n        key: \"clone\",\n        value: function clone() {\n          return new Zu(this.x, this.y, this.angle, this.segment);\n        }\n      }]);\n\n      return Zu;\n    }(i);\n\n    function Xu(t, e, r, i, n) {\n      if (void 0 === e.segment) return !0;\n      var s = e,\n          a = e.segment + 1,\n          o = 0;\n\n      for (; o > -r / 2;) {\n        if (a--, a < 0) return !1;\n        o -= t[a].dist(s), s = t[a];\n      }\n\n      o += t[a].dist(t[a + 1]), a++;\n      var l = [];\n      var u = 0;\n\n      for (; o < r / 2;) {\n        var _e110 = t[a],\n            _r118 = t[a + 1];\n        if (!_r118) return !1;\n\n        var _s56 = t[a - 1].angleTo(_e110) - _e110.angleTo(_r118);\n\n        for (_s56 = Math.abs((_s56 + 3 * Math.PI) % (2 * Math.PI) - Math.PI), l.push({\n          distance: o,\n          angleDelta: _s56\n        }), u += _s56; o - l[0].distance > i;) {\n          u -= l.shift().angleDelta;\n        }\n\n        if (u > n) return !1;\n        a++, o += _e110.dist(_r118);\n      }\n\n      return !0;\n    }\n\n    function Ku(t) {\n      var e = 0;\n\n      for (var _r119 = 0; _r119 < t.length - 1; _r119++) {\n        e += t[_r119].dist(t[_r119 + 1]);\n      }\n\n      return e;\n    }\n\n    function Hu(t, e, r) {\n      return t ? .6 * e * r : 0;\n    }\n\n    function Yu(t, e) {\n      return Math.max(t ? t.right - t.left : 0, e ? e.right - e.left : 0);\n    }\n\n    function Wu(t, e, r, i, n, s) {\n      var a = Hu(r, n, s),\n          o = Yu(r, i) * s;\n      var l = 0;\n      var u = Ku(t) / 2;\n\n      for (var _r120 = 0; _r120 < t.length - 1; _r120++) {\n        var _i96 = t[_r120],\n            _n70 = t[_r120 + 1],\n            _s57 = _i96.dist(_n70);\n\n        if (l + _s57 > u) {\n          var _c10 = (u - l) / _s57,\n              _h5 = Je(_i96.x, _n70.x, _c10),\n              _p4 = Je(_i96.y, _n70.y, _c10),\n              _d3 = new Zu(_h5, _p4, _n70.angleTo(_i96), _r120);\n\n          return _d3._round(), !a || Xu(t, _d3, o, a, e) ? _d3 : void 0;\n        }\n\n        l += _s57;\n      }\n    }\n\n    function Ju(t, e, r, i, n, s, a, o, l) {\n      var u = Hu(i, s, a),\n          c = Yu(i, n),\n          h = c * a,\n          p = 0 === t[0].x || t[0].x === l || 0 === t[0].y || t[0].y === l;\n      return e - h < e / 4 && (e = h + e / 4), function t(e, r, i, n, s, a, o, l, u) {\n        var c = a / 2,\n            h = Ku(e);\n        var p = 0,\n            d = r - i,\n            f = [];\n\n        for (var _t115 = 0; _t115 < e.length - 1; _t115++) {\n          var _r121 = e[_t115],\n              _o27 = e[_t115 + 1],\n              _l21 = _r121.dist(_o27),\n              _y3 = _o27.angleTo(_r121);\n\n          for (; d + i < p + _l21;) {\n            d += i;\n\n            var _m4 = (d - p) / _l21,\n                _g4 = Je(_r121.x, _o27.x, _m4),\n                _x3 = Je(_r121.y, _o27.y, _m4);\n\n            if (_g4 >= 0 && _g4 < u && _x3 >= 0 && _x3 < u && d - c >= 0 && d + c <= h) {\n              var _r122 = new Zu(_g4, _x3, _y3, _t115);\n\n              _r122._round(), n && !Xu(e, _r122, a, n, s) || f.push(_r122);\n            }\n          }\n\n          p += _l21;\n        }\n\n        return l || f.length || o || (f = t(e, p / 2, i, n, s, a, o, !0, u)), f;\n      }(t, p ? e / 2 * o % e : (c / 2 + 2 * s) * a * o % e, e, u, r, h, p, !1, l);\n    }\n\n    function Qu(t, e, r, n, s) {\n      var a = [];\n\n      for (var _o28 = 0; _o28 < t.length; _o28++) {\n        var _l22 = t[_o28];\n\n        var _u19 = void 0;\n\n        for (var _t116 = 0; _t116 < _l22.length - 1; _t116++) {\n          var _o29 = _l22[_t116],\n              _c11 = _l22[_t116 + 1];\n          _o29.x < e && _c11.x < e || (_o29.x < e ? _o29 = new i(e, _o29.y + (e - _o29.x) / (_c11.x - _o29.x) * (_c11.y - _o29.y))._round() : _c11.x < e && (_c11 = new i(e, _o29.y + (e - _o29.x) / (_c11.x - _o29.x) * (_c11.y - _o29.y))._round()), _o29.y < r && _c11.y < r || (_o29.y < r ? _o29 = new i(_o29.x + (r - _o29.y) / (_c11.y - _o29.y) * (_c11.x - _o29.x), r)._round() : _c11.y < r && (_c11 = new i(_o29.x + (r - _o29.y) / (_c11.y - _o29.y) * (_c11.x - _o29.x), r)._round()), _o29.x >= n && _c11.x >= n || (_o29.x >= n ? _o29 = new i(n, _o29.y + (n - _o29.x) / (_c11.x - _o29.x) * (_c11.y - _o29.y))._round() : _c11.x >= n && (_c11 = new i(n, _o29.y + (n - _o29.x) / (_c11.x - _o29.x) * (_c11.y - _o29.y))._round()), _o29.y >= s && _c11.y >= s || (_o29.y >= s ? _o29 = new i(_o29.x + (s - _o29.y) / (_c11.y - _o29.y) * (_c11.x - _o29.x), s)._round() : _c11.y >= s && (_c11 = new i(_o29.x + (s - _o29.y) / (_c11.y - _o29.y) * (_c11.x - _o29.x), s)._round()), _u19 && _o29.equals(_u19[_u19.length - 1]) || (_u19 = [_o29], a.push(_u19)), _u19.push(_c11)))));\n        }\n      }\n\n      return a;\n    }\n\n    Gi(\"Anchor\", Zu);\n    var tc = ic,\n        ec = ic,\n        rc = 1e20;\n\n    function ic(t, e, r, i, n, s) {\n      this.fontSize = t || 24, this.buffer = void 0 === e ? 3 : e, this.cutoff = i || .25, this.fontFamily = n || \"sans-serif\", this.fontWeight = s || \"normal\", this.radius = r || 8;\n      var a = this.size = this.fontSize + 2 * this.buffer,\n          o = a + 2 * this.buffer;\n      this.canvas = document.createElement(\"canvas\"), this.canvas.width = this.canvas.height = a, this.ctx = this.canvas.getContext(\"2d\"), this.ctx.font = this.fontWeight + \" \" + this.fontSize + \"px \" + this.fontFamily, this.ctx.textBaseline = \"middle\", this.ctx.textAlign = \"left\", this.ctx.fillStyle = \"black\", this.gridOuter = new Float64Array(o * o), this.gridInner = new Float64Array(o * o), this.f = new Float64Array(o), this.z = new Float64Array(o + 1), this.v = new Uint16Array(o), this.middle = Math.round(a / 2 * (navigator.userAgent.indexOf(\"Gecko/\") >= 0 ? 1.2 : 1));\n    }\n\n    function nc(t, e, r, i, n, s) {\n      for (var a = 0; a < e; a++) {\n        sc(t, a, e, r, i, n, s);\n      }\n\n      for (var o = 0; o < r; o++) {\n        sc(t, o * e, 1, e, i, n, s);\n      }\n    }\n\n    function sc(t, e, r, i, n, s, a) {\n      var o, l, u, c;\n\n      for (s[0] = 0, a[0] = -rc, a[1] = rc, o = 0; o < i; o++) {\n        n[o] = t[e + o * r];\n      }\n\n      for (o = 1, l = 0, u = 0; o < i; o++) {\n        do {\n          u = (n[o] - n[c = s[l]] + o * o - c * c) / (o - c) / 2;\n        } while (u <= a[l] && --l > -1);\n\n        s[++l] = o, a[l] = u, a[l + 1] = rc;\n      }\n\n      for (o = 0, l = 0; o < i; o++) {\n        for (; a[l + 1] < o;) {\n          l++;\n        }\n\n        t[e + o * r] = n[c = s[l]] + (o - c) * (o - c);\n      }\n    }\n\n    ic.prototype._draw = function (t, e) {\n      var r,\n          i,\n          n,\n          s,\n          a,\n          o,\n          l,\n          u,\n          c = this.ctx.measureText(t),\n          h = c.width,\n          p = 2 * this.buffer;\n      e && void 0 !== c.actualBoundingBoxLeft ? (a = Math.floor(c.actualBoundingBoxAscent) - this.middle, o = Math.max(0, this.middle - Math.ceil(c.actualBoundingBoxAscent)), l = this.buffer, r = (i = Math.min(this.size, Math.ceil(c.actualBoundingBoxRight - c.actualBoundingBoxLeft))) + p, n = (s = Math.min(this.size - o, Math.ceil(c.actualBoundingBoxAscent + c.actualBoundingBoxDescent))) + p) : (r = i = this.size, n = s = this.size, a = 0, o = l = 0), i && s && (this.ctx.clearRect(l, o, i, s), this.ctx.fillText(t, this.buffer, this.middle), u = this.ctx.getImageData(l, o, i, s));\n      var d = new Uint8ClampedArray(r * n);\n      return function (t, e, r, i, n, s, a) {\n        s.fill(rc, 0, e * r), a.fill(0, 0, e * r);\n\n        for (var o = (e - i) / 2, l = 0; l < n; l++) {\n          for (var u = 0; u < i; u++) {\n            var c = (l + o) * e + u + o,\n                h = t.data[4 * (l * i + u) + 3] / 255;\n            if (1 === h) s[c] = 0, a[c] = rc;else if (0 === h) s[c] = rc, a[c] = 0;else {\n              var p = Math.max(0, .5 - h),\n                  d = Math.max(0, h - .5);\n              s[c] = p * p, a[c] = d * d;\n            }\n          }\n        }\n      }(u, r, n, i, s, this.gridOuter, this.gridInner), nc(this.gridOuter, r, n, this.f, this.v, this.z), nc(this.gridInner, r, n, this.f, this.v, this.z), function (t, e, r, i, n, s, a) {\n        for (var o = 0; o < e * r; o++) {\n          var l = Math.sqrt(i[o]) - Math.sqrt(n[o]);\n          t[o] = Math.round(255 - 255 * (l / s + a));\n        }\n      }(d, r, n, this.gridOuter, this.gridInner, this.radius, this.cutoff), {\n        data: d,\n        metrics: {\n          width: i,\n          height: s,\n          sdfWidth: r,\n          sdfHeight: n,\n          top: a,\n          left: 0,\n          advance: h,\n          fontAscent: c.fontBoundingBoxAscent\n        }\n      };\n    }, ic.prototype.draw = function (t) {\n      return this._draw(t, !1).data;\n    }, ic.prototype.drawWithMetrics = function (t) {\n      return this._draw(t, !0);\n    }, tc.default = ec;\n    var ac = {\n      none: 0,\n      ideographs: 1,\n      all: 2\n    };\n\n    var oc = /*#__PURE__*/function () {\n      function oc(t, e, r) {\n        _classCallCheck(this, oc);\n\n        this.requestManager = t, this.localGlyphMode = e, this.localFontFamily = r, this.entries = {}, this.localGlyphs = {\n          200: {},\n          400: {},\n          500: {},\n          900: {}\n        };\n      }\n\n      _createClass(oc, [{\n        key: \"setURL\",\n        value: function setURL(t) {\n          this.url = t;\n        }\n      }, {\n        key: \"getGlyphs\",\n        value: function getGlyphs(t, e) {\n          var _this21 = this;\n\n          var r = [];\n\n          for (var _e111 in t) {\n            var _iterator86 = _createForOfIteratorHelper(t[_e111]),\n                _step86;\n\n            try {\n              for (_iterator86.s(); !(_step86 = _iterator86.n()).done;) {\n                var _i97 = _step86.value;\n                r.push({\n                  stack: _e111,\n                  id: _i97\n                });\n              }\n            } catch (err) {\n              _iterator86.e(err);\n            } finally {\n              _iterator86.f();\n            }\n          }\n\n          m(r, function (_ref152, r) {\n            var t = _ref152.stack,\n                e = _ref152.id;\n            var i = _this21.entries[t];\n            i || (i = _this21.entries[t] = {\n              glyphs: {},\n              requests: {},\n              ranges: {}\n            });\n            var n = i.glyphs[e];\n            if (void 0 !== n) return void r(null, {\n              stack: t,\n              id: e,\n              glyph: n\n            });\n            if (n = _this21._tinySDF(i, t, e), n) return i.glyphs[e] = n, void r(null, {\n              stack: t,\n              id: e,\n              glyph: n\n            });\n            var s = Math.floor(e / 256);\n            if (256 * s > 65535) return void r(new Error(\"glyphs > 65535 not supported\"));\n            if (i.ranges[s]) return void r(null, {\n              stack: t,\n              id: e,\n              glyph: n\n            });\n            var a = i.requests[s];\n            a || (a = i.requests[s] = [], oc.loadGlyphRange(t, s, _this21.url, _this21.requestManager, function (t, e) {\n              if (e) {\n                for (var _t117 in e) {\n                  _this21._doesCharSupportLocalGlyph(+_t117) || (i.glyphs[+_t117] = e[+_t117]);\n                }\n\n                i.ranges[s] = !0;\n              }\n\n              var _iterator87 = _createForOfIteratorHelper(a),\n                  _step87;\n\n              try {\n                for (_iterator87.s(); !(_step87 = _iterator87.n()).done;) {\n                  var _r123 = _step87.value;\n\n                  _r123(t, e);\n                }\n              } catch (err) {\n                _iterator87.e(err);\n              } finally {\n                _iterator87.f();\n              }\n\n              delete i.requests[s];\n            })), a.push(function (i, n) {\n              i ? r(i) : n && r(null, {\n                stack: t,\n                id: e,\n                glyph: n[e] || null\n              });\n            });\n          }, function (t, r) {\n            if (t) e(t);else if (r) {\n              var _t118 = {};\n\n              var _iterator88 = _createForOfIteratorHelper(r),\n                  _step88;\n\n              try {\n                for (_iterator88.s(); !(_step88 = _iterator88.n()).done;) {\n                  var _ref154 = _step88.value;\n                  var _e112 = _ref154.stack;\n                  var _i98 = _ref154.id;\n                  var _n71 = _ref154.glyph;\n                  (_t118[_e112] || (_t118[_e112] = {}))[_i98] = _n71 && {\n                    id: _n71.id,\n                    bitmap: _n71.bitmap.clone(),\n                    metrics: _n71.metrics\n                  };\n                }\n              } catch (err) {\n                _iterator88.e(err);\n              } finally {\n                _iterator88.f();\n              }\n\n              e(null, _t118);\n            }\n          });\n        }\n      }, {\n        key: \"_doesCharSupportLocalGlyph\",\n        value: function _doesCharSupportLocalGlyph(t) {\n          return this.localGlyphMode !== ac.none && (this.localGlyphMode === ac.all ? !!this.localFontFamily : !!this.localFontFamily && (fn(t) || gn(t) || sn(t) || an(t)));\n        }\n      }, {\n        key: \"_tinySDF\",\n        value: function _tinySDF(t, e, r) {\n          var i = this.localFontFamily;\n          if (!i) return;\n          if (!this._doesCharSupportLocalGlyph(r)) return;\n          var n = t.tinySDF;\n\n          if (!n) {\n            var _r124 = \"400\";\n            /bold/i.test(e) ? _r124 = \"900\" : /medium/i.test(e) ? _r124 = \"500\" : /light/i.test(e) && (_r124 = \"200\"), n = t.tinySDF = new oc.TinySDF(48, 6, 16, .25, i, _r124);\n          }\n\n          if (this.localGlyphs[n.fontWeight][r]) return this.localGlyphs[n.fontWeight][r];\n\n          var _n$drawWithMetrics = n.drawWithMetrics(String.fromCharCode(r)),\n              s = _n$drawWithMetrics.data,\n              a = _n$drawWithMetrics.metrics,\n              o = a.fontAscent,\n              l = a.sdfWidth,\n              u = a.sdfHeight,\n              c = a.width,\n              h = a.height,\n              p = a.left,\n              d = a.top,\n              f = a.advance,\n              y = (o ? o / 2 : 17) - 9;\n\n          return this.localGlyphs[n.fontWeight][r] = {\n            id: r,\n            bitmap: new _o({\n              width: l,\n              height: u\n            }, s),\n            metrics: {\n              width: c / 2,\n              height: h / 2,\n              left: p / 2,\n              top: d / 2 - y,\n              advance: f / 2,\n              localGlyph: !0\n            }\n          };\n        }\n      }]);\n\n      return oc;\n    }();\n\n    function lc(t, e, r, n) {\n      var s = [],\n          a = t.image,\n          o = a.pixelRatio,\n          l = a.paddedRect.w - 2,\n          u = a.paddedRect.h - 2,\n          c = t.right - t.left,\n          h = t.bottom - t.top,\n          p = a.stretchX || [[0, l]],\n          d = a.stretchY || [[0, u]],\n          f = function f(t, e) {\n        return t + e[1] - e[0];\n      },\n          y = p.reduce(f, 0),\n          m = d.reduce(f, 0),\n          g = l - y,\n          x = u - m;\n\n      var v = 0,\n          b = y,\n          w = 0,\n          _ = m,\n          k = 0,\n          A = g,\n          S = 0,\n          I = x;\n\n      if (a.content && n) {\n        var _t119 = a.content;\n        v = uc(p, 0, _t119[0]), w = uc(d, 0, _t119[1]), b = uc(p, _t119[0], _t119[2]), _ = uc(d, _t119[1], _t119[3]), k = _t119[0] - v, S = _t119[1] - w, A = _t119[2] - _t119[0] - b, I = _t119[3] - _t119[1] - _;\n      }\n\n      var T = function T(n, s, l, u) {\n        var p = hc(n.stretch - v, b, c, t.left),\n            d = pc(n.fixed - k, A, n.stretch, y),\n            f = hc(s.stretch - w, _, h, t.top),\n            g = pc(s.fixed - S, I, s.stretch, m),\n            x = hc(l.stretch - v, b, c, t.left),\n            T = pc(l.fixed - k, A, l.stretch, y),\n            z = hc(u.stretch - w, _, h, t.top),\n            E = pc(u.fixed - S, I, u.stretch, m),\n            M = new i(p, f),\n            B = new i(x, f),\n            D = new i(x, z),\n            C = new i(p, z),\n            P = new i(d / o, g / o),\n            V = new i(T / o, E / o),\n            F = e * Math.PI / 180;\n\n        if (F) {\n          var _t120 = Math.sin(F),\n              _e113 = Math.cos(F),\n              _r125 = [_e113, -_t120, _t120, _e113];\n\n          M._matMult(_r125), B._matMult(_r125), C._matMult(_r125), D._matMult(_r125);\n        }\n\n        var R = n.stretch + n.fixed,\n            L = s.stretch + s.fixed;\n        return {\n          tl: M,\n          tr: B,\n          bl: C,\n          br: D,\n          tex: {\n            x: a.paddedRect.x + 1 + R,\n            y: a.paddedRect.y + 1 + L,\n            w: l.stretch + l.fixed - R,\n            h: u.stretch + u.fixed - L\n          },\n          writingMode: void 0,\n          glyphOffset: [0, 0],\n          sectionIndex: 0,\n          pixelOffsetTL: P,\n          pixelOffsetBR: V,\n          minFontScaleX: A / o / c,\n          minFontScaleY: I / o / h,\n          isSDF: r\n        };\n      };\n\n      if (n && (a.stretchX || a.stretchY)) {\n        var _t121 = cc(p, g, y),\n            _e114 = cc(d, x, m);\n\n        for (var _r126 = 0; _r126 < _t121.length - 1; _r126++) {\n          var _i99 = _t121[_r126],\n              _n72 = _t121[_r126 + 1];\n\n          for (var _t122 = 0; _t122 < _e114.length - 1; _t122++) {\n            s.push(T(_i99, _e114[_t122], _n72, _e114[_t122 + 1]));\n          }\n        }\n      } else s.push(T({\n        fixed: 0,\n        stretch: -1\n      }, {\n        fixed: 0,\n        stretch: -1\n      }, {\n        fixed: 0,\n        stretch: l + 1\n      }, {\n        fixed: 0,\n        stretch: u + 1\n      }));\n\n      return s;\n    }\n\n    function uc(t, e, r) {\n      var i = 0;\n\n      var _iterator89 = _createForOfIteratorHelper(t),\n          _step89;\n\n      try {\n        for (_iterator89.s(); !(_step89 = _iterator89.n()).done;) {\n          var _n73 = _step89.value;\n          i += Math.max(e, Math.min(r, _n73[1])) - Math.max(e, Math.min(r, _n73[0]));\n        }\n      } catch (err) {\n        _iterator89.e(err);\n      } finally {\n        _iterator89.f();\n      }\n\n      return i;\n    }\n\n    function cc(t, e, r) {\n      var i = [{\n        fixed: -1,\n        stretch: 0\n      }];\n\n      var _iterator90 = _createForOfIteratorHelper(t),\n          _step90;\n\n      try {\n        for (_iterator90.s(); !(_step90 = _iterator90.n()).done;) {\n          var _ref157 = _step90.value;\n\n          var _ref156 = _slicedToArray(_ref157, 2);\n\n          var _e115 = _ref156[0];\n          var _r127 = _ref156[1];\n          var _t123 = i[i.length - 1];\n          i.push({\n            fixed: _e115 - _t123.stretch,\n            stretch: _t123.stretch\n          }), i.push({\n            fixed: _e115 - _t123.stretch,\n            stretch: _t123.stretch + (_r127 - _e115)\n          });\n        }\n      } catch (err) {\n        _iterator90.e(err);\n      } finally {\n        _iterator90.f();\n      }\n\n      return i.push({\n        fixed: e + 1,\n        stretch: r\n      }), i;\n    }\n\n    function hc(t, e, r, i) {\n      return t / e * r + i;\n    }\n\n    function pc(t, e, r, i) {\n      return t - e * r / i;\n    }\n\n    oc.loadGlyphRange = function (t, e, r, i, n) {\n      var s = 256 * e,\n          a = s + 255,\n          o = i.transformRequest(i.normalizeGlyphsURL(r).replace(\"{fontstack}\", t).replace(\"{range}\", \"\".concat(s, \"-\").concat(a)), vt.Glyphs);\n      kt(o, function (t, e) {\n        if (t) n(t);else if (e) {\n          var _t124 = {};\n\n          var _iterator91 = _createForOfIteratorHelper(function (t) {\n            return new ou(t).readFields(Su, []);\n          }(e)),\n              _step91;\n\n          try {\n            for (_iterator91.s(); !(_step91 = _iterator91.n()).done;) {\n              var _r128 = _step91.value;\n              _t124[_r128.id] = _r128;\n            }\n          } catch (err) {\n            _iterator91.e(err);\n          } finally {\n            _iterator91.f();\n          }\n\n          n(null, _t124);\n        }\n      });\n    }, oc.TinySDF = tc;\n\n    var dc = /*#__PURE__*/function () {\n      function dc() {\n        var t = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n        var e = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : fc;\n\n        _classCallCheck(this, dc);\n\n        if (this.data = t, this.length = this.data.length, this.compare = e, this.length > 0) for (var _t125 = (this.length >> 1) - 1; _t125 >= 0; _t125--) {\n          this._down(_t125);\n        }\n      }\n\n      _createClass(dc, [{\n        key: \"push\",\n        value: function push(t) {\n          this.data.push(t), this.length++, this._up(this.length - 1);\n        }\n      }, {\n        key: \"pop\",\n        value: function pop() {\n          if (0 === this.length) return;\n          var t = this.data[0],\n              e = this.data.pop();\n          return this.length--, this.length > 0 && (this.data[0] = e, this._down(0)), t;\n        }\n      }, {\n        key: \"peek\",\n        value: function peek() {\n          return this.data[0];\n        }\n      }, {\n        key: \"_up\",\n        value: function _up(t) {\n          var e = this.data,\n              r = this.compare,\n              i = e[t];\n\n          for (; t > 0;) {\n            var _n74 = t - 1 >> 1,\n                _s58 = e[_n74];\n\n            if (r(i, _s58) >= 0) break;\n            e[t] = _s58, t = _n74;\n          }\n\n          e[t] = i;\n        }\n      }, {\n        key: \"_down\",\n        value: function _down(t) {\n          var e = this.data,\n              r = this.compare,\n              i = this.length >> 1,\n              n = e[t];\n\n          for (; t < i;) {\n            var _i100 = 1 + (t << 1),\n                _s59 = e[_i100];\n\n            var _a52 = _i100 + 1;\n\n            if (_a52 < this.length && r(e[_a52], _s59) < 0 && (_i100 = _a52, _s59 = e[_a52]), r(_s59, n) >= 0) break;\n            e[t] = _s59, t = _i100;\n          }\n\n          e[t] = n;\n        }\n      }]);\n\n      return dc;\n    }();\n\n    function fc(t, e) {\n      return t < e ? -1 : t > e ? 1 : 0;\n    }\n\n    function yc(t) {\n      var e = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 1;\n      var r = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : !1;\n      var n = 1 / 0,\n          s = 1 / 0,\n          a = -1 / 0,\n          o = -1 / 0;\n      var l = t[0];\n\n      for (var _t126 = 0; _t126 < l.length; _t126++) {\n        var _e116 = l[_t126];\n        (!_t126 || _e116.x < n) && (n = _e116.x), (!_t126 || _e116.y < s) && (s = _e116.y), (!_t126 || _e116.x > a) && (a = _e116.x), (!_t126 || _e116.y > o) && (o = _e116.y);\n      }\n\n      var u = Math.min(a - n, o - s);\n      var c = u / 2;\n      var h = new dc([], mc);\n      if (0 === u) return new i(n, s);\n\n      for (var _e117 = n; _e117 < a; _e117 += u) {\n        for (var _r129 = s; _r129 < o; _r129 += u) {\n          h.push(new gc(_e117 + c, _r129 + c, c, t));\n        }\n      }\n\n      var p = function (t) {\n        var e = 0,\n            r = 0,\n            i = 0;\n        var n = t[0];\n\n        for (var _t127 = 0, _s60 = n.length, _a53 = _s60 - 1; _t127 < _s60; _a53 = _t127++) {\n          var _s61 = n[_t127],\n              _o30 = n[_a53],\n              _l23 = _s61.x * _o30.y - _o30.x * _s61.y;\n\n          r += (_s61.x + _o30.x) * _l23, i += (_s61.y + _o30.y) * _l23, e += 3 * _l23;\n        }\n\n        return new gc(r / e, i / e, 0, t);\n      }(t),\n          d = h.length;\n\n      for (; h.length;) {\n        var _i101 = h.pop();\n\n        (_i101.d > p.d || !p.d) && (p = _i101, r && console.log(\"found best %d after %d probes\", Math.round(1e4 * _i101.d) / 1e4, d)), _i101.max - p.d <= e || (c = _i101.h / 2, h.push(new gc(_i101.p.x - c, _i101.p.y - c, c, t)), h.push(new gc(_i101.p.x + c, _i101.p.y - c, c, t)), h.push(new gc(_i101.p.x - c, _i101.p.y + c, c, t)), h.push(new gc(_i101.p.x + c, _i101.p.y + c, c, t)), d += 4);\n      }\n\n      return r && (console.log(\"num probes: \".concat(d)), console.log(\"best distance: \".concat(p.d))), p.p;\n    }\n\n    function mc(t, e) {\n      return e.max - t.max;\n    }\n\n    function gc(t, e, r, n) {\n      this.p = new i(t, e), this.h = r, this.d = function (t, e) {\n        var r = !1,\n            i = 1 / 0;\n\n        for (var _n75 = 0; _n75 < e.length; _n75++) {\n          var _s62 = e[_n75];\n\n          for (var _e118 = 0, _n76 = _s62.length, _a54 = _n76 - 1; _e118 < _n76; _a54 = _e118++) {\n            var _n77 = _s62[_e118],\n                _o31 = _s62[_a54];\n            _n77.y > t.y != _o31.y > t.y && t.x < (_o31.x - _n77.x) * (t.y - _n77.y) / (_o31.y - _n77.y) + _n77.x && (r = !r), i = Math.min(i, Ea(t, _n77, _o31));\n          }\n        }\n\n        return (r ? 1 : -1) * Math.sqrt(i);\n      }(this.p, n), this.max = this.d + this.h * Math.SQRT2;\n    }\n\n    var xc = Number.POSITIVE_INFINITY;\n\n    function vc(t, e) {\n      return e[1] !== xc ? function (t, e, r) {\n        var i = 0,\n            n = 0;\n\n        switch (e = Math.abs(e), r = Math.abs(r), t) {\n          case \"top-right\":\n          case \"top-left\":\n          case \"top\":\n            n = r - 7;\n            break;\n\n          case \"bottom-right\":\n          case \"bottom-left\":\n          case \"bottom\":\n            n = 7 - r;\n        }\n\n        switch (t) {\n          case \"top-right\":\n          case \"bottom-right\":\n          case \"right\":\n            i = -e;\n            break;\n\n          case \"top-left\":\n          case \"bottom-left\":\n          case \"left\":\n            i = e;\n        }\n\n        return [i, n];\n      }(t, e[0], e[1]) : function (t, e) {\n        var r = 0,\n            i = 0;\n        e < 0 && (e = 0);\n        var n = e / Math.sqrt(2);\n\n        switch (t) {\n          case \"top-right\":\n          case \"top-left\":\n            i = n - 7;\n            break;\n\n          case \"bottom-right\":\n          case \"bottom-left\":\n            i = 7 - n;\n            break;\n\n          case \"bottom\":\n            i = 7 - e;\n            break;\n\n          case \"top\":\n            i = e - 7;\n        }\n\n        switch (t) {\n          case \"top-right\":\n          case \"bottom-right\":\n            r = -n;\n            break;\n\n          case \"top-left\":\n          case \"bottom-left\":\n            r = n;\n            break;\n\n          case \"left\":\n            r = e;\n            break;\n\n          case \"right\":\n            r = -e;\n        }\n\n        return [r, i];\n      }(t, e[0]);\n    }\n\n    function bc(t, e, r, i, n, s, a, o) {\n      t.createArrays(), t.tilePixelRatio = 8192 / (512 * t.overscaling), t.compareText = {}, t.iconsNeedLinear = !1;\n      var l = t.layers[0].layout,\n          u = t.layers[0]._unevaluatedLayout._values,\n          c = {};\n\n      if (\"composite\" === t.textSizeData.kind) {\n        var _t$textSizeData = t.textSizeData,\n            _e119 = _t$textSizeData.minZoom,\n            _r130 = _t$textSizeData.maxZoom;\n        c.compositeTextSizes = [u[\"text-size\"].possiblyEvaluate(new qn(_e119), a), u[\"text-size\"].possiblyEvaluate(new qn(_r130), a)];\n      }\n\n      if (\"composite\" === t.iconSizeData.kind) {\n        var _t$iconSizeData = t.iconSizeData,\n            _e120 = _t$iconSizeData.minZoom,\n            _r131 = _t$iconSizeData.maxZoom;\n        c.compositeIconSizes = [u[\"icon-size\"].possiblyEvaluate(new qn(_e120), a), u[\"icon-size\"].possiblyEvaluate(new qn(_r131), a)];\n      }\n\n      c.layoutTextSize = u[\"text-size\"].possiblyEvaluate(new qn(o + 1), a), c.layoutIconSize = u[\"icon-size\"].possiblyEvaluate(new qn(o + 1), a), c.textMaxSize = u[\"text-size\"].possiblyEvaluate(new qn(18), a);\n      var h = 24 * l.get(\"text-line-height\"),\n          p = \"map\" === l.get(\"text-rotation-alignment\") && \"point\" !== l.get(\"symbol-placement\"),\n          d = l.get(\"text-keep-upright\"),\n          f = l.get(\"text-size\");\n\n      var _iterator92 = _createForOfIteratorHelper(t.features),\n          _step92;\n\n      try {\n        var _loop2 = function _loop2() {\n          var s = _step92.value;\n          var o = l.get(\"text-font\").evaluate(s, {}, a).join(\",\"),\n              u = f.evaluate(s, {}, a),\n              y = c.layoutTextSize.evaluate(s, {}, a),\n              m = (c.layoutIconSize.evaluate(s, {}, a), {\n            horizontal: {},\n            vertical: void 0\n          }),\n              g = s.text;\n          var x = void 0,\n              v = [0, 0];\n\n          if (g) {\n            var _i102 = g.toString(),\n                _c12 = 24 * l.get(\"text-letter-spacing\").evaluate(s, {}, a),\n                _f3 = In(_i102) ? _c12 : 0,\n                _x4 = l.get(\"text-anchor\").evaluate(s, {}, a),\n                _b3 = l.get(\"text-variable-anchor\");\n\n            if (!_b3) {\n              var _t128 = l.get(\"text-radial-offset\").evaluate(s, {}, a);\n\n              v = _t128 ? vc(_x4, [24 * _t128, xc]) : l.get(\"text-offset\").evaluate(s, {}, a).map(function (t) {\n                return 24 * t;\n              });\n            }\n\n            var _w3 = p ? \"center\" : l.get(\"text-justify\").evaluate(s, {}, a);\n\n            var _5 = l.get(\"symbol-placement\"),\n                _k3 = \"point\" === _5 ? 24 * l.get(\"text-max-width\").evaluate(s, {}, a) : 0,\n                _A3 = function _A3() {\n              t.allowVerticalPlacement && Sn(_i102) && (m.vertical = Pu(g, e, r, n, o, _k3, h, _x4, \"left\", _f3, v, Bu.vertical, !0, _5, y, u));\n            };\n\n            if (!p && _b3) {\n              var _t129 = \"auto\" === _w3 ? _b3.map(function (t) {\n                return wc(t);\n              }) : [_w3];\n\n              var _i103 = !1;\n\n              for (var _s63 = 0; _s63 < _t129.length; _s63++) {\n                var _a55 = _t129[_s63];\n                if (!m.horizontal[_a55]) if (_i103) m.horizontal[_a55] = m.horizontal[0];else {\n                  var _t130 = Pu(g, e, r, n, o, _k3, h, \"center\", _a55, _f3, v, Bu.horizontal, !1, _5, y, u);\n\n                  _t130 && (m.horizontal[_a55] = _t130, _i103 = 1 === _t130.positionedLines.length);\n                }\n              }\n\n              _A3();\n            } else {\n              \"auto\" === _w3 && (_w3 = wc(_x4));\n\n              var _t131 = Pu(g, e, r, n, o, _k3, h, _x4, _w3, _f3, v, Bu.horizontal, !1, _5, y, u);\n\n              _t131 && (m.horizontal[_w3] = _t131), _A3(), Sn(_i102) && p && d && (m.vertical = Pu(g, e, r, n, o, _k3, h, _x4, _w3, _f3, v, Bu.vertical, !1, _5, y, u));\n            }\n          }\n\n          var b = !1;\n\n          if (s.icon && s.icon.name) {\n            var _e121 = i[s.icon.name];\n            _e121 && (x = ju(n[s.icon.name], l.get(\"icon-offset\").evaluate(s, {}, a), l.get(\"icon-anchor\").evaluate(s, {}, a)), b = _e121.sdf, void 0 === t.sdfIcons ? t.sdfIcons = _e121.sdf : t.sdfIcons !== _e121.sdf && E(\"Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer\"), (_e121.pixelRatio !== t.pixelRatio || 0 !== l.get(\"icon-rotate\").constantOr(1)) && (t.iconsNeedLinear = !0));\n          }\n\n          var w = Ac(m.horizontal) || m.vertical;\n          t.iconsInText = !!w && w.iconsInText, (w || x) && _c(t, s, m, x, i, c, y, 0, v, b, a);\n        };\n\n        for (_iterator92.s(); !(_step92 = _iterator92.n()).done;) {\n          _loop2();\n        }\n      } catch (err) {\n        _iterator92.e(err);\n      } finally {\n        _iterator92.f();\n      }\n\n      s && t.generateCollisionDebugBuffers(o, t.collisionBoxArray);\n    }\n\n    function wc(t) {\n      switch (t) {\n        case \"right\":\n        case \"top-right\":\n        case \"bottom-right\":\n          return \"right\";\n\n        case \"left\":\n        case \"top-left\":\n        case \"bottom-left\":\n          return \"left\";\n      }\n\n      return \"center\";\n    }\n\n    function _c(t, e, r, i, n, s, a, o, l, u, h) {\n      var p = s.textMaxSize.evaluate(e, {}, h);\n      void 0 === p && (p = a);\n\n      var d = t.layers[0].layout,\n          f = d.get(\"icon-offset\").evaluate(e, {}, h),\n          y = Ac(r.horizontal),\n          m = a / 24,\n          g = t.tilePixelRatio * m,\n          x = t.tilePixelRatio * p / 24,\n          v = t.tilePixelRatio * d.get(\"symbol-spacing\"),\n          b = d.get(\"text-padding\") * t.tilePixelRatio,\n          w = d.get(\"icon-padding\") * t.tilePixelRatio,\n          _ = c(d.get(\"text-max-angle\")),\n          k = \"map\" === d.get(\"text-rotation-alignment\") && \"point\" !== d.get(\"symbol-placement\"),\n          A = \"map\" === d.get(\"icon-rotation-alignment\") && \"point\" !== d.get(\"symbol-placement\"),\n          S = d.get(\"symbol-placement\"),\n          I = v / 2,\n          T = d.get(\"icon-text-fit\");\n\n      var z;\n      i && \"none\" !== T && (t.allowVerticalPlacement && r.vertical && (z = Gu(i, r.vertical, T, d.get(\"icon-text-fit-padding\"), f, m)), y && (i = Gu(i, y, T, d.get(\"icon-text-fit-padding\"), f, m)));\n\n      var M = function M(o, c) {\n        c.x < 0 || c.x >= 8192 || c.y < 0 || c.y >= 8192 || function (t, e, r, i, n, s, a, o, l, u, c, h, p, d, f, y, m, g, x, v, b, w, _, k, A) {\n          var _o$layout$get$evaluat, _o$layout$get$evaluat2;\n\n          var S = t.addToLineVertexArray(e, r);\n          var I,\n              T,\n              z,\n              M,\n              B,\n              D,\n              C,\n              P = 0,\n              V = 0,\n              F = 0,\n              R = 0,\n              L = -1,\n              U = -1;\n          var O = {};\n          var $ = Gs(\"\"),\n              q = 0,\n              N = 0;\n\n          if (void 0 === o._unevaluatedLayout.getValue(\"text-radial-offset\") ? (_o$layout$get$evaluat = o.layout.get(\"text-offset\").evaluate(b, {}, k).map(function (t) {\n            return 24 * t;\n          }), _o$layout$get$evaluat2 = _slicedToArray(_o$layout$get$evaluat, 2), q = _o$layout$get$evaluat2[0], N = _o$layout$get$evaluat2[1], _o$layout$get$evaluat) : (q = 24 * o.layout.get(\"text-radial-offset\").evaluate(b, {}, k), N = xc), t.allowVerticalPlacement && i.vertical) {\n            var _t132 = i.vertical;\n            if (f) D = Ic(_t132), a && (C = Ic(a));else {\n              var _r132 = o.layout.get(\"text-rotate\").evaluate(b, {}, k) + 90;\n\n              z = Sc(l, e, u, c, h, _t132, 0, d, _r132), a && (M = Sc(l, e, u, c, h, a, 0, g, _r132));\n            }\n          }\n\n          if (n) {\n            var _r133 = o.layout.get(\"icon-rotate\").evaluate(b, {}, k),\n                _i104 = \"none\" !== o.layout.get(\"icon-text-fit\"),\n                _s64 = lc(n, _r133, _, _i104),\n                _p5 = a ? lc(a, _r133, _, _i104) : void 0;\n\n            T = Sc(l, e, u, c, h, n, 0, g, _r133), P = 4 * _s64.length;\n            var _d4 = t.iconSizeData;\n            var _f4 = null;\n            \"source\" === _d4.kind ? (_f4 = [128 * o.layout.get(\"icon-size\").evaluate(b, {}, k)], _f4[0] > 32640 && E(\"\".concat(t.layerIds[0], \": Value for \\\"icon-size\\\" is >= 255. Reduce your \\\"icon-size\\\".\"))) : \"composite\" === _d4.kind && (_f4 = [128 * w.compositeIconSizes[0].evaluate(b, {}, k), 128 * w.compositeIconSizes[1].evaluate(b, {}, k)], (_f4[0] > 32640 || _f4[1] > 32640) && E(\"\".concat(t.layerIds[0], \": Value for \\\"icon-size\\\" is >= 255. Reduce your \\\"icon-size\\\".\"))), t.addSymbols(t.icon, _s64, _f4, v, x, b, !1, e, S.lineStartIndex, S.lineLength, -1, k), L = t.icon.placedSymbolArray.length - 1, _p5 && (V = 4 * _p5.length, t.addSymbols(t.icon, _p5, _f4, v, x, b, Bu.vertical, e, S.lineStartIndex, S.lineLength, -1, k), U = t.icon.placedSymbolArray.length - 1);\n          }\n\n          for (var _r134 in i.horizontal) {\n            var _n78 = i.horizontal[_r134];\n            I || ($ = Gs(_n78.text), f ? B = Ic(_n78) : I = Sc(l, e, u, c, h, _n78, 0, d, o.layout.get(\"text-rotate\").evaluate(b, {}, k)));\n\n            var _a56 = 1 === _n78.positionedLines.length;\n\n            if (F += kc(t, e, _n78, s, o, f, b, y, S, i.vertical ? Bu.horizontal : Bu.horizontalOnly, _a56 ? Object.keys(i.horizontal) : [_r134], O, L, w, k), _a56) break;\n          }\n\n          i.vertical && (R += kc(t, e, i.vertical, s, o, f, b, y, S, Bu.vertical, [\"vertical\"], O, U, w, k));\n          var j = -1;\n\n          var G = function G(t, e) {\n            return t ? Math.max(t, e) : e;\n          };\n\n          j = G(B, j), j = G(D, j), j = G(C, j);\n          var Z = j > -1 ? 1 : 0;\n          Z && (j *= A / 24), t.glyphOffsetArray.length >= Vc.MAX_GLYPHS && E(\"Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907\"), void 0 !== b.sortKey && t.addToSortKeyRanges(t.symbolInstances.length, b.sortKey), t.symbolInstances.emplaceBack(e.x, e.y, O.right >= 0 ? O.right : -1, O.center >= 0 ? O.center : -1, O.left >= 0 ? O.left : -1, O.vertical || -1, L, U, $, void 0 !== I ? I : t.collisionBoxArray.length, void 0 !== I ? I + 1 : t.collisionBoxArray.length, void 0 !== z ? z : t.collisionBoxArray.length, void 0 !== z ? z + 1 : t.collisionBoxArray.length, void 0 !== T ? T : t.collisionBoxArray.length, void 0 !== T ? T + 1 : t.collisionBoxArray.length, M || t.collisionBoxArray.length, M ? M + 1 : t.collisionBoxArray.length, u, F, R, P, V, Z, 0, p, q, N, j);\n        }(t, c, o, r, i, n, z, t.layers[0], t.collisionBoxArray, e.index, e.sourceLayerIndex, t.index, g, b, k, l, 0, w, A, f, e, s, u, h, a);\n      };\n\n      if (\"line\" === S) {\n        var _iterator93 = _createForOfIteratorHelper(Qu(e.geometry, 0, 0, 8192, 8192)),\n            _step93;\n\n        try {\n          for (_iterator93.s(); !(_step93 = _iterator93.n()).done;) {\n            var _n79 = _step93.value;\n\n            var _e122 = Ju(_n79, v, _, r.vertical || y, i, 24, x, t.overscaling, 8192);\n\n            var _iterator94 = _createForOfIteratorHelper(_e122),\n                _step94;\n\n            try {\n              for (_iterator94.s(); !(_step94 = _iterator94.n()).done;) {\n                var _r135 = _step94.value;\n                var _e123 = y;\n                _e123 && Tc(t, _e123.text, I, _r135) || M(_n79, _r135);\n              }\n            } catch (err) {\n              _iterator94.e(err);\n            } finally {\n              _iterator94.f();\n            }\n          }\n        } catch (err) {\n          _iterator93.e(err);\n        } finally {\n          _iterator93.f();\n        }\n      } else if (\"line-center\" === S) {\n        var _iterator95 = _createForOfIteratorHelper(e.geometry),\n            _step95;\n\n        try {\n          for (_iterator95.s(); !(_step95 = _iterator95.n()).done;) {\n            var _t133 = _step95.value;\n\n            if (_t133.length > 1) {\n              var _e124 = Wu(_t133, _, r.vertical || y, i, 24, x);\n\n              _e124 && M(_t133, _e124);\n            }\n          }\n        } catch (err) {\n          _iterator95.e(err);\n        } finally {\n          _iterator95.f();\n        }\n      } else if (\"Polygon\" === e.type) {\n        var _iterator96 = _createForOfIteratorHelper(al(e.geometry, 0)),\n            _step96;\n\n        try {\n          for (_iterator96.s(); !(_step96 = _iterator96.n()).done;) {\n            var _t134 = _step96.value;\n\n            var _e125 = yc(_t134, 16);\n\n            M(_t134[0], new Zu(_e125.x, _e125.y, 0));\n          }\n        } catch (err) {\n          _iterator96.e(err);\n        } finally {\n          _iterator96.f();\n        }\n      } else if (\"LineString\" === e.type) {\n        var _iterator97 = _createForOfIteratorHelper(e.geometry),\n            _step97;\n\n        try {\n          for (_iterator97.s(); !(_step97 = _iterator97.n()).done;) {\n            var _t135 = _step97.value;\n            M(_t135, new Zu(_t135[0].x, _t135[0].y, 0));\n          }\n        } catch (err) {\n          _iterator97.e(err);\n        } finally {\n          _iterator97.f();\n        }\n      } else if (\"Point\" === e.type) {\n        var _iterator98 = _createForOfIteratorHelper(e.geometry),\n            _step98;\n\n        try {\n          for (_iterator98.s(); !(_step98 = _iterator98.n()).done;) {\n            var _t136 = _step98.value;\n\n            var _iterator99 = _createForOfIteratorHelper(_t136),\n                _step99;\n\n            try {\n              for (_iterator99.s(); !(_step99 = _iterator99.n()).done;) {\n                var _e126 = _step99.value;\n                M([_e126], new Zu(_e126.x, _e126.y, 0));\n              }\n            } catch (err) {\n              _iterator99.e(err);\n            } finally {\n              _iterator99.f();\n            }\n          }\n        } catch (err) {\n          _iterator98.e(err);\n        } finally {\n          _iterator98.f();\n        }\n      }\n    }\n\n    function kc(t, e, r, n, s, a, o, l, u, c, h, p, d, f, y) {\n      var m = function (t, e, r, n, s, a, o, l) {\n        var u = n.layout.get(\"text-rotate\").evaluate(a, {}) * Math.PI / 180,\n            c = [];\n\n        var _iterator100 = _createForOfIteratorHelper(e.positionedLines),\n            _step100;\n\n        try {\n          for (_iterator100.s(); !(_step100 = _iterator100.n()).done;) {\n            var _t137 = _step100.value;\n\n            var _iterator101 = _createForOfIteratorHelper(_t137.positionedGlyphs),\n                _step101;\n\n            try {\n              for (_iterator101.s(); !(_step101 = _iterator101.n()).done;) {\n                var _n80 = _step101.value;\n                if (!_n80.rect) continue;\n\n                var _a57 = _n80.rect || {};\n\n                var _h6 = 4,\n                    _p6 = !0,\n                    _d5 = 1,\n                    _f5 = 0;\n\n                var _y4 = (s || l) && _n80.vertical,\n                    _m5 = _n80.metrics.advance * _n80.scale / 2;\n\n                if (l && e.verticalizable) {\n                  var _e127 = 24 * (_n80.scale - 1),\n                      _r136 = (24 - _n80.metrics.width * _n80.scale) / 2;\n\n                  _f5 = _t137.lineOffset / 2 - (_n80.imageName ? -_r136 : _e127);\n                }\n\n                if (_n80.imageName) {\n                  var _t138 = o[_n80.imageName];\n                  _p6 = _t138.sdf, _d5 = _t138.pixelRatio, _h6 = 1 / _d5;\n                }\n\n                var _g5 = s ? [_n80.x + _m5, _n80.y] : [0, 0];\n\n                var _x5 = s ? [0, 0] : [_n80.x + _m5 + r[0], _n80.y + r[1] - _f5],\n                    _v4 = [0, 0];\n\n                _y4 && (_v4 = _x5, _x5 = [0, 0]);\n\n                var _b4 = (_n80.metrics.left - _h6) * _n80.scale - _m5 + _x5[0],\n                    _w4 = (-_n80.metrics.top - _h6) * _n80.scale + _x5[1],\n                    _6 = _b4 + _a57.w * _n80.scale / (_d5 * (_n80.localGlyph ? 2 : 1)),\n                    _k4 = _w4 + _a57.h * _n80.scale / (_d5 * (_n80.localGlyph ? 2 : 1)),\n                    _A4 = new i(_b4, _w4),\n                    _S2 = new i(_6, _w4),\n                    _I = new i(_b4, _k4),\n                    _T = new i(_6, _k4);\n\n                if (_y4) {\n                  var _t139 = new i(-_m5, _m5 - -17),\n                      _e128 = -Math.PI / 2,\n                      _r137 = 12 - _m5,\n                      _s65 = new i(22 - _r137, -(_n80.imageName ? _r137 : 0)),\n                      _a58 = _construct(i, _toConsumableArray(_v4));\n\n                  _A4._rotateAround(_e128, _t139)._add(_s65)._add(_a58), _S2._rotateAround(_e128, _t139)._add(_s65)._add(_a58), _I._rotateAround(_e128, _t139)._add(_s65)._add(_a58), _T._rotateAround(_e128, _t139)._add(_s65)._add(_a58);\n                }\n\n                if (u) {\n                  var _t140 = Math.sin(u),\n                      _e129 = Math.cos(u),\n                      _r138 = [_e129, -_t140, _t140, _e129];\n\n                  _A4._matMult(_r138), _S2._matMult(_r138), _I._matMult(_r138), _T._matMult(_r138);\n                }\n\n                var _z = new i(0, 0),\n                    _E = new i(0, 0);\n\n                c.push({\n                  tl: _A4,\n                  tr: _S2,\n                  bl: _I,\n                  br: _T,\n                  tex: _a57,\n                  writingMode: e.writingMode,\n                  glyphOffset: _g5,\n                  sectionIndex: _n80.sectionIndex,\n                  isSDF: _p6,\n                  pixelOffsetTL: _z,\n                  pixelOffsetBR: _E,\n                  minFontScaleX: 0,\n                  minFontScaleY: 0\n                });\n              }\n            } catch (err) {\n              _iterator101.e(err);\n            } finally {\n              _iterator101.f();\n            }\n          }\n        } catch (err) {\n          _iterator100.e(err);\n        } finally {\n          _iterator100.f();\n        }\n\n        return c;\n      }(0, r, l, s, a, o, n, t.allowVerticalPlacement),\n          g = t.textSizeData;\n\n      var x = null;\n      \"source\" === g.kind ? (x = [128 * s.layout.get(\"text-size\").evaluate(o, {}, y)], x[0] > 32640 && E(\"\".concat(t.layerIds[0], \": Value for \\\"text-size\\\" is >= 255. Reduce your \\\"text-size\\\".\"))) : \"composite\" === g.kind && (x = [128 * f.compositeTextSizes[0].evaluate(o, {}, y), 128 * f.compositeTextSizes[1].evaluate(o, {}, y)], (x[0] > 32640 || x[1] > 32640) && E(\"\".concat(t.layerIds[0], \": Value for \\\"text-size\\\" is >= 255. Reduce your \\\"text-size\\\".\"))), t.addSymbols(t.text, m, x, l, a, o, c, e, u.lineStartIndex, u.lineLength, d, y);\n\n      var _iterator102 = _createForOfIteratorHelper(h),\n          _step102;\n\n      try {\n        for (_iterator102.s(); !(_step102 = _iterator102.n()).done;) {\n          var _e130 = _step102.value;\n          p[_e130] = t.text.placedSymbolArray.length - 1;\n        }\n      } catch (err) {\n        _iterator102.e(err);\n      } finally {\n        _iterator102.f();\n      }\n\n      return 4 * m.length;\n    }\n\n    function Ac(t) {\n      for (var _e131 in t) {\n        return t[_e131];\n      }\n\n      return null;\n    }\n\n    function Sc(t, e, r, n, s, a, o, l, u) {\n      var h = a.top,\n          p = a.bottom,\n          d = a.left,\n          f = a.right;\n      var y = a.collisionPadding;\n\n      if (y && (d -= y[0], h -= y[1], f += y[2], p += y[3]), u) {\n        var _t141 = new i(d, h),\n            _e132 = new i(f, h),\n            _r139 = new i(d, p),\n            _n81 = new i(f, p),\n            _s66 = c(u);\n\n        _t141._rotate(_s66), _e132._rotate(_s66), _r139._rotate(_s66), _n81._rotate(_s66), d = Math.min(_t141.x, _e132.x, _r139.x, _n81.x), f = Math.max(_t141.x, _e132.x, _r139.x, _n81.x), h = Math.min(_t141.y, _e132.y, _r139.y, _n81.y), p = Math.max(_t141.y, _e132.y, _r139.y, _n81.y);\n      }\n\n      return t.emplaceBack(e.x, e.y, d, h, f, p, l, r, n, s), t.length - 1;\n    }\n\n    function Ic(t) {\n      t.collisionPadding && (t.top -= t.collisionPadding[1], t.bottom += t.collisionPadding[3]);\n      var e = t.bottom - t.top;\n      return e > 0 ? Math.max(10, e) : null;\n    }\n\n    function Tc(t, e, r, i) {\n      var n = t.compareText;\n\n      if (e in n) {\n        var _t142 = n[e];\n\n        for (var _e133 = _t142.length - 1; _e133 >= 0; _e133--) {\n          if (i.dist(_t142[_e133]) < r) return !0;\n        }\n      } else n[e] = [];\n\n      return n[e].push(i), !1;\n    }\n\n    var zc = Al.VectorTileFeature.types,\n        Ec = [{\n      name: \"a_fade_opacity\",\n      components: 1,\n      type: \"Uint8\",\n      offset: 0\n    }];\n\n    function Mc(t, e, r, i, n, s, a, o, l, u, c, h, p) {\n      var d = o ? Math.min(32640, Math.round(o[0])) : 0,\n          f = o ? Math.min(32640, Math.round(o[1])) : 0;\n      t.emplaceBack(e, r, Math.round(32 * i), Math.round(32 * n), s, a, (d << 1) + (l ? 1 : 0), f, 16 * u, 16 * c, 256 * h, 256 * p);\n    }\n\n    function Bc(t, e, r) {\n      t.emplaceBack(e.x, e.y, r), t.emplaceBack(e.x, e.y, r), t.emplaceBack(e.x, e.y, r), t.emplaceBack(e.x, e.y, r);\n    }\n\n    function Dc(t) {\n      var _iterator103 = _createForOfIteratorHelper(t.sections),\n          _step103;\n\n      try {\n        for (_iterator103.s(); !(_step103 = _iterator103.n()).done;) {\n          var _e134 = _step103.value;\n          if (Dn(_e134.text)) return !0;\n        }\n      } catch (err) {\n        _iterator103.e(err);\n      } finally {\n        _iterator103.f();\n      }\n\n      return !1;\n    }\n\n    var Cc = /*#__PURE__*/function () {\n      function Cc(t) {\n        _classCallCheck(this, Cc);\n\n        this.layoutVertexArray = new fs(), this.indexArray = new ws(), this.programConfigurations = t, this.segments = new ya(), this.dynamicLayoutVertexArray = new ys(), this.opacityVertexArray = new ms(), this.placedSymbolArray = new Cs();\n      }\n\n      _createClass(Cc, [{\n        key: \"isEmpty\",\n        value: function isEmpty() {\n          return 0 === this.layoutVertexArray.length && 0 === this.indexArray.length && 0 === this.dynamicLayoutVertexArray.length && 0 === this.opacityVertexArray.length;\n        }\n      }, {\n        key: \"upload\",\n        value: function upload(t, e, r, i) {\n          this.isEmpty() || (r && (this.layoutVertexBuffer = t.createVertexBuffer(this.layoutVertexArray, Xl.members), this.indexBuffer = t.createIndexBuffer(this.indexArray, e), this.dynamicLayoutVertexBuffer = t.createVertexBuffer(this.dynamicLayoutVertexArray, Kl.members, !0), this.opacityVertexBuffer = t.createVertexBuffer(this.opacityVertexArray, Ec, !0), this.opacityVertexBuffer.itemSize = 1), (r || i) && this.programConfigurations.upload(t));\n        }\n      }, {\n        key: \"destroy\",\n        value: function destroy() {\n          this.layoutVertexBuffer && (this.layoutVertexBuffer.destroy(), this.indexBuffer.destroy(), this.programConfigurations.destroy(), this.segments.destroy(), this.dynamicLayoutVertexBuffer.destroy(), this.opacityVertexBuffer.destroy());\n        }\n      }]);\n\n      return Cc;\n    }();\n\n    Gi(\"SymbolBuffers\", Cc);\n\n    var Pc = /*#__PURE__*/function () {\n      function Pc(t, e, r) {\n        _classCallCheck(this, Pc);\n\n        this.layoutVertexArray = new t(), this.layoutAttributes = e, this.indexArray = new r(), this.segments = new ya(), this.collisionVertexArray = new bs(), this.collisionVertexArrayExt = new ys();\n      }\n\n      _createClass(Pc, [{\n        key: \"upload\",\n        value: function upload(t) {\n          this.layoutVertexBuffer = t.createVertexBuffer(this.layoutVertexArray, this.layoutAttributes), this.indexBuffer = t.createIndexBuffer(this.indexArray), this.collisionVertexBuffer = t.createVertexBuffer(this.collisionVertexArray, Hl.members, !0), this.collisionVertexBufferExt = t.createVertexBuffer(this.collisionVertexArrayExt, Yl.members, !0);\n        }\n      }, {\n        key: \"destroy\",\n        value: function destroy() {\n          this.layoutVertexBuffer && (this.layoutVertexBuffer.destroy(), this.indexBuffer.destroy(), this.segments.destroy(), this.collisionVertexBuffer.destroy(), this.collisionVertexBufferExt.destroy());\n        }\n      }]);\n\n      return Pc;\n    }();\n\n    Gi(\"CollisionBuffers\", Pc);\n\n    var Vc = /*#__PURE__*/function () {\n      function Vc(t) {\n        _classCallCheck(this, Vc);\n\n        this.collisionBoxArray = t.collisionBoxArray, this.zoom = t.zoom, this.overscaling = t.overscaling, this.layers = t.layers, this.layerIds = this.layers.map(function (t) {\n          return t.id;\n        }), this.index = t.index, this.pixelRatio = t.pixelRatio, this.sourceLayerIndex = t.sourceLayerIndex, this.hasPattern = !1, this.hasRTLText = !1, this.sortKeyRanges = [], this.collisionCircleArray = [], this.placementInvProjMatrix = qa([]), this.placementViewportMatrix = qa([]);\n        var e = this.layers[0]._unevaluatedLayout._values;\n        this.textSizeData = Ql(this.zoom, e[\"text-size\"]), this.iconSizeData = Ql(this.zoom, e[\"icon-size\"]);\n        var r = this.layers[0].layout,\n            i = r.get(\"symbol-sort-key\"),\n            n = r.get(\"symbol-z-order\");\n        this.canOverlap = r.get(\"text-allow-overlap\") || r.get(\"icon-allow-overlap\") || r.get(\"text-ignore-placement\") || r.get(\"icon-ignore-placement\"), this.sortFeaturesByKey = \"viewport-y\" !== n && void 0 !== i.constantOr(1), this.sortFeaturesByY = (\"viewport-y\" === n || \"auto\" === n && !this.sortFeaturesByKey) && this.canOverlap, \"point\" === r.get(\"symbol-placement\") && (this.writingModes = r.get(\"text-writing-mode\").map(function (t) {\n          return Bu[t];\n        })), this.stateDependentLayerIds = this.layers.filter(function (t) {\n          return t.isStateDependent();\n        }).map(function (t) {\n          return t.id;\n        }), this.sourceID = t.sourceID;\n      }\n\n      _createClass(Vc, [{\n        key: \"createArrays\",\n        value: function createArrays() {\n          this.text = new Cc(new ua(this.layers, this.zoom, function (t) {\n            return /^text/.test(t);\n          })), this.icon = new Cc(new ua(this.layers, this.zoom, function (t) {\n            return /^icon/.test(t);\n          })), this.glyphOffsetArray = new Fs(), this.lineVertexArray = new Rs(), this.symbolInstances = new Vs();\n        }\n      }, {\n        key: \"calculateGlyphDependencies\",\n        value: function calculateGlyphDependencies(t, e, r, i, n) {\n          for (var _s67 = 0; _s67 < t.length; _s67++) {\n            if (e[t.charCodeAt(_s67)] = !0, (r || i) && n) {\n              var _r140 = nu[t.charAt(_s67)];\n              _r140 && (e[_r140.charCodeAt(0)] = !0);\n            }\n          }\n        }\n      }, {\n        key: \"populate\",\n        value: function populate(t, e, r) {\n          var i = this.layers[0],\n              n = i.layout,\n              s = n.get(\"text-font\"),\n              a = n.get(\"text-field\"),\n              o = n.get(\"icon-image\"),\n              l = (\"constant\" !== a.value.kind || a.value.value instanceof he && !a.value.value.isEmpty() || a.value.value.toString().length > 0) && (\"constant\" !== s.value.kind || s.value.value.length > 0),\n              u = \"constant\" !== o.value.kind || !!o.value.value || Object.keys(o.parameters).length > 0,\n              c = n.get(\"symbol-sort-key\");\n          if (this.features = [], !l && !u) return;\n          var h = e.iconDependencies,\n              p = e.glyphDependencies,\n              d = e.availableImages,\n              f = new qn(this.zoom);\n\n          var _iterator104 = _createForOfIteratorHelper(t),\n              _step104;\n\n          try {\n            for (_iterator104.s(); !(_step104 = _iterator104.n()).done;) {\n              var _ref159 = _step104.value;\n              var _e135 = _ref159.feature;\n              var _a59 = _ref159.id;\n              var _o32 = _ref159.index;\n              var _y5 = _ref159.sourceLayerIndex;\n\n              var _t144 = i._featureFilter.needGeometry,\n                  _m6 = va(_e135, _t144);\n\n              if (!i._featureFilter.filter(f, _m6, r)) continue;\n\n              var _g6 = void 0,\n                  _x6 = void 0;\n\n              if (_t144 || (_m6.geometry = xa(_e135)), l) {\n                var _t145 = i.getValueAndResolveTokens(\"text-field\", _m6, r, d),\n                    _e136 = he.factory(_t145);\n\n                Dc(_e136) && (this.hasRTLText = !0), (!this.hasRTLText || \"unavailable\" === Un() || this.hasRTLText && $n.isParsed()) && (_g6 = iu(_e136, i, _m6));\n              }\n\n              if (u) {\n                var _t146 = i.getValueAndResolveTokens(\"icon-image\", _m6, r, d);\n\n                _x6 = _t146 instanceof pe ? _t146 : pe.fromString(_t146);\n              }\n\n              if (!_g6 && !_x6) continue;\n\n              var _v5 = this.sortFeaturesByKey ? c.evaluate(_m6, {}, r) : void 0;\n\n              if (this.features.push({\n                id: _a59,\n                text: _g6,\n                icon: _x6,\n                index: _o32,\n                sourceLayerIndex: _y5,\n                geometry: _m6.geometry,\n                properties: _e135.properties,\n                type: zc[_e135.type],\n                sortKey: _v5\n              }), _x6 && (h[_x6.name] = !0), _g6) {\n                var _t147 = s.evaluate(_m6, {}, r).join(\",\"),\n                    _e137 = \"map\" === n.get(\"text-rotation-alignment\") && \"point\" !== n.get(\"symbol-placement\");\n\n                this.allowVerticalPlacement = this.writingModes && this.writingModes.indexOf(Bu.vertical) >= 0;\n\n                var _iterator105 = _createForOfIteratorHelper(_g6.sections),\n                    _step105;\n\n                try {\n                  for (_iterator105.s(); !(_step105 = _iterator105.n()).done;) {\n                    var _r141 = _step105.value;\n                    if (_r141.image) h[_r141.image.name] = !0;else {\n                      var _i105 = Sn(_g6.toString()),\n                          _n83 = _r141.fontStack || _t147,\n                          _s68 = p[_n83] = p[_n83] || {};\n\n                      this.calculateGlyphDependencies(_r141.text, _s68, _e137, this.allowVerticalPlacement, _i105);\n                    }\n                  }\n                } catch (err) {\n                  _iterator105.e(err);\n                } finally {\n                  _iterator105.f();\n                }\n              }\n            }\n          } catch (err) {\n            _iterator104.e(err);\n          } finally {\n            _iterator104.f();\n          }\n\n          \"line\" === n.get(\"symbol-placement\") && (this.features = function (t) {\n            var e = {},\n                r = {},\n                i = [];\n            var n = 0;\n\n            function s(e) {\n              i.push(t[e]), n++;\n            }\n\n            function a(t, e, n) {\n              var s = r[t];\n              return delete r[t], r[e] = s, i[s].geometry[0].pop(), i[s].geometry[0] = i[s].geometry[0].concat(n[0]), s;\n            }\n\n            function o(t, r, n) {\n              var s = e[r];\n              return delete e[r], e[t] = s, i[s].geometry[0].shift(), i[s].geometry[0] = n[0].concat(i[s].geometry[0]), s;\n            }\n\n            function l(t, e, r) {\n              var i = r ? e[0][e[0].length - 1] : e[0][0];\n              return \"\".concat(t, \":\").concat(i.x, \":\").concat(i.y);\n            }\n\n            for (var _u20 = 0; _u20 < t.length; _u20++) {\n              var _c13 = t[_u20],\n                  _h7 = _c13.geometry,\n                  _p7 = _c13.text ? _c13.text.toString() : null;\n\n              if (!_p7) {\n                s(_u20);\n                continue;\n              }\n\n              var _d6 = l(_p7, _h7),\n                  _f6 = l(_p7, _h7, !0);\n\n              if (_d6 in r && _f6 in e && r[_d6] !== e[_f6]) {\n                var _t143 = o(_d6, _f6, _h7),\n                    _n82 = a(_d6, _f6, i[_t143].geometry);\n\n                delete e[_d6], delete r[_f6], r[l(_p7, i[_n82].geometry, !0)] = _n82, i[_t143].geometry = null;\n              } else _d6 in r ? a(_d6, _f6, _h7) : _f6 in e ? o(_d6, _f6, _h7) : (s(_u20), e[_d6] = n - 1, r[_f6] = n - 1);\n            }\n\n            return i.filter(function (t) {\n              return t.geometry;\n            });\n          }(this.features)), this.sortFeaturesByKey && this.features.sort(function (t, e) {\n            return t.sortKey - e.sortKey;\n          });\n        }\n      }, {\n        key: \"update\",\n        value: function update(t, e, r) {\n          this.stateDependentLayers.length && (this.text.programConfigurations.updatePaintArrays(t, e, this.layers, r), this.icon.programConfigurations.updatePaintArrays(t, e, this.layers, r));\n        }\n      }, {\n        key: \"isEmpty\",\n        value: function isEmpty() {\n          return 0 === this.symbolInstances.length && !this.hasRTLText;\n        }\n      }, {\n        key: \"uploadPending\",\n        value: function uploadPending() {\n          return !this.uploaded || this.text.programConfigurations.needsUpload || this.icon.programConfigurations.needsUpload;\n        }\n      }, {\n        key: \"upload\",\n        value: function upload(t) {\n          !this.uploaded && this.hasDebugData() && (this.textCollisionBox.upload(t), this.iconCollisionBox.upload(t)), this.text.upload(t, this.sortFeaturesByY, !this.uploaded, this.text.programConfigurations.needsUpload), this.icon.upload(t, this.sortFeaturesByY, !this.uploaded, this.icon.programConfigurations.needsUpload), this.uploaded = !0;\n        }\n      }, {\n        key: \"destroyDebugData\",\n        value: function destroyDebugData() {\n          this.textCollisionBox.destroy(), this.iconCollisionBox.destroy();\n        }\n      }, {\n        key: \"destroy\",\n        value: function destroy() {\n          this.text.destroy(), this.icon.destroy(), this.hasDebugData() && this.destroyDebugData();\n        }\n      }, {\n        key: \"addToLineVertexArray\",\n        value: function addToLineVertexArray(t, e) {\n          var r = this.lineVertexArray.length;\n\n          if (void 0 !== t.segment) {\n            var _r142 = t.dist(e[t.segment + 1]),\n                _i106 = t.dist(e[t.segment]);\n\n            var _n84 = {};\n\n            for (var _i107 = t.segment + 1; _i107 < e.length; _i107++) {\n              _n84[_i107] = {\n                x: e[_i107].x,\n                y: e[_i107].y,\n                tileUnitDistanceFromAnchor: _r142\n              }, _i107 < e.length - 1 && (_r142 += e[_i107 + 1].dist(e[_i107]));\n            }\n\n            for (var _r143 = t.segment || 0; _r143 >= 0; _r143--) {\n              _n84[_r143] = {\n                x: e[_r143].x,\n                y: e[_r143].y,\n                tileUnitDistanceFromAnchor: _i106\n              }, _r143 > 0 && (_i106 += e[_r143 - 1].dist(e[_r143]));\n            }\n\n            for (var _t148 = 0; _t148 < e.length; _t148++) {\n              var _e138 = _n84[_t148];\n              this.lineVertexArray.emplaceBack(_e138.x, _e138.y, _e138.tileUnitDistanceFromAnchor);\n            }\n          }\n\n          return {\n            lineStartIndex: r,\n            lineLength: this.lineVertexArray.length - r\n          };\n        }\n      }, {\n        key: \"addSymbols\",\n        value: function addSymbols(t, e, r, i, n, s, a, o, l, u, c, h) {\n          var p = t.indexArray,\n              d = t.layoutVertexArray,\n              f = t.segments.prepareSegment(4 * e.length, d, p, this.canOverlap ? s.sortKey : void 0),\n              y = this.glyphOffsetArray.length,\n              m = f.vertexLength,\n              g = this.allowVerticalPlacement && a === Bu.vertical ? Math.PI / 2 : 0,\n              x = s.text && s.text.sections;\n\n          for (var _i108 = 0; _i108 < e.length; _i108++) {\n            var _e$_i = e[_i108],\n                _n85 = _e$_i.tl,\n                _a60 = _e$_i.tr,\n                _l24 = _e$_i.bl,\n                _u21 = _e$_i.br,\n                _c14 = _e$_i.tex,\n                _y6 = _e$_i.pixelOffsetTL,\n                _m7 = _e$_i.pixelOffsetBR,\n                _v6 = _e$_i.minFontScaleX,\n                _b5 = _e$_i.minFontScaleY,\n                _w5 = _e$_i.glyphOffset,\n                _7 = _e$_i.isSDF,\n                _k5 = _e$_i.sectionIndex,\n                _A5 = f.vertexLength,\n                _S3 = _w5[1];\n            Mc(d, o.x, o.y, _n85.x, _S3 + _n85.y, _c14.x, _c14.y, r, _7, _y6.x, _y6.y, _v6, _b5), Mc(d, o.x, o.y, _a60.x, _S3 + _a60.y, _c14.x + _c14.w, _c14.y, r, _7, _m7.x, _y6.y, _v6, _b5), Mc(d, o.x, o.y, _l24.x, _S3 + _l24.y, _c14.x, _c14.y + _c14.h, r, _7, _y6.x, _m7.y, _v6, _b5), Mc(d, o.x, o.y, _u21.x, _S3 + _u21.y, _c14.x + _c14.w, _c14.y + _c14.h, r, _7, _m7.x, _m7.y, _v6, _b5), Bc(t.dynamicLayoutVertexArray, o, g), p.emplaceBack(_A5, _A5 + 1, _A5 + 2), p.emplaceBack(_A5 + 1, _A5 + 2, _A5 + 3), f.vertexLength += 4, f.primitiveLength += 2, this.glyphOffsetArray.emplaceBack(_w5[0]), _i108 !== e.length - 1 && _k5 === e[_i108 + 1].sectionIndex || t.programConfigurations.populatePaintArrays(d.length, s, s.index, {}, h, x && x[_k5]);\n          }\n\n          t.placedSymbolArray.emplaceBack(o.x, o.y, y, this.glyphOffsetArray.length - y, m, l, u, o.segment, r ? r[0] : 0, r ? r[1] : 0, i[0], i[1], a, 0, !1, 0, c);\n        }\n      }, {\n        key: \"_commitLayoutVertex\",\n        value: function _commitLayoutVertex(t, e, r, i, n) {\n          t.emplaceBack(e.x, e.y, r, i, Math.round(n.x), Math.round(n.y));\n        }\n      }, {\n        key: \"_addCollisionDebugVertices\",\n        value: function _addCollisionDebugVertices(t, e, r, n, s) {\n          var a = r.segments.prepareSegment(4, r.layoutVertexArray, r.indexArray),\n              o = a.vertexLength,\n              l = s.anchorX,\n              u = s.anchorY;\n\n          for (var _t149 = 0; _t149 < 4; _t149++) {\n            r.collisionVertexArray.emplaceBack(0, 0, 0, 0);\n          }\n\n          r.collisionVertexArrayExt.emplaceBack(e, -t.padding, -t.padding), r.collisionVertexArrayExt.emplaceBack(e, t.padding, -t.padding), r.collisionVertexArrayExt.emplaceBack(e, t.padding, t.padding), r.collisionVertexArrayExt.emplaceBack(e, -t.padding, t.padding), this._commitLayoutVertex(r.layoutVertexArray, n, l, u, new i(t.x1, t.y1)), this._commitLayoutVertex(r.layoutVertexArray, n, l, u, new i(t.x2, t.y1)), this._commitLayoutVertex(r.layoutVertexArray, n, l, u, new i(t.x2, t.y2)), this._commitLayoutVertex(r.layoutVertexArray, n, l, u, new i(t.x1, t.y2)), a.vertexLength += 4;\n          var c = r.indexArray;\n          c.emplaceBack(o, o + 1), c.emplaceBack(o + 1, o + 2), c.emplaceBack(o + 2, o + 3), c.emplaceBack(o + 3, o), a.primitiveLength += 4;\n        }\n      }, {\n        key: \"_addTextDebugCollisionBoxes\",\n        value: function _addTextDebugCollisionBoxes(t, e, r, i, n, s) {\n          for (var _a61 = i; _a61 < n; _a61++) {\n            var _i109 = r.get(_a61),\n                _n86 = this.getSymbolInstanceTextSize(t, s, e, _a61);\n\n            this._addCollisionDebugVertices(_i109, _n86, this.textCollisionBox, _i109.anchorPoint, s);\n          }\n        }\n      }, {\n        key: \"_addIconDebugCollisionBoxes\",\n        value: function _addIconDebugCollisionBoxes(t, e, r, i, n, s) {\n          for (var _a62 = i; _a62 < n; _a62++) {\n            var _i110 = r.get(_a62),\n                _n87 = this.getSymbolInstanceIconSize(t, e, _a62);\n\n            this._addCollisionDebugVertices(_i110, _n87, this.iconCollisionBox, _i110.anchorPoint, s);\n          }\n        }\n      }, {\n        key: \"generateCollisionDebugBuffers\",\n        value: function generateCollisionDebugBuffers(t, e) {\n          this.hasDebugData() && this.destroyDebugData(), this.textCollisionBox = new Pc(xs, Wl.members, Ts), this.iconCollisionBox = new Pc(xs, Wl.members, Ts);\n          var r = eu(this.iconSizeData, t),\n              i = eu(this.textSizeData, t);\n\n          for (var _n88 = 0; _n88 < this.symbolInstances.length; _n88++) {\n            var _s69 = this.symbolInstances.get(_n88);\n\n            this._addTextDebugCollisionBoxes(i, t, e, _s69.textBoxStartIndex, _s69.textBoxEndIndex, _s69), this._addTextDebugCollisionBoxes(i, t, e, _s69.verticalTextBoxStartIndex, _s69.verticalTextBoxEndIndex, _s69), this._addIconDebugCollisionBoxes(r, t, e, _s69.iconBoxStartIndex, _s69.iconBoxEndIndex, _s69), this._addIconDebugCollisionBoxes(r, t, e, _s69.verticalIconBoxStartIndex, _s69.verticalIconBoxEndIndex, _s69);\n          }\n        }\n      }, {\n        key: \"getSymbolInstanceTextSize\",\n        value: function getSymbolInstanceTextSize(t, e, r, i) {\n          var n = this.text.placedSymbolArray.get(e.rightJustifiedTextSymbolIndex >= 0 ? e.rightJustifiedTextSymbolIndex : e.centerJustifiedTextSymbolIndex >= 0 ? e.centerJustifiedTextSymbolIndex : e.leftJustifiedTextSymbolIndex >= 0 ? e.leftJustifiedTextSymbolIndex : e.verticalPlacedTextSymbolIndex >= 0 ? e.verticalPlacedTextSymbolIndex : i),\n              s = tu(this.textSizeData, t, n) / 24;\n          return this.tilePixelRatio * s;\n        }\n      }, {\n        key: \"getSymbolInstanceIconSize\",\n        value: function getSymbolInstanceIconSize(t, e, r) {\n          var i = this.icon.placedSymbolArray.get(r),\n              n = tu(this.iconSizeData, t, i);\n          return this.tilePixelRatio * n;\n        }\n      }, {\n        key: \"_commitDebugCollisionVertexUpdate\",\n        value: function _commitDebugCollisionVertexUpdate(t, e, r) {\n          t.emplaceBack(e, -r, -r), t.emplaceBack(e, r, -r), t.emplaceBack(e, r, r), t.emplaceBack(e, -r, r);\n        }\n      }, {\n        key: \"_updateTextDebugCollisionBoxes\",\n        value: function _updateTextDebugCollisionBoxes(t, e, r, i, n, s) {\n          for (var _a63 = i; _a63 < n; _a63++) {\n            var _i111 = r.get(_a63),\n                _n89 = this.getSymbolInstanceTextSize(t, s, e, _a63);\n\n            this._commitDebugCollisionVertexUpdate(this.textCollisionBox.collisionVertexArrayExt, _n89, _i111.padding);\n          }\n        }\n      }, {\n        key: \"_updateIconDebugCollisionBoxes\",\n        value: function _updateIconDebugCollisionBoxes(t, e, r, i, n) {\n          for (var _s70 = i; _s70 < n; _s70++) {\n            var _i112 = r.get(_s70),\n                _n90 = this.getSymbolInstanceIconSize(t, e, _s70);\n\n            this._commitDebugCollisionVertexUpdate(this.iconCollisionBox.collisionVertexArrayExt, _n90, _i112.padding);\n          }\n        }\n      }, {\n        key: \"updateCollisionDebugBuffers\",\n        value: function updateCollisionDebugBuffers(t, e) {\n          if (!this.hasDebugData()) return;\n          this.hasTextCollisionBoxData() && this.textCollisionBox.collisionVertexArrayExt.clear(), this.hasIconCollisionBoxData() && this.iconCollisionBox.collisionVertexArrayExt.clear();\n          var r = eu(this.iconSizeData, t),\n              i = eu(this.textSizeData, t);\n\n          for (var _n91 = 0; _n91 < this.symbolInstances.length; _n91++) {\n            var _s71 = this.symbolInstances.get(_n91);\n\n            this._updateTextDebugCollisionBoxes(i, t, e, _s71.textBoxStartIndex, _s71.textBoxEndIndex, _s71), this._updateTextDebugCollisionBoxes(i, t, e, _s71.verticalTextBoxStartIndex, _s71.verticalTextBoxEndIndex, _s71), this._updateIconDebugCollisionBoxes(r, t, e, _s71.iconBoxStartIndex, _s71.iconBoxEndIndex), this._updateIconDebugCollisionBoxes(r, t, e, _s71.verticalIconBoxStartIndex, _s71.verticalIconBoxEndIndex);\n          }\n\n          this.hasTextCollisionBoxData() && this.textCollisionBox.collisionVertexBufferExt && this.textCollisionBox.collisionVertexBufferExt.updateData(this.textCollisionBox.collisionVertexArrayExt), this.hasIconCollisionBoxData() && this.iconCollisionBox.collisionVertexBufferExt && this.iconCollisionBox.collisionVertexBufferExt.updateData(this.iconCollisionBox.collisionVertexArrayExt);\n        }\n      }, {\n        key: \"_deserializeCollisionBoxesForSymbol\",\n        value: function _deserializeCollisionBoxesForSymbol(t, e, r, i, n, s, a, o, l) {\n          var u = {};\n\n          for (var _i113 = e; _i113 < r; _i113++) {\n            var _e139 = t.get(_i113);\n\n            u.textBox = {\n              x1: _e139.x1,\n              y1: _e139.y1,\n              x2: _e139.x2,\n              y2: _e139.y2,\n              padding: _e139.padding,\n              anchorPointX: _e139.anchorPointX,\n              anchorPointY: _e139.anchorPointY\n            }, u.textFeatureIndex = _e139.featureIndex;\n            break;\n          }\n\n          for (var _e140 = i; _e140 < n; _e140++) {\n            var _r144 = t.get(_e140);\n\n            u.verticalTextBox = {\n              x1: _r144.x1,\n              y1: _r144.y1,\n              x2: _r144.x2,\n              y2: _r144.y2,\n              padding: _r144.padding,\n              anchorPointX: _r144.anchorPointX,\n              anchorPointY: _r144.anchorPointY\n            }, u.verticalTextFeatureIndex = _r144.featureIndex;\n            break;\n          }\n\n          for (var _e141 = s; _e141 < a; _e141++) {\n            var _r145 = t.get(_e141);\n\n            u.iconBox = {\n              x1: _r145.x1,\n              y1: _r145.y1,\n              x2: _r145.x2,\n              y2: _r145.y2,\n              padding: _r145.padding,\n              anchorPointX: _r145.anchorPointX,\n              anchorPointY: _r145.anchorPointY\n            }, u.iconFeatureIndex = _r145.featureIndex;\n            break;\n          }\n\n          for (var _e142 = o; _e142 < l; _e142++) {\n            var _r146 = t.get(_e142);\n\n            u.verticalIconBox = {\n              x1: _r146.x1,\n              y1: _r146.y1,\n              x2: _r146.x2,\n              y2: _r146.y2,\n              padding: _r146.padding,\n              anchorPointX: _r146.anchorPointX,\n              anchorPointY: _r146.anchorPointY\n            }, u.verticalIconFeatureIndex = _r146.featureIndex;\n            break;\n          }\n\n          return u;\n        }\n      }, {\n        key: \"deserializeCollisionBoxes\",\n        value: function deserializeCollisionBoxes(t) {\n          this.collisionArrays = [];\n\n          for (var _e143 = 0; _e143 < this.symbolInstances.length; _e143++) {\n            var _r147 = this.symbolInstances.get(_e143);\n\n            this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(t, _r147.textBoxStartIndex, _r147.textBoxEndIndex, _r147.verticalTextBoxStartIndex, _r147.verticalTextBoxEndIndex, _r147.iconBoxStartIndex, _r147.iconBoxEndIndex, _r147.verticalIconBoxStartIndex, _r147.verticalIconBoxEndIndex));\n          }\n        }\n      }, {\n        key: \"hasTextData\",\n        value: function hasTextData() {\n          return this.text.segments.get().length > 0;\n        }\n      }, {\n        key: \"hasIconData\",\n        value: function hasIconData() {\n          return this.icon.segments.get().length > 0;\n        }\n      }, {\n        key: \"hasDebugData\",\n        value: function hasDebugData() {\n          return this.textCollisionBox && this.iconCollisionBox;\n        }\n      }, {\n        key: \"hasTextCollisionBoxData\",\n        value: function hasTextCollisionBoxData() {\n          return this.hasDebugData() && this.textCollisionBox.segments.get().length > 0;\n        }\n      }, {\n        key: \"hasIconCollisionBoxData\",\n        value: function hasIconCollisionBoxData() {\n          return this.hasDebugData() && this.iconCollisionBox.segments.get().length > 0;\n        }\n      }, {\n        key: \"addIndicesForPlacedSymbol\",\n        value: function addIndicesForPlacedSymbol(t, e) {\n          var r = t.placedSymbolArray.get(e),\n              i = r.vertexStartIndex + 4 * r.numGlyphs;\n\n          for (var _e144 = r.vertexStartIndex; _e144 < i; _e144 += 4) {\n            t.indexArray.emplaceBack(_e144, _e144 + 1, _e144 + 2), t.indexArray.emplaceBack(_e144 + 1, _e144 + 2, _e144 + 3);\n          }\n        }\n      }, {\n        key: \"getSortedSymbolIndexes\",\n        value: function getSortedSymbolIndexes(t) {\n          if (this.sortedAngle === t && void 0 !== this.symbolInstanceIndexes) return this.symbolInstanceIndexes;\n          var e = Math.sin(t),\n              r = Math.cos(t),\n              i = [],\n              n = [],\n              s = [];\n\n          for (var _t150 = 0; _t150 < this.symbolInstances.length; ++_t150) {\n            s.push(_t150);\n\n            var _a64 = this.symbolInstances.get(_t150);\n\n            i.push(0 | Math.round(e * _a64.anchorX + r * _a64.anchorY)), n.push(_a64.featureIndex);\n          }\n\n          return s.sort(function (t, e) {\n            return i[t] - i[e] || n[e] - n[t];\n          }), s;\n        }\n      }, {\n        key: \"addToSortKeyRanges\",\n        value: function addToSortKeyRanges(t, e) {\n          var r = this.sortKeyRanges[this.sortKeyRanges.length - 1];\n          r && r.sortKey === e ? r.symbolInstanceEnd = t + 1 : this.sortKeyRanges.push({\n            sortKey: e,\n            symbolInstanceStart: t,\n            symbolInstanceEnd: t + 1\n          });\n        }\n      }, {\n        key: \"sortFeatures\",\n        value: function sortFeatures(t) {\n          var _this22 = this;\n\n          if (this.sortFeaturesByY && this.sortedAngle !== t && !(this.text.segments.get().length > 1 || this.icon.segments.get().length > 1)) {\n            this.symbolInstanceIndexes = this.getSortedSymbolIndexes(t), this.sortedAngle = t, this.text.indexArray.clear(), this.icon.indexArray.clear(), this.featureSortOrder = [];\n\n            var _iterator106 = _createForOfIteratorHelper(this.symbolInstanceIndexes),\n                _step106;\n\n            try {\n              for (_iterator106.s(); !(_step106 = _iterator106.n()).done;) {\n                var _t151 = _step106.value;\n\n                var _e145 = this.symbolInstances.get(_t151);\n\n                this.featureSortOrder.push(_e145.featureIndex), [_e145.rightJustifiedTextSymbolIndex, _e145.centerJustifiedTextSymbolIndex, _e145.leftJustifiedTextSymbolIndex].forEach(function (t, e, r) {\n                  t >= 0 && r.indexOf(t) === e && _this22.addIndicesForPlacedSymbol(_this22.text, t);\n                }), _e145.verticalPlacedTextSymbolIndex >= 0 && this.addIndicesForPlacedSymbol(this.text, _e145.verticalPlacedTextSymbolIndex), _e145.placedIconSymbolIndex >= 0 && this.addIndicesForPlacedSymbol(this.icon, _e145.placedIconSymbolIndex), _e145.verticalPlacedIconSymbolIndex >= 0 && this.addIndicesForPlacedSymbol(this.icon, _e145.verticalPlacedIconSymbolIndex);\n              }\n            } catch (err) {\n              _iterator106.e(err);\n            } finally {\n              _iterator106.f();\n            }\n\n            this.text.indexBuffer && this.text.indexBuffer.updateData(this.text.indexArray), this.icon.indexBuffer && this.icon.indexBuffer.updateData(this.icon.indexArray);\n          }\n        }\n      }]);\n\n      return Vc;\n    }();\n\n    Gi(\"SymbolBucket\", Vc, {\n      omit: [\"layers\", \"collisionBoxArray\", \"features\", \"compareText\"]\n    }), Vc.MAX_GLYPHS = 65535, Vc.addDynamicAttributes = Bc;\n    var Fc = new rs({\n      \"symbol-placement\": new Wn(Ft.layout_symbol[\"symbol-placement\"]),\n      \"symbol-spacing\": new Wn(Ft.layout_symbol[\"symbol-spacing\"]),\n      \"symbol-avoid-edges\": new Wn(Ft.layout_symbol[\"symbol-avoid-edges\"]),\n      \"symbol-sort-key\": new Jn(Ft.layout_symbol[\"symbol-sort-key\"]),\n      \"symbol-z-order\": new Wn(Ft.layout_symbol[\"symbol-z-order\"]),\n      \"icon-allow-overlap\": new Wn(Ft.layout_symbol[\"icon-allow-overlap\"]),\n      \"icon-ignore-placement\": new Wn(Ft.layout_symbol[\"icon-ignore-placement\"]),\n      \"icon-optional\": new Wn(Ft.layout_symbol[\"icon-optional\"]),\n      \"icon-rotation-alignment\": new Wn(Ft.layout_symbol[\"icon-rotation-alignment\"]),\n      \"icon-size\": new Jn(Ft.layout_symbol[\"icon-size\"]),\n      \"icon-text-fit\": new Wn(Ft.layout_symbol[\"icon-text-fit\"]),\n      \"icon-text-fit-padding\": new Wn(Ft.layout_symbol[\"icon-text-fit-padding\"]),\n      \"icon-image\": new Jn(Ft.layout_symbol[\"icon-image\"]),\n      \"icon-rotate\": new Jn(Ft.layout_symbol[\"icon-rotate\"]),\n      \"icon-padding\": new Wn(Ft.layout_symbol[\"icon-padding\"]),\n      \"icon-keep-upright\": new Wn(Ft.layout_symbol[\"icon-keep-upright\"]),\n      \"icon-offset\": new Jn(Ft.layout_symbol[\"icon-offset\"]),\n      \"icon-anchor\": new Jn(Ft.layout_symbol[\"icon-anchor\"]),\n      \"icon-pitch-alignment\": new Wn(Ft.layout_symbol[\"icon-pitch-alignment\"]),\n      \"text-pitch-alignment\": new Wn(Ft.layout_symbol[\"text-pitch-alignment\"]),\n      \"text-rotation-alignment\": new Wn(Ft.layout_symbol[\"text-rotation-alignment\"]),\n      \"text-field\": new Jn(Ft.layout_symbol[\"text-field\"]),\n      \"text-font\": new Jn(Ft.layout_symbol[\"text-font\"]),\n      \"text-size\": new Jn(Ft.layout_symbol[\"text-size\"]),\n      \"text-max-width\": new Jn(Ft.layout_symbol[\"text-max-width\"]),\n      \"text-line-height\": new Wn(Ft.layout_symbol[\"text-line-height\"]),\n      \"text-letter-spacing\": new Jn(Ft.layout_symbol[\"text-letter-spacing\"]),\n      \"text-justify\": new Jn(Ft.layout_symbol[\"text-justify\"]),\n      \"text-radial-offset\": new Jn(Ft.layout_symbol[\"text-radial-offset\"]),\n      \"text-variable-anchor\": new Wn(Ft.layout_symbol[\"text-variable-anchor\"]),\n      \"text-anchor\": new Jn(Ft.layout_symbol[\"text-anchor\"]),\n      \"text-max-angle\": new Wn(Ft.layout_symbol[\"text-max-angle\"]),\n      \"text-writing-mode\": new Wn(Ft.layout_symbol[\"text-writing-mode\"]),\n      \"text-rotate\": new Jn(Ft.layout_symbol[\"text-rotate\"]),\n      \"text-padding\": new Wn(Ft.layout_symbol[\"text-padding\"]),\n      \"text-keep-upright\": new Wn(Ft.layout_symbol[\"text-keep-upright\"]),\n      \"text-transform\": new Jn(Ft.layout_symbol[\"text-transform\"]),\n      \"text-offset\": new Jn(Ft.layout_symbol[\"text-offset\"]),\n      \"text-allow-overlap\": new Wn(Ft.layout_symbol[\"text-allow-overlap\"]),\n      \"text-ignore-placement\": new Wn(Ft.layout_symbol[\"text-ignore-placement\"]),\n      \"text-optional\": new Wn(Ft.layout_symbol[\"text-optional\"])\n    });\n    var Rc = {\n      paint: new rs({\n        \"icon-opacity\": new Jn(Ft.paint_symbol[\"icon-opacity\"]),\n        \"icon-color\": new Jn(Ft.paint_symbol[\"icon-color\"]),\n        \"icon-halo-color\": new Jn(Ft.paint_symbol[\"icon-halo-color\"]),\n        \"icon-halo-width\": new Jn(Ft.paint_symbol[\"icon-halo-width\"]),\n        \"icon-halo-blur\": new Jn(Ft.paint_symbol[\"icon-halo-blur\"]),\n        \"icon-translate\": new Wn(Ft.paint_symbol[\"icon-translate\"]),\n        \"icon-translate-anchor\": new Wn(Ft.paint_symbol[\"icon-translate-anchor\"]),\n        \"text-opacity\": new Jn(Ft.paint_symbol[\"text-opacity\"]),\n        \"text-color\": new Jn(Ft.paint_symbol[\"text-color\"], {\n          runtimeType: Kt,\n          getOverride: function getOverride(t) {\n            return t.textColor;\n          },\n          hasOverride: function hasOverride(t) {\n            return !!t.textColor;\n          }\n        }),\n        \"text-halo-color\": new Jn(Ft.paint_symbol[\"text-halo-color\"]),\n        \"text-halo-width\": new Jn(Ft.paint_symbol[\"text-halo-width\"]),\n        \"text-halo-blur\": new Jn(Ft.paint_symbol[\"text-halo-blur\"]),\n        \"text-translate\": new Wn(Ft.paint_symbol[\"text-translate\"]),\n        \"text-translate-anchor\": new Wn(Ft.paint_symbol[\"text-translate-anchor\"])\n      }),\n      layout: Fc\n    };\n\n    var Lc = /*#__PURE__*/function () {\n      function Lc(t) {\n        _classCallCheck(this, Lc);\n\n        this.type = t.property.overrides ? t.property.overrides.runtimeType : jt, this.defaultValue = t;\n      }\n\n      _createClass(Lc, [{\n        key: \"evaluate\",\n        value: function evaluate(t) {\n          if (t.formattedSection) {\n            var _e146 = this.defaultValue.property.overrides;\n            if (_e146 && _e146.hasOverride(t.formattedSection)) return _e146.getOverride(t.formattedSection);\n          }\n\n          return t.feature && t.featureState ? this.defaultValue.evaluate(t.feature, t.featureState) : this.defaultValue.property.specification.default;\n        }\n      }, {\n        key: \"eachChild\",\n        value: function eachChild(t) {\n          this.defaultValue.isConstant() || t(this.defaultValue.value._styleExpression.expression);\n        }\n      }, {\n        key: \"outputDefined\",\n        value: function outputDefined() {\n          return !1;\n        }\n      }, {\n        key: \"serialize\",\n        value: function serialize() {\n          return null;\n        }\n      }]);\n\n      return Lc;\n    }();\n\n    Gi(\"FormatSectionOverride\", Lc, {\n      omit: [\"defaultValue\"]\n    });\n\n    var Uc = /*#__PURE__*/function (_pa) {\n      _inherits(Uc, _pa);\n\n      var _super48 = _createSuper(Uc);\n\n      function Uc(t) {\n        _classCallCheck(this, Uc);\n\n        return _super48.call(this, t, Rc);\n      }\n\n      _createClass(Uc, [{\n        key: \"recalculate\",\n        value: function recalculate(t, e) {\n          if (_get(_getPrototypeOf(Uc.prototype), \"recalculate\", this).call(this, t, e), \"auto\" === this.layout.get(\"icon-rotation-alignment\") && (this.layout._values[\"icon-rotation-alignment\"] = \"point\" !== this.layout.get(\"symbol-placement\") ? \"map\" : \"viewport\"), \"auto\" === this.layout.get(\"text-rotation-alignment\") && (this.layout._values[\"text-rotation-alignment\"] = \"point\" !== this.layout.get(\"symbol-placement\") ? \"map\" : \"viewport\"), \"auto\" === this.layout.get(\"text-pitch-alignment\") && (this.layout._values[\"text-pitch-alignment\"] = this.layout.get(\"text-rotation-alignment\")), \"auto\" === this.layout.get(\"icon-pitch-alignment\") && (this.layout._values[\"icon-pitch-alignment\"] = this.layout.get(\"icon-rotation-alignment\")), \"point\" === this.layout.get(\"symbol-placement\")) {\n            var _t152 = this.layout.get(\"text-writing-mode\");\n\n            if (_t152) {\n              var _e147 = [];\n\n              var _iterator107 = _createForOfIteratorHelper(_t152),\n                  _step107;\n\n              try {\n                for (_iterator107.s(); !(_step107 = _iterator107.n()).done;) {\n                  var _r148 = _step107.value;\n                  _e147.indexOf(_r148) < 0 && _e147.push(_r148);\n                }\n              } catch (err) {\n                _iterator107.e(err);\n              } finally {\n                _iterator107.f();\n              }\n\n              this.layout._values[\"text-writing-mode\"] = _e147;\n            } else this.layout._values[\"text-writing-mode\"] = [\"horizontal\"];\n          }\n\n          this._setPaintOverrides();\n        }\n      }, {\n        key: \"getValueAndResolveTokens\",\n        value: function getValueAndResolveTokens(t, e, r, i) {\n          var n = this.layout.get(t).evaluate(e, {}, r, i),\n              s = this._unevaluatedLayout._values[t];\n          return s.isDataDriven() || Jr(s.value) || !n ? n : function (t, e) {\n            return e.replace(/{([^{}]+)}/g, function (e, r) {\n              return r in t ? String(t[r]) : \"\";\n            });\n          }(e.properties, n);\n        }\n      }, {\n        key: \"createBucket\",\n        value: function createBucket(t) {\n          return new Vc(t);\n        }\n      }, {\n        key: \"queryRadius\",\n        value: function queryRadius() {\n          return 0;\n        }\n      }, {\n        key: \"queryIntersectsFeature\",\n        value: function queryIntersectsFeature() {\n          return !1;\n        }\n      }, {\n        key: \"_setPaintOverrides\",\n        value: function _setPaintOverrides() {\n          var _iterator108 = _createForOfIteratorHelper(Rc.paint.overridableProperties),\n              _step108;\n\n          try {\n            for (_iterator108.s(); !(_step108 = _iterator108.n()).done;) {\n              var _t153 = _step108.value;\n              if (!Uc.hasPaintOverride(this.layout, _t153)) continue;\n\n              var _e148 = this.paint.get(_t153),\n                  _r149 = new Lc(_e148),\n                  _i114 = new Wr(_r149, _e148.property.specification);\n\n              var _n92 = null;\n              _n92 = \"constant\" === _e148.value.kind || \"source\" === _e148.value.kind ? new ti(\"source\", _i114) : new ei(\"composite\", _i114, _e148.value.zoomStops, _e148.value._interpolationType), this.paint._values[_t153] = new Hn(_e148.property, _n92, _e148.parameters);\n            }\n          } catch (err) {\n            _iterator108.e(err);\n          } finally {\n            _iterator108.f();\n          }\n        }\n      }, {\n        key: \"_handleOverridablePaintPropertyUpdate\",\n        value: function _handleOverridablePaintPropertyUpdate(t, e, r) {\n          return !(!this.layout || e.isDataDriven() || r.isDataDriven()) && Uc.hasPaintOverride(this.layout, t);\n        }\n      }, {\n        key: \"getProgramConfiguration\",\n        value: function getProgramConfiguration(t) {\n          return new la(this, t);\n        }\n      }], [{\n        key: \"hasPaintOverride\",\n        value: function hasPaintOverride(t, e) {\n          var r = t.get(\"text-field\"),\n              i = Rc.paint.properties[e];\n          var n = !1;\n\n          var s = function s(t) {\n            var _iterator109 = _createForOfIteratorHelper(t),\n                _step109;\n\n            try {\n              for (_iterator109.s(); !(_step109 = _iterator109.n()).done;) {\n                var _e149 = _step109.value;\n                if (i.overrides && i.overrides.hasOverride(_e149)) return void (n = !0);\n              }\n            } catch (err) {\n              _iterator109.e(err);\n            } finally {\n              _iterator109.f();\n            }\n          };\n\n          if (\"constant\" === r.value.kind && r.value.value instanceof he) s(r.value.value.sections);else if (\"source\" === r.value.kind) {\n            var _t154 = function _t154(e) {\n              n || (e instanceof ge && ye(e.value) === Jt ? s(e.value.sections) : e instanceof we ? s(e.sections) : e.eachChild(_t154));\n            },\n                _e150 = r.value;\n\n            _e150._styleExpression && _t154(_e150._styleExpression.expression);\n          }\n          return n;\n        }\n      }]);\n\n      return Uc;\n    }(pa);\n\n    var Oc = {\n      paint: new rs({\n        \"background-color\": new Wn(Ft.paint_background[\"background-color\"]),\n        \"background-pattern\": new ts(Ft.paint_background[\"background-pattern\"]),\n        \"background-opacity\": new Wn(Ft.paint_background[\"background-opacity\"])\n      })\n    },\n        $c = {\n      paint: new rs({\n        \"raster-opacity\": new Wn(Ft.paint_raster[\"raster-opacity\"]),\n        \"raster-hue-rotate\": new Wn(Ft.paint_raster[\"raster-hue-rotate\"]),\n        \"raster-brightness-min\": new Wn(Ft.paint_raster[\"raster-brightness-min\"]),\n        \"raster-brightness-max\": new Wn(Ft.paint_raster[\"raster-brightness-max\"]),\n        \"raster-saturation\": new Wn(Ft.paint_raster[\"raster-saturation\"]),\n        \"raster-contrast\": new Wn(Ft.paint_raster[\"raster-contrast\"]),\n        \"raster-resampling\": new Wn(Ft.paint_raster[\"raster-resampling\"]),\n        \"raster-fade-duration\": new Wn(Ft.paint_raster[\"raster-fade-duration\"])\n      })\n    };\n\n    var qc = /*#__PURE__*/function (_pa2) {\n      _inherits(qc, _pa2);\n\n      var _super49 = _createSuper(qc);\n\n      function qc(t) {\n        var _this23;\n\n        _classCallCheck(this, qc);\n\n        _this23 = _super49.call(this, t, {}), _this23.implementation = t;\n        return _this23;\n      }\n\n      _createClass(qc, [{\n        key: \"is3D\",\n        value: function is3D() {\n          return \"3d\" === this.implementation.renderingMode;\n        }\n      }, {\n        key: \"hasOffscreenPass\",\n        value: function hasOffscreenPass() {\n          return void 0 !== this.implementation.prerender;\n        }\n      }, {\n        key: \"recalculate\",\n        value: function recalculate() {}\n      }, {\n        key: \"updateTransitions\",\n        value: function updateTransitions() {}\n      }, {\n        key: \"hasTransition\",\n        value: function hasTransition() {}\n      }, {\n        key: \"serialize\",\n        value: function serialize() {}\n      }, {\n        key: \"onAdd\",\n        value: function onAdd(t) {\n          this.implementation.onAdd && this.implementation.onAdd(t, t.painter.context.gl);\n        }\n      }, {\n        key: \"onRemove\",\n        value: function onRemove(t) {\n          this.implementation.onRemove && this.implementation.onRemove(t, t.painter.context.gl);\n        }\n      }]);\n\n      return qc;\n    }(pa);\n\n    var Nc = {\n      paint: new rs({\n        \"sky-type\": new Wn(Ft.paint_sky[\"sky-type\"]),\n        \"sky-atmosphere-sun\": new Wn(Ft.paint_sky[\"sky-atmosphere-sun\"]),\n        \"sky-atmosphere-sun-intensity\": new Wn(Ft.paint_sky[\"sky-atmosphere-sun-intensity\"]),\n        \"sky-gradient-center\": new Wn(Ft.paint_sky[\"sky-gradient-center\"]),\n        \"sky-gradient-radius\": new Wn(Ft.paint_sky[\"sky-gradient-radius\"]),\n        \"sky-gradient\": new es(Ft.paint_sky[\"sky-gradient\"]),\n        \"sky-atmosphere-halo-color\": new Wn(Ft.paint_sky[\"sky-atmosphere-halo-color\"]),\n        \"sky-atmosphere-color\": new Wn(Ft.paint_sky[\"sky-atmosphere-color\"]),\n        \"sky-opacity\": new Wn(Ft.paint_sky[\"sky-opacity\"])\n      })\n    };\n\n    function jc(t, e, r) {\n      var i = Ka(0, 0, 1),\n          n = uo(lo());\n      return function (t, e, r) {\n        r *= .5;\n        var i = e[0],\n            n = e[1],\n            s = e[2],\n            a = e[3],\n            o = Math.sin(r),\n            l = Math.cos(r);\n        t[0] = i * l - s * o, t[1] = n * l + a * o, t[2] = s * l + i * o, t[3] = a * l - n * o;\n      }(n, n, r ? -c(t) + Math.PI : c(t)), co(n, n, -c(e)), io(i, i, n), Qa(i, i);\n    }\n\n    var Gc = {\n      circle: /*#__PURE__*/function (_pa3) {\n        _inherits(circle, _pa3);\n\n        var _super50 = _createSuper(circle);\n\n        function circle(t) {\n          _classCallCheck(this, circle);\n\n          return _super50.call(this, t, Ua);\n        }\n\n        _createClass(circle, [{\n          key: \"createBucket\",\n          value: function createBucket(t) {\n            return new wa(t);\n          }\n        }, {\n          key: \"queryRadius\",\n          value: function queryRadius(t) {\n            var e = t;\n            return Pa(\"circle-radius\", this, e) + Pa(\"circle-stroke-width\", this, e) + Va(this.paint.get(\"circle-translate\"));\n          }\n        }, {\n          key: \"queryIntersectsFeature\",\n          value: function queryIntersectsFeature(t, e, r, i, n, s, a, o) {\n            var _this24 = this;\n\n            var l = \"map\" === this.paint.get(\"circle-pitch-alignment\");\n            if (l && t.queryGeometry.isAboveHorizon) return !1;\n            var u = Ra(this.paint.get(\"circle-translate\"), this.paint.get(\"circle-translate-anchor\"), s.angle, t.pixelToTileUnitsFactor),\n                c = this.paint.get(\"circle-radius\").evaluate(e, r) + this.paint.get(\"circle-stroke-width\").evaluate(e, r),\n                h = l ? c * t.pixelToTileUnitsFactor : c;\n\n            var _iterator110 = _createForOfIteratorHelper(i),\n                _step110;\n\n            try {\n              for (_iterator110.s(); !(_step110 = _iterator110.n()).done;) {\n                var _e151 = _step110.value;\n\n                var _iterator111 = _createForOfIteratorHelper(_e151),\n                    _step111;\n\n                try {\n                  var _loop3 = function _loop3() {\n                    var r = _step111.value;\n                    var e = r.add(u),\n                        i = o && s.elevation ? s.elevation.exaggeration() * o.getElevationAt(e.x, e.y, !0) : 0,\n                        n = l ? e : fo(e, i, a),\n                        c = l ? t.tilespaceRays.map(function (t) {\n                      return go(t, i);\n                    }) : t.queryGeometry.screenGeometry;\n                    var p = h;\n                    var d = oo([], [r.x, r.y, i, 1], a);\n                    if (\"viewport\" === _this24.paint.get(\"circle-pitch-scale\") && \"map\" === _this24.paint.get(\"circle-pitch-alignment\") ? p *= d[3] / s.cameraToCenterDistance : \"map\" === _this24.paint.get(\"circle-pitch-scale\") && \"viewport\" === _this24.paint.get(\"circle-pitch-alignment\") && (p *= s.cameraToCenterDistance / d[3]), ka(c, n, p)) return {\n                      v: !0\n                    };\n                  };\n\n                  for (_iterator111.s(); !(_step111 = _iterator111.n()).done;) {\n                    var _ret = _loop3();\n\n                    if (_typeof(_ret) === \"object\") return _ret.v;\n                  }\n                } catch (err) {\n                  _iterator111.e(err);\n                } finally {\n                  _iterator111.f();\n                }\n              }\n            } catch (err) {\n              _iterator110.e(err);\n            } finally {\n              _iterator110.f();\n            }\n\n            return !1;\n          }\n        }, {\n          key: \"getProgramIds\",\n          value: function getProgramIds() {\n            return [\"circle\"];\n          }\n        }, {\n          key: \"getProgramConfiguration\",\n          value: function getProgramConfiguration(t) {\n            return new la(this, t);\n          }\n        }]);\n\n        return circle;\n      }(pa),\n      heatmap: /*#__PURE__*/function (_pa4) {\n        _inherits(heatmap, _pa4);\n\n        var _super51 = _createSuper(heatmap);\n\n        function heatmap(t) {\n          var _this25;\n\n          _classCallCheck(this, heatmap);\n\n          _this25 = _super51.call(this, t, Ao), _this25._updateColorRamp();\n          return _this25;\n        }\n\n        _createClass(heatmap, [{\n          key: \"createBucket\",\n          value: function createBucket(t) {\n            return new xo(t);\n          }\n        }, {\n          key: \"_handleSpecialPaintPropertyUpdate\",\n          value: function _handleSpecialPaintPropertyUpdate(t) {\n            \"heatmap-color\" === t && this._updateColorRamp();\n          }\n        }, {\n          key: \"_updateColorRamp\",\n          value: function _updateColorRamp() {\n            this.colorRamp = So({\n              expression: this._transitionablePaint._values[\"heatmap-color\"].value.expression,\n              evaluationKey: \"heatmapDensity\",\n              image: this.colorRamp\n            }), this.colorRampTexture = null;\n          }\n        }, {\n          key: \"resize\",\n          value: function resize() {\n            this.heatmapFbo && (this.heatmapFbo.destroy(), this.heatmapFbo = null);\n          }\n        }, {\n          key: \"queryRadius\",\n          value: function queryRadius() {\n            return 0;\n          }\n        }, {\n          key: \"queryIntersectsFeature\",\n          value: function queryIntersectsFeature() {\n            return !1;\n          }\n        }, {\n          key: \"hasOffscreenPass\",\n          value: function hasOffscreenPass() {\n            return 0 !== this.paint.get(\"heatmap-opacity\") && \"none\" !== this.visibility;\n          }\n        }, {\n          key: \"getProgramIds\",\n          value: function getProgramIds() {\n            return [\"heatmap\", \"heatmapTexture\"];\n          }\n        }, {\n          key: \"getProgramConfiguration\",\n          value: function getProgramConfiguration(t) {\n            return new la(this, t);\n          }\n        }]);\n\n        return heatmap;\n      }(pa),\n      hillshade: /*#__PURE__*/function (_pa5) {\n        _inherits(hillshade, _pa5);\n\n        var _super52 = _createSuper(hillshade);\n\n        function hillshade(t) {\n          _classCallCheck(this, hillshade);\n\n          return _super52.call(this, t, Io);\n        }\n\n        _createClass(hillshade, [{\n          key: \"hasOffscreenPass\",\n          value: function hasOffscreenPass() {\n            return 0 !== this.paint.get(\"hillshade-exaggeration\") && \"none\" !== this.visibility;\n          }\n        }, {\n          key: \"getProgramIds\",\n          value: function getProgramIds() {\n            return [\"hillshade\", \"hillshadePrepare\"];\n          }\n        }, {\n          key: \"getProgramConfiguration\",\n          value: function getProgramConfiguration(t) {\n            return new la(this, t);\n          }\n        }]);\n\n        return hillshade;\n      }(pa),\n      fill: /*#__PURE__*/function (_pa6) {\n        _inherits(fill, _pa6);\n\n        var _super53 = _createSuper(fill);\n\n        function fill(t) {\n          _classCallCheck(this, fill);\n\n          return _super53.call(this, t, pl);\n        }\n\n        _createClass(fill, [{\n          key: \"getProgramIds\",\n          value: function getProgramIds() {\n            var t = this.paint.get(\"fill-pattern\"),\n                e = t && t.constantOr(1),\n                r = [e ? \"fillPattern\" : \"fill\"];\n            return this.paint.get(\"fill-antialias\") && r.push(e && !this.getPaintProperty(\"fill-outline-color\") ? \"fillOutlinePattern\" : \"fillOutline\"), r;\n          }\n        }, {\n          key: \"getProgramConfiguration\",\n          value: function getProgramConfiguration(t) {\n            return new la(this, t);\n          }\n        }, {\n          key: \"recalculate\",\n          value: function recalculate(t, e) {\n            _get(_getPrototypeOf(fill.prototype), \"recalculate\", this).call(this, t, e);\n\n            var r = this.paint._values[\"fill-outline-color\"];\n            \"constant\" === r.value.kind && void 0 === r.value.value && (this.paint._values[\"fill-outline-color\"] = this.paint._values[\"fill-color\"]);\n          }\n        }, {\n          key: \"createBucket\",\n          value: function createBucket(t) {\n            return new cl(t);\n          }\n        }, {\n          key: \"queryRadius\",\n          value: function queryRadius() {\n            return Va(this.paint.get(\"fill-translate\"));\n          }\n        }, {\n          key: \"queryIntersectsFeature\",\n          value: function queryIntersectsFeature(t, e, r, i, n, s) {\n            return !t.queryGeometry.isAboveHorizon && Aa(Fa(t.tilespaceGeometry, this.paint.get(\"fill-translate\"), this.paint.get(\"fill-translate-anchor\"), s.angle, t.pixelToTileUnitsFactor), i);\n          }\n        }, {\n          key: \"isTileClipped\",\n          value: function isTileClipped() {\n            return !0;\n          }\n        }]);\n\n        return fill;\n      }(pa),\n      \"fill-extrusion\": /*#__PURE__*/function (_pa7) {\n        _inherits(fillExtrusion, _pa7);\n\n        var _super54 = _createSuper(fillExtrusion);\n\n        function fillExtrusion(t) {\n          _classCallCheck(this, fillExtrusion);\n\n          return _super54.call(this, t, Bl);\n        }\n\n        _createClass(fillExtrusion, [{\n          key: \"createBucket\",\n          value: function createBucket(t) {\n            return new El(t);\n          }\n        }, {\n          key: \"queryRadius\",\n          value: function queryRadius() {\n            return Va(this.paint.get(\"fill-extrusion-translate\"));\n          }\n        }, {\n          key: \"is3D\",\n          value: function is3D() {\n            return !0;\n          }\n        }, {\n          key: \"getProgramIds\",\n          value: function getProgramIds() {\n            return [this.paint.get(\"fill-extrusion-pattern\").constantOr(1) ? \"fillExtrusionPattern\" : \"fillExtrusion\"];\n          }\n        }, {\n          key: \"getProgramConfiguration\",\n          value: function getProgramConfiguration(t) {\n            return new la(this, t);\n          }\n        }, {\n          key: \"queryIntersectsFeature\",\n          value: function queryIntersectsFeature(t, e, r, n, s, a, o, l, u) {\n            var c = Ra(this.paint.get(\"fill-extrusion-translate\"), this.paint.get(\"fill-extrusion-translate-anchor\"), a.angle, t.pixelToTileUnitsFactor),\n                h = this.paint.get(\"fill-extrusion-height\").evaluate(e, r),\n                p = this.paint.get(\"fill-extrusion-base\").evaluate(e, r),\n                d = [0, 0],\n                f = l && a.elevation,\n                y = a.elevation ? a.elevation.exaggeration() : 1;\n\n            if (f) {\n              var _e152 = t.tile.getBucket(this).centroidVertexArray,\n                  _r150 = u + 1;\n\n              if (_r150 < _e152.length) {\n                var _t155 = _e152.get(_r150);\n\n                d[0] = _t155.a_centroid_pos0, d[1] = _t155.a_centroid_pos1;\n              }\n            }\n\n            if (0 === d[0] && 1 === d[1]) return !1;\n\n            var m = function (t, e, r, n, s, a, o, l, u) {\n              return a ? function (t, e, r, i, n, s, a, o, l) {\n                var u = [],\n                    c = [],\n                    h = [0, 0, 0];\n\n                var _iterator112 = _createForOfIteratorHelper(t),\n                    _step112;\n\n                try {\n                  for (_iterator112.s(); !(_step112 = _iterator112.n()).done;) {\n                    var _p8 = _step112.value;\n                    var _t156 = [],\n                        _d7 = [];\n\n                    var _iterator113 = _createForOfIteratorHelper(_p8),\n                        _step113;\n\n                    try {\n                      for (_iterator113.s(); !(_step113 = _iterator113.n()).done;) {\n                        var _u22 = _step113.value;\n\n                        var _c15 = _u22.x + i.x,\n                            _p9 = _u22.y + i.y,\n                            _f7 = Vl(_c15, _p9, e, r, s, a, o, l);\n\n                        h[0] = _c15, h[1] = _p9, h[2] = _f7.base;\n\n                        var _y7 = Pl(ro(h, h, n));\n\n                        h[0] = _c15, h[1] = _p9, h[2] = _f7.top;\n\n                        var _m8 = Pl(ro(h, h, n));\n\n                        _t156.push(_y7), _d7.push(_m8);\n                      }\n                    } catch (err) {\n                      _iterator113.e(err);\n                    } finally {\n                      _iterator113.f();\n                    }\n\n                    u.push(_t156), c.push(_d7);\n                  }\n                } catch (err) {\n                  _iterator112.e(err);\n                } finally {\n                  _iterator112.f();\n                }\n\n                return [u, c];\n              }(t, e, r, n, s, a, o, l, u) : function (t, e, r, n, s) {\n                var a = [],\n                    o = [],\n                    l = s[8] * e,\n                    u = s[9] * e,\n                    c = s[10] * e,\n                    h = s[11] * e,\n                    p = s[8] * r,\n                    d = s[9] * r,\n                    f = s[10] * r,\n                    y = s[11] * r;\n\n                var _iterator114 = _createForOfIteratorHelper(t),\n                    _step114;\n\n                try {\n                  for (_iterator114.s(); !(_step114 = _iterator114.n()).done;) {\n                    var _e153 = _step114.value;\n                    var _t157 = [],\n                        _r151 = [];\n\n                    var _iterator115 = _createForOfIteratorHelper(_e153),\n                        _step115;\n\n                    try {\n                      for (_iterator115.s(); !(_step115 = _iterator115.n()).done;) {\n                        var _a65 = _step115.value;\n\n                        var _e154 = _a65.x + n.x,\n                            _o33 = _a65.y + n.y,\n                            _m9 = s[0] * _e154 + s[4] * _o33 + s[12],\n                            _g7 = s[1] * _e154 + s[5] * _o33 + s[13],\n                            _x7 = s[2] * _e154 + s[6] * _o33 + s[14],\n                            _v7 = s[3] * _e154 + s[7] * _o33 + s[15],\n                            _b6 = _x7 + c,\n                            _w6 = _v7 + h,\n                            _8 = _m9 + p,\n                            _k6 = _g7 + d,\n                            _A6 = _x7 + f,\n                            _S4 = _v7 + y,\n                            _I2 = new i((_m9 + l) / _w6, (_g7 + u) / _w6);\n\n                        _I2.z = _b6 / _w6, _t157.push(_I2);\n\n                        var _T2 = new i(_8 / _S4, _k6 / _S4);\n\n                        _T2.z = _A6 / _S4, _r151.push(_T2);\n                      }\n                    } catch (err) {\n                      _iterator115.e(err);\n                    } finally {\n                      _iterator115.f();\n                    }\n\n                    a.push(_t157), o.push(_r151);\n                  }\n                } catch (err) {\n                  _iterator114.e(err);\n                } finally {\n                  _iterator114.f();\n                }\n\n                return [a, o];\n              }(t, e, r, n, s);\n            }(n, p, h, c, o, f ? l : null, d, y, a.center.lat),\n                g = t.queryGeometry;\n\n            return function (t, e, r) {\n              var i = 1 / 0;\n              Aa(r, e) && (i = Cl(r, e[0]));\n\n              for (var _n93 = 0; _n93 < e.length; _n93++) {\n                var _s72 = e[_n93],\n                    _a66 = t[_n93];\n\n                for (var _t158 = 0; _t158 < _s72.length - 1; _t158++) {\n                  var _e155 = _s72[_t158],\n                      _n94 = [_e155, _s72[_t158 + 1], _a66[_t158 + 1], _a66[_t158], _e155];\n                  _a(r, _n94) && (i = Math.min(i, Cl(r, _n94)));\n                }\n              }\n\n              return i !== 1 / 0 && i;\n            }(m[0], m[1], g.isPointQuery() ? g.screenBounds : g.screenGeometry);\n          }\n        }]);\n\n        return fillExtrusion;\n      }(pa),\n      line: /*#__PURE__*/function (_pa8) {\n        _inherits(line, _pa8);\n\n        var _super55 = _createSuper(line);\n\n        function line(t) {\n          var _this26;\n\n          _classCallCheck(this, line);\n\n          _this26 = _super55.call(this, t, jl), _this26.gradientVersion = 0;\n          return _this26;\n        }\n\n        _createClass(line, [{\n          key: \"_handleSpecialPaintPropertyUpdate\",\n          value: function _handleSpecialPaintPropertyUpdate(t) {\n            \"line-gradient\" === t && (this.stepInterpolant = this._transitionablePaint._values[\"line-gradient\"].value.expression._styleExpression.expression instanceof We, this.gradientVersion = (this.gradientVersion + 1) % o);\n          }\n        }, {\n          key: \"gradientExpression\",\n          value: function gradientExpression() {\n            return this._transitionablePaint._values[\"line-gradient\"].value.expression;\n          }\n        }, {\n          key: \"recalculate\",\n          value: function recalculate(t, e) {\n            _get(_getPrototypeOf(line.prototype), \"recalculate\", this).call(this, t, e), this.paint._values[\"line-floorwidth\"] = Gl.possiblyEvaluate(this._transitioningPaint._values[\"line-width\"].value, t);\n          }\n        }, {\n          key: \"createBucket\",\n          value: function createBucket(t) {\n            return new ql(t);\n          }\n        }, {\n          key: \"getProgramIds\",\n          value: function getProgramIds() {\n            var t = this.paint.get(\"line-dasharray\"),\n                e = this.paint.get(\"line-pattern\").constantOr(1),\n                r = this.paint.get(\"line-gradient\");\n            return [e ? \"linePattern\" : t ? \"lineSDF\" : r ? \"lineGradient\" : \"line\"];\n          }\n        }, {\n          key: \"getProgramConfiguration\",\n          value: function getProgramConfiguration(t) {\n            return new la(this, t);\n          }\n        }, {\n          key: \"queryRadius\",\n          value: function queryRadius(t) {\n            var e = t,\n                r = Zl(Pa(\"line-width\", this, e), Pa(\"line-gap-width\", this, e)),\n                i = Pa(\"line-offset\", this, e);\n            return r / 2 + Math.abs(i) + Va(this.paint.get(\"line-translate\"));\n          }\n        }, {\n          key: \"queryIntersectsFeature\",\n          value: function queryIntersectsFeature(t, e, r, n, s, a) {\n            if (t.queryGeometry.isAboveHorizon) return !1;\n            var o = Fa(t.tilespaceGeometry, this.paint.get(\"line-translate\"), this.paint.get(\"line-translate-anchor\"), a.angle, t.pixelToTileUnitsFactor),\n                l = t.pixelToTileUnitsFactor / 2 * Zl(this.paint.get(\"line-width\").evaluate(e, r), this.paint.get(\"line-gap-width\").evaluate(e, r)),\n                u = this.paint.get(\"line-offset\").evaluate(e, r);\n            return u && (n = function (t, e) {\n              var r = [],\n                  n = new i(0, 0);\n\n              for (var _i115 = 0; _i115 < t.length; _i115++) {\n                var _s73 = t[_i115],\n                    _a67 = [];\n\n                for (var _t159 = 0; _t159 < _s73.length; _t159++) {\n                  var _r152 = _s73[_t159 - 1],\n                      _i116 = _s73[_t159],\n                      _o34 = _s73[_t159 + 1],\n                      _l25 = 0 === _t159 ? n : _i116.sub(_r152)._unit()._perp(),\n                      _u23 = _t159 === _s73.length - 1 ? n : _o34.sub(_i116)._unit()._perp(),\n                      _c16 = _l25._add(_u23)._unit();\n\n                  _c16._mult(1 / (_c16.x * _u23.x + _c16.y * _u23.y)), _a67.push(_c16._mult(e)._add(_i116));\n                }\n\n                r.push(_a67);\n              }\n\n              return r;\n            }(n, u * t.pixelToTileUnitsFactor)), function (t, e, r) {\n              for (var _i117 = 0; _i117 < e.length; _i117++) {\n                var _n95 = e[_i117];\n                if (t.length >= 3) for (var _e156 = 0; _e156 < _n95.length; _e156++) {\n                  if (Ba(t, _n95[_e156])) return !0;\n                }\n                if (Sa(t, _n95, r)) return !0;\n              }\n\n              return !1;\n            }(o, n, l);\n          }\n        }, {\n          key: \"isTileClipped\",\n          value: function isTileClipped() {\n            return !0;\n          }\n        }]);\n\n        return line;\n      }(pa),\n      symbol: Uc,\n      background: /*#__PURE__*/function (_pa9) {\n        _inherits(background, _pa9);\n\n        var _super56 = _createSuper(background);\n\n        function background(t) {\n          _classCallCheck(this, background);\n\n          return _super56.call(this, t, Oc);\n        }\n\n        _createClass(background, [{\n          key: \"getProgramIds\",\n          value: function getProgramIds() {\n            return [this.paint.get(\"background-pattern\") ? \"backgroundPattern\" : \"background\"];\n          }\n        }]);\n\n        return background;\n      }(pa),\n      raster: /*#__PURE__*/function (_pa10) {\n        _inherits(raster, _pa10);\n\n        var _super57 = _createSuper(raster);\n\n        function raster(t) {\n          _classCallCheck(this, raster);\n\n          return _super57.call(this, t, $c);\n        }\n\n        _createClass(raster, [{\n          key: \"getProgramIds\",\n          value: function getProgramIds() {\n            return [\"raster\"];\n          }\n        }]);\n\n        return raster;\n      }(pa),\n      sky: /*#__PURE__*/function (_pa11) {\n        _inherits(sky, _pa11);\n\n        var _super58 = _createSuper(sky);\n\n        function sky(t) {\n          var _this27;\n\n          _classCallCheck(this, sky);\n\n          _this27 = _super58.call(this, t, Nc), _this27._updateColorRamp();\n          return _this27;\n        }\n\n        _createClass(sky, [{\n          key: \"_handleSpecialPaintPropertyUpdate\",\n          value: function _handleSpecialPaintPropertyUpdate(t) {\n            \"sky-gradient\" === t ? this._updateColorRamp() : \"sky-atmosphere-sun\" !== t && \"sky-atmosphere-halo-color\" !== t && \"sky-atmosphere-color\" !== t && \"sky-atmosphere-sun-intensity\" !== t || (this._skyboxInvalidated = !0);\n          }\n        }, {\n          key: \"_updateColorRamp\",\n          value: function _updateColorRamp() {\n            this.colorRamp = So({\n              expression: this._transitionablePaint._values[\"sky-gradient\"].value.expression,\n              evaluationKey: \"skyRadialProgress\"\n            }), this.colorRampTexture && (this.colorRampTexture.destroy(), this.colorRampTexture = null);\n          }\n        }, {\n          key: \"needsSkyboxCapture\",\n          value: function needsSkyboxCapture(t) {\n            if (this._skyboxInvalidated || !this.skyboxTexture || !this.skyboxGeometry) return !0;\n\n            if (!this.paint.get(\"sky-atmosphere-sun\")) {\n              var _e157 = t.style.light.properties.get(\"position\");\n\n              return this._lightPosition.azimuthal !== _e157.azimuthal || this._lightPosition.polar !== _e157.polar;\n            }\n          }\n        }, {\n          key: \"getCenter\",\n          value: function getCenter(t, e) {\n            var r = this.paint.get(\"sky-type\");\n\n            if (\"atmosphere\" === r) {\n              var _r153 = this.paint.get(\"sky-atmosphere-sun\"),\n                  _i118 = !_r153,\n                  _n96 = t.style.light,\n                  _s74 = _n96.properties.get(\"position\");\n\n              return _i118 && \"viewport\" === _n96.properties.get(\"anchor\") && E(\"The sun direction is attached to a light with viewport anchor, lighting may behave unexpectedly.\"), _i118 ? jc(_s74.azimuthal, 90 - _s74.polar, e) : jc(_r153[0], 90 - _r153[1], e);\n            }\n\n            if (\"gradient\" === r) {\n              var _t160 = this.paint.get(\"sky-gradient-center\");\n\n              return jc(_t160[0], 90 - _t160[1], e);\n            }\n          }\n        }, {\n          key: \"is3D\",\n          value: function is3D() {\n            return !1;\n          }\n        }, {\n          key: \"isSky\",\n          value: function isSky() {\n            return !0;\n          }\n        }, {\n          key: \"markSkyboxValid\",\n          value: function markSkyboxValid(t) {\n            this._skyboxInvalidated = !1, this._lightPosition = t.style.light.properties.get(\"position\");\n          }\n        }, {\n          key: \"hasOffscreenPass\",\n          value: function hasOffscreenPass() {\n            return !0;\n          }\n        }, {\n          key: \"getProgramIds\",\n          value: function getProgramIds() {\n            var t = this.paint.get(\"sky-type\");\n            return \"atmosphere\" === t ? [\"skyboxCapture\", \"skybox\"] : \"gradient\" === t ? [\"skyboxGradient\"] : null;\n          }\n        }]);\n\n        return sky;\n      }(pa)\n    },\n        Zc = s.HTMLImageElement,\n        Xc = s.HTMLCanvasElement,\n        Kc = s.HTMLVideoElement,\n        Hc = s.ImageData,\n        Yc = s.ImageBitmap;\n\n    var Wc = /*#__PURE__*/function () {\n      function Wc(t, e, r, i) {\n        _classCallCheck(this, Wc);\n\n        this.context = t, this.format = r, this.texture = t.gl.createTexture(), this.update(e, i);\n      }\n\n      _createClass(Wc, [{\n        key: \"update\",\n        value: function update(t, e, r) {\n          var i = t.width,\n              n = t.height,\n              s = !(this.size && this.size[0] === i && this.size[1] === n || r),\n              a = this.context,\n              o = a.gl;\n          if (this.useMipmap = Boolean(e && e.useMipmap), o.bindTexture(o.TEXTURE_2D, this.texture), a.pixelStoreUnpackFlipY.set(!1), a.pixelStoreUnpack.set(1), a.pixelStoreUnpackPremultiplyAlpha.set(this.format === o.RGBA && (!e || !1 !== e.premultiply)), s) this.size = [i, n], t instanceof Zc || t instanceof Xc || t instanceof Kc || t instanceof Hc || Yc && t instanceof Yc ? o.texImage2D(o.TEXTURE_2D, 0, this.format, this.format, o.UNSIGNED_BYTE, t) : o.texImage2D(o.TEXTURE_2D, 0, this.format, i, n, 0, this.format, o.UNSIGNED_BYTE, t.data);else {\n            var _ref160 = r || {\n              x: 0,\n              y: 0\n            },\n                _e158 = _ref160.x,\n                _s75 = _ref160.y;\n\n            t instanceof Zc || t instanceof Xc || t instanceof Kc || t instanceof Hc || Yc && t instanceof Yc ? o.texSubImage2D(o.TEXTURE_2D, 0, _e158, _s75, o.RGBA, o.UNSIGNED_BYTE, t) : o.texSubImage2D(o.TEXTURE_2D, 0, _e158, _s75, i, n, o.RGBA, o.UNSIGNED_BYTE, t.data);\n          }\n          this.useMipmap && this.isSizePowerOfTwo() && o.generateMipmap(o.TEXTURE_2D);\n        }\n      }, {\n        key: \"bind\",\n        value: function bind(t, e, r) {\n          var i = this.context,\n              n = i.gl;\n          n.bindTexture(n.TEXTURE_2D, this.texture), r !== n.LINEAR_MIPMAP_NEAREST || this.isSizePowerOfTwo() || (r = n.LINEAR), t !== this.filter && (n.texParameteri(n.TEXTURE_2D, n.TEXTURE_MAG_FILTER, t), n.texParameteri(n.TEXTURE_2D, n.TEXTURE_MIN_FILTER, r || t), this.filter = t), e !== this.wrap && (n.texParameteri(n.TEXTURE_2D, n.TEXTURE_WRAP_S, e), n.texParameteri(n.TEXTURE_2D, n.TEXTURE_WRAP_T, e), this.wrap = e);\n        }\n      }, {\n        key: \"isSizePowerOfTwo\",\n        value: function isSizePowerOfTwo() {\n          return this.size[0] === this.size[1] && Math.log(this.size[0]) / Math.LN2 % 1 == 0;\n        }\n      }, {\n        key: \"destroy\",\n        value: function destroy() {\n          var t = this.context.gl;\n          t.deleteTexture(this.texture), this.texture = null;\n        }\n      }]);\n\n      return Wc;\n    }();\n\n    var Jc = /*#__PURE__*/function () {\n      function Jc(t) {\n        var _this28 = this;\n\n        _classCallCheck(this, Jc);\n\n        this._callback = t, this._triggered = !1, \"undefined\" != typeof MessageChannel && (this._channel = new MessageChannel(), this._channel.port2.onmessage = function () {\n          _this28._triggered = !1, _this28._callback();\n        });\n      }\n\n      _createClass(Jc, [{\n        key: \"trigger\",\n        value: function trigger() {\n          var _this29 = this;\n\n          this._triggered || (this._triggered = !0, this._channel ? this._channel.port1.postMessage(!0) : setTimeout(function () {\n            _this29._triggered = !1, _this29._callback();\n          }, 0));\n        }\n      }, {\n        key: \"remove\",\n        value: function remove() {\n          delete this._channel, this._callback = function () {};\n        }\n      }]);\n\n      return Jc;\n    }();\n\n    var Qc = s.performance;\n\n    var th = /*#__PURE__*/function () {\n      function th(t) {\n        _classCallCheck(this, th);\n\n        this._marks = {\n          start: [t.url, \"start\"].join(\"#\"),\n          end: [t.url, \"end\"].join(\"#\"),\n          measure: t.url.toString()\n        }, Qc.mark(this._marks.start);\n      }\n\n      _createClass(th, [{\n        key: \"finish\",\n        value: function finish() {\n          Qc.mark(this._marks.end);\n          var t = Qc.getEntriesByName(this._marks.measure);\n          return 0 === t.length && (Qc.measure(this._marks.measure, this._marks.start, this._marks.end), t = Qc.getEntriesByName(this._marks.measure), Qc.clearMarks(this._marks.start), Qc.clearMarks(this._marks.end), Qc.clearMeasures(this._marks.measure)), t;\n        }\n      }]);\n\n      return th;\n    }();\n\n    var eh = /*#__PURE__*/function () {\n      function eh() {\n        _classCallCheck(this, eh);\n\n        this.tasks = {}, this.taskQueue = [], k([\"process\"], this), this.invoker = new Jc(this.process), this.nextId = 0;\n      }\n\n      _createClass(eh, [{\n        key: \"add\",\n        value: function add(t, e) {\n          var _this30 = this;\n\n          var r = this.nextId++;\n          return this.tasks[r] = {\n            fn: t,\n            metadata: e,\n            priority: rh(e),\n            id: r\n          }, this.taskQueue.push(r), this.invoker.trigger(), {\n            cancel: function cancel() {\n              delete _this30.tasks[r];\n            }\n          };\n        }\n      }, {\n        key: \"process\",\n        value: function process() {\n          var _this31 = this;\n\n          D();\n\n          try {\n            if (this.taskQueue = this.taskQueue.filter(function (t) {\n              return !!_this31.tasks[t];\n            }), !this.taskQueue.length) return;\n\n            var _t161 = this.pick();\n\n            if (null === _t161) return;\n            var _e159 = this.tasks[_t161];\n            if (delete this.tasks[_t161], this.taskQueue.length && this.invoker.trigger(), !_e159) return;\n\n            _e159.fn();\n          } finally {}\n        }\n      }, {\n        key: \"pick\",\n        value: function pick() {\n          var t = null,\n              e = 1 / 0;\n\n          for (var _r154 = 0; _r154 < this.taskQueue.length; _r154++) {\n            var _i119 = this.tasks[this.taskQueue[_r154]];\n            _i119.priority < e && (e = _i119.priority, t = _r154);\n          }\n\n          if (null === t) return null;\n          var r = this.taskQueue[t];\n          return this.taskQueue.splice(t, 1), r;\n        }\n      }, {\n        key: \"remove\",\n        value: function remove() {\n          this.invoker.remove();\n        }\n      }]);\n\n      return eh;\n    }();\n\n    function rh(_ref161) {\n      var t = _ref161.type,\n          e = _ref161.isSymbolTile,\n          r = _ref161.zoom;\n      return r = r || 0, \"message\" === t ? 0 : \"maybePrepare\" !== t || e ? \"parseTile\" !== t || e ? \"parseTile\" === t && e ? 300 - r : \"maybePrepare\" === t && e ? 400 - r : 500 : 200 - r : 100 - r;\n    }\n\n    var ih = /*#__PURE__*/function () {\n      function ih(t, e) {\n        _classCallCheck(this, ih);\n\n        t && (e ? this.setSouthWest(t).setNorthEast(e) : 4 === t.length ? this.setSouthWest([t[0], t[1]]).setNorthEast([t[2], t[3]]) : this.setSouthWest(t[0]).setNorthEast(t[1]));\n      }\n\n      _createClass(ih, [{\n        key: \"setNorthEast\",\n        value: function setNorthEast(t) {\n          return this._ne = t instanceof nh ? new nh(t.lng, t.lat) : nh.convert(t), this;\n        }\n      }, {\n        key: \"setSouthWest\",\n        value: function setSouthWest(t) {\n          return this._sw = t instanceof nh ? new nh(t.lng, t.lat) : nh.convert(t), this;\n        }\n      }, {\n        key: \"extend\",\n        value: function extend(t) {\n          var e = this._sw,\n              r = this._ne;\n          var i, n;\n          if (t instanceof nh) i = t, n = t;else {\n            if (!(t instanceof ih)) return Array.isArray(t) ? 4 === t.length || t.every(Array.isArray) ? this.extend(ih.convert(t)) : this.extend(nh.convert(t)) : this;\n            if (i = t._sw, n = t._ne, !i || !n) return this;\n          }\n          return e || r ? (e.lng = Math.min(i.lng, e.lng), e.lat = Math.min(i.lat, e.lat), r.lng = Math.max(n.lng, r.lng), r.lat = Math.max(n.lat, r.lat)) : (this._sw = new nh(i.lng, i.lat), this._ne = new nh(n.lng, n.lat)), this;\n        }\n      }, {\n        key: \"getCenter\",\n        value: function getCenter() {\n          return new nh((this._sw.lng + this._ne.lng) / 2, (this._sw.lat + this._ne.lat) / 2);\n        }\n      }, {\n        key: \"getSouthWest\",\n        value: function getSouthWest() {\n          return this._sw;\n        }\n      }, {\n        key: \"getNorthEast\",\n        value: function getNorthEast() {\n          return this._ne;\n        }\n      }, {\n        key: \"getNorthWest\",\n        value: function getNorthWest() {\n          return new nh(this.getWest(), this.getNorth());\n        }\n      }, {\n        key: \"getSouthEast\",\n        value: function getSouthEast() {\n          return new nh(this.getEast(), this.getSouth());\n        }\n      }, {\n        key: \"getWest\",\n        value: function getWest() {\n          return this._sw.lng;\n        }\n      }, {\n        key: \"getSouth\",\n        value: function getSouth() {\n          return this._sw.lat;\n        }\n      }, {\n        key: \"getEast\",\n        value: function getEast() {\n          return this._ne.lng;\n        }\n      }, {\n        key: \"getNorth\",\n        value: function getNorth() {\n          return this._ne.lat;\n        }\n      }, {\n        key: \"toArray\",\n        value: function toArray() {\n          return [this._sw.toArray(), this._ne.toArray()];\n        }\n      }, {\n        key: \"toString\",\n        value: function toString() {\n          return \"LngLatBounds(\".concat(this._sw.toString(), \", \").concat(this._ne.toString(), \")\");\n        }\n      }, {\n        key: \"isEmpty\",\n        value: function isEmpty() {\n          return !(this._sw && this._ne);\n        }\n      }, {\n        key: \"contains\",\n        value: function contains(t) {\n          var _nh$convert = nh.convert(t),\n              e = _nh$convert.lng,\n              r = _nh$convert.lat;\n\n          var i = this._sw.lng <= e && e <= this._ne.lng;\n          return this._sw.lng > this._ne.lng && (i = this._sw.lng >= e && e >= this._ne.lng), this._sw.lat <= r && r <= this._ne.lat && i;\n        }\n      }], [{\n        key: \"convert\",\n        value: function convert(t) {\n          return !t || t instanceof ih ? t : new ih(t);\n        }\n      }]);\n\n      return ih;\n    }();\n\n    var nh = /*#__PURE__*/function () {\n      function nh(t, e) {\n        _classCallCheck(this, nh);\n\n        if (isNaN(t) || isNaN(e)) throw new Error(\"Invalid LngLat object: (\".concat(t, \", \").concat(e, \")\"));\n        if (this.lng = +t, this.lat = +e, this.lat > 90 || this.lat < -90) throw new Error(\"Invalid LngLat latitude value: must be between -90 and 90\");\n      }\n\n      _createClass(nh, [{\n        key: \"wrap\",\n        value: function wrap() {\n          return new nh(y(this.lng, -180, 180), this.lat);\n        }\n      }, {\n        key: \"toArray\",\n        value: function toArray() {\n          return [this.lng, this.lat];\n        }\n      }, {\n        key: \"toString\",\n        value: function toString() {\n          return \"LngLat(\".concat(this.lng, \", \").concat(this.lat, \")\");\n        }\n      }, {\n        key: \"distanceTo\",\n        value: function distanceTo(t) {\n          var e = Math.PI / 180,\n              r = this.lat * e,\n              i = t.lat * e,\n              n = Math.sin(r) * Math.sin(i) + Math.cos(r) * Math.cos(i) * Math.cos((t.lng - this.lng) * e);\n          return 6371008.8 * Math.acos(Math.min(n, 1));\n        }\n      }, {\n        key: \"toBounds\",\n        value: function toBounds() {\n          var t = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n          var e = 360 * t / 40075017,\n              r = e / Math.cos(Math.PI / 180 * this.lat);\n          return new ih(new nh(this.lng - r, this.lat - e), new nh(this.lng + r, this.lat + e));\n        }\n      }], [{\n        key: \"convert\",\n        value: function convert(t) {\n          if (t instanceof nh) return t;\n          if (Array.isArray(t) && (2 === t.length || 3 === t.length)) return new nh(Number(t[0]), Number(t[1]));\n          if (!Array.isArray(t) && \"object\" == _typeof(t) && null !== t) return new nh(Number(\"lng\" in t ? t.lng : t.lon), Number(t.lat));\n          throw new Error(\"`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]\");\n        }\n      }]);\n\n      return nh;\n    }();\n\n    var sh = 2 * Math.PI * 6371008.8;\n\n    function ah(t) {\n      return sh * Math.cos(t * Math.PI / 180);\n    }\n\n    function oh(t) {\n      return (180 + t) / 360;\n    }\n\n    function lh(t) {\n      return (180 - 180 / Math.PI * Math.log(Math.tan(Math.PI / 4 + t * Math.PI / 360))) / 360;\n    }\n\n    function uh(t, e) {\n      return t / ah(e);\n    }\n\n    function ch(t) {\n      return 360 / Math.PI * Math.atan(Math.exp((180 - 360 * t) * Math.PI / 180)) - 90;\n    }\n\n    function hh(t, e) {\n      return t * ah(ch(e));\n    }\n\n    var ph = /*#__PURE__*/function () {\n      function ph(t, e) {\n        var r = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0;\n\n        _classCallCheck(this, ph);\n\n        this.x = +t, this.y = +e, this.z = +r;\n      }\n\n      _createClass(ph, [{\n        key: \"toLngLat\",\n        value: function toLngLat() {\n          return new nh(360 * this.x - 180, ch(this.y));\n        }\n      }, {\n        key: \"toAltitude\",\n        value: function toAltitude() {\n          return hh(this.z, this.y);\n        }\n      }, {\n        key: \"meterInMercatorCoordinateUnits\",\n        value: function meterInMercatorCoordinateUnits() {\n          return 1 / sh * (t = ch(this.y), 1 / Math.cos(t * Math.PI / 180));\n          var t;\n        }\n      }], [{\n        key: \"fromLngLat\",\n        value: function fromLngLat(t) {\n          var e = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n          var r = nh.convert(t);\n          return new ph(oh(r.lng), lh(r.lat), uh(e, r.lat));\n        }\n      }]);\n\n      return ph;\n    }();\n\n    function dh(t, e, r) {\n      var i = 2 * Math.PI * 6378137 / 256 / Math.pow(2, r);\n      return [t * i - 2 * Math.PI * 6378137 / 2, e * i - 2 * Math.PI * 6378137 / 2];\n    }\n\n    var fh = /*#__PURE__*/function () {\n      function fh(t, e, r) {\n        _classCallCheck(this, fh);\n\n        this.z = t, this.x = e, this.y = r, this.key = gh(0, t, t, e, r);\n      }\n\n      _createClass(fh, [{\n        key: \"equals\",\n        value: function equals(t) {\n          return this.z === t.z && this.x === t.x && this.y === t.y;\n        }\n      }, {\n        key: \"url\",\n        value: function url(t, e) {\n          var r = (n = this.y, s = this.z, a = dh(256 * (i = this.x), 256 * (n = Math.pow(2, s) - n - 1), s), o = dh(256 * (i + 1), 256 * (n + 1), s), a[0] + \",\" + a[1] + \",\" + o[0] + \",\" + o[1]);\n          var i, n, s, a, o;\n\n          var l = function (t, e, r) {\n            var i,\n                n = \"\";\n\n            for (var _s76 = t; _s76 > 0; _s76--) {\n              i = 1 << _s76 - 1, n += (e & i ? 1 : 0) + (r & i ? 2 : 0);\n            }\n\n            return n;\n          }(this.z, this.x, this.y);\n\n          return t[(this.x + this.y) % t.length].replace(\"{prefix}\", (this.x % 16).toString(16) + (this.y % 16).toString(16)).replace(\"{z}\", String(this.z)).replace(\"{x}\", String(this.x)).replace(\"{y}\", String(\"tms\" === e ? Math.pow(2, this.z) - this.y - 1 : this.y)).replace(\"{quadkey}\", l).replace(\"{bbox-epsg-3857}\", r);\n        }\n      }, {\n        key: \"getTilePoint\",\n        value: function getTilePoint(t) {\n          var e = Math.pow(2, this.z);\n          return new i(8192 * (t.x * e - this.x), 8192 * (t.y * e - this.y));\n        }\n      }, {\n        key: \"getTileVec3\",\n        value: function getTileVec3(t) {\n          var e = Math.pow(2, this.z);\n          return Ka(8192 * (t.x * e - this.x), 8192 * (t.y * e - this.y), hh(t.z, t.y));\n        }\n      }, {\n        key: \"toString\",\n        value: function toString() {\n          return \"\".concat(this.z, \"/\").concat(this.x, \"/\").concat(this.y);\n        }\n      }]);\n\n      return fh;\n    }();\n\n    var yh = function yh(t, e) {\n      _classCallCheck(this, yh);\n\n      this.wrap = t, this.canonical = e, this.key = gh(t, e.z, e.z, e.x, e.y);\n    };\n\n    var mh = /*#__PURE__*/function () {\n      function mh(t, e, r, i, n) {\n        _classCallCheck(this, mh);\n\n        this.overscaledZ = t, this.wrap = e, this.canonical = new fh(r, +i, +n), this.key = 0 === e && t === r ? this.canonical.key : gh(e, t, r, i, n);\n      }\n\n      _createClass(mh, [{\n        key: \"equals\",\n        value: function equals(t) {\n          return this.overscaledZ === t.overscaledZ && this.wrap === t.wrap && this.canonical.equals(t.canonical);\n        }\n      }, {\n        key: \"scaledTo\",\n        value: function scaledTo(t) {\n          var e = this.canonical.z - t;\n          return t > this.canonical.z ? new mh(t, this.wrap, this.canonical.z, this.canonical.x, this.canonical.y) : new mh(t, this.wrap, t, this.canonical.x >> e, this.canonical.y >> e);\n        }\n      }, {\n        key: \"calculateScaledKey\",\n        value: function calculateScaledKey(t) {\n          var e = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : !0;\n          if (this.overscaledZ === t && e) return this.key;\n          if (t > this.canonical.z) return gh(this.wrap * +e, t, this.canonical.z, this.canonical.x, this.canonical.y);\n          {\n            var _r155 = this.canonical.z - t;\n\n            return gh(this.wrap * +e, t, t, this.canonical.x >> _r155, this.canonical.y >> _r155);\n          }\n        }\n      }, {\n        key: \"isChildOf\",\n        value: function isChildOf(t) {\n          if (t.wrap !== this.wrap) return !1;\n          var e = this.canonical.z - t.canonical.z;\n          return 0 === t.overscaledZ || t.overscaledZ < this.overscaledZ && t.canonical.x === this.canonical.x >> e && t.canonical.y === this.canonical.y >> e;\n        }\n      }, {\n        key: \"children\",\n        value: function children(t) {\n          if (this.overscaledZ >= t) return [new mh(this.overscaledZ + 1, this.wrap, this.canonical.z, this.canonical.x, this.canonical.y)];\n          var e = this.canonical.z + 1,\n              r = 2 * this.canonical.x,\n              i = 2 * this.canonical.y;\n          return [new mh(e, this.wrap, e, r, i), new mh(e, this.wrap, e, r + 1, i), new mh(e, this.wrap, e, r, i + 1), new mh(e, this.wrap, e, r + 1, i + 1)];\n        }\n      }, {\n        key: \"isLessThan\",\n        value: function isLessThan(t) {\n          return this.wrap < t.wrap || !(this.wrap > t.wrap) && (this.overscaledZ < t.overscaledZ || !(this.overscaledZ > t.overscaledZ) && (this.canonical.x < t.canonical.x || !(this.canonical.x > t.canonical.x) && this.canonical.y < t.canonical.y));\n        }\n      }, {\n        key: \"wrapped\",\n        value: function wrapped() {\n          return new mh(this.overscaledZ, 0, this.canonical.z, this.canonical.x, this.canonical.y);\n        }\n      }, {\n        key: \"unwrapTo\",\n        value: function unwrapTo(t) {\n          return new mh(this.overscaledZ, t, this.canonical.z, this.canonical.x, this.canonical.y);\n        }\n      }, {\n        key: \"overscaleFactor\",\n        value: function overscaleFactor() {\n          return Math.pow(2, this.overscaledZ - this.canonical.z);\n        }\n      }, {\n        key: \"toUnwrapped\",\n        value: function toUnwrapped() {\n          return new yh(this.wrap, this.canonical);\n        }\n      }, {\n        key: \"toString\",\n        value: function toString() {\n          return \"\".concat(this.overscaledZ, \"/\").concat(this.canonical.x, \"/\").concat(this.canonical.y);\n        }\n      }, {\n        key: \"getTilePoint\",\n        value: function getTilePoint(t) {\n          return this.canonical.getTilePoint(new ph(t.x - this.wrap, t.y));\n        }\n      }, {\n        key: \"getTileVec3\",\n        value: function getTileVec3(t) {\n          return this.canonical.getTileVec3(new ph(t.x - this.wrap, t.y, t.z));\n        }\n      }]);\n\n      return mh;\n    }();\n\n    function gh(t, e, r, i, n) {\n      var s = 1 << Math.min(r, 22);\n      var a = s * (n % s) + i % s;\n      return t && r < 22 && (a += s * s * ((t < 0 ? -2 * t - 1 : 2 * t) % (1 << 2 * (22 - r)))), 16 * (32 * a + r) + (e - r);\n    }\n\n    Gi(\"CanonicalTileID\", fh), Gi(\"OverscaledTileID\", mh, {\n      omit: [\"posMatrix\"]\n    });\n\n    var xh = /*#__PURE__*/function () {\n      function xh(t) {\n        _classCallCheck(this, xh);\n\n        this._stringToNumber = {}, this._numberToString = [];\n\n        for (var _e160 = 0; _e160 < t.length; _e160++) {\n          var _r156 = t[_e160];\n          this._stringToNumber[_r156] = _e160, this._numberToString[_e160] = _r156;\n        }\n      }\n\n      _createClass(xh, [{\n        key: \"encode\",\n        value: function encode(t) {\n          return this._stringToNumber[t];\n        }\n      }, {\n        key: \"decode\",\n        value: function decode(t) {\n          return this._numberToString[t];\n        }\n      }]);\n\n      return xh;\n    }();\n\n    var vh = /*#__PURE__*/function () {\n      function vh(t, e, r, i, n) {\n        _classCallCheck(this, vh);\n\n        this.type = \"Feature\", this._vectorTileFeature = t, t._z = e, t._x = r, t._y = i, this.properties = t.properties, this.id = n;\n      }\n\n      _createClass(vh, [{\n        key: \"geometry\",\n        get: function get() {\n          return void 0 === this._geometry && (this._geometry = this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x, this._vectorTileFeature._y, this._vectorTileFeature._z).geometry), this._geometry;\n        },\n        set: function set(t) {\n          this._geometry = t;\n        }\n      }, {\n        key: \"toJSON\",\n        value: function toJSON() {\n          var t = {\n            geometry: this.geometry\n          };\n\n          for (var _e161 in this) {\n            \"_geometry\" !== _e161 && \"_vectorTileFeature\" !== _e161 && (t[_e161] = this[_e161]);\n          }\n\n          return t;\n        }\n      }]);\n\n      return vh;\n    }();\n\n    var bh = os([{\n      name: \"a_pos\",\n      type: \"Int16\",\n      components: 2\n    }]);\n\n    var wh = /*#__PURE__*/function () {\n      function wh(t, e, r) {\n        _classCallCheck(this, wh);\n\n        this.tileID = t, this.uid = b(), this.uses = 0, this.tileSize = e, this.tileZoom = r, this.buckets = {}, this.expirationTime = null, this.queryPadding = 0, this.hasSymbolBuckets = !1, this.hasRTLText = !1, this.dependencies = {}, this.expiredRequestCount = 0, this.state = \"loading\";\n      }\n\n      _createClass(wh, [{\n        key: \"registerFadeDuration\",\n        value: function registerFadeDuration(t) {\n          var e = t + this.timeAdded;\n          e < $.now() || this.fadeEndTime && e < this.fadeEndTime || (this.fadeEndTime = e);\n        }\n      }, {\n        key: \"wasRequested\",\n        value: function wasRequested() {\n          return \"errored\" === this.state || \"loaded\" === this.state || \"reloading\" === this.state;\n        }\n      }, {\n        key: \"loadVectorData\",\n        value: function loadVectorData(t, e, r) {\n          if (this.hasData() && this.unloadVectorData(), this.state = \"loaded\", t) {\n            t.featureIndex && (this.latestFeatureIndex = t.featureIndex, t.rawTileData ? (this.latestRawTileData = t.rawTileData, this.latestFeatureIndex.rawTileData = t.rawTileData) : this.latestRawTileData && (this.latestFeatureIndex.rawTileData = this.latestRawTileData)), this.collisionBoxArray = t.collisionBoxArray, this.buckets = function (t, e) {\n              var r = {};\n              if (!e) return r;\n\n              var _iterator116 = _createForOfIteratorHelper(t),\n                  _step116;\n\n              try {\n                var _loop4 = function _loop4() {\n                  var i = _step116.value;\n                  var t = i.layerIds.map(function (t) {\n                    return e.getLayer(t);\n                  }).filter(Boolean);\n\n                  if (0 !== t.length) {\n                    i.layers = t, i.stateDependentLayerIds && (i.stateDependentLayers = i.stateDependentLayerIds.map(function (e) {\n                      return t.filter(function (t) {\n                        return t.id === e;\n                      })[0];\n                    }));\n\n                    var _iterator117 = _createForOfIteratorHelper(t),\n                        _step117;\n\n                    try {\n                      for (_iterator117.s(); !(_step117 = _iterator117.n()).done;) {\n                        var _e162 = _step117.value;\n                        r[_e162.id] = i;\n                      }\n                    } catch (err) {\n                      _iterator117.e(err);\n                    } finally {\n                      _iterator117.f();\n                    }\n                  }\n                };\n\n                for (_iterator116.s(); !(_step116 = _iterator116.n()).done;) {\n                  _loop4();\n                }\n              } catch (err) {\n                _iterator116.e(err);\n              } finally {\n                _iterator116.f();\n              }\n\n              return r;\n            }(t.buckets, e.style), this.hasSymbolBuckets = !1;\n\n            for (var _t162 in this.buckets) {\n              var _e163 = this.buckets[_t162];\n\n              if (_e163 instanceof Vc) {\n                if (this.hasSymbolBuckets = !0, !r) break;\n                _e163.justReloaded = !0;\n              }\n            }\n\n            if (this.hasRTLText = !1, this.hasSymbolBuckets) for (var _t163 in this.buckets) {\n              var _e164 = this.buckets[_t163];\n\n              if (_e164 instanceof Vc && _e164.hasRTLText) {\n                this.hasRTLText = !0, $n.isLoading() || $n.isLoaded() || \"deferred\" !== Un() || On();\n                break;\n              }\n            }\n            this.queryPadding = 0;\n\n            for (var _t164 in this.buckets) {\n              var _r157 = this.buckets[_t164];\n              this.queryPadding = Math.max(this.queryPadding, e.style.getLayer(_t164).queryRadius(_r157));\n            }\n\n            t.imageAtlas && (this.imageAtlas = t.imageAtlas), t.glyphAtlasImage && (this.glyphAtlasImage = t.glyphAtlasImage);\n          } else this.collisionBoxArray = new Bs();\n        }\n      }, {\n        key: \"unloadVectorData\",\n        value: function unloadVectorData() {\n          for (var _t165 in this.buckets) {\n            this.buckets[_t165].destroy();\n          }\n\n          this.buckets = {}, this.imageAtlasTexture && this.imageAtlasTexture.destroy(), this.imageAtlas && (this.imageAtlas = null), this.glyphAtlasTexture && this.glyphAtlasTexture.destroy(), this.latestFeatureIndex = null, this.state = \"unloaded\";\n        }\n      }, {\n        key: \"getBucket\",\n        value: function getBucket(t) {\n          return this.buckets[t.id];\n        }\n      }, {\n        key: \"upload\",\n        value: function upload(t) {\n          for (var _e165 in this.buckets) {\n            var _r158 = this.buckets[_e165];\n            _r158.uploadPending() && _r158.upload(t);\n          }\n\n          var e = t.gl;\n          this.imageAtlas && !this.imageAtlas.uploaded && (this.imageAtlasTexture = new Wc(t, this.imageAtlas.image, e.RGBA), this.imageAtlas.uploaded = !0), this.glyphAtlasImage && (this.glyphAtlasTexture = new Wc(t, this.glyphAtlasImage, e.ALPHA), this.glyphAtlasImage = null);\n        }\n      }, {\n        key: \"prepare\",\n        value: function prepare(t) {\n          this.imageAtlas && this.imageAtlas.patchUpdatedImages(t, this.imageAtlasTexture);\n        }\n      }, {\n        key: \"queryRenderedFeatures\",\n        value: function queryRenderedFeatures(t, e, r, i, n, s, a, o) {\n          return this.latestFeatureIndex && this.latestFeatureIndex.rawTileData ? this.latestFeatureIndex.query({\n            tileResult: i,\n            pixelPosMatrix: a,\n            transform: s,\n            params: n\n          }, t, e, r) : {};\n        }\n      }, {\n        key: \"querySourceFeatures\",\n        value: function querySourceFeatures(t, e) {\n          var r = this.latestFeatureIndex;\n          if (!r || !r.rawTileData) return;\n          var i = r.loadVTLayers(),\n              n = e ? e.sourceLayer : \"\",\n              s = i._geojsonTileLayer || i[n];\n          if (!s) return;\n          var a = pi(e && e.filter),\n              _this$tileID$canonica = this.tileID.canonical,\n              o = _this$tileID$canonica.z,\n              l = _this$tileID$canonica.x,\n              u = _this$tileID$canonica.y,\n              c = {\n            z: o,\n            x: l,\n            y: u\n          };\n\n          for (var _e166 = 0; _e166 < s.length; _e166++) {\n            var _i120 = s.feature(_e166);\n\n            if (a.needGeometry) {\n              var _t166 = va(_i120, !0);\n\n              if (!a.filter(new qn(this.tileID.overscaledZ), _t166, this.tileID.canonical)) continue;\n            } else if (!a.filter(new qn(this.tileID.overscaledZ), _i120)) continue;\n\n            var _h8 = r.getId(_i120, n),\n                _p10 = new vh(_i120, o, l, u, _h8);\n\n            _p10.tile = c, t.push(_p10);\n          }\n        }\n      }, {\n        key: \"hasData\",\n        value: function hasData() {\n          return \"loaded\" === this.state || \"reloading\" === this.state || \"expired\" === this.state;\n        }\n      }, {\n        key: \"patternsLoaded\",\n        value: function patternsLoaded() {\n          return this.imageAtlas && !!Object.keys(this.imageAtlas.patternPositions).length;\n        }\n      }, {\n        key: \"setExpiryData\",\n        value: function setExpiryData(t) {\n          var e = this.expirationTime;\n\n          if (t.cacheControl) {\n            var _e167 = C(t.cacheControl);\n\n            _e167[\"max-age\"] && (this.expirationTime = Date.now() + 1e3 * _e167[\"max-age\"]);\n          } else t.expires && (this.expirationTime = new Date(t.expires).getTime());\n\n          if (this.expirationTime) {\n            var _t167 = Date.now();\n\n            var _r159 = !1;\n\n            if (this.expirationTime > _t167) _r159 = !1;else if (e) {\n              if (this.expirationTime < e) _r159 = !0;else {\n                var _i121 = this.expirationTime - e;\n\n                _i121 ? this.expirationTime = _t167 + Math.max(_i121, 3e4) : _r159 = !0;\n              }\n            } else _r159 = !0;\n            _r159 ? (this.expiredRequestCount++, this.state = \"expired\") : this.expiredRequestCount = 0;\n          }\n        }\n      }, {\n        key: \"getExpiryTimeout\",\n        value: function getExpiryTimeout() {\n          if (this.expirationTime) return this.expiredRequestCount ? 1e3 * (1 << Math.min(this.expiredRequestCount - 1, 31)) : Math.min(this.expirationTime - new Date().getTime(), Math.pow(2, 31) - 1);\n        }\n      }, {\n        key: \"setFeatureState\",\n        value: function setFeatureState(t, e) {\n          if (!this.latestFeatureIndex || !this.latestFeatureIndex.rawTileData || 0 === Object.keys(t).length) return;\n          var r = this.latestFeatureIndex.loadVTLayers();\n\n          for (var _i122 in this.buckets) {\n            if (!e.style.hasLayer(_i122)) continue;\n\n            var _n97 = this.buckets[_i122],\n                _s77 = _n97.layers[0].sourceLayer || \"_geojsonTileLayer\",\n                _a68 = r[_s77],\n                _o35 = t[_s77];\n\n            if (!_a68 || !_o35 || 0 === Object.keys(_o35).length) continue;\n\n            _n97.update(_o35, _a68, this.imageAtlas && this.imageAtlas.patternPositions || {});\n\n            var _l26 = e && e.style && e.style.getLayer(_i122);\n\n            _l26 && (this.queryPadding = Math.max(this.queryPadding, _l26.queryRadius(_n97)));\n          }\n        }\n      }, {\n        key: \"holdingForFade\",\n        value: function holdingForFade() {\n          return void 0 !== this.symbolFadeHoldUntil;\n        }\n      }, {\n        key: \"symbolFadeFinished\",\n        value: function symbolFadeFinished() {\n          return !this.symbolFadeHoldUntil || this.symbolFadeHoldUntil < $.now();\n        }\n      }, {\n        key: \"clearFadeHold\",\n        value: function clearFadeHold() {\n          this.symbolFadeHoldUntil = void 0;\n        }\n      }, {\n        key: \"setHoldDuration\",\n        value: function setHoldDuration(t) {\n          this.symbolFadeHoldUntil = $.now() + t;\n        }\n      }, {\n        key: \"setDependencies\",\n        value: function setDependencies(t, e) {\n          var r = {};\n\n          var _iterator118 = _createForOfIteratorHelper(e),\n              _step118;\n\n          try {\n            for (_iterator118.s(); !(_step118 = _iterator118.n()).done;) {\n              var _t168 = _step118.value;\n              r[_t168] = !0;\n            }\n          } catch (err) {\n            _iterator118.e(err);\n          } finally {\n            _iterator118.f();\n          }\n\n          this.dependencies[t] = r;\n        }\n      }, {\n        key: \"hasDependency\",\n        value: function hasDependency(t, e) {\n          var _iterator119 = _createForOfIteratorHelper(t),\n              _step119;\n\n          try {\n            for (_iterator119.s(); !(_step119 = _iterator119.n()).done;) {\n              var _r160 = _step119.value;\n              var _t169 = this.dependencies[_r160];\n\n              if (_t169) {\n                var _iterator120 = _createForOfIteratorHelper(e),\n                    _step120;\n\n                try {\n                  for (_iterator120.s(); !(_step120 = _iterator120.n()).done;) {\n                    var _r161 = _step120.value;\n                    if (_t169[_r161]) return !0;\n                  }\n                } catch (err) {\n                  _iterator120.e(err);\n                } finally {\n                  _iterator120.f();\n                }\n              }\n            }\n          } catch (err) {\n            _iterator119.e(err);\n          } finally {\n            _iterator119.f();\n          }\n\n          return !1;\n        }\n      }, {\n        key: \"clearQueryDebugViz\",\n        value: function clearQueryDebugViz() {}\n      }]);\n\n      return wh;\n    }();\n\n    var _h = /*#__PURE__*/function () {\n      function _h() {\n        _classCallCheck(this, _h);\n\n        this.state = {}, this.stateChanges = {}, this.deletedStates = {};\n      }\n\n      _createClass(_h, [{\n        key: \"updateState\",\n        value: function updateState(t, e, r) {\n          var i = String(e);\n\n          if (this.stateChanges[t] = this.stateChanges[t] || {}, this.stateChanges[t][i] = this.stateChanges[t][i] || {}, x(this.stateChanges[t][i], r), null === this.deletedStates[t]) {\n            this.deletedStates[t] = {};\n\n            for (var _e168 in this.state[t]) {\n              _e168 !== i && (this.deletedStates[t][_e168] = null);\n            }\n          } else if (this.deletedStates[t] && null === this.deletedStates[t][i]) {\n            this.deletedStates[t][i] = {};\n\n            for (var _e169 in this.state[t][i]) {\n              r[_e169] || (this.deletedStates[t][i][_e169] = null);\n            }\n          } else for (var _e170 in r) {\n            this.deletedStates[t] && this.deletedStates[t][i] && null === this.deletedStates[t][i][_e170] && delete this.deletedStates[t][i][_e170];\n          }\n        }\n      }, {\n        key: \"removeFeatureState\",\n        value: function removeFeatureState(t, e, r) {\n          if (null === this.deletedStates[t]) return;\n          var i = String(e);\n          if (this.deletedStates[t] = this.deletedStates[t] || {}, r && void 0 !== e) null !== this.deletedStates[t][i] && (this.deletedStates[t][i] = this.deletedStates[t][i] || {}, this.deletedStates[t][i][r] = null);else if (void 0 !== e) {\n            if (this.stateChanges[t] && this.stateChanges[t][i]) for (r in this.deletedStates[t][i] = {}, this.stateChanges[t][i]) {\n              this.deletedStates[t][i][r] = null;\n            } else this.deletedStates[t][i] = null;\n          } else this.deletedStates[t] = null;\n        }\n      }, {\n        key: \"getState\",\n        value: function getState(t, e) {\n          var r = String(e),\n              i = x({}, (this.state[t] || {})[r], (this.stateChanges[t] || {})[r]);\n          if (null === this.deletedStates[t]) return {};\n\n          if (this.deletedStates[t]) {\n            var _r162 = this.deletedStates[t][e];\n            if (null === _r162) return {};\n\n            for (var _t170 in _r162) {\n              delete i[_t170];\n            }\n          }\n\n          return i;\n        }\n      }, {\n        key: \"initializeTileState\",\n        value: function initializeTileState(t, e) {\n          t.setFeatureState(this.state, e);\n        }\n      }, {\n        key: \"coalesceChanges\",\n        value: function coalesceChanges(t, e) {\n          var r = {};\n\n          for (var _t171 in this.stateChanges) {\n            this.state[_t171] = this.state[_t171] || {};\n            var _e171 = {};\n\n            for (var _r163 in this.stateChanges[_t171]) {\n              this.state[_t171][_r163] || (this.state[_t171][_r163] = {}), x(this.state[_t171][_r163], this.stateChanges[_t171][_r163]), _e171[_r163] = this.state[_t171][_r163];\n            }\n\n            r[_t171] = _e171;\n          }\n\n          for (var _t172 in this.deletedStates) {\n            this.state[_t172] = this.state[_t172] || {};\n            var _e172 = {};\n            if (null === this.deletedStates[_t172]) for (var _r164 in this.state[_t172]) {\n              _e172[_r164] = {}, this.state[_t172][_r164] = {};\n            } else for (var _r165 in this.deletedStates[_t172]) {\n              if (null === this.deletedStates[_t172][_r165]) this.state[_t172][_r165] = {};else for (var _i123 = 0, _Object$keys9 = Object.keys(this.deletedStates[_t172][_r165]); _i123 < _Object$keys9.length; _i123++) {\n                var _e173 = _Object$keys9[_i123];\n                delete this.state[_t172][_r165][_e173];\n              }\n              _e172[_r165] = this.state[_t172][_r165];\n            }\n            r[_t172] = r[_t172] || {}, x(r[_t172], _e172);\n          }\n\n          if (this.stateChanges = {}, this.deletedStates = {}, 0 !== Object.keys(r).length) for (var _i124 in t) {\n            t[_i124].setFeatureState(r, e);\n          }\n        }\n      }]);\n\n      return _h;\n    }();\n\n    var kh = /*#__PURE__*/function () {\n      function kh(t) {\n        _classCallCheck(this, kh);\n\n        this.size = t, this.minimums = [], this.maximums = [], this.leaves = [];\n      }\n\n      _createClass(kh, [{\n        key: \"getElevation\",\n        value: function getElevation(t, e) {\n          var r = this.toIdx(t, e);\n          return {\n            min: this.minimums[r],\n            max: this.maximums[r]\n          };\n        }\n      }, {\n        key: \"isLeaf\",\n        value: function isLeaf(t, e) {\n          return this.leaves[this.toIdx(t, e)];\n        }\n      }, {\n        key: \"toIdx\",\n        value: function toIdx(t, e) {\n          return e * this.size + t;\n        }\n      }]);\n\n      return kh;\n    }();\n\n    function Ah(t, e, r, i) {\n      var n = 0,\n          s = Number.MAX_VALUE;\n\n      for (var _a69 = 0; _a69 < 3; _a69++) {\n        if (Math.abs(i[_a69]) < 1e-15) {\n          if (r[_a69] < t[_a69] || r[_a69] > e[_a69]) return null;\n        } else {\n          var _o36 = 1 / i[_a69];\n\n          var _l27 = (t[_a69] - r[_a69]) * _o36,\n              _u24 = (e[_a69] - r[_a69]) * _o36;\n\n          if (_l27 > _u24) {\n            var _t173 = _l27;\n            _l27 = _u24, _u24 = _t173;\n          }\n\n          if (_l27 > n && (n = _l27), _u24 < s && (s = _u24), n > s) return null;\n        }\n      }\n\n      return n;\n    }\n\n    function Sh(t, e, r, i, n, s, a, o, l, u, c) {\n      var h = i - t,\n          p = n - e,\n          d = s - r,\n          f = a - t,\n          y = o - e,\n          m = l - r,\n          g = c[1] * m - c[2] * y,\n          x = c[2] * f - c[0] * m,\n          v = c[0] * y - c[1] * f,\n          b = h * g + p * x + d * v;\n      if (Math.abs(b) < 1e-15) return null;\n\n      var w = 1 / b,\n          _ = u[0] - t,\n          k = u[1] - e,\n          A = u[2] - r,\n          S = (_ * g + k * x + A * v) * w;\n\n      if (S < 0 || S > 1) return null;\n      var I = k * d - A * p,\n          T = A * h - _ * d,\n          z = _ * p - k * h,\n          E = (c[0] * I + c[1] * T + c[2] * z) * w;\n      return E < 0 || S + E > 1 ? null : (f * I + y * T + m * z) * w;\n    }\n\n    function Ih(t, e, r) {\n      return (t - e) / (r - e);\n    }\n\n    function Th(t, e, r, i, n, s, a, o, l) {\n      var u = 1 << r,\n          c = s - i,\n          h = a - n,\n          p = (t + 1) / u * c + i,\n          d = (e + 0) / u * h + n,\n          f = (e + 1) / u * h + n;\n      o[0] = (t + 0) / u * c + i, o[1] = d, l[0] = p, l[1] = f;\n    }\n\n    var zh = /*#__PURE__*/function () {\n      function zh(t) {\n        _classCallCheck(this, zh);\n\n        if (this.maximums = [], this.minimums = [], this.leaves = [], this.childOffsets = [], this.nodeCount = 0, this.dem = t, this._siblingOffset = [[0, 0], [1, 0], [0, 1], [1, 1]], !this.dem) return;\n\n        var e = function (t) {\n          var e = Math.ceil(Math.log2(t.dim / 8)),\n              r = [];\n          var i = Math.ceil(Math.pow(2, e));\n\n          var n = 1 / i,\n              s = function s(t, e, r, i, n) {\n            var s = i ? 1 : 0,\n                a = (t + 1) * r - s,\n                o = e * r,\n                l = (e + 1) * r - s;\n            n[0] = t * r, n[1] = o, n[2] = a, n[3] = l;\n          };\n\n          var a = new kh(i);\n          var o = [];\n\n          for (var _e174 = 0; _e174 < i * i; _e174++) {\n            s(_e174 % i, Math.floor(_e174 / i), n, !1, o);\n\n            var _r166 = Mh(o[0], o[1], t),\n                _l28 = Mh(o[2], o[1], t),\n                _u25 = Mh(o[2], o[3], t),\n                _c17 = Mh(o[0], o[3], t);\n\n            a.minimums.push(Math.min(_r166, _l28, _u25, _c17)), a.maximums.push(Math.max(_r166, _l28, _u25, _c17)), a.leaves.push(1);\n          }\n\n          for (r.push(a), i /= 2; i >= 1; i /= 2) {\n            var _t174 = r[r.length - 1];\n            a = new kh(i);\n\n            for (var _e175 = 0; _e175 < i * i; _e175++) {\n              s(_e175 % i, Math.floor(_e175 / i), 2, !0, o);\n\n              var _r167 = _t174.getElevation(o[0], o[1]),\n                  _n98 = _t174.getElevation(o[2], o[1]),\n                  _l29 = _t174.getElevation(o[2], o[3]),\n                  _u26 = _t174.getElevation(o[0], o[3]),\n                  _c18 = _t174.isLeaf(o[0], o[1]),\n                  _h9 = _t174.isLeaf(o[2], o[1]),\n                  _p11 = _t174.isLeaf(o[2], o[3]),\n                  _d8 = _t174.isLeaf(o[0], o[3]),\n                  _f8 = Math.min(_r167.min, _n98.min, _l29.min, _u26.min),\n                  _y8 = Math.max(_r167.max, _n98.max, _l29.max, _u26.max),\n                  _m10 = _c18 && _h9 && _p11 && _d8;\n\n              a.maximums.push(_y8), a.minimums.push(_f8), a.leaves.push(_y8 - _f8 <= 5 && _m10 ? 1 : 0);\n            }\n\n            r.push(a);\n          }\n\n          return r;\n        }(this.dem),\n            r = e.length - 1,\n            i = e[r];\n\n        this._addNode(i.minimums[0], i.maximums[0], i.leaves[0]), this._construct(e, 0, 0, r, 0);\n      }\n\n      _createClass(zh, [{\n        key: \"raycastRoot\",\n        value: function raycastRoot(t, e, r, i, n, s) {\n          var a = arguments.length > 6 && arguments[6] !== undefined ? arguments[6] : 1;\n          return Ah([t, e, -100], [r, i, this.maximums[0] * a], n, s);\n        }\n      }, {\n        key: \"raycast\",\n        value: function raycast(t, e, r, i, n, s) {\n          var a = arguments.length > 6 && arguments[6] !== undefined ? arguments[6] : 1;\n          if (!this.nodeCount) return null;\n          var o = this.raycastRoot(t, e, r, i, n, s, a);\n          if (null == o) return null;\n          var l = [],\n              u = [],\n              c = [],\n              h = [],\n              p = [{\n            idx: 0,\n            t: o,\n            nodex: 0,\n            nodey: 0,\n            depth: 0\n          }];\n\n          for (; p.length > 0;) {\n            var _p$pop = p.pop(),\n                _o37 = _p$pop.idx,\n                _d9 = _p$pop.t,\n                _f9 = _p$pop.nodex,\n                _y9 = _p$pop.nodey,\n                _m11 = _p$pop.depth;\n\n            if (this.leaves[_o37]) {\n              Th(_f9, _y9, _m11, t, e, r, i, c, h);\n\n              var _o38 = 1 << _m11,\n                  _l30 = (_f9 + 0) / _o38,\n                  _u27 = (_f9 + 1) / _o38,\n                  _p12 = (_y9 + 0) / _o38,\n                  _g9 = (_y9 + 1) / _o38,\n                  _x8 = Mh(_l30, _p12, this.dem) * a,\n                  _v8 = Mh(_u27, _p12, this.dem) * a,\n                  _b7 = Mh(_u27, _g9, this.dem) * a,\n                  _w7 = Mh(_l30, _g9, this.dem) * a,\n                  _9 = Sh(c[0], c[1], _x8, h[0], c[1], _v8, h[0], h[1], _b7, n, s),\n                  _k7 = Sh(h[0], h[1], _b7, c[0], h[1], _w7, c[0], c[1], _x8, n, s),\n                  _A7 = Math.min(null !== _9 ? _9 : Number.MAX_VALUE, null !== _k7 ? _k7 : Number.MAX_VALUE);\n\n              if (_A7 !== Number.MAX_VALUE) return _A7;\n              {\n                var _t175 = Ja([], n, s, _d9);\n\n                if (Eh(_x8, _v8, _w7, _b7, Ih(_t175[0], c[0], h[0]), Ih(_t175[1], c[1], h[1])) >= _t175[2]) return _d9;\n              }\n              continue;\n            }\n\n            var _g8 = 0;\n\n            for (var _p13 = 0; _p13 < this._siblingOffset.length; _p13++) {\n              Th((_f9 << 1) + this._siblingOffset[_p13][0], (_y9 << 1) + this._siblingOffset[_p13][1], _m11 + 1, t, e, r, i, c, h), c[2] = -100, h[2] = this.maximums[this.childOffsets[_o37] + _p13] * a;\n\n              var _d10 = Ah(c, h, n, s);\n\n              if (null != _d10) {\n                var _t176 = _d10;\n                l[_p13] = _t176;\n\n                var _e176 = !1;\n\n                for (var _r168 = 0; _r168 < _g8 && !_e176; _r168++) {\n                  _t176 >= l[u[_r168]] && (u.splice(_r168, 0, _p13), _e176 = !0);\n                }\n\n                _e176 || (u[_g8] = _p13), _g8++;\n              }\n            }\n\n            for (var _t177 = 0; _t177 < _g8; _t177++) {\n              var _e177 = u[_t177];\n              p.push({\n                idx: this.childOffsets[_o37] + _e177,\n                t: l[_e177],\n                nodex: (_f9 << 1) + this._siblingOffset[_e177][0],\n                nodey: (_y9 << 1) + this._siblingOffset[_e177][1],\n                depth: _m11 + 1\n              });\n            }\n          }\n\n          return null;\n        }\n      }, {\n        key: \"_addNode\",\n        value: function _addNode(t, e, r) {\n          return this.minimums.push(t), this.maximums.push(e), this.leaves.push(r), this.childOffsets.push(0), this.nodeCount++;\n        }\n      }, {\n        key: \"_construct\",\n        value: function _construct(t, e, r, i, n) {\n          if (1 === t[i].isLeaf(e, r)) return;\n          this.childOffsets[n] || (this.childOffsets[n] = this.nodeCount);\n          var s = i - 1,\n              a = t[s];\n          var o,\n              l = 0;\n\n          for (var _t178 = 0; _t178 < this._siblingOffset.length; _t178++) {\n            var _i125 = 2 * e + this._siblingOffset[_t178][0],\n                _n99 = 2 * r + this._siblingOffset[_t178][1],\n                _s78 = a.getElevation(_i125, _n99),\n                _u28 = a.isLeaf(_i125, _n99),\n                _c19 = this._addNode(_s78.min, _s78.max, _u28);\n\n            _u28 && (l |= 1 << _t178), o || (o = _c19);\n          }\n\n          for (var _i126 = 0; _i126 < this._siblingOffset.length; _i126++) {\n            l & 1 << _i126 || this._construct(t, 2 * e + this._siblingOffset[_i126][0], 2 * r + this._siblingOffset[_i126][1], s, o + _i126);\n          }\n        }\n      }]);\n\n      return zh;\n    }();\n\n    function Eh(t, e, r, i, n, s) {\n      return Je(Je(t, r, s), Je(e, i, s), n);\n    }\n\n    function Mh(t, e, r) {\n      var i = r.dim,\n          n = f(t * i - .5, 0, i - 1),\n          s = f(e * i - .5, 0, i - 1),\n          a = Math.floor(n),\n          o = Math.floor(s),\n          l = Math.min(a + 1, i - 1),\n          u = Math.min(o + 1, i - 1);\n      return Eh(r.get(a, o), r.get(l, o), r.get(a, u), r.get(l, u), n - a, s - o);\n    }\n\n    var Bh = {\n      mapbox: [6553.6, 25.6, .1, 1e4],\n      terrarium: [256, 1, 1 / 256, 32768]\n    };\n\n    var Dh = /*#__PURE__*/function () {\n      function Dh(t, e, r) {\n        var i = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : !1;\n        var n = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : !1;\n\n        _classCallCheck(this, Dh);\n\n        if (this.uid = t, e.height !== e.width) throw new RangeError(\"DEM tiles must be square\");\n        if (r && \"mapbox\" !== r && \"terrarium\" !== r) return E(\"\\\"\".concat(r, \"\\\" is not a valid encoding type. Valid types include \\\"mapbox\\\" and \\\"terrarium\\\".\"));\n        this.stride = e.height;\n        var s = this.dim = e.height - 2;\n\n        if (this.data = new Uint32Array(e.data.buffer), this.encoding = r || \"mapbox\", this.borderReady = i, !i) {\n          for (var _t179 = 0; _t179 < s; _t179++) {\n            this.data[this._idx(-1, _t179)] = this.data[this._idx(0, _t179)], this.data[this._idx(s, _t179)] = this.data[this._idx(s - 1, _t179)], this.data[this._idx(_t179, -1)] = this.data[this._idx(_t179, 0)], this.data[this._idx(_t179, s)] = this.data[this._idx(_t179, s - 1)];\n          }\n\n          this.data[this._idx(-1, -1)] = this.data[this._idx(0, 0)], this.data[this._idx(s, -1)] = this.data[this._idx(s - 1, 0)], this.data[this._idx(-1, s)] = this.data[this._idx(0, s - 1)], this.data[this._idx(s, s)] = this.data[this._idx(s - 1, s - 1)], n && this._buildQuadTree();\n        }\n      }\n\n      _createClass(Dh, [{\n        key: \"tree\",\n        get: function get() {\n          return this._tree || this._buildQuadTree(), this._tree;\n        }\n      }, {\n        key: \"_buildQuadTree\",\n        value: function _buildQuadTree() {\n          this._tree = new zh(this);\n        }\n      }, {\n        key: \"get\",\n        value: function get(t, e) {\n          var r = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : !1;\n          var i = new Uint8Array(this.data.buffer);\n          r && (t = f(t, -1, this.dim), e = f(e, -1, this.dim));\n\n          var n = 4 * this._idx(t, e);\n\n          return (\"terrarium\" === this.encoding ? this._unpackTerrarium : this._unpackMapbox)(i[n], i[n + 1], i[n + 2]);\n        }\n      }, {\n        key: \"unpackVector\",\n        get: function get() {\n          return Bh[this.encoding];\n        }\n      }, {\n        key: \"_idx\",\n        value: function _idx(t, e) {\n          if (t < -1 || t >= this.dim + 1 || e < -1 || e >= this.dim + 1) throw new RangeError(\"out of range source coordinates for DEM data\");\n          return (e + 1) * this.stride + (t + 1);\n        }\n      }, {\n        key: \"_unpackMapbox\",\n        value: function _unpackMapbox(t, e, r) {\n          return (256 * t * 256 + 256 * e + r) / 10 - 1e4;\n        }\n      }, {\n        key: \"_unpackTerrarium\",\n        value: function _unpackTerrarium(t, e, r) {\n          return 256 * t + e + r / 256 - 32768;\n        }\n      }, {\n        key: \"getPixels\",\n        value: function getPixels() {\n          return new ko({\n            width: this.stride,\n            height: this.stride\n          }, new Uint8Array(this.data.buffer));\n        }\n      }, {\n        key: \"backfillBorder\",\n        value: function backfillBorder(t, e, r) {\n          if (this.dim !== t.dim) throw new Error(\"dem dimension mismatch\");\n          var i = e * this.dim,\n              n = e * this.dim + this.dim,\n              s = r * this.dim,\n              a = r * this.dim + this.dim;\n\n          switch (e) {\n            case -1:\n              i = n - 1;\n              break;\n\n            case 1:\n              n = i + 1;\n          }\n\n          switch (r) {\n            case -1:\n              s = a - 1;\n              break;\n\n            case 1:\n              a = s + 1;\n          }\n\n          var o = -e * this.dim,\n              l = -r * this.dim;\n\n          for (var _e178 = s; _e178 < a; _e178++) {\n            for (var _r169 = i; _r169 < n; _r169++) {\n              this.data[this._idx(_r169, _e178)] = t.data[this._idx(_r169 + o, _e178 + l)];\n            }\n          }\n        }\n      }, {\n        key: \"onDeserialize\",\n        value: function onDeserialize() {\n          this._tree && (this._tree.dem = this);\n        }\n      }], [{\n        key: \"getUnpackVector\",\n        value: function getUnpackVector(t) {\n          return Bh[t];\n        }\n      }, {\n        key: \"pack\",\n        value: function pack(t, e) {\n          var r = [0, 0, 0, 0],\n              i = Dh.getUnpackVector(e);\n          var n = Math.floor((t + i[3]) / i[2]);\n          return r[2] = n % 256, n = Math.floor(n / 256), r[1] = n % 256, n = Math.floor(n / 256), r[0] = n, r;\n        }\n      }]);\n\n      return Dh;\n    }();\n\n    Gi(\"DEMData\", Dh), Gi(\"DemMinMaxQuadTree\", zh, {\n      omit: [\"dem\"]\n    });\n\n    var Ch = /*#__PURE__*/function () {\n      function Ch(t, e) {\n        _classCallCheck(this, Ch);\n\n        this.max = t, this.onRemove = e, this.reset();\n      }\n\n      _createClass(Ch, [{\n        key: \"reset\",\n        value: function reset() {\n          for (var _t180 in this.data) {\n            var _iterator121 = _createForOfIteratorHelper(this.data[_t180]),\n                _step121;\n\n            try {\n              for (_iterator121.s(); !(_step121 = _iterator121.n()).done;) {\n                var _e179 = _step121.value;\n                _e179.timeout && clearTimeout(_e179.timeout), this.onRemove(_e179.value);\n              }\n            } catch (err) {\n              _iterator121.e(err);\n            } finally {\n              _iterator121.f();\n            }\n          }\n\n          return this.data = {}, this.order = [], this;\n        }\n      }, {\n        key: \"add\",\n        value: function add(t, e, r) {\n          var _this32 = this;\n\n          var i = t.wrapped().key;\n          void 0 === this.data[i] && (this.data[i] = []);\n          var n = {\n            value: e,\n            timeout: void 0\n          };\n\n          if (void 0 !== r && (n.timeout = setTimeout(function () {\n            _this32.remove(t, n);\n          }, r)), this.data[i].push(n), this.order.push(i), this.order.length > this.max) {\n            var _t181 = this._getAndRemoveByKey(this.order[0]);\n\n            _t181 && this.onRemove(_t181);\n          }\n\n          return this;\n        }\n      }, {\n        key: \"has\",\n        value: function has(t) {\n          return t.wrapped().key in this.data;\n        }\n      }, {\n        key: \"getAndRemove\",\n        value: function getAndRemove(t) {\n          return this.has(t) ? this._getAndRemoveByKey(t.wrapped().key) : null;\n        }\n      }, {\n        key: \"_getAndRemoveByKey\",\n        value: function _getAndRemoveByKey(t) {\n          var e = this.data[t].shift();\n          return e.timeout && clearTimeout(e.timeout), 0 === this.data[t].length && delete this.data[t], this.order.splice(this.order.indexOf(t), 1), e.value;\n        }\n      }, {\n        key: \"getByKey\",\n        value: function getByKey(t) {\n          var e = this.data[t];\n          return e ? e[0].value : null;\n        }\n      }, {\n        key: \"get\",\n        value: function get(t) {\n          return this.has(t) ? this.data[t.wrapped().key][0].value : null;\n        }\n      }, {\n        key: \"remove\",\n        value: function remove(t, e) {\n          if (!this.has(t)) return this;\n          var r = t.wrapped().key,\n              i = void 0 === e ? 0 : this.data[r].indexOf(e),\n              n = this.data[r][i];\n          return this.data[r].splice(i, 1), n.timeout && clearTimeout(n.timeout), 0 === this.data[r].length && delete this.data[r], this.onRemove(n.value), this.order.splice(this.order.indexOf(r), 1), this;\n        }\n      }, {\n        key: \"setMaxSize\",\n        value: function setMaxSize(t) {\n          for (this.max = t; this.order.length > this.max;) {\n            var _t182 = this._getAndRemoveByKey(this.order[0]);\n\n            _t182 && this.onRemove(_t182);\n          }\n\n          return this;\n        }\n      }, {\n        key: \"filter\",\n        value: function filter(t) {\n          var e = [];\n\n          for (var _r170 in this.data) {\n            var _iterator122 = _createForOfIteratorHelper(this.data[_r170]),\n                _step122;\n\n            try {\n              for (_iterator122.s(); !(_step122 = _iterator122.n()).done;) {\n                var _i127 = _step122.value;\n                t(_i127.value) || e.push(_i127);\n              }\n            } catch (err) {\n              _iterator122.e(err);\n            } finally {\n              _iterator122.f();\n            }\n          }\n\n          for (var _i128 = 0, _e180 = e; _i128 < _e180.length; _i128++) {\n            var _t183 = _e180[_i128];\n            this.remove(_t183.value.tileID, _t183);\n          }\n        }\n      }]);\n\n      return Ch;\n    }();\n\n    var Ph = /*#__PURE__*/function () {\n      function Ph(t, e, r) {\n        _classCallCheck(this, Ph);\n\n        this.context = t;\n        var i = t.gl;\n        this.buffer = i.createBuffer(), this.dynamicDraw = Boolean(r), this.context.unbindVAO(), t.bindElementBuffer.set(this.buffer), i.bufferData(i.ELEMENT_ARRAY_BUFFER, e.arrayBuffer, this.dynamicDraw ? i.DYNAMIC_DRAW : i.STATIC_DRAW), this.dynamicDraw || delete e.arrayBuffer;\n      }\n\n      _createClass(Ph, [{\n        key: \"bind\",\n        value: function bind() {\n          this.context.bindElementBuffer.set(this.buffer);\n        }\n      }, {\n        key: \"updateData\",\n        value: function updateData(t) {\n          var e = this.context.gl;\n          this.context.unbindVAO(), this.bind(), e.bufferSubData(e.ELEMENT_ARRAY_BUFFER, 0, t.arrayBuffer);\n        }\n      }, {\n        key: \"destroy\",\n        value: function destroy() {\n          this.buffer && (this.context.gl.deleteBuffer(this.buffer), delete this.buffer);\n        }\n      }]);\n\n      return Ph;\n    }();\n\n    var Vh = {\n      Int8: \"BYTE\",\n      Uint8: \"UNSIGNED_BYTE\",\n      Int16: \"SHORT\",\n      Uint16: \"UNSIGNED_SHORT\",\n      Int32: \"INT\",\n      Uint32: \"UNSIGNED_INT\",\n      Float32: \"FLOAT\"\n    };\n\n    var Fh = /*#__PURE__*/function () {\n      function Fh(t, e, r, i) {\n        _classCallCheck(this, Fh);\n\n        this.length = e.length, this.attributes = r, this.itemSize = e.bytesPerElement, this.dynamicDraw = i, this.context = t;\n        var n = t.gl;\n        this.buffer = n.createBuffer(), t.bindVertexBuffer.set(this.buffer), n.bufferData(n.ARRAY_BUFFER, e.arrayBuffer, this.dynamicDraw ? n.DYNAMIC_DRAW : n.STATIC_DRAW), this.dynamicDraw || delete e.arrayBuffer;\n      }\n\n      _createClass(Fh, [{\n        key: \"bind\",\n        value: function bind() {\n          this.context.bindVertexBuffer.set(this.buffer);\n        }\n      }, {\n        key: \"updateData\",\n        value: function updateData(t) {\n          var e = this.context.gl;\n          this.bind(), e.bufferSubData(e.ARRAY_BUFFER, 0, t.arrayBuffer);\n        }\n      }, {\n        key: \"enableAttributes\",\n        value: function enableAttributes(t, e) {\n          for (var _r171 = 0; _r171 < this.attributes.length; _r171++) {\n            var _i129 = e.attributes[this.attributes[_r171].name];\n            void 0 !== _i129 && t.enableVertexAttribArray(_i129);\n          }\n        }\n      }, {\n        key: \"setVertexAttribPointers\",\n        value: function setVertexAttribPointers(t, e, r) {\n          for (var _i130 = 0; _i130 < this.attributes.length; _i130++) {\n            var _n100 = this.attributes[_i130],\n                _s79 = e.attributes[_n100.name];\n            void 0 !== _s79 && t.vertexAttribPointer(_s79, _n100.components, t[Vh[_n100.type]], !1, this.itemSize, _n100.offset + this.itemSize * (r || 0));\n          }\n        }\n      }, {\n        key: \"destroy\",\n        value: function destroy() {\n          this.buffer && (this.context.gl.deleteBuffer(this.buffer), delete this.buffer);\n        }\n      }]);\n\n      return Fh;\n    }();\n\n    var Rh = /*#__PURE__*/function () {\n      function Rh(t) {\n        _classCallCheck(this, Rh);\n\n        this.gl = t.gl, this.default = this.getDefault(), this.current = this.default, this.dirty = !1;\n      }\n\n      _createClass(Rh, [{\n        key: \"get\",\n        value: function get() {\n          return this.current;\n        }\n      }, {\n        key: \"set\",\n        value: function set(t) {}\n      }, {\n        key: \"getDefault\",\n        value: function getDefault() {\n          return this.default;\n        }\n      }, {\n        key: \"setDefault\",\n        value: function setDefault() {\n          this.set(this.default);\n        }\n      }]);\n\n      return Rh;\n    }();\n\n    var Lh = /*#__PURE__*/function (_Rh) {\n      _inherits(Lh, _Rh);\n\n      var _super59 = _createSuper(Lh);\n\n      function Lh() {\n        _classCallCheck(this, Lh);\n\n        return _super59.apply(this, arguments);\n      }\n\n      _createClass(Lh, [{\n        key: \"getDefault\",\n        value: function getDefault() {\n          return le.transparent;\n        }\n      }, {\n        key: \"set\",\n        value: function set(t) {\n          var e = this.current;\n          (t.r !== e.r || t.g !== e.g || t.b !== e.b || t.a !== e.a || this.dirty) && (this.gl.clearColor(t.r, t.g, t.b, t.a), this.current = t, this.dirty = !1);\n        }\n      }]);\n\n      return Lh;\n    }(Rh);\n\n    var Uh = /*#__PURE__*/function (_Rh2) {\n      _inherits(Uh, _Rh2);\n\n      var _super60 = _createSuper(Uh);\n\n      function Uh() {\n        _classCallCheck(this, Uh);\n\n        return _super60.apply(this, arguments);\n      }\n\n      _createClass(Uh, [{\n        key: \"getDefault\",\n        value: function getDefault() {\n          return 1;\n        }\n      }, {\n        key: \"set\",\n        value: function set(t) {\n          (t !== this.current || this.dirty) && (this.gl.clearDepth(t), this.current = t, this.dirty = !1);\n        }\n      }]);\n\n      return Uh;\n    }(Rh);\n\n    var Oh = /*#__PURE__*/function (_Rh3) {\n      _inherits(Oh, _Rh3);\n\n      var _super61 = _createSuper(Oh);\n\n      function Oh() {\n        _classCallCheck(this, Oh);\n\n        return _super61.apply(this, arguments);\n      }\n\n      _createClass(Oh, [{\n        key: \"getDefault\",\n        value: function getDefault() {\n          return 0;\n        }\n      }, {\n        key: \"set\",\n        value: function set(t) {\n          (t !== this.current || this.dirty) && (this.gl.clearStencil(t), this.current = t, this.dirty = !1);\n        }\n      }]);\n\n      return Oh;\n    }(Rh);\n\n    var $h = /*#__PURE__*/function (_Rh4) {\n      _inherits($h, _Rh4);\n\n      var _super62 = _createSuper($h);\n\n      function $h() {\n        _classCallCheck(this, $h);\n\n        return _super62.apply(this, arguments);\n      }\n\n      _createClass($h, [{\n        key: \"getDefault\",\n        value: function getDefault() {\n          return [!0, !0, !0, !0];\n        }\n      }, {\n        key: \"set\",\n        value: function set(t) {\n          var e = this.current;\n          (t[0] !== e[0] || t[1] !== e[1] || t[2] !== e[2] || t[3] !== e[3] || this.dirty) && (this.gl.colorMask(t[0], t[1], t[2], t[3]), this.current = t, this.dirty = !1);\n        }\n      }]);\n\n      return $h;\n    }(Rh);\n\n    var qh = /*#__PURE__*/function (_Rh5) {\n      _inherits(qh, _Rh5);\n\n      var _super63 = _createSuper(qh);\n\n      function qh() {\n        _classCallCheck(this, qh);\n\n        return _super63.apply(this, arguments);\n      }\n\n      _createClass(qh, [{\n        key: \"getDefault\",\n        value: function getDefault() {\n          return !0;\n        }\n      }, {\n        key: \"set\",\n        value: function set(t) {\n          (t !== this.current || this.dirty) && (this.gl.depthMask(t), this.current = t, this.dirty = !1);\n        }\n      }]);\n\n      return qh;\n    }(Rh);\n\n    var Nh = /*#__PURE__*/function (_Rh6) {\n      _inherits(Nh, _Rh6);\n\n      var _super64 = _createSuper(Nh);\n\n      function Nh() {\n        _classCallCheck(this, Nh);\n\n        return _super64.apply(this, arguments);\n      }\n\n      _createClass(Nh, [{\n        key: \"getDefault\",\n        value: function getDefault() {\n          return 255;\n        }\n      }, {\n        key: \"set\",\n        value: function set(t) {\n          (t !== this.current || this.dirty) && (this.gl.stencilMask(t), this.current = t, this.dirty = !1);\n        }\n      }]);\n\n      return Nh;\n    }(Rh);\n\n    var jh = /*#__PURE__*/function (_Rh7) {\n      _inherits(jh, _Rh7);\n\n      var _super65 = _createSuper(jh);\n\n      function jh() {\n        _classCallCheck(this, jh);\n\n        return _super65.apply(this, arguments);\n      }\n\n      _createClass(jh, [{\n        key: \"getDefault\",\n        value: function getDefault() {\n          return {\n            func: this.gl.ALWAYS,\n            ref: 0,\n            mask: 255\n          };\n        }\n      }, {\n        key: \"set\",\n        value: function set(t) {\n          var e = this.current;\n          (t.func !== e.func || t.ref !== e.ref || t.mask !== e.mask || this.dirty) && (this.gl.stencilFunc(t.func, t.ref, t.mask), this.current = t, this.dirty = !1);\n        }\n      }]);\n\n      return jh;\n    }(Rh);\n\n    var Gh = /*#__PURE__*/function (_Rh8) {\n      _inherits(Gh, _Rh8);\n\n      var _super66 = _createSuper(Gh);\n\n      function Gh() {\n        _classCallCheck(this, Gh);\n\n        return _super66.apply(this, arguments);\n      }\n\n      _createClass(Gh, [{\n        key: \"getDefault\",\n        value: function getDefault() {\n          var t = this.gl;\n          return [t.KEEP, t.KEEP, t.KEEP];\n        }\n      }, {\n        key: \"set\",\n        value: function set(t) {\n          var e = this.current;\n          (t[0] !== e[0] || t[1] !== e[1] || t[2] !== e[2] || this.dirty) && (this.gl.stencilOp(t[0], t[1], t[2]), this.current = t, this.dirty = !1);\n        }\n      }]);\n\n      return Gh;\n    }(Rh);\n\n    var Zh = /*#__PURE__*/function (_Rh9) {\n      _inherits(Zh, _Rh9);\n\n      var _super67 = _createSuper(Zh);\n\n      function Zh() {\n        _classCallCheck(this, Zh);\n\n        return _super67.apply(this, arguments);\n      }\n\n      _createClass(Zh, [{\n        key: \"getDefault\",\n        value: function getDefault() {\n          return !1;\n        }\n      }, {\n        key: \"set\",\n        value: function set(t) {\n          if (t === this.current && !this.dirty) return;\n          var e = this.gl;\n          t ? e.enable(e.STENCIL_TEST) : e.disable(e.STENCIL_TEST), this.current = t, this.dirty = !1;\n        }\n      }]);\n\n      return Zh;\n    }(Rh);\n\n    var Xh = /*#__PURE__*/function (_Rh10) {\n      _inherits(Xh, _Rh10);\n\n      var _super68 = _createSuper(Xh);\n\n      function Xh() {\n        _classCallCheck(this, Xh);\n\n        return _super68.apply(this, arguments);\n      }\n\n      _createClass(Xh, [{\n        key: \"getDefault\",\n        value: function getDefault() {\n          return [0, 1];\n        }\n      }, {\n        key: \"set\",\n        value: function set(t) {\n          var e = this.current;\n          (t[0] !== e[0] || t[1] !== e[1] || this.dirty) && (this.gl.depthRange(t[0], t[1]), this.current = t, this.dirty = !1);\n        }\n      }]);\n\n      return Xh;\n    }(Rh);\n\n    var Kh = /*#__PURE__*/function (_Rh11) {\n      _inherits(Kh, _Rh11);\n\n      var _super69 = _createSuper(Kh);\n\n      function Kh() {\n        _classCallCheck(this, Kh);\n\n        return _super69.apply(this, arguments);\n      }\n\n      _createClass(Kh, [{\n        key: \"getDefault\",\n        value: function getDefault() {\n          return !1;\n        }\n      }, {\n        key: \"set\",\n        value: function set(t) {\n          if (t === this.current && !this.dirty) return;\n          var e = this.gl;\n          t ? e.enable(e.DEPTH_TEST) : e.disable(e.DEPTH_TEST), this.current = t, this.dirty = !1;\n        }\n      }]);\n\n      return Kh;\n    }(Rh);\n\n    var Hh = /*#__PURE__*/function (_Rh12) {\n      _inherits(Hh, _Rh12);\n\n      var _super70 = _createSuper(Hh);\n\n      function Hh() {\n        _classCallCheck(this, Hh);\n\n        return _super70.apply(this, arguments);\n      }\n\n      _createClass(Hh, [{\n        key: \"getDefault\",\n        value: function getDefault() {\n          return this.gl.LESS;\n        }\n      }, {\n        key: \"set\",\n        value: function set(t) {\n          (t !== this.current || this.dirty) && (this.gl.depthFunc(t), this.current = t, this.dirty = !1);\n        }\n      }]);\n\n      return Hh;\n    }(Rh);\n\n    var Yh = /*#__PURE__*/function (_Rh13) {\n      _inherits(Yh, _Rh13);\n\n      var _super71 = _createSuper(Yh);\n\n      function Yh() {\n        _classCallCheck(this, Yh);\n\n        return _super71.apply(this, arguments);\n      }\n\n      _createClass(Yh, [{\n        key: \"getDefault\",\n        value: function getDefault() {\n          return !1;\n        }\n      }, {\n        key: \"set\",\n        value: function set(t) {\n          if (t === this.current && !this.dirty) return;\n          var e = this.gl;\n          t ? e.enable(e.BLEND) : e.disable(e.BLEND), this.current = t, this.dirty = !1;\n        }\n      }]);\n\n      return Yh;\n    }(Rh);\n\n    var Wh = /*#__PURE__*/function (_Rh14) {\n      _inherits(Wh, _Rh14);\n\n      var _super72 = _createSuper(Wh);\n\n      function Wh() {\n        _classCallCheck(this, Wh);\n\n        return _super72.apply(this, arguments);\n      }\n\n      _createClass(Wh, [{\n        key: \"getDefault\",\n        value: function getDefault() {\n          var t = this.gl;\n          return [t.ONE, t.ZERO];\n        }\n      }, {\n        key: \"set\",\n        value: function set(t) {\n          var e = this.current;\n          (t[0] !== e[0] || t[1] !== e[1] || this.dirty) && (this.gl.blendFunc(t[0], t[1]), this.current = t, this.dirty = !1);\n        }\n      }]);\n\n      return Wh;\n    }(Rh);\n\n    var Jh = /*#__PURE__*/function (_Rh15) {\n      _inherits(Jh, _Rh15);\n\n      var _super73 = _createSuper(Jh);\n\n      function Jh() {\n        _classCallCheck(this, Jh);\n\n        return _super73.apply(this, arguments);\n      }\n\n      _createClass(Jh, [{\n        key: \"getDefault\",\n        value: function getDefault() {\n          return le.transparent;\n        }\n      }, {\n        key: \"set\",\n        value: function set(t) {\n          var e = this.current;\n          (t.r !== e.r || t.g !== e.g || t.b !== e.b || t.a !== e.a || this.dirty) && (this.gl.blendColor(t.r, t.g, t.b, t.a), this.current = t, this.dirty = !1);\n        }\n      }]);\n\n      return Jh;\n    }(Rh);\n\n    var Qh = /*#__PURE__*/function (_Rh16) {\n      _inherits(Qh, _Rh16);\n\n      var _super74 = _createSuper(Qh);\n\n      function Qh() {\n        _classCallCheck(this, Qh);\n\n        return _super74.apply(this, arguments);\n      }\n\n      _createClass(Qh, [{\n        key: \"getDefault\",\n        value: function getDefault() {\n          return this.gl.FUNC_ADD;\n        }\n      }, {\n        key: \"set\",\n        value: function set(t) {\n          (t !== this.current || this.dirty) && (this.gl.blendEquation(t), this.current = t, this.dirty = !1);\n        }\n      }]);\n\n      return Qh;\n    }(Rh);\n\n    var tp = /*#__PURE__*/function (_Rh17) {\n      _inherits(tp, _Rh17);\n\n      var _super75 = _createSuper(tp);\n\n      function tp() {\n        _classCallCheck(this, tp);\n\n        return _super75.apply(this, arguments);\n      }\n\n      _createClass(tp, [{\n        key: \"getDefault\",\n        value: function getDefault() {\n          return !1;\n        }\n      }, {\n        key: \"set\",\n        value: function set(t) {\n          if (t === this.current && !this.dirty) return;\n          var e = this.gl;\n          t ? e.enable(e.CULL_FACE) : e.disable(e.CULL_FACE), this.current = t, this.dirty = !1;\n        }\n      }]);\n\n      return tp;\n    }(Rh);\n\n    var ep = /*#__PURE__*/function (_Rh18) {\n      _inherits(ep, _Rh18);\n\n      var _super76 = _createSuper(ep);\n\n      function ep() {\n        _classCallCheck(this, ep);\n\n        return _super76.apply(this, arguments);\n      }\n\n      _createClass(ep, [{\n        key: \"getDefault\",\n        value: function getDefault() {\n          return this.gl.BACK;\n        }\n      }, {\n        key: \"set\",\n        value: function set(t) {\n          (t !== this.current || this.dirty) && (this.gl.cullFace(t), this.current = t, this.dirty = !1);\n        }\n      }]);\n\n      return ep;\n    }(Rh);\n\n    var rp = /*#__PURE__*/function (_Rh19) {\n      _inherits(rp, _Rh19);\n\n      var _super77 = _createSuper(rp);\n\n      function rp() {\n        _classCallCheck(this, rp);\n\n        return _super77.apply(this, arguments);\n      }\n\n      _createClass(rp, [{\n        key: \"getDefault\",\n        value: function getDefault() {\n          return this.gl.CCW;\n        }\n      }, {\n        key: \"set\",\n        value: function set(t) {\n          (t !== this.current || this.dirty) && (this.gl.frontFace(t), this.current = t, this.dirty = !1);\n        }\n      }]);\n\n      return rp;\n    }(Rh);\n\n    var ip = /*#__PURE__*/function (_Rh20) {\n      _inherits(ip, _Rh20);\n\n      var _super78 = _createSuper(ip);\n\n      function ip() {\n        _classCallCheck(this, ip);\n\n        return _super78.apply(this, arguments);\n      }\n\n      _createClass(ip, [{\n        key: \"getDefault\",\n        value: function getDefault() {\n          return null;\n        }\n      }, {\n        key: \"set\",\n        value: function set(t) {\n          (t !== this.current || this.dirty) && (this.gl.useProgram(t), this.current = t, this.dirty = !1);\n        }\n      }]);\n\n      return ip;\n    }(Rh);\n\n    var np = /*#__PURE__*/function (_Rh21) {\n      _inherits(np, _Rh21);\n\n      var _super79 = _createSuper(np);\n\n      function np() {\n        _classCallCheck(this, np);\n\n        return _super79.apply(this, arguments);\n      }\n\n      _createClass(np, [{\n        key: \"getDefault\",\n        value: function getDefault() {\n          return this.gl.TEXTURE0;\n        }\n      }, {\n        key: \"set\",\n        value: function set(t) {\n          (t !== this.current || this.dirty) && (this.gl.activeTexture(t), this.current = t, this.dirty = !1);\n        }\n      }]);\n\n      return np;\n    }(Rh);\n\n    var sp = /*#__PURE__*/function (_Rh22) {\n      _inherits(sp, _Rh22);\n\n      var _super80 = _createSuper(sp);\n\n      function sp() {\n        _classCallCheck(this, sp);\n\n        return _super80.apply(this, arguments);\n      }\n\n      _createClass(sp, [{\n        key: \"getDefault\",\n        value: function getDefault() {\n          var t = this.gl;\n          return [0, 0, t.drawingBufferWidth, t.drawingBufferHeight];\n        }\n      }, {\n        key: \"set\",\n        value: function set(t) {\n          var e = this.current;\n          (t[0] !== e[0] || t[1] !== e[1] || t[2] !== e[2] || t[3] !== e[3] || this.dirty) && (this.gl.viewport(t[0], t[1], t[2], t[3]), this.current = t, this.dirty = !1);\n        }\n      }]);\n\n      return sp;\n    }(Rh);\n\n    var ap = /*#__PURE__*/function (_Rh23) {\n      _inherits(ap, _Rh23);\n\n      var _super81 = _createSuper(ap);\n\n      function ap() {\n        _classCallCheck(this, ap);\n\n        return _super81.apply(this, arguments);\n      }\n\n      _createClass(ap, [{\n        key: \"getDefault\",\n        value: function getDefault() {\n          return null;\n        }\n      }, {\n        key: \"set\",\n        value: function set(t) {\n          if (t === this.current && !this.dirty) return;\n          var e = this.gl;\n          e.bindFramebuffer(e.FRAMEBUFFER, t), this.current = t, this.dirty = !1;\n        }\n      }]);\n\n      return ap;\n    }(Rh);\n\n    var op = /*#__PURE__*/function (_Rh24) {\n      _inherits(op, _Rh24);\n\n      var _super82 = _createSuper(op);\n\n      function op() {\n        _classCallCheck(this, op);\n\n        return _super82.apply(this, arguments);\n      }\n\n      _createClass(op, [{\n        key: \"getDefault\",\n        value: function getDefault() {\n          return null;\n        }\n      }, {\n        key: \"set\",\n        value: function set(t) {\n          if (t === this.current && !this.dirty) return;\n          var e = this.gl;\n          e.bindRenderbuffer(e.RENDERBUFFER, t), this.current = t, this.dirty = !1;\n        }\n      }]);\n\n      return op;\n    }(Rh);\n\n    var lp = /*#__PURE__*/function (_Rh25) {\n      _inherits(lp, _Rh25);\n\n      var _super83 = _createSuper(lp);\n\n      function lp() {\n        _classCallCheck(this, lp);\n\n        return _super83.apply(this, arguments);\n      }\n\n      _createClass(lp, [{\n        key: \"getDefault\",\n        value: function getDefault() {\n          return null;\n        }\n      }, {\n        key: \"set\",\n        value: function set(t) {\n          if (t === this.current && !this.dirty) return;\n          var e = this.gl;\n          e.bindTexture(e.TEXTURE_2D, t), this.current = t, this.dirty = !1;\n        }\n      }]);\n\n      return lp;\n    }(Rh);\n\n    var up = /*#__PURE__*/function (_Rh26) {\n      _inherits(up, _Rh26);\n\n      var _super84 = _createSuper(up);\n\n      function up() {\n        _classCallCheck(this, up);\n\n        return _super84.apply(this, arguments);\n      }\n\n      _createClass(up, [{\n        key: \"getDefault\",\n        value: function getDefault() {\n          return null;\n        }\n      }, {\n        key: \"set\",\n        value: function set(t) {\n          if (t === this.current && !this.dirty) return;\n          var e = this.gl;\n          e.bindBuffer(e.ARRAY_BUFFER, t), this.current = t, this.dirty = !1;\n        }\n      }]);\n\n      return up;\n    }(Rh);\n\n    var cp = /*#__PURE__*/function (_Rh27) {\n      _inherits(cp, _Rh27);\n\n      var _super85 = _createSuper(cp);\n\n      function cp() {\n        _classCallCheck(this, cp);\n\n        return _super85.apply(this, arguments);\n      }\n\n      _createClass(cp, [{\n        key: \"getDefault\",\n        value: function getDefault() {\n          return null;\n        }\n      }, {\n        key: \"set\",\n        value: function set(t) {\n          var e = this.gl;\n          e.bindBuffer(e.ELEMENT_ARRAY_BUFFER, t), this.current = t, this.dirty = !1;\n        }\n      }]);\n\n      return cp;\n    }(Rh);\n\n    var hp = /*#__PURE__*/function (_Rh28) {\n      _inherits(hp, _Rh28);\n\n      var _super86 = _createSuper(hp);\n\n      function hp(t) {\n        var _this33;\n\n        _classCallCheck(this, hp);\n\n        _this33 = _super86.call(this, t), _this33.vao = t.extVertexArrayObject;\n        return _this33;\n      }\n\n      _createClass(hp, [{\n        key: \"getDefault\",\n        value: function getDefault() {\n          return null;\n        }\n      }, {\n        key: \"set\",\n        value: function set(t) {\n          this.vao && (t !== this.current || this.dirty) && (this.vao.bindVertexArrayOES(t), this.current = t, this.dirty = !1);\n        }\n      }]);\n\n      return hp;\n    }(Rh);\n\n    var pp = /*#__PURE__*/function (_Rh29) {\n      _inherits(pp, _Rh29);\n\n      var _super87 = _createSuper(pp);\n\n      function pp() {\n        _classCallCheck(this, pp);\n\n        return _super87.apply(this, arguments);\n      }\n\n      _createClass(pp, [{\n        key: \"getDefault\",\n        value: function getDefault() {\n          return 4;\n        }\n      }, {\n        key: \"set\",\n        value: function set(t) {\n          if (t === this.current && !this.dirty) return;\n          var e = this.gl;\n          e.pixelStorei(e.UNPACK_ALIGNMENT, t), this.current = t, this.dirty = !1;\n        }\n      }]);\n\n      return pp;\n    }(Rh);\n\n    var dp = /*#__PURE__*/function (_Rh30) {\n      _inherits(dp, _Rh30);\n\n      var _super88 = _createSuper(dp);\n\n      function dp() {\n        _classCallCheck(this, dp);\n\n        return _super88.apply(this, arguments);\n      }\n\n      _createClass(dp, [{\n        key: \"getDefault\",\n        value: function getDefault() {\n          return !1;\n        }\n      }, {\n        key: \"set\",\n        value: function set(t) {\n          if (t === this.current && !this.dirty) return;\n          var e = this.gl;\n          e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL, t), this.current = t, this.dirty = !1;\n        }\n      }]);\n\n      return dp;\n    }(Rh);\n\n    var fp = /*#__PURE__*/function (_Rh31) {\n      _inherits(fp, _Rh31);\n\n      var _super89 = _createSuper(fp);\n\n      function fp() {\n        _classCallCheck(this, fp);\n\n        return _super89.apply(this, arguments);\n      }\n\n      _createClass(fp, [{\n        key: \"getDefault\",\n        value: function getDefault() {\n          return !1;\n        }\n      }, {\n        key: \"set\",\n        value: function set(t) {\n          if (t === this.current && !this.dirty) return;\n          var e = this.gl;\n          e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL, t), this.current = t, this.dirty = !1;\n        }\n      }]);\n\n      return fp;\n    }(Rh);\n\n    var yp = /*#__PURE__*/function (_Rh32) {\n      _inherits(yp, _Rh32);\n\n      var _super90 = _createSuper(yp);\n\n      function yp(t, e) {\n        var _this34;\n\n        _classCallCheck(this, yp);\n\n        _this34 = _super90.call(this, t), _this34.context = t, _this34.parent = e;\n        return _this34;\n      }\n\n      _createClass(yp, [{\n        key: \"getDefault\",\n        value: function getDefault() {\n          return null;\n        }\n      }]);\n\n      return yp;\n    }(Rh);\n\n    var mp = /*#__PURE__*/function (_yp) {\n      _inherits(mp, _yp);\n\n      var _super91 = _createSuper(mp);\n\n      function mp() {\n        _classCallCheck(this, mp);\n\n        return _super91.apply(this, arguments);\n      }\n\n      _createClass(mp, [{\n        key: \"setDirty\",\n        value: function setDirty() {\n          this.dirty = !0;\n        }\n      }, {\n        key: \"set\",\n        value: function set(t) {\n          if (t === this.current && !this.dirty) return;\n          this.context.bindFramebuffer.set(this.parent);\n          var e = this.gl;\n          e.framebufferTexture2D(e.FRAMEBUFFER, e.COLOR_ATTACHMENT0, e.TEXTURE_2D, t, 0), this.current = t, this.dirty = !1;\n        }\n      }]);\n\n      return mp;\n    }(yp);\n\n    var gp = /*#__PURE__*/function (_yp2) {\n      _inherits(gp, _yp2);\n\n      var _super92 = _createSuper(gp);\n\n      function gp() {\n        _classCallCheck(this, gp);\n\n        return _super92.apply(this, arguments);\n      }\n\n      _createClass(gp, [{\n        key: \"attachment\",\n        value: function attachment() {\n          return this.gl.DEPTH_ATTACHMENT;\n        }\n      }, {\n        key: \"set\",\n        value: function set(t) {\n          if (t === this.current && !this.dirty) return;\n          this.context.bindFramebuffer.set(this.parent);\n          var e = this.gl;\n          e.framebufferRenderbuffer(e.FRAMEBUFFER, this.attachment(), e.RENDERBUFFER, t), this.current = t, this.dirty = !1;\n        }\n      }]);\n\n      return gp;\n    }(yp);\n\n    var xp = /*#__PURE__*/function () {\n      function xp(t, e, r, i) {\n        _classCallCheck(this, xp);\n\n        this.context = t, this.width = e, this.height = r;\n        var n = this.framebuffer = t.gl.createFramebuffer();\n        this.colorAttachment = new mp(t, n), i && (this.depthAttachment = new gp(t, n));\n      }\n\n      _createClass(xp, [{\n        key: \"destroy\",\n        value: function destroy() {\n          var t = this.context.gl,\n              e = this.colorAttachment.get();\n\n          if (e && t.deleteTexture(e), this.depthAttachment) {\n            var _e181 = this.depthAttachment.get();\n\n            _e181 && t.deleteRenderbuffer(_e181);\n          }\n\n          t.deleteFramebuffer(this.framebuffer);\n        }\n      }]);\n\n      return xp;\n    }();\n\n    var vp = function vp(t, e, r) {\n      _classCallCheck(this, vp);\n\n      this.func = t, this.mask = e, this.range = r;\n    };\n\n    vp.ReadOnly = !1, vp.ReadWrite = !0, vp.disabled = new vp(519, vp.ReadOnly, [0, 1]);\n\n    var bp = function bp(t, e, r, i, n, s) {\n      _classCallCheck(this, bp);\n\n      this.test = t, this.ref = e, this.mask = r, this.fail = i, this.depthFail = n, this.pass = s;\n    };\n\n    bp.disabled = new bp({\n      func: 519,\n      mask: 0\n    }, 0, 0, 7680, 7680, 7680);\n\n    var wp = function wp(t, e, r) {\n      _classCallCheck(this, wp);\n\n      this.blendFunction = t, this.blendColor = e, this.mask = r;\n    };\n\n    wp.Replace = [1, 0], wp.disabled = new wp(wp.Replace, le.transparent, [!1, !1, !1, !1]), wp.unblended = new wp(wp.Replace, le.transparent, [!0, !0, !0, !0]), wp.alphaBlended = new wp([1, 771], le.transparent, [!0, !0, !0, !0]);\n\n    var _p = function _p(t, e, r) {\n      _classCallCheck(this, _p);\n\n      this.enable = t, this.mode = e, this.frontFace = r;\n    };\n\n    _p.disabled = new _p(!1, 1029, 2305), _p.backCCW = new _p(!0, 1029, 2305), _p.backCW = new _p(!0, 1029, 2304), _p.frontCW = new _p(!0, 1028, 2304), _p.frontCCW = new _p(!0, 1028, 2305);\n\n    var kp = /*#__PURE__*/function (_Vt2) {\n      _inherits(kp, _Vt2);\n\n      var _super93 = _createSuper(kp);\n\n      function kp(t, e, r) {\n        var _this35;\n\n        _classCallCheck(this, kp);\n\n        _this35 = _super93.call(this), _this35.id = t, _this35._onlySymbols = r, e.on(\"data\", function (t) {\n          \"source\" === t.dataType && \"metadata\" === t.sourceDataType && (_this35._sourceLoaded = !0), _this35._sourceLoaded && !_this35._paused && \"source\" === t.dataType && \"content\" === t.sourceDataType && (_this35.reload(), _this35.transform && _this35.update(_this35.transform));\n        }), e.on(\"error\", function () {\n          _this35._sourceErrored = !0;\n        }), _this35._source = e, _this35._tiles = {}, _this35._cache = new Ch(0, _this35._unloadTile.bind(_assertThisInitialized(_this35))), _this35._timers = {}, _this35._cacheTimers = {}, _this35._maxTileCacheSize = null, _this35._loadedParentTiles = {}, _this35._coveredTiles = {}, _this35._state = new _h();\n        return _this35;\n      }\n\n      _createClass(kp, [{\n        key: \"onAdd\",\n        value: function onAdd(t) {\n          this.map = t, this._maxTileCacheSize = t ? t._maxTileCacheSize : null;\n        }\n      }, {\n        key: \"loaded\",\n        value: function loaded() {\n          if (this._sourceErrored) return !0;\n          if (!this._sourceLoaded) return !1;\n          if (!this._source.loaded()) return !1;\n\n          for (var _t184 in this._tiles) {\n            var _e182 = this._tiles[_t184];\n            if (\"loaded\" !== _e182.state && \"errored\" !== _e182.state) return !1;\n          }\n\n          return !0;\n        }\n      }, {\n        key: \"getSource\",\n        value: function getSource() {\n          return this._source;\n        }\n      }, {\n        key: \"pause\",\n        value: function pause() {\n          this._paused = !0;\n        }\n      }, {\n        key: \"resume\",\n        value: function resume() {\n          if (!this._paused) return;\n          var t = this._shouldReloadOnResume;\n          this._paused = !1, this._shouldReloadOnResume = !1, t && this.reload(), this.transform && this.update(this.transform);\n        }\n      }, {\n        key: \"_loadTile\",\n        value: function _loadTile(t, e) {\n          return t.isSymbolTile = this._onlySymbols, this._source.loadTile(t, e);\n        }\n      }, {\n        key: \"_unloadTile\",\n        value: function _unloadTile(t) {\n          if (this._source.unloadTile) return this._source.unloadTile(t, function () {});\n        }\n      }, {\n        key: \"_abortTile\",\n        value: function _abortTile(t) {\n          if (this._source.abortTile) return this._source.abortTile(t, function () {});\n        }\n      }, {\n        key: \"serialize\",\n        value: function serialize() {\n          return this._source.serialize();\n        }\n      }, {\n        key: \"prepare\",\n        value: function prepare(t) {\n          this._source.prepare && this._source.prepare(), this._state.coalesceChanges(this._tiles, this.map ? this.map.painter : null);\n\n          for (var _e183 in this._tiles) {\n            var _r172 = this._tiles[_e183];\n            _r172.upload(t), _r172.prepare(this.map.style.imageManager);\n          }\n        }\n      }, {\n        key: \"getIds\",\n        value: function getIds() {\n          return g(this._tiles).map(function (t) {\n            return t.tileID;\n          }).sort(Ap).map(function (t) {\n            return t.key;\n          });\n        }\n      }, {\n        key: \"getRenderableIds\",\n        value: function getRenderableIds(t) {\n          var _this36 = this;\n\n          var e = [];\n\n          for (var _r173 in this._tiles) {\n            this._isIdRenderable(+_r173, t) && e.push(this._tiles[_r173]);\n          }\n\n          return t ? e.sort(function (t, e) {\n            var r = t.tileID,\n                n = e.tileID,\n                s = new i(r.canonical.x, r.canonical.y)._rotate(_this36.transform.angle),\n                a = new i(n.canonical.x, n.canonical.y)._rotate(_this36.transform.angle);\n\n            return r.overscaledZ - n.overscaledZ || a.y - s.y || a.x - s.x;\n          }).map(function (t) {\n            return t.tileID.key;\n          }) : e.map(function (t) {\n            return t.tileID;\n          }).sort(Ap).map(function (t) {\n            return t.key;\n          });\n        }\n      }, {\n        key: \"hasRenderableParent\",\n        value: function hasRenderableParent(t) {\n          var e = this.findLoadedParent(t, 0);\n          return !!e && this._isIdRenderable(e.tileID.key);\n        }\n      }, {\n        key: \"_isIdRenderable\",\n        value: function _isIdRenderable(t, e) {\n          return this._tiles[t] && this._tiles[t].hasData() && !this._coveredTiles[t] && (e || !this._tiles[t].holdingForFade());\n        }\n      }, {\n        key: \"reload\",\n        value: function reload() {\n          if (this._paused) this._shouldReloadOnResume = !0;else {\n            this._cache.reset();\n\n            for (var _t185 in this._tiles) {\n              \"errored\" !== this._tiles[_t185].state && this._reloadTile(+_t185, \"reloading\");\n            }\n          }\n        }\n      }, {\n        key: \"_reloadTile\",\n        value: function _reloadTile(t, e) {\n          var r = this._tiles[t];\n          r && (\"loading\" !== r.state && (r.state = e), this._loadTile(r, this._tileLoaded.bind(this, r, t, e)));\n        }\n      }, {\n        key: \"_tileLoaded\",\n        value: function _tileLoaded(t, e, r, i) {\n          if (i) return t.state = \"errored\", void (404 !== i.status ? this._source.fire(new Pt(i, {\n            tile: t\n          })) : this.update(this.transform));\n          t.timeAdded = $.now(), \"expired\" === r && (t.refreshedUponExpiration = !0), this._setTileReloadTimer(e, t), \"raster-dem\" === this.getSource().type && t.dem && this._backfillDEM(t), this._state.initializeTileState(t, this.map ? this.map.painter : null), this._source.fire(new Ct(\"data\", {\n            dataType: \"source\",\n            tile: t,\n            coord: t.tileID,\n            sourceCacheId: this.id\n          }));\n        }\n      }, {\n        key: \"_backfillDEM\",\n        value: function _backfillDEM(t) {\n          var e = this.getRenderableIds();\n\n          for (var _i131 = 0; _i131 < e.length; _i131++) {\n            var _n101 = e[_i131];\n\n            if (t.neighboringTiles && t.neighboringTiles[_n101]) {\n              var _e184 = this.getTileByID(_n101);\n\n              r(t, _e184), r(_e184, t);\n            }\n          }\n\n          function r(t, e) {\n            if (!t.dem || t.dem.borderReady) return;\n            t.needsHillshadePrepare = !0, t.needsDEMTextureUpload = !0;\n            var r = e.tileID.canonical.x - t.tileID.canonical.x;\n            var i = e.tileID.canonical.y - t.tileID.canonical.y,\n                n = Math.pow(2, t.tileID.canonical.z),\n                s = e.tileID.key;\n            0 === r && 0 === i || Math.abs(i) > 1 || (Math.abs(r) > 1 && (1 === Math.abs(r + n) ? r += n : 1 === Math.abs(r - n) && (r -= n)), e.dem && t.dem && (t.dem.backfillBorder(e.dem, r, i), t.neighboringTiles && t.neighboringTiles[s] && (t.neighboringTiles[s].backfilled = !0)));\n          }\n        }\n      }, {\n        key: \"getTile\",\n        value: function getTile(t) {\n          return this.getTileByID(t.key);\n        }\n      }, {\n        key: \"getTileByID\",\n        value: function getTileByID(t) {\n          return this._tiles[t];\n        }\n      }, {\n        key: \"_retainLoadedChildren\",\n        value: function _retainLoadedChildren(t, e, r, i) {\n          for (var _n102 in this._tiles) {\n            var _s80 = this._tiles[_n102];\n            if (i[_n102] || !_s80.hasData() || _s80.tileID.overscaledZ <= e || _s80.tileID.overscaledZ > r) continue;\n            var _a70 = _s80.tileID;\n\n            for (; _s80 && _s80.tileID.overscaledZ > e + 1;) {\n              var _t186 = _s80.tileID.scaledTo(_s80.tileID.overscaledZ - 1);\n\n              _s80 = this._tiles[_t186.key], _s80 && _s80.hasData() && (_a70 = _t186);\n            }\n\n            var _o39 = _a70;\n\n            for (; _o39.overscaledZ > e;) {\n              if (_o39 = _o39.scaledTo(_o39.overscaledZ - 1), t[_o39.key]) {\n                i[_a70.key] = _a70;\n                break;\n              }\n            }\n          }\n        }\n      }, {\n        key: \"findLoadedParent\",\n        value: function findLoadedParent(t, e) {\n          if (t.key in this._loadedParentTiles) {\n            var _r174 = this._loadedParentTiles[t.key];\n            return _r174 && _r174.tileID.overscaledZ >= e ? _r174 : null;\n          }\n\n          for (var _r175 = t.overscaledZ - 1; _r175 >= e; _r175--) {\n            var _e185 = t.scaledTo(_r175),\n                _i132 = this._getLoadedTile(_e185);\n\n            if (_i132) return _i132;\n          }\n        }\n      }, {\n        key: \"_getLoadedTile\",\n        value: function _getLoadedTile(t) {\n          var e = this._tiles[t.key];\n          return e && e.hasData() ? e : this._cache.getByKey(this._source.reparseOverscaled ? t.wrapped().key : t.canonical.key);\n        }\n      }, {\n        key: \"updateCacheSize\",\n        value: function updateCacheSize(t, e) {\n          e = e || this._source.tileSize;\n          var r = Math.ceil(t.width / e) + 1,\n              i = Math.ceil(t.height / e) + 1,\n              n = Math.floor(r * i * 5),\n              s = \"number\" == typeof this._maxTileCacheSize ? Math.min(this._maxTileCacheSize, n) : n;\n\n          this._cache.setMaxSize(s);\n        }\n      }, {\n        key: \"handleWrapJump\",\n        value: function handleWrapJump(t) {\n          var e = Math.round((t - (void 0 === this._prevLng ? t : this._prevLng)) / 360);\n\n          if (this._prevLng = t, e) {\n            var _t187 = {};\n\n            for (var _r176 in this._tiles) {\n              var _i133 = this._tiles[_r176];\n              _i133.tileID = _i133.tileID.unwrapTo(_i133.tileID.wrap + e), _t187[_i133.tileID.key] = _i133;\n            }\n\n            this._tiles = _t187;\n\n            for (var _t188 in this._timers) {\n              clearTimeout(this._timers[_t188]), delete this._timers[_t188];\n            }\n\n            for (var _t189 in this._tiles) {\n              this._setTileReloadTimer(+_t189, this._tiles[_t189]);\n            }\n          }\n        }\n      }, {\n        key: \"update\",\n        value: function update(t, e, r) {\n          var _this37 = this;\n\n          if (this.transform = t, !this._sourceLoaded || this._paused || this.transform.freezeTileCoverage) return;\n          if (this.usedForTerrain && !r) return;\n          var i;\n          this.updateCacheSize(t, e), this.handleWrapJump(this.transform.center.lng), this._coveredTiles = {}, this.used || this.usedForTerrain ? this._source.tileID ? i = t.getVisibleUnwrappedCoordinates(this._source.tileID).map(function (t) {\n            return new mh(t.canonical.z, t.wrap, t.canonical.z, t.canonical.x, t.canonical.y);\n          }) : (i = t.coveringTiles({\n            tileSize: e || this._source.tileSize,\n            minzoom: this._source.minzoom,\n            maxzoom: this._source.maxzoom,\n            roundZoom: this._source.roundZoom && !r,\n            reparseOverscaled: this._source.reparseOverscaled,\n            useElevationData: !!this.transform.elevation && !this.usedForTerrain\n          }), this._source.hasTile && (i = i.filter(function (t) {\n            return _this37._source.hasTile(t);\n          }))) : i = [];\n\n          var n = this._updateRetainedTiles(i);\n\n          if (Sp(this._source.type) && 0 !== i.length) {\n            var _t190 = {},\n                _e186 = {},\n                _r177 = Object.keys(n);\n\n            for (var _i134 = 0, _r178 = _r177; _i134 < _r178.length; _i134++) {\n              var _i135 = _r178[_i134];\n              var _r179 = n[_i135],\n                  _s82 = this._tiles[_i135];\n              if (!_s82 || _s82.fadeEndTime && _s82.fadeEndTime <= $.now()) continue;\n\n              var _a71 = this.findLoadedParent(_r179, Math.max(_r179.overscaledZ - kp.maxOverzooming, this._source.minzoom));\n\n              _a71 && (this._addTile(_a71.tileID), _t190[_a71.tileID.key] = _a71.tileID), _e186[_i135] = _r179;\n            }\n\n            var _s81 = i[i.length - 1].overscaledZ;\n\n            for (var _t191 in this._tiles) {\n              var _r180 = this._tiles[_t191];\n              if (n[_t191] || !_r180.hasData()) continue;\n              var _i136 = _r180.tileID;\n\n              for (; _i136.overscaledZ > _s81;) {\n                _i136 = _i136.scaledTo(_i136.overscaledZ - 1);\n                var _s83 = this._tiles[_i136.key];\n\n                if (_s83 && _s83.hasData() && _e186[_i136.key]) {\n                  n[_t191] = _r180.tileID;\n                  break;\n                }\n              }\n            }\n\n            for (var _e187 in _t190) {\n              n[_e187] || (this._coveredTiles[_e187] = !0, n[_e187] = _t190[_e187]);\n            }\n          }\n\n          for (var _t192 in n) {\n            this._tiles[_t192].clearFadeHold();\n          }\n\n          var s = function (t, e) {\n            var r = [];\n\n            for (var _i137 in t) {\n              _i137 in e || r.push(_i137);\n            }\n\n            return r;\n          }(this._tiles, n);\n\n          var _iterator123 = _createForOfIteratorHelper(s),\n              _step123;\n\n          try {\n            for (_iterator123.s(); !(_step123 = _iterator123.n()).done;) {\n              var _t193 = _step123.value;\n              var _e188 = this._tiles[_t193];\n              _e188.hasSymbolBuckets && !_e188.holdingForFade() ? _e188.setHoldDuration(this.map._fadeDuration) : _e188.hasSymbolBuckets && !_e188.symbolFadeFinished() || this._removeTile(+_t193);\n            }\n          } catch (err) {\n            _iterator123.e(err);\n          } finally {\n            _iterator123.f();\n          }\n\n          this._updateLoadedParentTileCache(), this._onlySymbols && this._source.afterUpdate && this._source.afterUpdate();\n        }\n      }, {\n        key: \"releaseSymbolFadeTiles\",\n        value: function releaseSymbolFadeTiles() {\n          for (var _t194 in this._tiles) {\n            this._tiles[_t194].holdingForFade() && this._removeTile(+_t194);\n          }\n        }\n      }, {\n        key: \"_updateRetainedTiles\",\n        value: function _updateRetainedTiles(t) {\n          var e = {};\n          if (0 === t.length) return e;\n          var r = {},\n              i = t[t.length - 1].overscaledZ,\n              n = t[0].overscaledZ,\n              s = Math.max(n - kp.maxOverzooming, this._source.minzoom),\n              a = Math.max(n + kp.maxUnderzooming, this._source.minzoom),\n              o = {};\n\n          var _iterator124 = _createForOfIteratorHelper(t),\n              _step124;\n\n          try {\n            for (_iterator124.s(); !(_step124 = _iterator124.n()).done;) {\n              var _r181 = _step124.value;\n\n              var _t195 = this._addTile(_r181);\n\n              e[_r181.key] = _r181, _t195.hasData() || i < this._source.maxzoom && (o[_r181.key] = _r181);\n            }\n          } catch (err) {\n            _iterator124.e(err);\n          } finally {\n            _iterator124.f();\n          }\n\n          this._retainLoadedChildren(o, i, a, e);\n\n          var _iterator125 = _createForOfIteratorHelper(t),\n              _step125;\n\n          try {\n            for (_iterator125.s(); !(_step125 = _iterator125.n()).done;) {\n              var _i138 = _step125.value;\n              var _t196 = this._tiles[_i138.key];\n              if (_t196.hasData()) continue;\n\n              if (_i138.canonical.z >= this._source.maxzoom) {\n                var _t197 = _i138.children(this._source.maxzoom)[0],\n                    _r182 = this.getTile(_t197);\n\n                if (_r182 && _r182.hasData()) {\n                  e[_t197.key] = _t197;\n                  continue;\n                }\n              } else {\n                var _t198 = _i138.children(this._source.maxzoom);\n\n                if (e[_t198[0].key] && e[_t198[1].key] && e[_t198[2].key] && e[_t198[3].key]) continue;\n              }\n\n              var _n103 = _t196.wasRequested();\n\n              for (var _a72 = _i138.overscaledZ - 1; _a72 >= s; --_a72) {\n                var _s84 = _i138.scaledTo(_a72);\n\n                if (r[_s84.key]) break;\n                if (r[_s84.key] = !0, _t196 = this.getTile(_s84), !_t196 && _n103 && (_t196 = this._addTile(_s84)), _t196 && (e[_s84.key] = _s84, _n103 = _t196.wasRequested(), _t196.hasData())) break;\n              }\n            }\n          } catch (err) {\n            _iterator125.e(err);\n          } finally {\n            _iterator125.f();\n          }\n\n          return e;\n        }\n      }, {\n        key: \"_updateLoadedParentTileCache\",\n        value: function _updateLoadedParentTileCache() {\n          this._loadedParentTiles = {};\n\n          for (var _t199 in this._tiles) {\n            var _e189 = [];\n\n            var _r183 = void 0,\n                _i139 = this._tiles[_t199].tileID;\n\n            for (; _i139.overscaledZ > 0;) {\n              if (_i139.key in this._loadedParentTiles) {\n                _r183 = this._loadedParentTiles[_i139.key];\n                break;\n              }\n\n              _e189.push(_i139.key);\n\n              var _t200 = _i139.scaledTo(_i139.overscaledZ - 1);\n\n              if (_r183 = this._getLoadedTile(_t200), _r183) break;\n              _i139 = _t200;\n            }\n\n            for (var _i140 = 0, _e190 = _e189; _i140 < _e190.length; _i140++) {\n              var _t201 = _e190[_i140];\n              this._loadedParentTiles[_t201] = _r183;\n            }\n          }\n        }\n      }, {\n        key: \"_addTile\",\n        value: function _addTile(t) {\n          var e = this._tiles[t.key];\n          if (e) return e;\n          e = this._cache.getAndRemove(t), e && (this._setTileReloadTimer(t.key, e), e.tileID = t, this._state.initializeTileState(e, this.map ? this.map.painter : null), this._cacheTimers[t.key] && (clearTimeout(this._cacheTimers[t.key]), delete this._cacheTimers[t.key], this._setTileReloadTimer(t.key, e)));\n          var r = Boolean(e);\n          return r || (e = new wh(t, this._source.tileSize * t.overscaleFactor(), this.transform.tileZoom), this._loadTile(e, this._tileLoaded.bind(this, e, t.key, e.state))), e ? (e.uses++, this._tiles[t.key] = e, r || this._source.fire(new Ct(\"dataloading\", {\n            tile: e,\n            coord: e.tileID,\n            dataType: \"source\"\n          })), e) : null;\n        }\n      }, {\n        key: \"_setTileReloadTimer\",\n        value: function _setTileReloadTimer(t, e) {\n          var _this38 = this;\n\n          t in this._timers && (clearTimeout(this._timers[t]), delete this._timers[t]);\n          var r = e.getExpiryTimeout();\n          r && (this._timers[t] = setTimeout(function () {\n            _this38._reloadTile(t, \"expired\"), delete _this38._timers[t];\n          }, r));\n        }\n      }, {\n        key: \"_removeTile\",\n        value: function _removeTile(t) {\n          var e = this._tiles[t];\n          e && (e.uses--, delete this._tiles[t], this._timers[t] && (clearTimeout(this._timers[t]), delete this._timers[t]), e.uses > 0 || (e.hasData() && \"reloading\" !== e.state ? this._cache.add(e.tileID, e, e.getExpiryTimeout()) : (e.aborted = !0, this._abortTile(e), this._unloadTile(e))));\n        }\n      }, {\n        key: \"clearTiles\",\n        value: function clearTiles() {\n          this._shouldReloadOnResume = !1, this._paused = !1;\n\n          for (var _t202 in this._tiles) {\n            this._removeTile(+_t202);\n          }\n\n          this._cache.reset();\n        }\n      }, {\n        key: \"tilesIn\",\n        value: function tilesIn(t, e, r) {\n          var i = [],\n              n = this.transform;\n          if (!n) return i;\n\n          for (var _s85 in this._tiles) {\n            var _a73 = this._tiles[_s85];\n            if (r && _a73.clearQueryDebugViz(), _a73.holdingForFade()) continue;\n\n            var _o40 = t.containsTile(_a73, n, e);\n\n            _o40 && i.push(_o40);\n          }\n\n          return i;\n        }\n      }, {\n        key: \"getVisibleCoordinates\",\n        value: function getVisibleCoordinates(t) {\n          var _this39 = this;\n\n          var e = this.getRenderableIds(t).map(function (t) {\n            return _this39._tiles[t].tileID;\n          });\n\n          var _iterator126 = _createForOfIteratorHelper(e),\n              _step126;\n\n          try {\n            for (_iterator126.s(); !(_step126 = _iterator126.n()).done;) {\n              var _t203 = _step126.value;\n              _t203.posMatrix = this.transform.calculatePosMatrix(_t203.toUnwrapped());\n            }\n          } catch (err) {\n            _iterator126.e(err);\n          } finally {\n            _iterator126.f();\n          }\n\n          return e;\n        }\n      }, {\n        key: \"hasTransition\",\n        value: function hasTransition() {\n          if (this._source.hasTransition()) return !0;\n          if (Sp(this._source.type)) for (var _t204 in this._tiles) {\n            var _e191 = this._tiles[_t204];\n            if (void 0 !== _e191.fadeEndTime && _e191.fadeEndTime >= $.now()) return !0;\n          }\n          return !1;\n        }\n      }, {\n        key: \"setFeatureState\",\n        value: function setFeatureState(t, e, r) {\n          this._state.updateState(t = t || \"_geojsonTileLayer\", e, r);\n        }\n      }, {\n        key: \"removeFeatureState\",\n        value: function removeFeatureState(t, e, r) {\n          this._state.removeFeatureState(t = t || \"_geojsonTileLayer\", e, r);\n        }\n      }, {\n        key: \"getFeatureState\",\n        value: function getFeatureState(t, e) {\n          return this._state.getState(t = t || \"_geojsonTileLayer\", e);\n        }\n      }, {\n        key: \"setDependencies\",\n        value: function setDependencies(t, e, r) {\n          var i = this._tiles[t];\n          i && i.setDependencies(e, r);\n        }\n      }, {\n        key: \"reloadTilesForDependencies\",\n        value: function reloadTilesForDependencies(t, e) {\n          for (var _r184 in this._tiles) {\n            this._tiles[_r184].hasDependency(t, e) && this._reloadTile(+_r184, \"reloading\");\n          }\n\n          this._cache.filter(function (r) {\n            return !r.hasDependency(t, e);\n          });\n        }\n      }]);\n\n      return kp;\n    }(Vt);\n\n    function Ap(t, e) {\n      var r = Math.abs(2 * t.wrap) - +(t.wrap < 0),\n          i = Math.abs(2 * e.wrap) - +(e.wrap < 0);\n      return t.overscaledZ - e.overscaledZ || i - r || e.canonical.y - t.canonical.y || e.canonical.x - t.canonical.x;\n    }\n\n    function Sp(t) {\n      return \"raster\" === t || \"image\" === t || \"video\" === t;\n    }\n\n    kp.maxOverzooming = 10, kp.maxUnderzooming = 3;\n\n    var Ip = /*#__PURE__*/function () {\n      function Ip(t, e, r) {\n        _classCallCheck(this, Ip);\n\n        this._demTile = t, this._dem = this._demTile.dem, this._scale = e, this._offset = r;\n      }\n\n      _createClass(Ip, [{\n        key: \"tileCoordToPixel\",\n        value: function tileCoordToPixel(t, e) {\n          var r = e * this._scale + this._offset[1],\n              n = Math.floor(t * this._scale + this._offset[0]),\n              s = Math.floor(r);\n          return new i(n, s);\n        }\n      }, {\n        key: \"getElevationAt\",\n        value: function getElevationAt(t, e, r, i) {\n          var n = t * this._scale + this._offset[0],\n              s = e * this._scale + this._offset[1],\n              a = Math.floor(n),\n              o = Math.floor(s),\n              l = this._dem;\n          return i = !!i, r ? Je(Je(l.get(a, o, i), l.get(a, o + 1, i), s - o), Je(l.get(a + 1, o, i), l.get(a + 1, o + 1, i), s - o), n - a) : l.get(a, o, i);\n        }\n      }, {\n        key: \"getElevationAtPixel\",\n        value: function getElevationAtPixel(t, e, r) {\n          return this._dem.get(t, e, !!r);\n        }\n      }, {\n        key: \"getMeterToDEM\",\n        value: function getMeterToDEM(t) {\n          return (1 << this._demTile.tileID.canonical.z) * uh(1, t) * this._dem.stride;\n        }\n      }], [{\n        key: \"create\",\n        value: function create(t, e, r) {\n          var i = r || t.findDEMTileFor(e);\n          if (!i || !i.dem) return;\n          var n = i.dem,\n              s = i.tileID,\n              a = 1 << e.canonical.z - s.canonical.z;\n          return new Ip(i, i.tileSize / 8192 / a, [(e.canonical.x / a - s.canonical.x) * n.dim, (e.canonical.y / a - s.canonical.y) * n.dim]);\n        }\n      }]);\n\n      return Ip;\n    }();\n\n    var Tp = /*#__PURE__*/function () {\n      function Tp(t, e) {\n        _classCallCheck(this, Tp);\n\n        this.tileID = t, this.x = t.canonical.x, this.y = t.canonical.y, this.z = t.canonical.z, this.grid = new Oi(8192, 16, 0), this.featureIndexArray = new Us(), this.promoteId = e;\n      }\n\n      _createClass(Tp, [{\n        key: \"insert\",\n        value: function insert(t, e, r, i, n) {\n          var s = arguments.length > 5 && arguments[5] !== undefined ? arguments[5] : 0;\n          var a = this.featureIndexArray.length;\n          this.featureIndexArray.emplaceBack(r, i, n, s);\n          var o = this.grid;\n\n          for (var _t205 = 0; _t205 < e.length; _t205++) {\n            var _r185 = e[_t205],\n                _i141 = [1 / 0, 1 / 0, -1 / 0, -1 / 0];\n\n            for (var _t206 = 0; _t206 < _r185.length; _t206++) {\n              var _e192 = _r185[_t206];\n              _i141[0] = Math.min(_i141[0], _e192.x), _i141[1] = Math.min(_i141[1], _e192.y), _i141[2] = Math.max(_i141[2], _e192.x), _i141[3] = Math.max(_i141[3], _e192.y);\n            }\n\n            _i141[0] < 8192 && _i141[1] < 8192 && _i141[2] >= 0 && _i141[3] >= 0 && o.insert(a, _i141[0], _i141[1], _i141[2], _i141[3]);\n          }\n        }\n      }, {\n        key: \"loadVTLayers\",\n        value: function loadVTLayers() {\n          return this.vtLayers || (this.vtLayers = new Al.VectorTile(new ou(this.rawTileData)).layers, this.sourceLayerCoder = new xh(this.vtLayers ? Object.keys(this.vtLayers).sort() : [\"_geojsonTileLayer\"])), this.vtLayers;\n        }\n      }, {\n        key: \"query\",\n        value: function query(t, e, r, i) {\n          var _this40 = this;\n\n          this.loadVTLayers();\n          var n = t.params || {},\n              s = pi(n.filter),\n              a = t.tileResult,\n              o = t.transform,\n              l = a.bufferedTilespaceBounds,\n              u = this.grid.query(l.min.x, l.min.y, l.max.x, l.max.y, function (t, e, r, i) {\n            return Da(a.bufferedTilespaceGeometry, t, e, r, i);\n          });\n          u.sort(Ep);\n          var c = null;\n          o.elevation && u.length > 0 && (c = Ip.create(o.elevation, this.tileID));\n          var h = {};\n          var p;\n\n          var _loop5 = function _loop5(_o41) {\n            var l = u[_o41];\n            if (l === p) return \"continue\";\n            p = l;\n\n            var d = _this40.featureIndexArray.get(l);\n\n            var f = null;\n\n            _this40.loadMatchingFeature(h, d, s, n.layers, n.availableImages, e, r, i, function (e, r, i) {\n              var n = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : 0;\n              return f || (f = xa(e)), r.queryIntersectsFeature(a, e, i, f, _this40.z, t.transform, t.pixelPosMatrix, c, n);\n            });\n          };\n\n          for (var _o41 = 0; _o41 < u.length; _o41++) {\n            var _ret2 = _loop5(_o41);\n\n            if (_ret2 === \"continue\") continue;\n          }\n\n          return h;\n        }\n      }, {\n        key: \"loadMatchingFeature\",\n        value: function loadMatchingFeature(t, e, r, i, n, s, a, o, l) {\n          var u = e.featureIndex,\n              c = e.bucketIndex,\n              h = e.sourceLayerIndex,\n              p = e.layoutVertexArrayOffset,\n              d = this.bucketLayerIDs[c];\n          if (i && !function (t, e) {\n            for (var _r186 = 0; _r186 < t.length; _r186++) {\n              if (e.indexOf(t[_r186]) >= 0) return !0;\n            }\n\n            return !1;\n          }(i, d)) return;\n          var f = this.sourceLayerCoder.decode(h),\n              y = this.vtLayers[f].feature(u);\n\n          if (r.needGeometry) {\n            var _t207 = va(y, !0);\n\n            if (!r.filter(new qn(this.tileID.overscaledZ), _t207, this.tileID.canonical)) return;\n          } else if (!r.filter(new qn(this.tileID.overscaledZ), y)) return;\n\n          var m = this.getId(y, f);\n\n          for (var _e193 = 0; _e193 < d.length; _e193++) {\n            var _r187 = d[_e193];\n            if (i && i.indexOf(_r187) < 0) continue;\n            var _c20 = s[_r187];\n            if (!_c20) continue;\n            var _h10 = {};\n            void 0 !== m && o && (_h10 = o.getState(_c20.sourceLayer || \"_geojsonTileLayer\", m));\n\n            var _f10 = x({}, a[_r187]);\n\n            _f10.paint = zp(_f10.paint, _c20.paint, y, _h10, n), _f10.layout = zp(_f10.layout, _c20.layout, y, _h10, n);\n\n            var _g10 = !l || l(y, _c20, _h10, p);\n\n            if (!_g10) continue;\n\n            var _v9 = new vh(y, this.z, this.x, this.y, m);\n\n            _v9.layer = _f10;\n            var _b8 = t[_r187];\n            void 0 === _b8 && (_b8 = t[_r187] = []), _b8.push({\n              featureIndex: u,\n              feature: _v9,\n              intersectionZ: _g10\n            });\n          }\n        }\n      }, {\n        key: \"lookupSymbolFeatures\",\n        value: function lookupSymbolFeatures(t, e, r, i, n, s, a, o) {\n          var l = {};\n          this.loadVTLayers();\n          var u = pi(n);\n\n          var _iterator127 = _createForOfIteratorHelper(t),\n              _step127;\n\n          try {\n            for (_iterator127.s(); !(_step127 = _iterator127.n()).done;) {\n              var _n104 = _step127.value;\n              this.loadMatchingFeature(l, {\n                bucketIndex: r,\n                sourceLayerIndex: i,\n                featureIndex: _n104,\n                layoutVertexArrayOffset: 0\n              }, u, s, a, o, e);\n            }\n          } catch (err) {\n            _iterator127.e(err);\n          } finally {\n            _iterator127.f();\n          }\n\n          return l;\n        }\n      }, {\n        key: \"hasLayer\",\n        value: function hasLayer(t) {\n          var _iterator128 = _createForOfIteratorHelper(this.bucketLayerIDs),\n              _step128;\n\n          try {\n            for (_iterator128.s(); !(_step128 = _iterator128.n()).done;) {\n              var _e194 = _step128.value;\n\n              var _iterator129 = _createForOfIteratorHelper(_e194),\n                  _step129;\n\n              try {\n                for (_iterator129.s(); !(_step129 = _iterator129.n()).done;) {\n                  var _r188 = _step129.value;\n                  if (t === _r188) return !0;\n                }\n              } catch (err) {\n                _iterator129.e(err);\n              } finally {\n                _iterator129.f();\n              }\n            }\n          } catch (err) {\n            _iterator128.e(err);\n          } finally {\n            _iterator128.f();\n          }\n\n          return !1;\n        }\n      }, {\n        key: \"getId\",\n        value: function getId(t, e) {\n          var r = t.id;\n          return this.promoteId && (r = t.properties[\"string\" == typeof this.promoteId ? this.promoteId : this.promoteId[e]], \"boolean\" == typeof r && (r = Number(r))), r;\n        }\n      }]);\n\n      return Tp;\n    }();\n\n    function zp(t, e, r, i, n) {\n      return S(t, function (t, s) {\n        var a = e instanceof Yn ? e.get(s) : null;\n        return a && a.evaluate ? a.evaluate(r, i, n) : a;\n      });\n    }\n\n    function Ep(t, e) {\n      return e - t;\n    }\n\n    Gi(\"FeatureIndex\", Tp, {\n      omit: [\"rawTileData\", \"sourceLayerCoder\"]\n    });\n\n    var Mp = function Mp(t) {\n      _classCallCheck(this, Mp);\n\n      var e = {},\n          r = [];\n\n      for (var _i142 in t) {\n        var _n105 = t[_i142],\n            _s86 = e[_i142] = {};\n\n        for (var _t208 in _n105) {\n          var _e195 = _n105[+_t208];\n          if (!_e195 || 0 === _e195.bitmap.width || 0 === _e195.bitmap.height) continue;\n\n          var _i143 = _e195.metrics.localGlyph ? 2 : 1,\n              _a74 = {\n            x: 0,\n            y: 0,\n            w: _e195.bitmap.width + 2 * _i143,\n            h: _e195.bitmap.height + 2 * _i143\n          };\n\n          r.push(_a74), _s86[_t208] = {\n            rect: _a74,\n            metrics: _e195.metrics\n          };\n        }\n      }\n\n      var _zu2 = zu(r),\n          i = _zu2.w,\n          n = _zu2.h,\n          s = new _o({\n        width: i || 1,\n        height: n || 1\n      });\n\n      for (var _r189 in t) {\n        var _i144 = t[_r189];\n\n        for (var _t209 in _i144) {\n          var _n106 = _i144[+_t209];\n          if (!_n106 || 0 === _n106.bitmap.width || 0 === _n106.bitmap.height) continue;\n\n          var _a75 = e[_r189][_t209].rect,\n              _o42 = _n106.metrics.localGlyph ? 2 : 1;\n\n          _o.copy(_n106.bitmap, s, {\n            x: 0,\n            y: 0\n          }, {\n            x: _a75.x + _o42,\n            y: _a75.y + _o42\n          }, _n106.bitmap);\n        }\n      }\n\n      this.image = s, this.positions = e;\n    };\n\n    Gi(\"GlyphAtlas\", Mp);\n\n    var Bp = /*#__PURE__*/function () {\n      function Bp(t) {\n        _classCallCheck(this, Bp);\n\n        this.tileID = new mh(t.tileID.overscaledZ, t.tileID.wrap, t.tileID.canonical.z, t.tileID.canonical.x, t.tileID.canonical.y), this.tileZoom = t.tileZoom, this.uid = t.uid, this.zoom = t.zoom, this.pixelRatio = t.pixelRatio, this.tileSize = t.tileSize, this.source = t.source, this.overscaling = this.tileID.overscaleFactor(), this.showCollisionBoxes = t.showCollisionBoxes, this.collectResourceTiming = !!t.collectResourceTiming, this.returnDependencies = !!t.returnDependencies, this.promoteId = t.promoteId, this.enableTerrain = !!t.enableTerrain, this.isSymbolTile = t.isSymbolTile;\n      }\n\n      _createClass(Bp, [{\n        key: \"parse\",\n        value: function parse(t, e, r, i, n) {\n          var _this41 = this;\n\n          this.status = \"parsing\", this.data = t, this.collisionBoxArray = new Bs();\n          var s = new xh(Object.keys(t.layers).sort()),\n              a = new Tp(this.tileID, this.promoteId);\n          a.bucketLayerIDs = [];\n          var o = {},\n              l = {\n            featureIndex: a,\n            iconDependencies: {},\n            patternDependencies: {},\n            glyphDependencies: {},\n            availableImages: r\n          },\n              u = e.familiesBySource[this.source];\n\n          for (var _e196 in u) {\n            var _i145 = t.layers[_e196];\n            if (!_i145) continue;\n\n            var _n107 = !1,\n                _c21 = !1;\n\n            var _iterator130 = _createForOfIteratorHelper(u[_e196]),\n                _step130;\n\n            try {\n              for (_iterator130.s(); !(_step130 = _iterator130.n()).done;) {\n                var _t211 = _step130.value;\n                \"symbol\" === _t211[0].type ? _n107 = !0 : _c21 = !0;\n              }\n            } catch (err) {\n              _iterator130.e(err);\n            } finally {\n              _iterator130.f();\n            }\n\n            if (!0 === this.isSymbolTile && !_n107) continue;\n            if (!1 === this.isSymbolTile && !_c21) continue;\n            1 === _i145.version && E(\"Vector tile source \\\"\".concat(this.source, \"\\\" layer \\\"\").concat(_e196, \"\\\" \") + \"does not use vector tile spec v2 and therefore may have some rendering errors.\");\n\n            var _h11 = s.encode(_e196),\n                _p14 = [];\n\n            for (var _t210 = 0; _t210 < _i145.length; _t210++) {\n              var _r190 = _i145.feature(_t210),\n                  _n108 = a.getId(_r190, _e196);\n\n              _p14.push({\n                feature: _r190,\n                id: _n108,\n                index: _t210,\n                sourceLayerIndex: _h11\n              });\n            }\n\n            var _iterator131 = _createForOfIteratorHelper(u[_e196]),\n                _step131;\n\n            try {\n              for (_iterator131.s(); !(_step131 = _iterator131.n()).done;) {\n                var _t212 = _step131.value;\n                var _e197 = _t212[0];\n                void 0 !== this.isSymbolTile && \"symbol\" === _e197.type !== this.isSymbolTile || _e197.minzoom && this.zoom < Math.floor(_e197.minzoom) || _e197.maxzoom && this.zoom >= _e197.maxzoom || \"none\" !== _e197.visibility && (Dp(_t212, this.zoom, r), (o[_e197.id] = _e197.createBucket({\n                  index: a.bucketLayerIDs.length,\n                  layers: _t212,\n                  zoom: this.zoom,\n                  pixelRatio: this.pixelRatio,\n                  overscaling: this.overscaling,\n                  collisionBoxArray: this.collisionBoxArray,\n                  sourceLayerIndex: _h11,\n                  sourceID: this.source,\n                  enableTerrain: this.enableTerrain\n                })).populate(_p14, l, this.tileID.canonical), a.bucketLayerIDs.push(_t212.map(function (t) {\n                  return t.id;\n                })));\n              }\n            } catch (err) {\n              _iterator131.e(err);\n            } finally {\n              _iterator131.f();\n            }\n          }\n\n          var c, h, p, d;\n          var f = {\n            type: \"maybePrepare\",\n            isSymbolTile: this.isSymbolTile,\n            zoom: this.zoom\n          },\n              y = S(l.glyphDependencies, function (t) {\n            return Object.keys(t).map(Number);\n          });\n          Object.keys(y).length ? i.send(\"getGlyphs\", {\n            uid: this.uid,\n            stacks: y\n          }, function (t, e) {\n            c || (c = t, h = e, v.call(_this41));\n          }, void 0, void 0, f) : h = {};\n          var m = Object.keys(l.iconDependencies);\n          m.length ? i.send(\"getImages\", {\n            icons: m,\n            source: this.source,\n            tileID: this.tileID,\n            type: \"icons\"\n          }, function (t, e) {\n            c || (c = t, p = e, v.call(_this41));\n          }, void 0, void 0, f) : p = {};\n          var x = Object.keys(l.patternDependencies);\n\n          function v() {\n            if (c) return n(c);\n\n            if (h && p && d) {\n              var _t213 = new Mp(h),\n                  _e198 = new Mu(p, d);\n\n              for (var _i146 in o) {\n                var _n109 = o[_i146];\n                _n109 instanceof Vc ? (Dp(_n109.layers, this.zoom, r), bc(_n109, h, _t213.positions, p, _e198.iconPositions, this.showCollisionBoxes, this.tileID.canonical, this.tileZoom)) : _n109.hasPattern && (_n109 instanceof ql || _n109 instanceof cl || _n109 instanceof El) && (Dp(_n109.layers, this.zoom, r), _n109.addFeatures(l, this.tileID.canonical, _e198.patternPositions));\n              }\n\n              this.status = \"done\", n(null, {\n                buckets: g(o).filter(function (t) {\n                  return !t.isEmpty();\n                }),\n                featureIndex: a,\n                collisionBoxArray: this.collisionBoxArray,\n                glyphAtlasImage: _t213.image,\n                imageAtlas: _e198,\n                glyphMap: this.returnDependencies ? h : null,\n                iconMap: this.returnDependencies ? p : null,\n                glyphPositions: this.returnDependencies ? _t213.positions : null\n              });\n            }\n          }\n\n          x.length ? i.send(\"getImages\", {\n            icons: x,\n            source: this.source,\n            tileID: this.tileID,\n            type: \"patterns\"\n          }, function (t, e) {\n            c || (c = t, d = e, v.call(_this41));\n          }, void 0, void 0, f) : d = {}, v.call(this);\n        }\n      }]);\n\n      return Bp;\n    }();\n\n    function Dp(t, e, r) {\n      var i = new qn(e);\n\n      var _iterator132 = _createForOfIteratorHelper(t),\n          _step132;\n\n      try {\n        for (_iterator132.s(); !(_step132 = _iterator132.n()).done;) {\n          var _e199 = _step132.value;\n\n          _e199.recalculate(i, r);\n        }\n      } catch (err) {\n        _iterator132.e(err);\n      } finally {\n        _iterator132.f();\n      }\n    }\n\n    var Cp = /*#__PURE__*/function () {\n      function Cp(t) {\n        _classCallCheck(this, Cp);\n\n        this.entries = {}, this.scheduler = t;\n      }\n\n      _createClass(Cp, [{\n        key: \"request\",\n        value: function request(t, e, r, i) {\n          var _this42 = this;\n\n          var n = this.entries[t] = this.entries[t] || {\n            callbacks: []\n          };\n\n          if (n.result) {\n            var _n$result = _slicedToArray(n.result, 2),\n                _t214 = _n$result[0],\n                _r191 = _n$result[1];\n\n            return this.scheduler ? this.scheduler.add(function () {\n              i(_t214, _r191);\n            }, e) : i(_t214, _r191), function () {};\n          }\n\n          return n.callbacks.push(i), n.cancel || (n.cancel = r(function (r, i) {\n            n.result = [r, i];\n\n            var _iterator133 = _createForOfIteratorHelper(n.callbacks),\n                _step133;\n\n            try {\n              var _loop6 = function _loop6() {\n                var t = _step133.value;\n                _this42.scheduler ? _this42.scheduler.add(function () {\n                  t(r, i);\n                }, e) : t(r, i);\n              };\n\n              for (_iterator133.s(); !(_step133 = _iterator133.n()).done;) {\n                _loop6();\n              }\n            } catch (err) {\n              _iterator133.e(err);\n            } finally {\n              _iterator133.f();\n            }\n\n            setTimeout(function () {\n              return delete _this42.entries[t];\n            }, 3e3);\n          })), function () {\n            n.result || (n.callbacks = n.callbacks.filter(function (t) {\n              return t !== i;\n            }), n.callbacks.length || (n.cancel(), delete _this42.entries[t]));\n          };\n        }\n      }]);\n\n      return Cp;\n    }();\n\n    function Pp(t, e, r) {\n      var i = JSON.stringify(t.request);\n      return t.data && (this.deduped.entries[i] = {\n        result: [null, t.data]\n      }), this.deduped.request(i, {\n        type: \"parseTile\",\n        isSymbolTile: t.isSymbolTile,\n        zoom: t.tileZoom\n      }, function (e) {\n        var i = kt(t.request, function (t, i, n, s) {\n          t ? e(t) : i && e(null, {\n            vectorTile: r ? void 0 : new Al.VectorTile(new ou(i)),\n            rawData: i,\n            cacheControl: n,\n            expires: s\n          });\n        });\n        return function () {\n          i.cancel(), e();\n        };\n      }, e);\n    }\n\n    t.AUTH_ERR_MSG = \"NO_ACCESS_TOKEN\", t.Aabb = po, t.Actor = /*#__PURE__*/function () {\n      function _class5(t, e, r) {\n        _classCallCheck(this, _class5);\n\n        this.target = t, this.parent = e, this.mapId = r, this.callbacks = {}, this.cancelCallbacks = {}, k([\"receive\"], this), this.target.addEventListener(\"message\", this.receive, !1), this.globalScope = D() ? t : s, this.scheduler = new eh();\n      }\n\n      _createClass(_class5, [{\n        key: \"send\",\n        value: function send(t, e, r, i) {\n          var _this43 = this;\n\n          var n = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : !1;\n          var s = arguments.length > 5 ? arguments[5] : undefined;\n          var a = Math.round(1e18 * Math.random()).toString(36).substring(0, 10);\n          r && (r.metadata = s, this.callbacks[a] = r);\n          var o = R(this.globalScope) ? void 0 : [];\n          return this.target.postMessage({\n            id: a,\n            type: t,\n            hasCallback: !!r,\n            targetMapId: i,\n            mustQueue: n,\n            sourceMapId: this.mapId,\n            data: Ki(e, o)\n          }, o), {\n            cancel: function cancel() {\n              r && delete _this43.callbacks[a], _this43.target.postMessage({\n                id: a,\n                type: \"<cancel>\",\n                targetMapId: i,\n                sourceMapId: _this43.mapId\n              });\n            }\n          };\n        }\n      }, {\n        key: \"receive\",\n        value: function receive(t) {\n          var _this44 = this;\n\n          var e = t.data,\n              r = e.id;\n          if (r && (!e.targetMapId || this.mapId === e.targetMapId)) if (\"<cancel>\" === e.type) {\n            var _t215 = this.cancelCallbacks[r];\n            delete this.cancelCallbacks[r], _t215 && _t215.cancel();\n          } else if (D() || e.mustQueue) {\n            var _t216 = this.callbacks[r];\n            this.cancelCallbacks[r] = this.scheduler.add(function () {\n              return _this44.processTask(r, e);\n            }, _t216 && _t216.metadata || {\n              type: \"message\"\n            });\n          } else this.processTask(r, e);\n        }\n      }, {\n        key: \"processTask\",\n        value: function processTask(t, e) {\n          var _this45 = this;\n\n          if (\"<response>\" === e.type) {\n            var _r192 = this.callbacks[t];\n            delete this.callbacks[t], _r192 && (e.error ? _r192(Hi(e.error)) : _r192(null, Hi(e.data)));\n          } else {\n            var _r193 = R(this.globalScope) ? void 0 : [],\n                _i147 = e.hasCallback ? function (e, i) {\n              delete _this45.cancelCallbacks[t], _this45.target.postMessage({\n                id: t,\n                type: \"<response>\",\n                sourceMapId: _this45.mapId,\n                error: e ? Ki(e) : null,\n                data: Ki(i, _r193)\n              }, _r193);\n            } : function (t) {},\n                _n110 = Hi(e.data);\n\n            if (this.parent[e.type]) this.parent[e.type](e.sourceMapId, _n110, _i147);else if (this.parent.getWorkerSource) {\n              var _t217 = e.type.split(\".\");\n\n              this.parent.getWorkerSource(e.sourceMapId, _t217[0], _n110.source)[_t217[1]](_n110, _i147);\n            } else _i147(new Error(\"Could not find function \".concat(e.type)));\n          }\n        }\n      }, {\n        key: \"remove\",\n        value: function remove() {\n          this.scheduler.remove(), this.target.removeEventListener(\"message\", this.receive, !1);\n        }\n      }]);\n\n      return _class5;\n    }(), t.CanonicalTileID = fh, t.Color = le, t.ColorMode = wp, t.Context = /*#__PURE__*/function () {\n      function _class6(t) {\n        _classCallCheck(this, _class6);\n\n        this.gl = t, this.extVertexArrayObject = this.gl.getExtension(\"OES_vertex_array_object\"), this.clearColor = new Lh(this), this.clearDepth = new Uh(this), this.clearStencil = new Oh(this), this.colorMask = new $h(this), this.depthMask = new qh(this), this.stencilMask = new Nh(this), this.stencilFunc = new jh(this), this.stencilOp = new Gh(this), this.stencilTest = new Zh(this), this.depthRange = new Xh(this), this.depthTest = new Kh(this), this.depthFunc = new Hh(this), this.blend = new Yh(this), this.blendFunc = new Wh(this), this.blendColor = new Jh(this), this.blendEquation = new Qh(this), this.cullFace = new tp(this), this.cullFaceSide = new ep(this), this.frontFace = new rp(this), this.program = new ip(this), this.activeTexture = new np(this), this.viewport = new sp(this), this.bindFramebuffer = new ap(this), this.bindRenderbuffer = new op(this), this.bindTexture = new lp(this), this.bindVertexBuffer = new up(this), this.bindElementBuffer = new cp(this), this.bindVertexArrayOES = this.extVertexArrayObject && new hp(this), this.pixelStoreUnpack = new pp(this), this.pixelStoreUnpackPremultiplyAlpha = new dp(this), this.pixelStoreUnpackFlipY = new fp(this), this.extTextureFilterAnisotropic = t.getExtension(\"EXT_texture_filter_anisotropic\") || t.getExtension(\"MOZ_EXT_texture_filter_anisotropic\") || t.getExtension(\"WEBKIT_EXT_texture_filter_anisotropic\"), this.extTextureFilterAnisotropic && (this.extTextureFilterAnisotropicMax = t.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)), this.extTextureFilterAnisotropicForceOff = !1, this.extTextureHalfFloat = t.getExtension(\"OES_texture_half_float\"), this.extTextureHalfFloat && (t.getExtension(\"OES_texture_half_float_linear\"), this.extRenderToTextureHalfFloat = t.getExtension(\"EXT_color_buffer_half_float\")), this.extTimerQuery = t.getExtension(\"EXT_disjoint_timer_query\"), this.maxTextureSize = t.getParameter(t.MAX_TEXTURE_SIZE);\n      }\n\n      _createClass(_class6, [{\n        key: \"setDefault\",\n        value: function setDefault() {\n          this.unbindVAO(), this.clearColor.setDefault(), this.clearDepth.setDefault(), this.clearStencil.setDefault(), this.colorMask.setDefault(), this.depthMask.setDefault(), this.stencilMask.setDefault(), this.stencilFunc.setDefault(), this.stencilOp.setDefault(), this.stencilTest.setDefault(), this.depthRange.setDefault(), this.depthTest.setDefault(), this.depthFunc.setDefault(), this.blend.setDefault(), this.blendFunc.setDefault(), this.blendColor.setDefault(), this.blendEquation.setDefault(), this.cullFace.setDefault(), this.cullFaceSide.setDefault(), this.frontFace.setDefault(), this.program.setDefault(), this.activeTexture.setDefault(), this.bindFramebuffer.setDefault(), this.pixelStoreUnpack.setDefault(), this.pixelStoreUnpackPremultiplyAlpha.setDefault(), this.pixelStoreUnpackFlipY.setDefault();\n        }\n      }, {\n        key: \"setDirty\",\n        value: function setDirty() {\n          this.clearColor.dirty = !0, this.clearDepth.dirty = !0, this.clearStencil.dirty = !0, this.colorMask.dirty = !0, this.depthMask.dirty = !0, this.stencilMask.dirty = !0, this.stencilFunc.dirty = !0, this.stencilOp.dirty = !0, this.stencilTest.dirty = !0, this.depthRange.dirty = !0, this.depthTest.dirty = !0, this.depthFunc.dirty = !0, this.blend.dirty = !0, this.blendFunc.dirty = !0, this.blendColor.dirty = !0, this.blendEquation.dirty = !0, this.cullFace.dirty = !0, this.cullFaceSide.dirty = !0, this.frontFace.dirty = !0, this.program.dirty = !0, this.activeTexture.dirty = !0, this.viewport.dirty = !0, this.bindFramebuffer.dirty = !0, this.bindRenderbuffer.dirty = !0, this.bindTexture.dirty = !0, this.bindVertexBuffer.dirty = !0, this.bindElementBuffer.dirty = !0, this.extVertexArrayObject && (this.bindVertexArrayOES.dirty = !0), this.pixelStoreUnpack.dirty = !0, this.pixelStoreUnpackPremultiplyAlpha.dirty = !0, this.pixelStoreUnpackFlipY.dirty = !0;\n        }\n      }, {\n        key: \"createIndexBuffer\",\n        value: function createIndexBuffer(t, e) {\n          return new Ph(this, t, e);\n        }\n      }, {\n        key: \"createVertexBuffer\",\n        value: function createVertexBuffer(t, e, r) {\n          return new Fh(this, t, e, r);\n        }\n      }, {\n        key: \"createRenderbuffer\",\n        value: function createRenderbuffer(t, e, r) {\n          var i = this.gl,\n              n = i.createRenderbuffer();\n          return this.bindRenderbuffer.set(n), i.renderbufferStorage(i.RENDERBUFFER, t, e, r), this.bindRenderbuffer.set(null), n;\n        }\n      }, {\n        key: \"createFramebuffer\",\n        value: function createFramebuffer(t, e, r) {\n          return new xp(this, t, e, r);\n        }\n      }, {\n        key: \"clear\",\n        value: function clear(_ref162) {\n          var t = _ref162.color,\n              e = _ref162.depth,\n              r = _ref162.stencil;\n          var i = this.gl;\n          var n = 0;\n          t && (n |= i.COLOR_BUFFER_BIT, this.clearColor.set(t), this.colorMask.set([!0, !0, !0, !0])), void 0 !== e && (n |= i.DEPTH_BUFFER_BIT, this.depthRange.set([0, 1]), this.clearDepth.set(e), this.depthMask.set(!0)), void 0 !== r && (n |= i.STENCIL_BUFFER_BIT, this.clearStencil.set(r), this.stencilMask.set(255)), i.clear(n);\n        }\n      }, {\n        key: \"setCullFace\",\n        value: function setCullFace(t) {\n          !1 === t.enable ? this.cullFace.set(!1) : (this.cullFace.set(!0), this.cullFaceSide.set(t.mode), this.frontFace.set(t.frontFace));\n        }\n      }, {\n        key: \"setDepthMode\",\n        value: function setDepthMode(t) {\n          t.func !== this.gl.ALWAYS || t.mask ? (this.depthTest.set(!0), this.depthFunc.set(t.func), this.depthMask.set(t.mask), this.depthRange.set(t.range)) : this.depthTest.set(!1);\n        }\n      }, {\n        key: \"setStencilMode\",\n        value: function setStencilMode(t) {\n          t.test.func !== this.gl.ALWAYS || t.mask ? (this.stencilTest.set(!0), this.stencilMask.set(t.mask), this.stencilOp.set([t.fail, t.depthFail, t.pass]), this.stencilFunc.set({\n            func: t.test.func,\n            ref: t.ref,\n            mask: t.test.mask\n          })) : this.stencilTest.set(!1);\n        }\n      }, {\n        key: \"setColorMode\",\n        value: function setColorMode(t) {\n          a(t.blendFunction, wp.Replace) ? this.blend.set(!1) : (this.blend.set(!0), this.blendFunc.set(t.blendFunction), this.blendColor.set(t.blendColor)), this.colorMask.set(t.mask);\n        }\n      }, {\n        key: \"unbindVAO\",\n        value: function unbindVAO() {\n          this.extVertexArrayObject && this.bindVertexArrayOES.set(null);\n        }\n      }]);\n\n      return _class6;\n    }(), t.CullFaceMode = _p, t.DEMData = Dh, t.DataConstantProperty = Wn, t.DedupedRequest = Cp, t.DepthMode = vp, t.DepthStencilAttachment = /*#__PURE__*/function (_gp) {\n      _inherits(_class7, _gp);\n\n      var _super94 = _createSuper(_class7);\n\n      function _class7() {\n        _classCallCheck(this, _class7);\n\n        return _super94.apply(this, arguments);\n      }\n\n      _createClass(_class7, [{\n        key: \"attachment\",\n        value: function attachment() {\n          return this.gl.DEPTH_STENCIL_ATTACHMENT;\n        }\n      }]);\n\n      return _class7;\n    }(gp), t.EXTENT = 8192, t.Elevation = /*#__PURE__*/function () {\n      function _class8() {\n        _classCallCheck(this, _class8);\n      }\n\n      _createClass(_class8, [{\n        key: \"getAtPoint\",\n        value: function getAtPoint(t) {\n          var e = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n\n          var r = this._source();\n\n          if (!r) return e;\n          if (t.y < 0 || t.y > 1) return e;\n          var i = r.getSource().maxzoom,\n              n = 1 << i,\n              s = Math.floor(t.x),\n              a = t.x - s,\n              o = new mh(i, s, i, Math.floor(a * n), Math.floor(t.y * n)),\n              l = this.findDEMTileFor(o);\n          if (!l || !l.dem) return e;\n          var u = l.dem,\n              c = 1 << l.tileID.canonical.z,\n              h = (a * c - l.tileID.canonical.x) * u.dim,\n              p = (t.y * c - l.tileID.canonical.y) * u.dim,\n              d = Math.floor(h),\n              f = Math.floor(p);\n          return this.exaggeration() * Je(Je(u.get(d, f), u.get(d, f + 1), p - f), Je(u.get(d + 1, f), u.get(d + 1, f + 1), p - f), h - d);\n        }\n      }, {\n        key: \"getAtTileOffset\",\n        value: function getAtTileOffset(t, e, r) {\n          var i = 1 << t.canonical.z;\n          return this.getAtPoint(new ph(t.wrap + (t.canonical.x + e / 8192) / i, (t.canonical.y + r / 8192) / i));\n        }\n      }, {\n        key: \"getForTilePoints\",\n        value: function getForTilePoints(t, e, r, i) {\n          var _this46 = this;\n\n          var n = Ip.create(this, t, i);\n          return !!n && (e.forEach(function (t) {\n            t[2] = _this46.exaggeration() * n.getElevationAt(t[0], t[1], r);\n          }), !0);\n        }\n      }, {\n        key: \"getMinMaxForTile\",\n        value: function getMinMaxForTile(t) {\n          var e = this.findDEMTileFor(t);\n          if (!e || !e.dem) return null;\n          var r = e.dem.tree,\n              i = e.tileID,\n              n = 1 << t.canonical.z - i.canonical.z;\n          var s = t.canonical.x / n - i.canonical.x,\n              a = t.canonical.y / n - i.canonical.y,\n              o = 0;\n\n          for (var _e200 = 0; _e200 < t.canonical.z - i.canonical.z && !r.leaves[o]; _e200++) {\n            s *= 2, a *= 2;\n\n            var _t218 = 2 * Math.floor(a) + Math.floor(s);\n\n            o = r.childOffsets[o] + _t218, s %= 1, a %= 1;\n          }\n\n          return {\n            min: this.exaggeration() * r.minimums[o],\n            max: this.exaggeration() * r.maximums[o]\n          };\n        }\n      }, {\n        key: \"raycast\",\n        value: function raycast(t, e, r) {\n          throw new Error(\"Pure virtual method called.\");\n        }\n      }, {\n        key: \"pointCoordinate\",\n        value: function pointCoordinate(t) {\n          throw new Error(\"Pure virtual method called.\");\n        }\n      }, {\n        key: \"_source\",\n        value: function _source() {\n          throw new Error(\"Pure virtual method called.\");\n        }\n      }, {\n        key: \"exaggeration\",\n        value: function exaggeration() {\n          throw new Error(\"Pure virtual method called.\");\n        }\n      }, {\n        key: \"findDEMTileFor\",\n        value: function findDEMTileFor(t) {\n          throw new Error(\"Pure virtual method called.\");\n        }\n      }, {\n        key: \"visibleDemTiles\",\n        get: function get() {\n          throw new Error(\"Getter must be implemented in subclass.\");\n        }\n      }]);\n\n      return _class8;\n    }(), t.ErrorEvent = Pt, t.EvaluationParameters = qn, t.Event = Ct, t.Evented = Vt, t.Frustum = ho, t.GlyphManager = oc, t.ImagePosition = Eu, t.LngLat = nh, t.LngLatBounds = ih, t.LocalGlyphMode = ac, t.MAX_SAFE_INTEGER = o, t.MercatorCoordinate = ph, t.ONE_EM = 24, t.OverscaledTileID = mh, t.Point = i, t.Point$1 = i, t.Properties = rs, t.RGBAImage = ko, t.Ray = /*#__PURE__*/function () {\n      function _class9(t, e) {\n        _classCallCheck(this, _class9);\n\n        this.pos = t, this.dir = e;\n      }\n\n      _createClass(_class9, [{\n        key: \"intersectsPlane\",\n        value: function intersectsPlane(t, e, r) {\n          var i = to(e, this.dir);\n          if (Math.abs(i) < 1e-6) return !1;\n          var n = to(so(Ga(), t, this.pos), e) / i;\n          return function (t, e) {\n            t[0] = e[0], t[1] = e[1], t[2] = e[2];\n          }(r, Ja(Ga(), this.pos, this.dir, n)), !0;\n        }\n      }]);\n\n      return _class9;\n    }(), t.RequestManager = /*#__PURE__*/function () {\n      function _class10(t, e) {\n        _classCallCheck(this, _class10);\n\n        this._transformRequestFn = t, this._customAccessToken = e, this._createSkuToken();\n      }\n\n      _createClass(_class10, [{\n        key: \"_createSkuToken\",\n        value: function _createSkuToken() {\n          var t = function () {\n            var t = \"\";\n\n            for (var _e201 = 0; _e201 < 10; _e201++) {\n              t += \"0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ\"[Math.floor(62 * Math.random())];\n            }\n\n            return {\n              token: [\"1\", Y, t].join(\"\"),\n              tokenExpiresAt: Date.now() + 432e5\n            };\n          }();\n\n          this._skuToken = t.token, this._skuTokenExpiresAt = t.tokenExpiresAt;\n        }\n      }, {\n        key: \"_isSkuTokenExpired\",\n        value: function _isSkuTokenExpired() {\n          return Date.now() > this._skuTokenExpiresAt;\n        }\n      }, {\n        key: \"transformRequest\",\n        value: function transformRequest(t, e) {\n          return this._transformRequestFn && this._transformRequestFn(t, e) || {\n            url: t\n          };\n        }\n      }, {\n        key: \"normalizeStyleURL\",\n        value: function normalizeStyleURL(t, e) {\n          if (!W(t)) return t;\n          var r = tt(t);\n          return r.path = \"/styles/v1\".concat(r.path), this._makeAPIURL(r, this._customAccessToken || e);\n        }\n      }, {\n        key: \"normalizeGlyphsURL\",\n        value: function normalizeGlyphsURL(t, e) {\n          if (!W(t)) return t;\n          var r = tt(t);\n          return r.path = \"/fonts/v1\".concat(r.path), this._makeAPIURL(r, this._customAccessToken || e);\n        }\n      }, {\n        key: \"normalizeSourceURL\",\n        value: function normalizeSourceURL(t, e) {\n          if (!W(t)) return t;\n          var r = tt(t);\n          return r.path = \"/v4/\".concat(r.authority, \".json\"), r.params.push(\"secure\"), this._makeAPIURL(r, this._customAccessToken || e);\n        }\n      }, {\n        key: \"normalizeSpriteURL\",\n        value: function normalizeSpriteURL(t, e, r, i) {\n          var n = tt(t);\n          return W(t) ? (n.path = \"/styles/v1\".concat(n.path, \"/sprite\").concat(e).concat(r), this._makeAPIURL(n, this._customAccessToken || i)) : (n.path += \"\".concat(e).concat(r), et(n));\n        }\n      }, {\n        key: \"normalizeTileURL\",\n        value: function normalizeTileURL(t, e, r) {\n          if (this._isSkuTokenExpired() && this._createSkuToken(), t && !W(t)) return t;\n          var i = tt(t);\n          i.path = i.path.replace(/(\\.(png|jpg)\\d*)(?=$)/, \"\".concat(e || r && \"raster\" !== i.authority && 512 === r ? \"@2x\" : \"\").concat(j.supported ? \".webp\" : \"$1\")), \"raster\" === i.authority ? i.path = \"/\".concat(N.RASTER_URL_PREFIX).concat(i.path) : (i.path = i.path.replace(/^.+\\/v4\\//, \"/\"), i.path = \"/\".concat(N.TILE_URL_VERSION).concat(i.path));\n\n          var n = this._customAccessToken || function (t) {\n            var _iterator134 = _createForOfIteratorHelper(t),\n                _step134;\n\n            try {\n              for (_iterator134.s(); !(_step134 = _iterator134.n()).done;) {\n                var _e202 = _step134.value;\n\n                var _t219 = _e202.match(/^access_token=(.*)$/);\n\n                if (_t219) return _t219[1];\n              }\n            } catch (err) {\n              _iterator134.e(err);\n            } finally {\n              _iterator134.f();\n            }\n\n            return null;\n          }(i.params) || N.ACCESS_TOKEN;\n\n          return N.REQUIRE_ACCESS_TOKEN && n && this._skuToken && i.params.push(\"sku=\".concat(this._skuToken)), this._makeAPIURL(i, n);\n        }\n      }, {\n        key: \"canonicalizeTileURL\",\n        value: function canonicalizeTileURL(t, e) {\n          var r = tt(t);\n          if (!r.path.match(/^(\\/v4\\/|\\/raster\\/v1\\/)/) || !r.path.match(/\\.[\\w]+$/)) return t;\n          var i = \"mapbox://\";\n          r.path.match(/^\\/raster\\/v1\\//) ? i += \"raster/\".concat(r.path.replace(\"/\".concat(N.RASTER_URL_PREFIX, \"/\"), \"\")) : i += \"tiles/\".concat(r.path.replace(\"/\".concat(N.TILE_URL_VERSION, \"/\"), \"\"));\n          var n = r.params;\n          return e && (n = n.filter(function (t) {\n            return !t.match(/^access_token=/);\n          })), n.length && (i += \"?\".concat(n.join(\"&\"))), i;\n        }\n      }, {\n        key: \"canonicalizeTileset\",\n        value: function canonicalizeTileset(t, e) {\n          var r = !!e && W(e),\n              i = [];\n\n          var _iterator135 = _createForOfIteratorHelper(t.tiles || []),\n              _step135;\n\n          try {\n            for (_iterator135.s(); !(_step135 = _iterator135.n()).done;) {\n              var _e203 = _step135.value;\n              J(_e203) ? i.push(this.canonicalizeTileURL(_e203, r)) : i.push(_e203);\n            }\n          } catch (err) {\n            _iterator135.e(err);\n          } finally {\n            _iterator135.f();\n          }\n\n          return i;\n        }\n      }, {\n        key: \"_makeAPIURL\",\n        value: function _makeAPIURL(t, e) {\n          var r = \"See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes\",\n              i = tt(N.API_URL);\n\n          if (t.protocol = i.protocol, t.authority = i.authority, \"http\" === t.protocol) {\n            var _e204 = t.params.indexOf(\"secure\");\n\n            _e204 >= 0 && t.params.splice(_e204, 1);\n          }\n\n          if (\"/\" !== i.path && (t.path = \"\".concat(i.path).concat(t.path)), !N.REQUIRE_ACCESS_TOKEN) return et(t);\n          if (!(e = e || N.ACCESS_TOKEN)) throw new Error(\"An API access token is required to use Mapbox GL. \".concat(r));\n          if (\"s\" === e[0]) throw new Error(\"Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). \".concat(r));\n          return t.params = t.params.filter(function (t) {\n            return -1 === t.indexOf(\"access_token\");\n          }), t.params.push(\"access_token=\".concat(e)), et(t);\n        }\n      }]);\n\n      return _class10;\n    }(), t.RequestPerformance = th, t.ResourceType = vt, t.SegmentVector = ya, t.SourceCache = kp, t.StencilMode = bp, t.StructArrayLayout1ui2 = zs, t.StructArrayLayout2f1f2i16 = vs, t.StructArrayLayout2i4 = us, t.StructArrayLayout3f12 = ys, t.StructArrayLayout3ui6 = ws, t.StructArrayLayout4i8 = cs, t.Texture = Wc, t.Tile = wh, t.Transitionable = Gn, t.Uniform1f = Ws, t.Uniform1i = /*#__PURE__*/function (_Ys4) {\n      _inherits(_class11, _Ys4);\n\n      var _super95 = _createSuper(_class11);\n\n      function _class11(t, e) {\n        var _this47;\n\n        _classCallCheck(this, _class11);\n\n        _this47 = _super95.call(this, t, e), _this47.current = 0;\n        return _this47;\n      }\n\n      _createClass(_class11, [{\n        key: \"set\",\n        value: function set(t) {\n          this.current !== t && (this.current = t, this.gl.uniform1i(this.location, t));\n        }\n      }]);\n\n      return _class11;\n    }(Ys), t.Uniform2f = /*#__PURE__*/function (_Ys5) {\n      _inherits(_class12, _Ys5);\n\n      var _super96 = _createSuper(_class12);\n\n      function _class12(t, e) {\n        var _this48;\n\n        _classCallCheck(this, _class12);\n\n        _this48 = _super96.call(this, t, e), _this48.current = [0, 0];\n        return _this48;\n      }\n\n      _createClass(_class12, [{\n        key: \"set\",\n        value: function set(t) {\n          t[0] === this.current[0] && t[1] === this.current[1] || (this.current = t, this.gl.uniform2f(this.location, t[0], t[1]));\n        }\n      }]);\n\n      return _class12;\n    }(Ys), t.Uniform3f = /*#__PURE__*/function (_Ys6) {\n      _inherits(_class13, _Ys6);\n\n      var _super97 = _createSuper(_class13);\n\n      function _class13(t, e) {\n        var _this49;\n\n        _classCallCheck(this, _class13);\n\n        _this49 = _super97.call(this, t, e), _this49.current = [0, 0, 0];\n        return _this49;\n      }\n\n      _createClass(_class13, [{\n        key: \"set\",\n        value: function set(t) {\n          t[0] === this.current[0] && t[1] === this.current[1] && t[2] === this.current[2] || (this.current = t, this.gl.uniform3f(this.location, t[0], t[1], t[2]));\n        }\n      }]);\n\n      return _class13;\n    }(Ys), t.Uniform4f = Js, t.UniformColor = Qs, t.UniformMatrix3f = /*#__PURE__*/function (_Ys7) {\n      _inherits(_class14, _Ys7);\n\n      var _super98 = _createSuper(_class14);\n\n      function _class14(t, e) {\n        var _this50;\n\n        _classCallCheck(this, _class14);\n\n        _this50 = _super98.call(this, t, e), _this50.current = ea;\n        return _this50;\n      }\n\n      _createClass(_class14, [{\n        key: \"set\",\n        value: function set(t) {\n          for (var _e205 = 0; _e205 < 9; _e205++) {\n            if (t[_e205] !== this.current[_e205]) {\n              this.current = t, this.gl.uniformMatrix3fv(this.location, !1, t);\n              break;\n            }\n          }\n        }\n      }]);\n\n      return _class14;\n    }(Ys), t.UniformMatrix4f = /*#__PURE__*/function (_Ys8) {\n      _inherits(_class15, _Ys8);\n\n      var _super99 = _createSuper(_class15);\n\n      function _class15(t, e) {\n        var _this51;\n\n        _classCallCheck(this, _class15);\n\n        _this51 = _super99.call(this, t, e), _this51.current = ta;\n        return _this51;\n      }\n\n      _createClass(_class15, [{\n        key: \"set\",\n        value: function set(t) {\n          if (t[12] !== this.current[12] || t[0] !== this.current[0]) return this.current = t, void this.gl.uniformMatrix4fv(this.location, !1, t);\n\n          for (var _e206 = 1; _e206 < 16; _e206++) {\n            if (t[_e206] !== this.current[_e206]) {\n              this.current = t, this.gl.uniformMatrix4fv(this.location, !1, t);\n              break;\n            }\n          }\n        }\n      }]);\n\n      return _class15;\n    }(Ys), t.UnwrappedTileID = yh, t.ValidationError = Rt, t.VectorTileWorkerSource = /*#__PURE__*/function (_Vt3) {\n      _inherits(_class16, _Vt3);\n\n      var _super100 = _createSuper(_class16);\n\n      function _class16(t, e, r, i, n) {\n        var _this52;\n\n        _classCallCheck(this, _class16);\n\n        _this52 = _super100.call(this), _this52.actor = t, _this52.layerIndex = e, _this52.availableImages = r, _this52.loadVectorData = n || Pp, _this52.loading = {}, _this52.loaded = {}, _this52.deduped = new Cp(t.scheduler), _this52.isSpriteLoaded = i, _this52.scheduler = t.scheduler;\n        return _this52;\n      }\n\n      _createClass(_class16, [{\n        key: \"loadTile\",\n        value: function loadTile(t, e) {\n          var _this53 = this;\n\n          var r = t.uid,\n              i = !!(t && t.request && t.request.collectResourceTiming) && new th(t.request),\n              n = this.loading[r] = new Bp(t);\n          n.abort = this.loadVectorData(t, function (s, a) {\n            var o = !_this53.loading[r];\n            if (delete _this53.loading[r], o || s || !a) return n.status = \"done\", o || (_this53.loaded[r] = n), e(s);\n            var l = a.rawData,\n                u = {};\n            a.expires && (u.expires = a.expires), a.cacheControl && (u.cacheControl = a.cacheControl);\n            var c = {};\n\n            if (i) {\n              var _t220 = i.finish();\n\n              _t220 && (c.resourceTiming = JSON.parse(JSON.stringify(_t220)));\n            }\n\n            n.vectorTile = a.vectorTile || new Al.VectorTile(new ou(l));\n\n            var h = function h() {\n              n.parse(n.vectorTile, _this53.layerIndex, _this53.availableImages, _this53.actor, function (t, r) {\n                if (t || !r) return e(t);\n                e(null, x({\n                  rawTileData: l.slice(0)\n                }, r, u, c));\n              });\n            };\n\n            _this53.isSpriteLoaded ? h() : _this53.once(\"isSpriteLoaded\", function () {\n              _this53.scheduler ? _this53.scheduler.add(h, {\n                type: \"parseTile\",\n                isSymbolTile: t.isSymbolTile,\n                zoom: t.tileZoom\n              }) : h();\n            }), _this53.loaded = _this53.loaded || {}, _this53.loaded[r] = n;\n          });\n        }\n      }, {\n        key: \"reloadTile\",\n        value: function reloadTile(t, e) {\n          var _this54 = this;\n\n          var r = this.loaded,\n              i = t.uid,\n              n = this;\n\n          if (r && r[i]) {\n            var _s87 = r[i];\n            _s87.showCollisionBoxes = t.showCollisionBoxes, _s87.enableTerrain = !!t.enableTerrain;\n\n            var _a76 = function _a76(t, r) {\n              var i = _s87.reloadCallback;\n              i && (delete _s87.reloadCallback, _s87.parse(_s87.vectorTile, n.layerIndex, _this54.availableImages, n.actor, i)), e(t, r);\n            };\n\n            \"parsing\" === _s87.status ? _s87.reloadCallback = _a76 : \"done\" === _s87.status && (_s87.vectorTile ? _s87.parse(_s87.vectorTile, this.layerIndex, this.availableImages, this.actor, _a76) : _a76());\n          }\n        }\n      }, {\n        key: \"abortTile\",\n        value: function abortTile(t, e) {\n          var r = t.uid,\n              i = this.loading[r];\n          i && (i.abort && i.abort(), delete this.loading[r]), e();\n        }\n      }, {\n        key: \"removeTile\",\n        value: function removeTile(t, e) {\n          var r = this.loaded,\n              i = t.uid;\n          r && r[i] && delete r[i], e();\n        }\n      }]);\n\n      return _class16;\n    }(Vt), t.WritingMode = Bu, t.ZoomHistory = Yi, t.add = Ha, t.addDynamicAttributes = Bc, t.altitudeFromMercatorZ = hh, t.asyncAll = m, t.bezier = p, t.bindAll = k, t.browser = $, t.bufferConvexPolygon = function (t, e) {\n      var r = [];\n\n      for (var _i148 = 0; _i148 < t.length; _i148++) {\n        var _n111 = y(_i148 - 1, -1, t.length - 1),\n            _s88 = y(_i148 + 1, -1, t.length - 1),\n            _a77 = t[_i148],\n            _o43 = t[_s88],\n            _l31 = t[_n111].sub(_a77).unit(),\n            _u29 = _o43.sub(_a77).unit(),\n            _c22 = _u29.angleWithSep(_l31.x, _l31.y),\n            _h12 = _l31.add(_u29).unit().mult(-1 * e / Math.sin(_c22 / 2));\n\n        r.push(_a77.add(_h12));\n      }\n\n      return r;\n    }, t.cacheEntryPossiblyAdded = function (t) {\n      gt++, gt > dt && (t.getActor().send(\"enforceCacheSizeLimit\", pt), gt = 0);\n    }, t.clamp = f, t.clearTileCache = function (t) {\n      var e = s.caches.delete(\"mapbox-tiles\");\n      t && e.catch(t).then(function () {\n        return t();\n      });\n    }, t.clipLine = Qu, t.clone = function (t) {\n      var e = new Oa(16);\n      return e[0] = t[0], e[1] = t[1], e[2] = t[2], e[3] = t[3], e[4] = t[4], e[5] = t[5], e[6] = t[6], e[7] = t[7], e[8] = t[8], e[9] = t[9], e[10] = t[10], e[11] = t[11], e[12] = t[12], e[13] = t[13], e[14] = t[14], e[15] = t[15], e;\n    }, t.clone$1 = T, t.collisionCircleLayout = Jl, t.config = N, t.conjugate = function (t, e) {\n      return t[0] = -e[0], t[1] = -e[1], t[2] = -e[2], t[3] = e[3], t;\n    }, t.create = function () {\n      var t = new Oa(16);\n      return Oa != Float32Array && (t[1] = 0, t[2] = 0, t[3] = 0, t[4] = 0, t[6] = 0, t[7] = 0, t[8] = 0, t[9] = 0, t[11] = 0, t[12] = 0, t[13] = 0, t[14] = 0), t[0] = 1, t[5] = 1, t[10] = 1, t[15] = 1, t;\n    }, t.create$1 = $a, t.create$2 = function () {\n      var t = new Oa(4);\n      return Oa != Float32Array && (t[1] = 0, t[2] = 0), t[0] = 1, t[3] = 1, t;\n    }, t.createExpression = Qr, t.createLayout = os, t.createStyleLayer = function (t) {\n      return \"custom\" === t.type ? new qc(t) : new Gc[t.type](t);\n    }, t.cross = eo, t.deepEqual = a, t.degToRad = c, t.div = function (t, e, r) {\n      return t[0] = e[0] / r[0], t[1] = e[1] / r[1], t[2] = e[2] / r[2], t;\n    }, t.dot = to, t.ease = d, t.easeCubicInOut = h, t.emitValidationErrors = Ui, t.endsWith = A, t.enforceCacheSizeLimit = function (t) {\n      ft(), ct && ct.then(function (e) {\n        e.keys().then(function (r) {\n          for (var _i149 = 0; _i149 < r.length - t; _i149++) {\n            e.delete(r[_i149]);\n          }\n        });\n      });\n    }, t.evaluateSizeForFeature = tu, t.evaluateSizeForZoom = eu, t.evaluateVariableOffset = vc, t.evented = Ln, t.exactEquals = function (t, e) {\n      return t[0] === e[0] && t[1] === e[1] && t[2] === e[2] && t[3] === e[3];\n    }, t.exactEquals$1 = function (t, e) {\n      return t[0] === e[0] && t[1] === e[1] && t[2] === e[2];\n    }, t.extend = x, t.featureFilter = pi, t.filterObject = I, t.fromMat4 = function (t, e) {\n      return t[0] = e[0], t[1] = e[1], t[2] = e[2], t[3] = e[4], t[4] = e[5], t[5] = e[6], t[6] = e[8], t[7] = e[9], t[8] = e[10], t;\n    }, t.fromQuat = function (t, e) {\n      var r = e[0],\n          i = e[1],\n          n = e[2],\n          s = e[3],\n          a = r + r,\n          o = i + i,\n          l = n + n,\n          u = r * a,\n          c = i * a,\n          h = i * o,\n          p = n * a,\n          d = n * o,\n          f = n * l,\n          y = s * a,\n          m = s * o,\n          g = s * l;\n      return t[0] = 1 - h - f, t[1] = c + g, t[2] = p - m, t[3] = 0, t[4] = c - g, t[5] = 1 - u - f, t[6] = d + y, t[7] = 0, t[8] = p + m, t[9] = d - y, t[10] = 1 - u - h, t[11] = 0, t[12] = 0, t[13] = 0, t[14] = 0, t[15] = 1, t;\n    }, t.fromRotation = function (t, e) {\n      var r = Math.sin(e),\n          i = Math.cos(e);\n      return t[0] = i, t[1] = r, t[2] = 0, t[3] = -r, t[4] = i, t[5] = 0, t[6] = 0, t[7] = 0, t[8] = 1, t;\n    }, t.getAnchorAlignment = qu, t.getAnchorJustification = wc, t.getBounds = function (t) {\n      var e = 1 / 0,\n          r = 1 / 0,\n          n = -1 / 0,\n          s = -1 / 0;\n\n      var _iterator136 = _createForOfIteratorHelper(t),\n          _step136;\n\n      try {\n        for (_iterator136.s(); !(_step136 = _iterator136.n()).done;) {\n          var _i150 = _step136.value;\n          e = Math.min(e, _i150.x), r = Math.min(r, _i150.y), n = Math.max(n, _i150.x), s = Math.max(s, _i150.y);\n        }\n      } catch (err) {\n        _iterator136.e(err);\n      } finally {\n        _iterator136.f();\n      }\n\n      return {\n        min: new i(e, r),\n        max: new i(n, s)\n      };\n    }, t.getImage = Mt, t.getJSON = function (t, e) {\n      return _t(x(t, {\n        type: \"json\"\n      }), e);\n    }, t.getMapSessionAPI = ut, t.getRTLTextPluginStatus = Un, t.getReferrer = wt, t.getVideo = function (t, e) {\n      var r = s.document.createElement(\"video\");\n      r.muted = !0, r.onloadstart = function () {\n        e(null, r);\n      };\n\n      for (var _e207 = 0; _e207 < t.length; _e207++) {\n        var _i151 = s.document.createElement(\"source\");\n\n        It(t[_e207]) || (r.crossOrigin = \"Anonymous\"), _i151.src = t[_e207], r.appendChild(_i151);\n      }\n\n      return {\n        cancel: function cancel() {}\n      };\n    }, t.identity = qa, t.identity$1 = uo, t.invert = function (t, e) {\n      var r = e[0],\n          i = e[1],\n          n = e[2],\n          s = e[3],\n          a = e[4],\n          o = e[5],\n          l = e[6],\n          u = e[7],\n          c = e[8],\n          h = e[9],\n          p = e[10],\n          d = e[11],\n          f = e[12],\n          y = e[13],\n          m = e[14],\n          g = e[15],\n          x = r * o - i * a,\n          v = r * l - n * a,\n          b = r * u - s * a,\n          w = i * l - n * o,\n          _ = i * u - s * o,\n          k = n * u - s * l,\n          A = c * y - h * f,\n          S = c * m - p * f,\n          I = c * g - d * f,\n          T = h * m - p * y,\n          z = h * g - d * y,\n          E = p * g - d * m,\n          M = x * E - v * z + b * T + w * I - _ * S + k * A;\n\n      return M ? (t[0] = (o * E - l * z + u * T) * (M = 1 / M), t[1] = (n * z - i * E - s * T) * M, t[2] = (y * k - m * _ + g * w) * M, t[3] = (p * _ - h * k - d * w) * M, t[4] = (l * I - a * E - u * S) * M, t[5] = (r * E - n * I + s * S) * M, t[6] = (m * b - f * k - g * v) * M, t[7] = (c * k - p * b + d * v) * M, t[8] = (a * z - o * I + u * A) * M, t[9] = (i * I - r * z - s * A) * M, t[10] = (f * _ - y * b + g * x) * M, t[11] = (h * b - c * _ - d * x) * M, t[12] = (o * S - a * T - l * A) * M, t[13] = (r * T - i * S + n * A) * M, t[14] = (y * v - f * w - m * x) * M, t[15] = (c * w - h * v + p * x) * M, t) : null;\n    }, t.isMapboxURL = W, t.latFromMercatorY = ch, t.len = ao, t.length = Xa, t.length$1 = function (t) {\n      return Math.hypot(t[0], t[1], t[2], t[3]);\n    }, t.loadVectorTile = Pp, t.makeRequest = _t, t.mercatorXfromLng = oh, t.mercatorYfromLat = lh, t.mercatorZfromAltitude = uh, t.mul = ja, t.mul$1 = function (t, e, r) {\n      return t[0] = e[0] * r[0], t[1] = e[1] * r[1], t[2] = e[2] * r[2], t;\n    }, t.multiply = Na, t.mvt = Al, t.nextPowerOfTwo = function (t) {\n      return t <= 1 ? 1 : Math.pow(2, Math.ceil(Math.log(t) / Math.LN2));\n    }, t.normalize = Qa, t.normalize$1 = function (t, e) {\n      var r = e[0],\n          i = e[1],\n          n = e[2],\n          s = e[3],\n          a = r * r + i * i + n * n + s * s;\n      return a > 0 && (a = 1 / Math.sqrt(a)), t[0] = r * a, t[1] = i * a, t[2] = n * a, t[3] = s * a, t;\n    }, t.number = Je, t.offscreenCanvasSupported = xt, t.ortho = function (t, e, r, i, n, s, a) {\n      var o = 1 / (e - r),\n          l = 1 / (i - n),\n          u = 1 / (s - a);\n      return t[0] = -2 * o, t[1] = 0, t[2] = 0, t[3] = 0, t[4] = 0, t[5] = -2 * l, t[6] = 0, t[7] = 0, t[8] = 0, t[9] = 0, t[10] = 2 * u, t[11] = 0, t[12] = (e + r) * o, t[13] = (n + i) * l, t[14] = (a + s) * u, t[15] = 1, t;\n    }, t.pbf = ou, t.perspective = function (t, e, r, i, n) {\n      var s,\n          a = 1 / Math.tan(e / 2);\n      return t[0] = a / r, t[1] = 0, t[2] = 0, t[3] = 0, t[4] = 0, t[5] = a, t[6] = 0, t[7] = 0, t[8] = 0, t[9] = 0, t[11] = -1, t[12] = 0, t[13] = 0, t[15] = 0, null != n && n !== 1 / 0 ? (t[10] = (n + i) * (s = 1 / (i - n)), t[14] = 2 * n * i * s) : (t[10] = -1, t[14] = -2 * i), t;\n    }, t.pick = function (t, e) {\n      var r = {};\n\n      for (var _i152 = 0; _i152 < e.length; _i152++) {\n        var _n112 = e[_i152];\n        _n112 in t && (r[_n112] = t[_n112]);\n      }\n\n      return r;\n    }, t.plugin = $n, t.polygonIntersectsBox = Da, t.polygonIntersectsPolygon = _a, t.polygonizeBounds = function (t, e) {\n      var r = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0;\n      var n = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : !0;\n      var s = new i(r, r),\n          a = t.sub(s),\n          o = e.add(s),\n          l = [a, new i(o.x, a.y), o, new i(a.x, o.y)];\n      return n && l.push(a), l;\n    }, t.posAttributes = bh, t.postMapLoadEvent = ot, t.postTurnstileEvent = st, t.potpack = zu, t.prevPowerOfTwo = function (t) {\n      return t <= 1 ? 1 : Math.pow(2, Math.floor(Math.log(t) / Math.LN2));\n    }, t.radToDeg = function (t) {\n      return t * u;\n    }, t.refProperties = [\"type\", \"source\", \"source-layer\", \"minzoom\", \"maxzoom\", \"filter\", \"layout\"], t.registerForPluginStateChange = function (t) {\n      return t({\n        pluginStatus: Pn,\n        pluginURL: Vn\n      }), Ln.on(\"pluginStateChange\", t), t;\n    }, t.renderColorRamp = So, t.rotate = function (t, e, r) {\n      var i = e[0],\n          n = e[1],\n          s = e[2],\n          a = e[3],\n          o = Math.sin(r),\n          l = Math.cos(r);\n      return t[0] = i * l + s * o, t[1] = n * l + a * o, t[2] = i * -o + s * l, t[3] = n * -o + a * l, t;\n    }, t.rotateX = function (t, e, r) {\n      var i = Math.sin(r),\n          n = Math.cos(r),\n          s = e[4],\n          a = e[5],\n          o = e[6],\n          l = e[7],\n          u = e[8],\n          c = e[9],\n          h = e[10],\n          p = e[11];\n      return e !== t && (t[0] = e[0], t[1] = e[1], t[2] = e[2], t[3] = e[3], t[12] = e[12], t[13] = e[13], t[14] = e[14], t[15] = e[15]), t[4] = s * n + u * i, t[5] = a * n + c * i, t[6] = o * n + h * i, t[7] = l * n + p * i, t[8] = u * n - s * i, t[9] = c * n - a * i, t[10] = h * n - o * i, t[11] = p * n - l * i, t;\n    }, t.rotateX$1 = co, t.rotateY = function (t, e, r) {\n      var i = Math.sin(r),\n          n = Math.cos(r),\n          s = e[0],\n          a = e[1],\n          o = e[2],\n          l = e[3],\n          u = e[8],\n          c = e[9],\n          h = e[10],\n          p = e[11];\n      return e !== t && (t[4] = e[4], t[5] = e[5], t[6] = e[6], t[7] = e[7], t[12] = e[12], t[13] = e[13], t[14] = e[14], t[15] = e[15]), t[0] = s * n - u * i, t[1] = a * n - c * i, t[2] = o * n - h * i, t[3] = l * n - p * i, t[8] = s * i + u * n, t[9] = a * i + c * n, t[10] = o * i + h * n, t[11] = l * i + p * n, t;\n    }, t.rotateZ = function (t, e, r) {\n      var i = Math.sin(r),\n          n = Math.cos(r),\n          s = e[0],\n          a = e[1],\n          o = e[2],\n          l = e[3],\n          u = e[4],\n          c = e[5],\n          h = e[6],\n          p = e[7];\n      return e !== t && (t[8] = e[8], t[9] = e[9], t[10] = e[10], t[11] = e[11], t[12] = e[12], t[13] = e[13], t[14] = e[14], t[15] = e[15]), t[0] = s * n + u * i, t[1] = a * n + c * i, t[2] = o * n + h * i, t[3] = l * n + p * i, t[4] = u * n - s * i, t[5] = c * n - a * i, t[6] = h * n - o * i, t[7] = p * n - l * i, t;\n    }, t.rotateZ$1 = function (t, e, r) {\n      r *= .5;\n      var i = e[0],\n          n = e[1],\n          s = e[2],\n          a = e[3],\n          o = Math.sin(r),\n          l = Math.cos(r);\n      return t[0] = i * l + n * o, t[1] = n * l - i * o, t[2] = s * l + a * o, t[3] = a * l - s * o, t;\n    }, t.scale = function (t, e, r) {\n      var i = r[0],\n          n = r[1],\n          s = r[2];\n      return t[0] = e[0] * i, t[1] = e[1] * i, t[2] = e[2] * i, t[3] = e[3] * i, t[4] = e[4] * n, t[5] = e[5] * n, t[6] = e[6] * n, t[7] = e[7] * n, t[8] = e[8] * s, t[9] = e[9] * s, t[10] = e[10] * s, t[11] = e[11] * s, t[12] = e[12], t[13] = e[13], t[14] = e[14], t[15] = e[15], t;\n    }, t.scale$1 = function (t, e, r) {\n      return t[0] = e[0] * r, t[1] = e[1] * r, t[2] = e[2] * r, t[3] = e[3] * r, t;\n    }, t.scale$2 = Wa, t.scaleAndAdd = Ja, t.setCacheLimits = function (t, e) {\n      pt = t, dt = e;\n    }, t.setRTLTextPlugin = function (t, e) {\n      var r = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : !1;\n      if (\"deferred\" === Pn || \"loading\" === Pn || \"loaded\" === Pn) throw new Error(\"setRTLTextPlugin cannot be called multiple times.\");\n      Vn = $.resolveURL(t), Pn = \"deferred\", Cn = e, Rn(), r || On();\n    }, t.styleSpec = Ft, t.sub = so, t.subtract = Ya, t.symbolSize = ru, t.transformMat3 = function (t, e, r) {\n      var i = e[0],\n          n = e[1],\n          s = e[2];\n      return t[0] = i * r[0] + n * r[3] + s * r[6], t[1] = i * r[1] + n * r[4] + s * r[7], t[2] = i * r[2] + n * r[5] + s * r[8], t;\n    }, t.transformMat4 = oo, t.transformQuat = io, t.translate = function (t, e, r) {\n      var i,\n          n,\n          s,\n          a,\n          o,\n          l,\n          u,\n          c,\n          h,\n          p,\n          d,\n          f,\n          y = r[0],\n          m = r[1],\n          g = r[2];\n      return e === t ? (t[12] = e[0] * y + e[4] * m + e[8] * g + e[12], t[13] = e[1] * y + e[5] * m + e[9] * g + e[13], t[14] = e[2] * y + e[6] * m + e[10] * g + e[14], t[15] = e[3] * y + e[7] * m + e[11] * g + e[15]) : (n = e[1], s = e[2], a = e[3], o = e[4], l = e[5], u = e[6], c = e[7], h = e[8], p = e[9], d = e[10], f = e[11], t[0] = i = e[0], t[1] = n, t[2] = s, t[3] = a, t[4] = o, t[5] = l, t[6] = u, t[7] = c, t[8] = h, t[9] = p, t[10] = d, t[11] = f, t[12] = i * y + o * m + h * g + e[12], t[13] = n * y + l * m + p * g + e[13], t[14] = s * y + u * m + d * g + e[14], t[15] = a * y + c * m + f * g + e[15]), t;\n    }, t.triggerPluginCompletionEvent = Fn, t.uniqueId = b, t.validateCustomStyleLayer = function (t) {\n      var e = [],\n          r = t.id;\n      return void 0 === r && e.push({\n        message: \"layers.\".concat(r, \": missing required property \\\"id\\\"\")\n      }), void 0 === t.render && e.push({\n        message: \"layers.\".concat(r, \": missing required method \\\"render\\\"\")\n      }), t.renderingMode && \"2d\" !== t.renderingMode && \"3d\" !== t.renderingMode && e.push({\n        message: \"layers.\".concat(r, \": property \\\"renderingMode\\\" must be either \\\"2d\\\" or \\\"3d\\\"\")\n      }), e;\n    }, t.validateLight = Fi, t.validateStyle = Vi, t.values = g, t.vectorTile = Al, t.version = \"2.1.1\", t.warnOnce = E, t.webpSupported = j, t.window = s, t.wrap = y;\n  });\n  define([\"./shared\"], function (e) {\n    \"use strict\";\n\n    function t(e) {\n      var r = _typeof(e);\n\n      if (\"number\" === r || \"boolean\" === r || \"string\" === r || null == e) return JSON.stringify(e);\n\n      if (Array.isArray(e)) {\n        var _r194 = \"[\";\n\n        var _iterator137 = _createForOfIteratorHelper(e),\n            _step137;\n\n        try {\n          for (_iterator137.s(); !(_step137 = _iterator137.n()).done;) {\n            var _n113 = _step137.value;\n            _r194 += \"\".concat(t(_n113), \",\");\n          }\n        } catch (err) {\n          _iterator137.e(err);\n        } finally {\n          _iterator137.f();\n        }\n\n        return \"\".concat(_r194, \"]\");\n      }\n\n      var n = Object.keys(e).sort();\n      var o = \"{\";\n\n      for (var _r195 = 0; _r195 < n.length; _r195++) {\n        o += \"\".concat(JSON.stringify(n[_r195]), \":\").concat(t(e[n[_r195]]), \",\");\n      }\n\n      return \"\".concat(o, \"}\");\n    }\n\n    function r(r) {\n      var n = \"\";\n\n      var _iterator138 = _createForOfIteratorHelper(e.refProperties),\n          _step138;\n\n      try {\n        for (_iterator138.s(); !(_step138 = _iterator138.n()).done;) {\n          var _o44 = _step138.value;\n          n += \"/\".concat(t(r[_o44]));\n        }\n      } catch (err) {\n        _iterator138.e(err);\n      } finally {\n        _iterator138.f();\n      }\n\n      return n;\n    }\n\n    var n = /*#__PURE__*/function () {\n      function n(e) {\n        _classCallCheck(this, n);\n\n        this.keyCache = {}, e && this.replace(e);\n      }\n\n      _createClass(n, [{\n        key: \"replace\",\n        value: function replace(e) {\n          this._layerConfigs = {}, this._layers = {}, this.update(e, []);\n        }\n      }, {\n        key: \"update\",\n        value: function update(t, _n114) {\n          var _this55 = this;\n\n          var _iterator139 = _createForOfIteratorHelper(t),\n              _step139;\n\n          try {\n            for (_iterator139.s(); !(_step139 = _iterator139.n()).done;) {\n              var _r196 = _step139.value;\n              this._layerConfigs[_r196.id] = _r196;\n\n              var _t221 = this._layers[_r196.id] = e.createStyleLayer(_r196);\n\n              _t221._featureFilter = e.featureFilter(_t221.filter), this.keyCache[_r196.id] && delete this.keyCache[_r196.id];\n            }\n          } catch (err) {\n            _iterator139.e(err);\n          } finally {\n            _iterator139.f();\n          }\n\n          var _iterator140 = _createForOfIteratorHelper(_n114),\n              _step140;\n\n          try {\n            for (_iterator140.s(); !(_step140 = _iterator140.n()).done;) {\n              var _e209 = _step140.value;\n              delete this.keyCache[_e209], delete this._layerConfigs[_e209], delete this._layers[_e209];\n            }\n          } catch (err) {\n            _iterator140.e(err);\n          } finally {\n            _iterator140.f();\n          }\n\n          this.familiesBySource = {};\n\n          var o = function (e, t) {\n            var n = {};\n\n            for (var _o45 = 0; _o45 < e.length; _o45++) {\n              var _i153 = t && t[e[_o45].id] || r(e[_o45]);\n\n              t && (t[e[_o45].id] = _i153);\n              var _s89 = n[_i153];\n              _s89 || (_s89 = n[_i153] = []), _s89.push(e[_o45]);\n            }\n\n            var o = [];\n\n            for (var _e208 in n) {\n              o.push(n[_e208]);\n            }\n\n            return o;\n          }(e.values(this._layerConfigs), this.keyCache);\n\n          var _iterator141 = _createForOfIteratorHelper(o),\n              _step141;\n\n          try {\n            for (_iterator141.s(); !(_step141 = _iterator141.n()).done;) {\n              var _e210 = _step141.value;\n\n              var _t222 = _e210.map(function (e) {\n                return _this55._layers[e.id];\n              }),\n                  _r197 = _t222[0];\n\n              if (\"none\" === _r197.visibility) continue;\n\n              var _n116 = _r197.source || \"\";\n\n              var _o46 = this.familiesBySource[_n116];\n              _o46 || (_o46 = this.familiesBySource[_n116] = {});\n\n              var _i154 = _r197.sourceLayer || \"_geojsonTileLayer\";\n\n              var _s90 = _o46[_i154];\n              _s90 || (_s90 = _o46[_i154] = []), _s90.push(_t222);\n            }\n          } catch (err) {\n            _iterator141.e(err);\n          } finally {\n            _iterator141.f();\n          }\n        }\n      }]);\n\n      return n;\n    }();\n\n    var o = e.window.ImageBitmap;\n\n    var i = /*#__PURE__*/function () {\n      function i() {\n        _classCallCheck(this, i);\n      }\n\n      _createClass(i, [{\n        key: \"loadTile\",\n        value: function loadTile(t, r) {\n          var n = t.uid,\n              _i155 = t.encoding,\n              s = t.rawImageData,\n              a = t.padding,\n              l = t.buildQuadTree,\n              u = o && s instanceof o ? this.getImageData(s, a) : s;\n          r(null, new e.DEMData(n, u, _i155, a < 1, l));\n        }\n      }, {\n        key: \"getImageData\",\n        value: function getImageData(t, r) {\n          this.offscreenCanvas && this.offscreenCanvasContext || (this.offscreenCanvas = new OffscreenCanvas(t.width, t.height), this.offscreenCanvasContext = this.offscreenCanvas.getContext(\"2d\")), this.offscreenCanvas.width = t.width, this.offscreenCanvas.height = t.height, this.offscreenCanvasContext.drawImage(t, 0, 0, t.width, t.height);\n          var n = this.offscreenCanvasContext.getImageData(-r, -r, t.width + 2 * r, t.height + 2 * r);\n          return this.offscreenCanvasContext.clearRect(0, 0, this.offscreenCanvas.width, this.offscreenCanvas.height), new e.RGBAImage({\n            width: n.width,\n            height: n.height\n          }, n.data);\n        }\n      }]);\n\n      return i;\n    }();\n\n    function s(e, t) {\n      if (0 !== e.length) {\n        a(e[0], t);\n\n        for (var r = 1; r < e.length; r++) {\n          a(e[r], !t);\n        }\n      }\n    }\n\n    function a(e, t) {\n      for (var r = 0, n = 0, o = e.length, i = o - 1; n < o; i = n++) {\n        r += (e[n][0] - e[i][0]) * (e[i][1] + e[n][1]);\n      }\n\n      r >= 0 != !!t && e.reverse();\n    }\n\n    var l = e.vectorTile.VectorTileFeature.prototype.toGeoJSON;\n\n    var u = /*#__PURE__*/function () {\n      function u(t) {\n        _classCallCheck(this, u);\n\n        this._feature = t, this.extent = e.EXTENT, this.type = t.type, this.properties = t.tags, \"id\" in t && !isNaN(t.id) && (this.id = parseInt(t.id, 10));\n      }\n\n      _createClass(u, [{\n        key: \"loadGeometry\",\n        value: function loadGeometry() {\n          if (1 === this._feature.type) {\n            var _t223 = [];\n\n            var _iterator142 = _createForOfIteratorHelper(this._feature.geometry),\n                _step142;\n\n            try {\n              for (_iterator142.s(); !(_step142 = _iterator142.n()).done;) {\n                var _r198 = _step142.value;\n\n                _t223.push([new e.Point$1(_r198[0], _r198[1])]);\n              }\n            } catch (err) {\n              _iterator142.e(err);\n            } finally {\n              _iterator142.f();\n            }\n\n            return _t223;\n          }\n\n          {\n            var _t224 = [];\n\n            var _iterator143 = _createForOfIteratorHelper(this._feature.geometry),\n                _step143;\n\n            try {\n              for (_iterator143.s(); !(_step143 = _iterator143.n()).done;) {\n                var _r199 = _step143.value;\n                var _n117 = [];\n\n                var _iterator144 = _createForOfIteratorHelper(_r199),\n                    _step144;\n\n                try {\n                  for (_iterator144.s(); !(_step144 = _iterator144.n()).done;) {\n                    var _t225 = _step144.value;\n\n                    _n117.push(new e.Point$1(_t225[0], _t225[1]));\n                  }\n                } catch (err) {\n                  _iterator144.e(err);\n                } finally {\n                  _iterator144.f();\n                }\n\n                _t224.push(_n117);\n              }\n            } catch (err) {\n              _iterator143.e(err);\n            } finally {\n              _iterator143.f();\n            }\n\n            return _t224;\n          }\n        }\n      }, {\n        key: \"toGeoJSON\",\n        value: function toGeoJSON(e, t, r) {\n          return l.call(this, e, t, r);\n        }\n      }]);\n\n      return u;\n    }();\n\n    var h = /*#__PURE__*/function () {\n      function h(t) {\n        _classCallCheck(this, h);\n\n        this.layers = {\n          _geojsonTileLayer: this\n        }, this.name = \"_geojsonTileLayer\", this.extent = e.EXTENT, this.length = t.length, this._features = t;\n      }\n\n      _createClass(h, [{\n        key: \"feature\",\n        value: function feature(e) {\n          return new u(this._features[e]);\n        }\n      }]);\n\n      return h;\n    }();\n\n    var c = e.vectorTile.VectorTileFeature,\n        f = p;\n\n    function p(e, t) {\n      this.options = t || {}, this.features = e, this.length = e.length;\n    }\n\n    function d(e, t) {\n      this.id = \"number\" == typeof e.id ? e.id : void 0, this.type = e.type, this.rawGeometry = 1 === e.type ? [e.geometry] : e.geometry, this.properties = e.tags, this.extent = t || 4096;\n    }\n\n    p.prototype.feature = function (e) {\n      return new d(this.features[e], this.options.extent);\n    }, d.prototype.loadGeometry = function () {\n      var t = this.rawGeometry;\n      this.geometry = [];\n\n      for (var r = 0; r < t.length; r++) {\n        for (var n = t[r], o = [], i = 0; i < n.length; i++) {\n          o.push(new e.Point$1(n[i][0], n[i][1]));\n        }\n\n        this.geometry.push(o);\n      }\n\n      return this.geometry;\n    }, d.prototype.bbox = function () {\n      this.geometry || this.loadGeometry();\n\n      for (var e = this.geometry, t = 1 / 0, r = -1 / 0, n = 1 / 0, o = -1 / 0, i = 0; i < e.length; i++) {\n        for (var s = e[i], a = 0; a < s.length; a++) {\n          var l = s[a];\n          t = Math.min(t, l.x), r = Math.max(r, l.x), n = Math.min(n, l.y), o = Math.max(o, l.y);\n        }\n      }\n\n      return [t, n, r, o];\n    }, d.prototype.toGeoJSON = c.prototype.toGeoJSON;\n    var g = y,\n        m = f;\n\n    function y(t) {\n      var r = new e.pbf();\n      return function (e, t) {\n        for (var r in e.layers) {\n          t.writeMessage(3, v, e.layers[r]);\n        }\n      }(t, r), r.finish();\n    }\n\n    function v(e, t) {\n      var r;\n      t.writeVarintField(15, e.version || 1), t.writeStringField(1, e.name || \"\"), t.writeVarintField(5, e.extent || 4096);\n      var n = {\n        keys: [],\n        values: [],\n        keycache: {},\n        valuecache: {}\n      };\n\n      for (r = 0; r < e.length; r++) {\n        n.feature = e.feature(r), t.writeMessage(2, x, n);\n      }\n\n      var o = n.keys;\n\n      for (r = 0; r < o.length; r++) {\n        t.writeStringField(3, o[r]);\n      }\n\n      var i = n.values;\n\n      for (r = 0; r < i.length; r++) {\n        t.writeMessage(4, P, i[r]);\n      }\n    }\n\n    function x(e, t) {\n      var r = e.feature;\n      void 0 !== r.id && t.writeVarintField(1, r.id), t.writeMessage(2, w, e), t.writeVarintField(3, r.type), t.writeMessage(4, _, r);\n    }\n\n    function w(e, t) {\n      var r = e.feature,\n          n = e.keys,\n          o = e.values,\n          i = e.keycache,\n          s = e.valuecache;\n\n      for (var a in r.properties) {\n        var l = i[a];\n        void 0 === l && (n.push(a), i[a] = l = n.length - 1), t.writeVarint(l);\n\n        var u = r.properties[a],\n            h = _typeof(u);\n\n        \"string\" !== h && \"boolean\" !== h && \"number\" !== h && (u = JSON.stringify(u));\n        var c = h + \":\" + u,\n            f = s[c];\n        void 0 === f && (o.push(u), s[c] = f = o.length - 1), t.writeVarint(f);\n      }\n    }\n\n    function S(e, t) {\n      return (t << 3) + (7 & e);\n    }\n\n    function M(e) {\n      return e << 1 ^ e >> 31;\n    }\n\n    function _(e, t) {\n      for (var r = e.loadGeometry(), n = e.type, o = 0, i = 0, s = r.length, a = 0; a < s; a++) {\n        var l = r[a],\n            u = 1;\n        1 === n && (u = l.length), t.writeVarint(S(1, u));\n\n        for (var h = 3 === n ? l.length - 1 : l.length, c = 0; c < h; c++) {\n          1 === c && 1 !== n && t.writeVarint(S(2, h - 1));\n          var f = l[c].x - o,\n              p = l[c].y - i;\n          t.writeVarint(M(f)), t.writeVarint(M(p)), o += f, i += p;\n        }\n\n        3 === n && t.writeVarint(S(7, 1));\n      }\n    }\n\n    function P(e, t) {\n      var r = _typeof(e);\n\n      \"string\" === r ? t.writeStringField(1, e) : \"boolean\" === r ? t.writeBooleanField(7, e) : \"number\" === r && (e % 1 != 0 ? t.writeDoubleField(3, e) : e < 0 ? t.writeSVarintField(6, e) : t.writeVarintField(5, e));\n    }\n\n    function b(e, t, r, n) {\n      k(e, r, n), k(t, 2 * r, 2 * n), k(t, 2 * r + 1, 2 * n + 1);\n    }\n\n    function k(e, t, r) {\n      var n = e[t];\n      e[t] = e[r], e[r] = n;\n    }\n\n    function T(e, t, r, n) {\n      var o = e - r,\n          i = t - n;\n      return o * o + i * i;\n    }\n\n    g.fromVectorTileJs = y, g.fromGeojsonVt = function (e, t) {\n      t = t || {};\n      var r = {};\n\n      for (var n in e) {\n        r[n] = new f(e[n].features, t), r[n].name = n, r[n].version = t.version, r[n].extent = t.extent;\n      }\n\n      return y({\n        layers: r\n      });\n    }, g.GeoJSONWrapper = m;\n\n    var I = function I(e) {\n      return e[0];\n    },\n        C = function C(e) {\n      return e[1];\n    };\n\n    var L = /*#__PURE__*/function () {\n      function L(e) {\n        var t = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : I;\n        var r = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : C;\n        var n = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : 64;\n        var o = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : Float64Array;\n\n        _classCallCheck(this, L);\n\n        this.nodeSize = n, this.points = e;\n        var i = e.length < 65536 ? Uint16Array : Uint32Array,\n            s = this.ids = new i(e.length),\n            a = this.coords = new o(2 * e.length);\n\n        for (var _n118 = 0; _n118 < e.length; _n118++) {\n          s[_n118] = _n118, a[2 * _n118] = t(e[_n118]), a[2 * _n118 + 1] = r(e[_n118]);\n        }\n\n        !function e(t, r, n, o, i, s) {\n          if (i - o <= n) return;\n          var a = o + i >> 1;\n          !function e(t, r, n, o, i, s) {\n            for (; i > o;) {\n              if (i - o > 600) {\n                var _a79 = i - o + 1,\n                    _l33 = n - o + 1,\n                    _u31 = Math.log(_a79),\n                    _h13 = .5 * Math.exp(2 * _u31 / 3),\n                    _c23 = .5 * Math.sqrt(_u31 * _h13 * (_a79 - _h13) / _a79) * (_l33 - _a79 / 2 < 0 ? -1 : 1);\n\n                e(t, r, n, Math.max(o, Math.floor(n - _l33 * _h13 / _a79 + _c23)), Math.min(i, Math.floor(n + (_a79 - _l33) * _h13 / _a79 + _c23)), s);\n              }\n\n              var _a78 = r[2 * n + s];\n              var _l32 = o,\n                  _u30 = i;\n\n              for (b(t, r, o, n), r[2 * i + s] > _a78 && b(t, r, o, i); _l32 < _u30;) {\n                for (b(t, r, _l32, _u30), _l32++, _u30--; r[2 * _l32 + s] < _a78;) {\n                  _l32++;\n                }\n\n                for (; r[2 * _u30 + s] > _a78;) {\n                  _u30--;\n                }\n              }\n\n              r[2 * o + s] === _a78 ? b(t, r, o, _u30) : (_u30++, b(t, r, _u30, i)), _u30 <= n && (o = _u30 + 1), n <= _u30 && (i = _u30 - 1);\n            }\n          }(t, r, a, o, i, s % 2), e(t, r, n, o, a - 1, s + 1), e(t, r, n, a + 1, i, s + 1);\n        }(s, a, n, 0, s.length - 1, 0);\n      }\n\n      _createClass(L, [{\n        key: \"range\",\n        value: function range(e, t, r, n) {\n          return function (e, t, r, n, o, i, s) {\n            var a = [0, e.length - 1, 0],\n                l = [];\n            var u, h;\n\n            for (; a.length;) {\n              var _c24 = a.pop(),\n                  _f11 = a.pop(),\n                  _p15 = a.pop();\n\n              if (_f11 - _p15 <= s) {\n                for (var _s91 = _p15; _s91 <= _f11; _s91++) {\n                  u = t[2 * _s91], h = t[2 * _s91 + 1], u >= r && u <= o && h >= n && h <= i && l.push(e[_s91]);\n                }\n\n                continue;\n              }\n\n              var _d11 = Math.floor((_p15 + _f11) / 2);\n\n              u = t[2 * _d11], h = t[2 * _d11 + 1], u >= r && u <= o && h >= n && h <= i && l.push(e[_d11]);\n\n              var _g11 = (_c24 + 1) % 2;\n\n              (0 === _c24 ? r <= u : n <= h) && (a.push(_p15), a.push(_d11 - 1), a.push(_g11)), (0 === _c24 ? o >= u : i >= h) && (a.push(_d11 + 1), a.push(_f11), a.push(_g11));\n            }\n\n            return l;\n          }(this.ids, this.coords, e, t, r, n, this.nodeSize);\n        }\n      }, {\n        key: \"within\",\n        value: function within(e, t, r) {\n          return function (e, t, r, n, o, i) {\n            var s = [0, e.length - 1, 0],\n                a = [],\n                l = o * o;\n\n            for (; s.length;) {\n              var _u32 = s.pop(),\n                  _h14 = s.pop(),\n                  _c25 = s.pop();\n\n              if (_h14 - _c25 <= i) {\n                for (var _o47 = _c25; _o47 <= _h14; _o47++) {\n                  T(t[2 * _o47], t[2 * _o47 + 1], r, n) <= l && a.push(e[_o47]);\n                }\n\n                continue;\n              }\n\n              var _f12 = Math.floor((_c25 + _h14) / 2),\n                  _p16 = t[2 * _f12],\n                  _d12 = t[2 * _f12 + 1];\n\n              T(_p16, _d12, r, n) <= l && a.push(e[_f12]);\n\n              var _g12 = (_u32 + 1) % 2;\n\n              (0 === _u32 ? r - o <= _p16 : n - o <= _d12) && (s.push(_c25), s.push(_f12 - 1), s.push(_g12)), (0 === _u32 ? r + o >= _p16 : n + o >= _d12) && (s.push(_f12 + 1), s.push(_h14), s.push(_g12));\n            }\n\n            return a;\n          }(this.ids, this.coords, e, t, r, this.nodeSize);\n        }\n      }]);\n\n      return L;\n    }();\n\n    var O = {\n      minZoom: 0,\n      maxZoom: 16,\n      minPoints: 2,\n      radius: 40,\n      extent: 512,\n      nodeSize: 64,\n      log: !1,\n      generateId: !1,\n      reduce: null,\n      map: function map(e) {\n        return e;\n      }\n    },\n        z = Math.fround || (E = new Float32Array(1), function (e) {\n      return E[0] = +e, E[0];\n    });\n    var E;\n\n    var F = /*#__PURE__*/function () {\n      function F(e) {\n        _classCallCheck(this, F);\n\n        this.options = X(Object.create(O), e), this.trees = new Array(this.options.maxZoom + 1);\n      }\n\n      _createClass(F, [{\n        key: \"load\",\n        value: function load(e) {\n          var _this$options = this.options,\n              t = _this$options.log,\n              r = _this$options.minZoom,\n              n = _this$options.maxZoom,\n              o = _this$options.nodeSize;\n          t && console.time(\"total time\");\n          var i = \"prepare \".concat(e.length, \" points\");\n          t && console.time(i), this.points = e;\n          var s = [];\n\n          for (var _t226 = 0; _t226 < e.length; _t226++) {\n            e[_t226].geometry && s.push(Z(e[_t226], _t226));\n          }\n\n          this.trees[n + 1] = new L(s, V, $, o, Float32Array), t && console.timeEnd(i);\n\n          for (var _e211 = n; _e211 >= r; _e211--) {\n            var _r200 = +Date.now();\n\n            s = this._cluster(s, _e211), this.trees[_e211] = new L(s, V, $, o, Float32Array), t && console.log(\"z%d: %d clusters in %dms\", _e211, s.length, +Date.now() - _r200);\n          }\n\n          return t && console.timeEnd(\"total time\"), this;\n        }\n      }, {\n        key: \"getClusters\",\n        value: function getClusters(e, t) {\n          var r = ((e[0] + 180) % 360 + 360) % 360 - 180;\n          var n = Math.max(-90, Math.min(90, e[1]));\n          var o = 180 === e[2] ? 180 : ((e[2] + 180) % 360 + 360) % 360 - 180;\n          var i = Math.max(-90, Math.min(90, e[3]));\n          if (e[2] - e[0] >= 360) r = -180, o = 180;else if (r > o) {\n            var _e212 = this.getClusters([r, n, 180, i], t),\n                _s92 = this.getClusters([-180, n, o, i], t);\n\n            return _e212.concat(_s92);\n          }\n\n          var s = this.trees[this._limitZoom(t)],\n              a = s.range(G(r), Y(i), G(o), Y(n)),\n              l = [];\n\n          var _iterator145 = _createForOfIteratorHelper(a),\n              _step145;\n\n          try {\n            for (_iterator145.s(); !(_step145 = _iterator145.n()).done;) {\n              var _e213 = _step145.value;\n              var _t227 = s.points[_e213];\n              l.push(_t227.numPoints ? J(_t227) : this.points[_t227.index]);\n            }\n          } catch (err) {\n            _iterator145.e(err);\n          } finally {\n            _iterator145.f();\n          }\n\n          return l;\n        }\n      }, {\n        key: \"getChildren\",\n        value: function getChildren(e) {\n          var t = this._getOriginId(e),\n              r = this._getOriginZoom(e),\n              n = \"No cluster with the specified id.\",\n              o = this.trees[r];\n\n          if (!o) throw new Error(n);\n          var i = o.points[t];\n          if (!i) throw new Error(n);\n          var s = this.options.radius / (this.options.extent * Math.pow(2, r - 1)),\n              a = o.within(i.x, i.y, s),\n              l = [];\n\n          var _iterator146 = _createForOfIteratorHelper(a),\n              _step146;\n\n          try {\n            for (_iterator146.s(); !(_step146 = _iterator146.n()).done;) {\n              var _t228 = _step146.value;\n              var _r201 = o.points[_t228];\n              _r201.parentId === e && l.push(_r201.numPoints ? J(_r201) : this.points[_r201.index]);\n            }\n          } catch (err) {\n            _iterator146.e(err);\n          } finally {\n            _iterator146.f();\n          }\n\n          if (0 === l.length) throw new Error(n);\n          return l;\n        }\n      }, {\n        key: \"getLeaves\",\n        value: function getLeaves(e, t, r) {\n          var n = [];\n          return this._appendLeaves(n, e, t = t || 10, r = r || 0, 0), n;\n        }\n      }, {\n        key: \"getTile\",\n        value: function getTile(e, t, r) {\n          var n = this.trees[this._limitZoom(e)],\n              o = Math.pow(2, e),\n              _this$options2 = this.options,\n              i = _this$options2.extent,\n              s = _this$options2.radius,\n              a = s / i,\n              l = (r - a) / o,\n              u = (r + 1 + a) / o,\n              h = {\n            features: []\n          };\n\n          return this._addTileFeatures(n.range((t - a) / o, l, (t + 1 + a) / o, u), n.points, t, r, o, h), 0 === t && this._addTileFeatures(n.range(1 - a / o, l, 1, u), n.points, o, r, o, h), t === o - 1 && this._addTileFeatures(n.range(0, l, a / o, u), n.points, -1, r, o, h), h.features.length ? h : null;\n        }\n      }, {\n        key: \"getClusterExpansionZoom\",\n        value: function getClusterExpansionZoom(e) {\n          var t = this._getOriginZoom(e) - 1;\n\n          for (; t <= this.options.maxZoom;) {\n            var _r202 = this.getChildren(e);\n\n            if (t++, 1 !== _r202.length) break;\n            e = _r202[0].properties.cluster_id;\n          }\n\n          return t;\n        }\n      }, {\n        key: \"_appendLeaves\",\n        value: function _appendLeaves(e, t, r, n, o) {\n          var i = this.getChildren(t);\n\n          var _iterator147 = _createForOfIteratorHelper(i),\n              _step147;\n\n          try {\n            for (_iterator147.s(); !(_step147 = _iterator147.n()).done;) {\n              var _t229 = _step147.value;\n              var _i156 = _t229.properties;\n              if (_i156 && _i156.cluster ? o + _i156.point_count <= n ? o += _i156.point_count : o = this._appendLeaves(e, _i156.cluster_id, r, n, o) : o < n ? o++ : e.push(_t229), e.length === r) break;\n            }\n          } catch (err) {\n            _iterator147.e(err);\n          } finally {\n            _iterator147.f();\n          }\n\n          return o;\n        }\n      }, {\n        key: \"_addTileFeatures\",\n        value: function _addTileFeatures(e, t, r, n, o, i) {\n          var _iterator148 = _createForOfIteratorHelper(e),\n              _step148;\n\n          try {\n            for (_iterator148.s(); !(_step148 = _iterator148.n()).done;) {\n              var _s93 = _step148.value;\n              var _e214 = t[_s93],\n                  _a80 = _e214.numPoints,\n                  _l34 = {\n                type: 1,\n                geometry: [[Math.round(this.options.extent * (_e214.x * o - r)), Math.round(this.options.extent * (_e214.y * o - n))]],\n                tags: _a80 ? D(_e214) : this.points[_e214.index].properties\n              };\n\n              var _u33 = void 0;\n\n              _a80 ? _u33 = _e214.id : this.options.generateId ? _u33 = _e214.index : this.points[_e214.index].id && (_u33 = this.points[_e214.index].id), void 0 !== _u33 && (_l34.id = _u33), i.features.push(_l34);\n            }\n          } catch (err) {\n            _iterator148.e(err);\n          } finally {\n            _iterator148.f();\n          }\n        }\n      }, {\n        key: \"_limitZoom\",\n        value: function _limitZoom(e) {\n          return Math.max(this.options.minZoom, Math.min(+e, this.options.maxZoom + 1));\n        }\n      }, {\n        key: \"_cluster\",\n        value: function _cluster(e, t) {\n          var r = [],\n              _this$options3 = this.options,\n              n = _this$options3.radius,\n              o = _this$options3.extent,\n              i = _this$options3.reduce,\n              s = _this$options3.minPoints,\n              a = n / (o * Math.pow(2, t));\n\n          for (var _n119 = 0; _n119 < e.length; _n119++) {\n            var _o48 = e[_n119];\n            if (_o48.zoom <= t) continue;\n            _o48.zoom = t;\n\n            var _l35 = this.trees[t + 1],\n                _u34 = _l35.within(_o48.x, _o48.y, a),\n                _h15 = _o48.numPoints || 1;\n\n            var _c26 = _h15;\n\n            var _iterator149 = _createForOfIteratorHelper(_u34),\n                _step149;\n\n            try {\n              for (_iterator149.s(); !(_step149 = _iterator149.n()).done;) {\n                var _e217 = _step149.value;\n                var _r204 = _l35.points[_e217];\n                _r204.zoom > t && (_c26 += _r204.numPoints || 1);\n              }\n            } catch (err) {\n              _iterator149.e(err);\n            } finally {\n              _iterator149.f();\n            }\n\n            if (_c26 >= s) {\n              var _e215 = _o48.x * _h15,\n                  _s94 = _o48.y * _h15,\n                  _a81 = i && _h15 > 1 ? this._map(_o48, !0) : null;\n\n              var _f13 = (_n119 << 5) + (t + 1) + this.points.length;\n\n              var _iterator150 = _createForOfIteratorHelper(_u34),\n                  _step150;\n\n              try {\n                for (_iterator150.s(); !(_step150 = _iterator150.n()).done;) {\n                  var _r203 = _step150.value;\n                  var _n120 = _l35.points[_r203];\n                  if (_n120.zoom <= t) continue;\n                  _n120.zoom = t;\n\n                  var _u35 = _n120.numPoints || 1;\n\n                  _e215 += _n120.x * _u35, _s94 += _n120.y * _u35, _n120.parentId = _f13, i && (_a81 || (_a81 = this._map(_o48, !0)), i(_a81, this._map(_n120)));\n                }\n              } catch (err) {\n                _iterator150.e(err);\n              } finally {\n                _iterator150.f();\n              }\n\n              _o48.parentId = _f13, r.push(N(_e215 / _c26, _s94 / _c26, _f13, _c26, _a81));\n            } else if (r.push(_o48), _c26 > 1) {\n              var _iterator151 = _createForOfIteratorHelper(_u34),\n                  _step151;\n\n              try {\n                for (_iterator151.s(); !(_step151 = _iterator151.n()).done;) {\n                  var _e216 = _step151.value;\n                  var _n121 = _l35.points[_e216];\n                  _n121.zoom <= t || (_n121.zoom = t, r.push(_n121));\n                }\n              } catch (err) {\n                _iterator151.e(err);\n              } finally {\n                _iterator151.f();\n              }\n            }\n          }\n\n          return r;\n        }\n      }, {\n        key: \"_getOriginId\",\n        value: function _getOriginId(e) {\n          return e - this.points.length >> 5;\n        }\n      }, {\n        key: \"_getOriginZoom\",\n        value: function _getOriginZoom(e) {\n          return (e - this.points.length) % 32;\n        }\n      }, {\n        key: \"_map\",\n        value: function _map(e, t) {\n          if (e.numPoints) return t ? X({}, e.properties) : e.properties;\n          var r = this.points[e.index].properties,\n              n = this.options.map(r);\n          return t && n === r ? X({}, n) : n;\n        }\n      }]);\n\n      return F;\n    }();\n\n    function N(e, t, r, n, o) {\n      return {\n        x: z(e),\n        y: z(t),\n        zoom: 1 / 0,\n        id: r,\n        parentId: -1,\n        numPoints: n,\n        properties: o\n      };\n    }\n\n    function Z(e, t) {\n      var _e$geometry$coordinat = _slicedToArray(e.geometry.coordinates, 2),\n          r = _e$geometry$coordinat[0],\n          n = _e$geometry$coordinat[1];\n\n      return {\n        x: z(G(r)),\n        y: z(Y(n)),\n        zoom: 1 / 0,\n        index: t,\n        parentId: -1\n      };\n    }\n\n    function J(e) {\n      return {\n        type: \"Feature\",\n        id: e.id,\n        properties: D(e),\n        geometry: {\n          type: \"Point\",\n          coordinates: [(t = e.x, 360 * (t - .5)), W(e.y)]\n        }\n      };\n      var t;\n    }\n\n    function D(e) {\n      var t = e.numPoints,\n          r = t >= 1e4 ? \"\".concat(Math.round(t / 1e3), \"k\") : t >= 1e3 ? \"\".concat(Math.round(t / 100) / 10, \"k\") : t;\n      return X(X({}, e.properties), {\n        cluster: !0,\n        cluster_id: e.id,\n        point_count: t,\n        point_count_abbreviated: r\n      });\n    }\n\n    function G(e) {\n      return e / 360 + .5;\n    }\n\n    function Y(e) {\n      var t = Math.sin(e * Math.PI / 180),\n          r = .5 - .25 * Math.log((1 + t) / (1 - t)) / Math.PI;\n      return r < 0 ? 0 : r > 1 ? 1 : r;\n    }\n\n    function W(e) {\n      var t = (180 - 360 * e) * Math.PI / 180;\n      return 360 * Math.atan(Math.exp(t)) / Math.PI - 90;\n    }\n\n    function X(e, t) {\n      for (var _r205 in t) {\n        e[_r205] = t[_r205];\n      }\n\n      return e;\n    }\n\n    function V(e) {\n      return e.x;\n    }\n\n    function $(e) {\n      return e.y;\n    }\n\n    function j(e, t, r, n, o, i) {\n      var s = o - r,\n          a = i - n;\n\n      if (0 !== s || 0 !== a) {\n        var l = ((e - r) * s + (t - n) * a) / (s * s + a * a);\n        l > 1 ? (r = o, n = i) : l > 0 && (r += s * l, n += a * l);\n      }\n\n      return (s = e - r) * s + (a = t - n) * a;\n    }\n\n    function A(e, t, r, n) {\n      var o = {\n        id: void 0 === e ? null : e,\n        type: t,\n        geometry: r,\n        tags: n,\n        minX: 1 / 0,\n        minY: 1 / 0,\n        maxX: -1 / 0,\n        maxY: -1 / 0\n      };\n      return function (e) {\n        var t = e.geometry,\n            r = e.type;\n        if (\"Point\" === r || \"MultiPoint\" === r || \"LineString\" === r) R(e, t);else if (\"Polygon\" === r || \"MultiLineString\" === r) for (var n = 0; n < t.length; n++) {\n          R(e, t[n]);\n        } else if (\"MultiPolygon\" === r) for (n = 0; n < t.length; n++) {\n          for (var o = 0; o < t[n].length; o++) {\n            R(e, t[n][o]);\n          }\n        }\n      }(o), o;\n    }\n\n    function R(e, t) {\n      for (var r = 0; r < t.length; r += 3) {\n        e.minX = Math.min(e.minX, t[r]), e.minY = Math.min(e.minY, t[r + 1]), e.maxX = Math.max(e.maxX, t[r]), e.maxY = Math.max(e.maxY, t[r + 1]);\n      }\n    }\n\n    function B(e, t, r, n) {\n      if (t.geometry) {\n        var o = t.geometry.coordinates,\n            i = t.geometry.type,\n            s = Math.pow(r.tolerance / ((1 << r.maxZoom) * r.extent), 2),\n            a = [],\n            l = t.id;\n        if (r.promoteId ? l = t.properties[r.promoteId] : r.generateId && (l = n || 0), \"Point\" === i) q(o, a);else if (\"MultiPoint\" === i) for (var u = 0; u < o.length; u++) {\n          q(o[u], a);\n        } else if (\"LineString\" === i) U(o, a, s, !1);else if (\"MultiLineString\" === i) {\n          if (r.lineMetrics) {\n            for (u = 0; u < o.length; u++) {\n              U(o[u], a = [], s, !1), e.push(A(l, \"LineString\", a, t.properties));\n            }\n\n            return;\n          }\n\n          Q(o, a, s, !1);\n        } else if (\"Polygon\" === i) Q(o, a, s, !0);else {\n          if (\"MultiPolygon\" !== i) {\n            if (\"GeometryCollection\" === i) {\n              for (u = 0; u < t.geometry.geometries.length; u++) {\n                B(e, {\n                  id: l,\n                  geometry: t.geometry.geometries[u],\n                  properties: t.properties\n                }, r, n);\n              }\n\n              return;\n            }\n\n            throw new Error(\"Input data is not a valid GeoJSON object.\");\n          }\n\n          for (u = 0; u < o.length; u++) {\n            var h = [];\n            Q(o[u], h, s, !0), a.push(h);\n          }\n        }\n        e.push(A(l, i, a, t.properties));\n      }\n    }\n\n    function q(e, t) {\n      t.push(H(e[0])), t.push(K(e[1])), t.push(0);\n    }\n\n    function U(e, t, r, n) {\n      for (var o, i, s = 0, a = 0; a < e.length; a++) {\n        var l = H(e[a][0]),\n            u = K(e[a][1]);\n        t.push(l), t.push(u), t.push(0), a > 0 && (s += n ? (o * u - l * i) / 2 : Math.sqrt(Math.pow(l - o, 2) + Math.pow(u - i, 2))), o = l, i = u;\n      }\n\n      var h = t.length - 3;\n      t[2] = 1, function e(t, r, n, o) {\n        for (var i, s = o, a = n - r >> 1, l = n - r, u = t[r], h = t[r + 1], c = t[n], f = t[n + 1], p = r + 3; p < n; p += 3) {\n          var d = j(t[p], t[p + 1], u, h, c, f);\n          if (d > s) i = p, s = d;else if (d === s) {\n            var g = Math.abs(p - a);\n            g < l && (i = p, l = g);\n          }\n        }\n\n        s > o && (i - r > 3 && e(t, r, i, o), t[i + 2] = s, n - i > 3 && e(t, i, n, o));\n      }(t, 0, h, r), t[h + 2] = 1, t.size = Math.abs(s), t.start = 0, t.end = t.size;\n    }\n\n    function Q(e, t, r, n) {\n      for (var o = 0; o < e.length; o++) {\n        var i = [];\n        U(e[o], i, r, n), t.push(i);\n      }\n    }\n\n    function H(e) {\n      return e / 360 + .5;\n    }\n\n    function K(e) {\n      var t = Math.sin(e * Math.PI / 180),\n          r = .5 - .25 * Math.log((1 + t) / (1 - t)) / Math.PI;\n      return r < 0 ? 0 : r > 1 ? 1 : r;\n    }\n\n    function ee(e, t, r, n, o, i, s, a) {\n      if (n /= t, i >= (r /= t) && s < n) return e;\n      if (s < r || i >= n) return null;\n\n      for (var l = [], u = 0; u < e.length; u++) {\n        var h = e[u],\n            c = h.geometry,\n            f = h.type,\n            p = 0 === o ? h.minX : h.minY,\n            d = 0 === o ? h.maxX : h.maxY;\n        if (p >= r && d < n) l.push(h);else if (!(d < r || p >= n)) {\n          var g = [];\n          if (\"Point\" === f || \"MultiPoint\" === f) te(c, g, r, n, o);else if (\"LineString\" === f) re(c, g, r, n, o, !1, a.lineMetrics);else if (\"MultiLineString\" === f) oe(c, g, r, n, o, !1);else if (\"Polygon\" === f) oe(c, g, r, n, o, !0);else if (\"MultiPolygon\" === f) for (var m = 0; m < c.length; m++) {\n            var y = [];\n            oe(c[m], y, r, n, o, !0), y.length && g.push(y);\n          }\n\n          if (g.length) {\n            if (a.lineMetrics && \"LineString\" === f) {\n              for (m = 0; m < g.length; m++) {\n                l.push(A(h.id, f, g[m], h.tags));\n              }\n\n              continue;\n            }\n\n            \"LineString\" !== f && \"MultiLineString\" !== f || (1 === g.length ? (f = \"LineString\", g = g[0]) : f = \"MultiLineString\"), \"Point\" !== f && \"MultiPoint\" !== f || (f = 3 === g.length ? \"Point\" : \"MultiPoint\"), l.push(A(h.id, f, g, h.tags));\n          }\n        }\n      }\n\n      return l.length ? l : null;\n    }\n\n    function te(e, t, r, n, o) {\n      for (var i = 0; i < e.length; i += 3) {\n        var s = e[i + o];\n        s >= r && s <= n && (t.push(e[i]), t.push(e[i + 1]), t.push(e[i + 2]));\n      }\n    }\n\n    function re(e, t, r, n, o, i, s) {\n      for (var a, l, u = ne(e), h = 0 === o ? se : ae, c = e.start, f = 0; f < e.length - 3; f += 3) {\n        var p = e[f],\n            d = e[f + 1],\n            g = e[f + 2],\n            m = e[f + 3],\n            y = e[f + 4],\n            v = 0 === o ? p : d,\n            x = 0 === o ? m : y,\n            w = !1;\n        s && (a = Math.sqrt(Math.pow(p - m, 2) + Math.pow(d - y, 2))), v < r ? x > r && (l = h(u, p, d, m, y, r), s && (u.start = c + a * l)) : v > n ? x < n && (l = h(u, p, d, m, y, n), s && (u.start = c + a * l)) : ie(u, p, d, g), x < r && v >= r && (l = h(u, p, d, m, y, r), w = !0), x > n && v <= n && (l = h(u, p, d, m, y, n), w = !0), !i && w && (s && (u.end = c + a * l), t.push(u), u = ne(e)), s && (c += a);\n      }\n\n      var S = e.length - 3;\n      p = e[S], d = e[S + 1], g = e[S + 2], (v = 0 === o ? p : d) >= r && v <= n && ie(u, p, d, g), S = u.length - 3, i && S >= 3 && (u[S] !== u[0] || u[S + 1] !== u[1]) && ie(u, u[0], u[1], u[2]), u.length && t.push(u);\n    }\n\n    function ne(e) {\n      var t = [];\n      return t.size = e.size, t.start = e.start, t.end = e.end, t;\n    }\n\n    function oe(e, t, r, n, o, i) {\n      for (var s = 0; s < e.length; s++) {\n        re(e[s], t, r, n, o, i, !1);\n      }\n    }\n\n    function ie(e, t, r, n) {\n      e.push(t), e.push(r), e.push(n);\n    }\n\n    function se(e, t, r, n, o, i) {\n      var s = (i - t) / (n - t);\n      return e.push(i), e.push(r + (o - r) * s), e.push(1), s;\n    }\n\n    function ae(e, t, r, n, o, i) {\n      var s = (i - r) / (o - r);\n      return e.push(t + (n - t) * s), e.push(i), e.push(1), s;\n    }\n\n    function le(e, t) {\n      for (var r = [], n = 0; n < e.length; n++) {\n        var o,\n            i = e[n],\n            s = i.type;\n        if (\"Point\" === s || \"MultiPoint\" === s || \"LineString\" === s) o = ue(i.geometry, t);else if (\"MultiLineString\" === s || \"Polygon\" === s) {\n          o = [];\n\n          for (var a = 0; a < i.geometry.length; a++) {\n            o.push(ue(i.geometry[a], t));\n          }\n        } else if (\"MultiPolygon\" === s) for (o = [], a = 0; a < i.geometry.length; a++) {\n          for (var l = [], u = 0; u < i.geometry[a].length; u++) {\n            l.push(ue(i.geometry[a][u], t));\n          }\n\n          o.push(l);\n        }\n        r.push(A(i.id, s, o, i.tags));\n      }\n\n      return r;\n    }\n\n    function ue(e, t) {\n      var r = [];\n      r.size = e.size, void 0 !== e.start && (r.start = e.start, r.end = e.end);\n\n      for (var n = 0; n < e.length; n += 3) {\n        r.push(e[n] + t, e[n + 1], e[n + 2]);\n      }\n\n      return r;\n    }\n\n    function he(e, t) {\n      if (e.transformed) return e;\n      var r,\n          n,\n          o,\n          i = 1 << e.z,\n          s = e.x,\n          a = e.y;\n\n      for (r = 0; r < e.features.length; r++) {\n        var l = e.features[r],\n            u = l.geometry,\n            h = l.type;\n        if (l.geometry = [], 1 === h) for (n = 0; n < u.length; n += 2) {\n          l.geometry.push(ce(u[n], u[n + 1], t, i, s, a));\n        } else for (n = 0; n < u.length; n++) {\n          var c = [];\n\n          for (o = 0; o < u[n].length; o += 2) {\n            c.push(ce(u[n][o], u[n][o + 1], t, i, s, a));\n          }\n\n          l.geometry.push(c);\n        }\n      }\n\n      return e.transformed = !0, e;\n    }\n\n    function ce(e, t, r, n, o, i) {\n      return [Math.round(r * (e * n - o)), Math.round(r * (t * n - i))];\n    }\n\n    function fe(e, t, r, n, o) {\n      for (var i = t === o.maxZoom ? 0 : o.tolerance / ((1 << t) * o.extent), s = {\n        features: [],\n        numPoints: 0,\n        numSimplified: 0,\n        numFeatures: 0,\n        source: null,\n        x: r,\n        y: n,\n        z: t,\n        transformed: !1,\n        minX: 2,\n        minY: 1,\n        maxX: -1,\n        maxY: 0\n      }, a = 0; a < e.length; a++) {\n        s.numFeatures++, pe(s, e[a], i, o);\n        var l = e[a].minX,\n            u = e[a].minY,\n            h = e[a].maxX,\n            c = e[a].maxY;\n        l < s.minX && (s.minX = l), u < s.minY && (s.minY = u), h > s.maxX && (s.maxX = h), c > s.maxY && (s.maxY = c);\n      }\n\n      return s;\n    }\n\n    function pe(e, t, r, n) {\n      var o = t.geometry,\n          i = t.type,\n          s = [];\n      if (\"Point\" === i || \"MultiPoint\" === i) for (var a = 0; a < o.length; a += 3) {\n        s.push(o[a]), s.push(o[a + 1]), e.numPoints++, e.numSimplified++;\n      } else if (\"LineString\" === i) de(s, o, e, r, !1, !1);else if (\"MultiLineString\" === i || \"Polygon\" === i) for (a = 0; a < o.length; a++) {\n        de(s, o[a], e, r, \"Polygon\" === i, 0 === a);\n      } else if (\"MultiPolygon\" === i) for (var l = 0; l < o.length; l++) {\n        var u = o[l];\n\n        for (a = 0; a < u.length; a++) {\n          de(s, u[a], e, r, !0, 0 === a);\n        }\n      }\n\n      if (s.length) {\n        var h = t.tags || null;\n\n        if (\"LineString\" === i && n.lineMetrics) {\n          for (var c in h = {}, t.tags) {\n            h[c] = t.tags[c];\n          }\n\n          h.mapbox_clip_start = o.start / o.size, h.mapbox_clip_end = o.end / o.size;\n        }\n\n        var f = {\n          geometry: s,\n          type: \"Polygon\" === i || \"MultiPolygon\" === i ? 3 : \"LineString\" === i || \"MultiLineString\" === i ? 2 : 1,\n          tags: h\n        };\n        null !== t.id && (f.id = t.id), e.features.push(f);\n      }\n    }\n\n    function de(e, t, r, n, o, i) {\n      var s = n * n;\n      if (n > 0 && t.size < (o ? s : n)) r.numPoints += t.length / 3;else {\n        for (var a = [], l = 0; l < t.length; l += 3) {\n          (0 === n || t[l + 2] > s) && (r.numSimplified++, a.push(t[l]), a.push(t[l + 1])), r.numPoints++;\n        }\n\n        o && function (e, t) {\n          for (var r = 0, n = 0, o = e.length, i = o - 2; n < o; i = n, n += 2) {\n            r += (e[n] - e[i]) * (e[n + 1] + e[i + 1]);\n          }\n\n          if (r > 0 === t) for (n = 0, o = e.length; n < o / 2; n += 2) {\n            var s = e[n],\n                a = e[n + 1];\n            e[n] = e[o - 2 - n], e[n + 1] = e[o - 1 - n], e[o - 2 - n] = s, e[o - 1 - n] = a;\n          }\n        }(a, i), e.push(a);\n      }\n    }\n\n    function ge(e, t) {\n      var r = (t = this.options = function (e, t) {\n        for (var r in t) {\n          e[r] = t[r];\n        }\n\n        return e;\n      }(Object.create(this.options), t)).debug;\n\n      if (r && console.time(\"preprocess data\"), t.maxZoom < 0 || t.maxZoom > 24) throw new Error(\"maxZoom should be in the 0-24 range\");\n      if (t.promoteId && t.generateId) throw new Error(\"promoteId and generateId cannot be used together.\");\n\n      var n = function (e, t) {\n        var r = [];\n        if (\"FeatureCollection\" === e.type) for (var n = 0; n < e.features.length; n++) {\n          B(r, e.features[n], t, n);\n        } else B(r, \"Feature\" === e.type ? e : {\n          geometry: e\n        }, t);\n        return r;\n      }(e, t);\n\n      this.tiles = {}, this.tileCoords = [], r && (console.timeEnd(\"preprocess data\"), console.log(\"index: maxZoom: %d, maxPoints: %d\", t.indexMaxZoom, t.indexMaxPoints), console.time(\"generate tiles\"), this.stats = {}, this.total = 0), (n = function (e, t) {\n        var r = t.buffer / t.extent,\n            n = e,\n            o = ee(e, 1, -1 - r, r, 0, -1, 2, t),\n            i = ee(e, 1, 1 - r, 2 + r, 0, -1, 2, t);\n        return (o || i) && (n = ee(e, 1, -r, 1 + r, 0, -1, 2, t) || [], o && (n = le(o, 1).concat(n)), i && (n = n.concat(le(i, -1)))), n;\n      }(n, t)).length && this.splitTile(n, 0, 0, 0), r && (n.length && console.log(\"features: %d, points: %d\", this.tiles[0].numFeatures, this.tiles[0].numPoints), console.timeEnd(\"generate tiles\"), console.log(\"tiles generated:\", this.total, JSON.stringify(this.stats)));\n    }\n\n    function me(e, t, r) {\n      return 32 * ((1 << e) * r + t) + e;\n    }\n\n    function ye(e, t) {\n      var r = e.tileID.canonical;\n      if (!this._geoJSONIndex) return t(null, null);\n\n      var n = this._geoJSONIndex.getTile(r.z, r.x, r.y);\n\n      if (!n) return t(null, null);\n      var o = new h(n.features);\n      var i = g(o);\n      0 === i.byteOffset && i.byteLength === i.buffer.byteLength || (i = new Uint8Array(i)), t(null, {\n        vectorTile: o,\n        rawData: i.buffer\n      });\n    }\n\n    ge.prototype.options = {\n      maxZoom: 14,\n      indexMaxZoom: 5,\n      indexMaxPoints: 1e5,\n      tolerance: 3,\n      extent: 4096,\n      buffer: 64,\n      lineMetrics: !1,\n      promoteId: null,\n      generateId: !1,\n      debug: 0\n    }, ge.prototype.splitTile = function (e, t, r, n, o, i, s) {\n      for (var a = [e, t, r, n], l = this.options, u = l.debug; a.length;) {\n        n = a.pop(), r = a.pop(), t = a.pop(), e = a.pop();\n        var h = 1 << t,\n            c = me(t, r, n),\n            f = this.tiles[c];\n\n        if (!f && (u > 1 && console.time(\"creation\"), f = this.tiles[c] = fe(e, t, r, n, l), this.tileCoords.push({\n          z: t,\n          x: r,\n          y: n\n        }), u)) {\n          u > 1 && (console.log(\"tile z%d-%d-%d (features: %d, points: %d, simplified: %d)\", t, r, n, f.numFeatures, f.numPoints, f.numSimplified), console.timeEnd(\"creation\"));\n          var p = \"z\" + t;\n          this.stats[p] = (this.stats[p] || 0) + 1, this.total++;\n        }\n\n        if (f.source = e, o) {\n          if (t === l.maxZoom || t === o) continue;\n          var d = 1 << o - t;\n          if (r !== Math.floor(i / d) || n !== Math.floor(s / d)) continue;\n        } else if (t === l.indexMaxZoom || f.numPoints <= l.indexMaxPoints) continue;\n\n        if (f.source = null, 0 !== e.length) {\n          u > 1 && console.time(\"clipping\");\n\n          var g,\n              m,\n              y,\n              v,\n              x,\n              w,\n              S = .5 * l.buffer / l.extent,\n              M = .5 - S,\n              _ = .5 + S,\n              P = 1 + S;\n\n          g = m = y = v = null, x = ee(e, h, r - S, r + _, 0, f.minX, f.maxX, l), w = ee(e, h, r + M, r + P, 0, f.minX, f.maxX, l), e = null, x && (g = ee(x, h, n - S, n + _, 1, f.minY, f.maxY, l), m = ee(x, h, n + M, n + P, 1, f.minY, f.maxY, l), x = null), w && (y = ee(w, h, n - S, n + _, 1, f.minY, f.maxY, l), v = ee(w, h, n + M, n + P, 1, f.minY, f.maxY, l), w = null), u > 1 && console.timeEnd(\"clipping\"), a.push(g || [], t + 1, 2 * r, 2 * n), a.push(m || [], t + 1, 2 * r, 2 * n + 1), a.push(y || [], t + 1, 2 * r + 1, 2 * n), a.push(v || [], t + 1, 2 * r + 1, 2 * n + 1);\n        }\n      }\n    }, ge.prototype.getTile = function (e, t, r) {\n      var n = this.options,\n          o = n.extent,\n          i = n.debug;\n      if (e < 0 || e > 24) return null;\n      var s = 1 << e,\n          a = me(e, t = (t % s + s) % s, r);\n      if (this.tiles[a]) return he(this.tiles[a], o);\n      i > 1 && console.log(\"drilling down to z%d-%d-%d\", e, t, r);\n\n      for (var l, u = e, h = t, c = r; !l && u > 0;) {\n        u--, h = Math.floor(h / 2), c = Math.floor(c / 2), l = this.tiles[me(u, h, c)];\n      }\n\n      return l && l.source ? (i > 1 && console.log(\"found parent tile z%d-%d-%d\", u, h, c), i > 1 && console.time(\"drilling down\"), this.splitTile(l.source, u, h, c, e, t, r), i > 1 && console.timeEnd(\"drilling down\"), this.tiles[a] ? he(this.tiles[a], o) : null) : null;\n    };\n\n    var ve = /*#__PURE__*/function (_e$VectorTileWorkerSo) {\n      _inherits(ve, _e$VectorTileWorkerSo);\n\n      var _super101 = _createSuper(ve);\n\n      function ve(e, t, r, n, o) {\n        var _this56;\n\n        _classCallCheck(this, ve);\n\n        _this56 = _super101.call(this, e, t, r, n, ye), o && (_this56.loadGeoJSON = o);\n        return _this56;\n      }\n\n      _createClass(ve, [{\n        key: \"loadData\",\n        value: function loadData(e, t) {\n          this._pendingCallback && this._pendingCallback(null, {\n            abandoned: !0\n          }), this._pendingCallback = t, this._pendingLoadDataParams = e, this._state && \"Idle\" !== this._state ? this._state = \"NeedsLoadData\" : (this._state = \"Coalescing\", this._loadData());\n        }\n      }, {\n        key: \"_loadData\",\n        value: function _loadData() {\n          var _this57 = this;\n\n          if (!this._pendingCallback || !this._pendingLoadDataParams) return;\n          var t = this._pendingCallback,\n              r = this._pendingLoadDataParams;\n          delete this._pendingCallback, delete this._pendingLoadDataParams;\n          var n = !!(r && r.request && r.request.collectResourceTiming) && new e.RequestPerformance(r.request);\n          this.loadGeoJSON(r, function (o, i) {\n            if (o || !i) return t(o);\n            if (\"object\" != _typeof(i)) return t(new Error(\"Input data given to '\".concat(r.source, \"' is not a valid GeoJSON object.\")));\n            {\n              !function e(t, r) {\n                var n,\n                    o = t && t.type;\n                if (\"FeatureCollection\" === o) for (n = 0; n < t.features.length; n++) {\n                  e(t.features[n], r);\n                } else if (\"GeometryCollection\" === o) for (n = 0; n < t.geometries.length; n++) {\n                  e(t.geometries[n], r);\n                } else if (\"Feature\" === o) e(t.geometry, r);else if (\"Polygon\" === o) s(t.coordinates, r);else if (\"MultiPolygon\" === o) for (n = 0; n < t.coordinates.length; n++) {\n                  s(t.coordinates[n], r);\n                }\n                return t;\n              }(i, !0);\n\n              try {\n                if (r.filter) {\n                  var _t230 = e.createExpression(r.filter, {\n                    type: \"boolean\",\n                    \"property-type\": \"data-driven\",\n                    overridable: !1,\n                    transition: !1\n                  });\n\n                  if (\"error\" === _t230.result) throw new Error(_t230.value.map(function (e) {\n                    return \"\".concat(e.key, \": \").concat(e.message);\n                  }).join(\", \"));\n\n                  var _n122 = i.features.filter(function (e) {\n                    return _t230.value.evaluate({\n                      zoom: 0\n                    }, e);\n                  });\n\n                  i = {\n                    type: \"FeatureCollection\",\n                    features: _n122\n                  };\n                }\n\n                _this57._geoJSONIndex = r.cluster ? new F(function (_ref163) {\n                  var t = _ref163.superclusterOptions,\n                      r = _ref163.clusterProperties;\n                  if (!r || !t) return t;\n                  var n = {},\n                      o = {},\n                      i = {\n                    accumulated: null,\n                    zoom: 0\n                  },\n                      s = {\n                    properties: null\n                  },\n                      a = Object.keys(r);\n\n                  for (var _i157 = 0, _a83 = a; _i157 < _a83.length; _i157++) {\n                    var _t231 = _a83[_i157];\n\n                    var _r$_t = _slicedToArray(r[_t231], 2),\n                        _i158 = _r$_t[0],\n                        _s95 = _r$_t[1],\n                        _a84 = e.createExpression(_s95),\n                        _l36 = e.createExpression(\"string\" == typeof _i158 ? [_i158, [\"accumulated\"], [\"get\", _t231]] : _i158);\n\n                    n[_t231] = _a84.value, o[_t231] = _l36.value;\n                  }\n\n                  return t.map = function (e) {\n                    s.properties = e;\n                    var t = {};\n\n                    var _iterator152 = _createForOfIteratorHelper(a),\n                        _step152;\n\n                    try {\n                      for (_iterator152.s(); !(_step152 = _iterator152.n()).done;) {\n                        var _e218 = _step152.value;\n                        t[_e218] = n[_e218].evaluate(i, s);\n                      }\n                    } catch (err) {\n                      _iterator152.e(err);\n                    } finally {\n                      _iterator152.f();\n                    }\n\n                    return t;\n                  }, t.reduce = function (e, t) {\n                    s.properties = t;\n\n                    var _iterator153 = _createForOfIteratorHelper(a),\n                        _step153;\n\n                    try {\n                      for (_iterator153.s(); !(_step153 = _iterator153.n()).done;) {\n                        var _t232 = _step153.value;\n                        i.accumulated = e[_t232], e[_t232] = o[_t232].evaluate(i, s);\n                      }\n                    } catch (err) {\n                      _iterator153.e(err);\n                    } finally {\n                      _iterator153.f();\n                    }\n                  }, t;\n                }(r)).load(i.features) : function (e, t) {\n                  return new ge(e, t);\n                }(i, r.geojsonVtOptions);\n              } catch (o) {\n                return t(o);\n              }\n\n              _this57.loaded = {};\n              var _a82 = {};\n\n              if (n) {\n                var _e219 = n.finish();\n\n                _e219 && (_a82.resourceTiming = {}, _a82.resourceTiming[r.source] = JSON.parse(JSON.stringify(_e219)));\n              }\n\n              t(null, _a82);\n            }\n          });\n        }\n      }, {\n        key: \"coalesce\",\n        value: function coalesce() {\n          \"Coalescing\" === this._state ? this._state = \"Idle\" : \"NeedsLoadData\" === this._state && (this._state = \"Coalescing\", this._loadData());\n        }\n      }, {\n        key: \"reloadTile\",\n        value: function reloadTile(e, t) {\n          var r = this.loaded;\n          return r && r[e.uid] ? _get(_getPrototypeOf(ve.prototype), \"reloadTile\", this).call(this, e, t) : this.loadTile(e, t);\n        }\n      }, {\n        key: \"loadGeoJSON\",\n        value: function loadGeoJSON(t, r) {\n          if (t.request) e.getJSON(t.request, r);else {\n            if (\"string\" != typeof t.data) return r(new Error(\"Input data given to '\".concat(t.source, \"' is not a valid GeoJSON object.\")));\n\n            try {\n              return r(null, JSON.parse(t.data));\n            } catch (e) {\n              return r(new Error(\"Input data given to '\".concat(t.source, \"' is not a valid GeoJSON object.\")));\n            }\n          }\n        }\n      }, {\n        key: \"removeSource\",\n        value: function removeSource(e, t) {\n          this._pendingCallback && this._pendingCallback(null, {\n            abandoned: !0\n          }), t();\n        }\n      }, {\n        key: \"getClusterExpansionZoom\",\n        value: function getClusterExpansionZoom(e, t) {\n          try {\n            t(null, this._geoJSONIndex.getClusterExpansionZoom(e.clusterId));\n          } catch (e) {\n            t(e);\n          }\n        }\n      }, {\n        key: \"getClusterChildren\",\n        value: function getClusterChildren(e, t) {\n          try {\n            t(null, this._geoJSONIndex.getChildren(e.clusterId));\n          } catch (e) {\n            t(e);\n          }\n        }\n      }, {\n        key: \"getClusterLeaves\",\n        value: function getClusterLeaves(e, t) {\n          try {\n            t(null, this._geoJSONIndex.getLeaves(e.clusterId, e.limit, e.offset));\n          } catch (e) {\n            t(e);\n          }\n        }\n      }]);\n\n      return ve;\n    }(e.VectorTileWorkerSource);\n\n    var xe = /*#__PURE__*/function () {\n      function xe(t) {\n        var _this58 = this;\n\n        _classCallCheck(this, xe);\n\n        this.self = t, this.actor = new e.Actor(t, this), this.layerIndexes = {}, this.availableImages = {}, this.isSpriteLoaded = !1, this.workerSourceTypes = {\n          vector: e.VectorTileWorkerSource,\n          geojson: ve\n        }, this.workerSources = {}, this.demWorkerSources = {}, this.self.registerWorkerSource = function (e, t) {\n          if (_this58.workerSourceTypes[e]) throw new Error(\"Worker source with name \\\"\".concat(e, \"\\\" already registered.\"));\n          _this58.workerSourceTypes[e] = t;\n        }, this.self.registerRTLTextPlugin = function (t) {\n          if (e.plugin.isParsed()) throw new Error(\"RTL text plugin already registered.\");\n          e.plugin.applyArabicShaping = t.applyArabicShaping, e.plugin.processBidirectionalText = t.processBidirectionalText, e.plugin.processStyledBidirectionalText = t.processStyledBidirectionalText;\n        };\n      }\n\n      _createClass(xe, [{\n        key: \"checkIfReady\",\n        value: function checkIfReady(e, t, r) {\n          r();\n        }\n      }, {\n        key: \"setReferrer\",\n        value: function setReferrer(e, t) {\n          this.referrer = t;\n        }\n      }, {\n        key: \"spriteLoaded\",\n        value: function spriteLoaded(t, r) {\n          this.isSpriteLoaded = r;\n\n          for (var _n123 in this.workerSources[t]) {\n            var _o49 = this.workerSources[t][_n123];\n\n            for (var _t233 in _o49) {\n              _o49[_t233] instanceof e.VectorTileWorkerSource && (_o49[_t233].isSpriteLoaded = r, _o49[_t233].fire(new e.Event(\"isSpriteLoaded\")));\n            }\n          }\n        }\n      }, {\n        key: \"setImages\",\n        value: function setImages(e, t, r) {\n          this.availableImages[e] = t;\n\n          for (var _r206 in this.workerSources[e]) {\n            var _n124 = this.workerSources[e][_r206];\n\n            for (var _e220 in _n124) {\n              _n124[_e220].availableImages = t;\n            }\n          }\n\n          r();\n        }\n      }, {\n        key: \"enableTerrain\",\n        value: function enableTerrain(e, t, r) {\n          this.terrain = t, r();\n        }\n      }, {\n        key: \"setLayers\",\n        value: function setLayers(e, t, r) {\n          this.getLayerIndex(e).replace(t), r();\n        }\n      }, {\n        key: \"updateLayers\",\n        value: function updateLayers(e, t, r) {\n          this.getLayerIndex(e).update(t.layers, t.removedIds), r();\n        }\n      }, {\n        key: \"loadTile\",\n        value: function loadTile(t, r, n) {\n          var o = this.enableTerrain ? e.extend({\n            enableTerrain: this.terrain\n          }, r) : r;\n          this.getWorkerSource(t, r.type, r.source).loadTile(o, n);\n        }\n      }, {\n        key: \"loadDEMTile\",\n        value: function loadDEMTile(t, r, n) {\n          var o = this.enableTerrain ? e.extend({\n            buildQuadTree: this.terrain\n          }, r) : r;\n          this.getDEMWorkerSource(t, r.source).loadTile(o, n);\n        }\n      }, {\n        key: \"reloadTile\",\n        value: function reloadTile(t, r, n) {\n          var o = this.enableTerrain ? e.extend({\n            enableTerrain: this.terrain\n          }, r) : r;\n          this.getWorkerSource(t, r.type, r.source).reloadTile(o, n);\n        }\n      }, {\n        key: \"abortTile\",\n        value: function abortTile(e, t, r) {\n          this.getWorkerSource(e, t.type, t.source).abortTile(t, r);\n        }\n      }, {\n        key: \"removeTile\",\n        value: function removeTile(e, t, r) {\n          this.getWorkerSource(e, t.type, t.source).removeTile(t, r);\n        }\n      }, {\n        key: \"removeSource\",\n        value: function removeSource(e, t, r) {\n          if (!this.workerSources[e] || !this.workerSources[e][t.type] || !this.workerSources[e][t.type][t.source]) return;\n          var n = this.workerSources[e][t.type][t.source];\n          delete this.workerSources[e][t.type][t.source], void 0 !== n.removeSource ? n.removeSource(t, r) : r();\n        }\n      }, {\n        key: \"loadWorkerSource\",\n        value: function loadWorkerSource(e, t, r) {\n          try {\n            this.self.importScripts(t.url), r();\n          } catch (e) {\n            r(e.toString());\n          }\n        }\n      }, {\n        key: \"syncRTLPluginState\",\n        value: function syncRTLPluginState(t, r, n) {\n          try {\n            e.plugin.setState(r);\n\n            var _t234 = e.plugin.getPluginURL();\n\n            if (e.plugin.isLoaded() && !e.plugin.isParsed() && null != _t234) {\n              this.self.importScripts(_t234);\n\n              var _r207 = e.plugin.isParsed();\n\n              n(_r207 ? void 0 : new Error(\"RTL Text Plugin failed to import scripts from \".concat(_t234)), _r207);\n            }\n          } catch (e) {\n            n(e.toString());\n          }\n        }\n      }, {\n        key: \"getAvailableImages\",\n        value: function getAvailableImages(e) {\n          var t = this.availableImages[e];\n          return t || (t = []), t;\n        }\n      }, {\n        key: \"getLayerIndex\",\n        value: function getLayerIndex(e) {\n          var t = this.layerIndexes[e];\n          return t || (t = this.layerIndexes[e] = new n()), t;\n        }\n      }, {\n        key: \"getWorkerSource\",\n        value: function getWorkerSource(e, t, r) {\n          var _this59 = this;\n\n          return this.workerSources[e] || (this.workerSources[e] = {}), this.workerSources[e][t] || (this.workerSources[e][t] = {}), this.workerSources[e][t][r] || (this.workerSources[e][t][r] = new this.workerSourceTypes[t]({\n            send: function send(t, r, n, o, i, s) {\n              _this59.actor.send(t, r, n, e, o, s);\n            },\n            scheduler: this.actor.scheduler\n          }, this.getLayerIndex(e), this.getAvailableImages(e), this.isSpriteLoaded)), this.workerSources[e][t][r];\n        }\n      }, {\n        key: \"getDEMWorkerSource\",\n        value: function getDEMWorkerSource(e, t) {\n          return this.demWorkerSources[e] || (this.demWorkerSources[e] = {}), this.demWorkerSources[e][t] || (this.demWorkerSources[e][t] = new i()), this.demWorkerSources[e][t];\n        }\n      }, {\n        key: \"enforceCacheSizeLimit\",\n        value: function enforceCacheSizeLimit(t, r) {\n          e.enforceCacheSizeLimit(r);\n        }\n      }, {\n        key: \"getWorkerPerformanceMetrics\",\n        value: function getWorkerPerformanceMetrics(e, t, r) {\n          r(void 0, void 0);\n        }\n      }]);\n\n      return xe;\n    }();\n\n    return \"undefined\" != typeof WorkerGlobalScope && \"undefined\" != typeof self && self instanceof WorkerGlobalScope && (self.worker = new xe(self)), xe;\n  });\n  define([\"./shared\"], function (e) {\n    \"use strict\";\n\n    var t = i;\n\n    function i(e) {\n      return !function (e) {\n        return \"undefined\" == typeof window || \"undefined\" == typeof document ? \"not a browser\" : Array.prototype && Array.prototype.every && Array.prototype.filter && Array.prototype.forEach && Array.prototype.indexOf && Array.prototype.lastIndexOf && Array.prototype.map && Array.prototype.some && Array.prototype.reduce && Array.prototype.reduceRight && Array.isArray ? Function.prototype && Function.prototype.bind ? Object.keys && Object.create && Object.getPrototypeOf && Object.getOwnPropertyNames && Object.isSealed && Object.isFrozen && Object.isExtensible && Object.getOwnPropertyDescriptor && Object.defineProperty && Object.defineProperties && Object.seal && Object.freeze && Object.preventExtensions ? \"JSON\" in window && \"parse\" in JSON && \"stringify\" in JSON ? function () {\n          if (!(\"Worker\" in window && \"Blob\" in window && \"URL\" in window)) return !1;\n          var e,\n              t,\n              i = new Blob([\"\"], {\n            type: \"text/javascript\"\n          }),\n              o = URL.createObjectURL(i);\n\n          try {\n            t = new Worker(o), e = !0;\n          } catch (t) {\n            e = !1;\n          }\n\n          return t && t.terminate(), URL.revokeObjectURL(o), e;\n        }() ? \"Uint8ClampedArray\" in window ? ArrayBuffer.isView ? function () {\n          var e = document.createElement(\"canvas\");\n          e.width = e.height = 1;\n          var t = e.getContext(\"2d\");\n          if (!t) return !1;\n          var i = t.getImageData(0, 0, 1, 1);\n          return i && i.width === e.width;\n        }() ? (void 0 === o[t = e && e.failIfMajorPerformanceCaveat] && (o[t] = function (e) {\n          var t,\n              o = function (e) {\n            var t = document.createElement(\"canvas\"),\n                o = Object.create(i.webGLContextAttributes);\n            return o.failIfMajorPerformanceCaveat = e, t.getContext(\"webgl\", o) || t.getContext(\"experimental-webgl\", o);\n          }(e);\n\n          if (!o) return !1;\n\n          try {\n            t = o.createShader(o.VERTEX_SHADER);\n          } catch (e) {\n            return !1;\n          }\n\n          return !(!t || o.isContextLost()) && (o.shaderSource(t, \"void main() {}\"), o.compileShader(t), !0 === o.getShaderParameter(t, o.COMPILE_STATUS));\n        }(t)), o[t] ? document.documentMode ? \"insufficient ECMAScript 6 support\" : void 0 : \"insufficient WebGL support\") : \"insufficient Canvas/getImageData support\" : \"insufficient ArrayBuffer support\" : \"insufficient Uint8ClampedArray support\" : \"insufficient worker support\" : \"insufficient JSON support\" : \"insufficient Object support\" : \"insufficient Function support\" : \"insufficent Array support\";\n        var t;\n      }(e);\n    }\n\n    var o = {};\n    i.webGLContextAttributes = {\n      antialias: !1,\n      alpha: !0,\n      stencil: !0,\n      depth: !0\n    };\n    var a = {\n      create: function create(t, i, o) {\n        var a = e.window.document.createElement(t);\n        return void 0 !== i && (a.className = i), o && o.appendChild(a), a;\n      },\n      createNS: function createNS(t, i) {\n        return e.window.document.createElementNS(t, i);\n      }\n    },\n        r = e.window.document && e.window.document.documentElement.style,\n        n = r && void 0 !== r.userSelect ? \"userSelect\" : \"WebkitUserSelect\";\n    var s;\n    a.disableDrag = function () {\n      r && n && (s = r[n], r[n] = \"none\");\n    }, a.enableDrag = function () {\n      r && n && (r[n] = s);\n    }, a.setTransform = function (e, t) {\n      e.style.transform = t;\n    };\n    var l = !1;\n\n    try {\n      var _t235 = Object.defineProperty({}, \"passive\", {\n        get: function get() {\n          l = !0;\n        }\n      });\n\n      e.window.addEventListener(\"test\", _t235, _t235), e.window.removeEventListener(\"test\", _t235, _t235);\n    } catch (e) {\n      l = !1;\n    }\n\n    a.addEventListener = function (e, t, i) {\n      var o = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};\n      e.addEventListener(t, i, \"passive\" in o && l ? o : o.capture);\n    }, a.removeEventListener = function (e, t, i) {\n      var o = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};\n      e.removeEventListener(t, i, \"passive\" in o && l ? o : o.capture);\n    };\n\n    var c = function c(t) {\n      t.preventDefault(), t.stopPropagation(), e.window.removeEventListener(\"click\", c, !0);\n    };\n\n    function h(e) {\n      var t = e.userImage;\n      return !!(t && t.render && t.render()) && (e.data.replace(new Uint8Array(t.data.buffer)), !0);\n    }\n\n    a.suppressClick = function () {\n      e.window.addEventListener(\"click\", c, !0), e.window.setTimeout(function () {\n        e.window.removeEventListener(\"click\", c, !0);\n      }, 0);\n    }, a.mousePos = function (t, i) {\n      var o = t.getBoundingClientRect();\n      return new e.Point(i.clientX - o.left - t.clientLeft, i.clientY - o.top - t.clientTop);\n    }, a.touchPos = function (t, i) {\n      var o = t.getBoundingClientRect(),\n          a = [];\n\n      for (var _r208 = 0; _r208 < i.length; _r208++) {\n        a.push(new e.Point(i[_r208].clientX - o.left - t.clientLeft, i[_r208].clientY - o.top - t.clientTop));\n      }\n\n      return a;\n    }, a.mouseButton = function (t) {\n      return void 0 !== e.window.InstallTrigger && 2 === t.button && t.ctrlKey && e.window.navigator.platform.toUpperCase().indexOf(\"MAC\") >= 0 ? 0 : t.button;\n    }, a.remove = function (e) {\n      e.parentNode && e.parentNode.removeChild(e);\n    };\n\n    var u = /*#__PURE__*/function (_e$Evented) {\n      _inherits(u, _e$Evented);\n\n      var _super102 = _createSuper(u);\n\n      function u() {\n        var _this60;\n\n        _classCallCheck(this, u);\n\n        _this60 = _super102.call(this), _this60.images = {}, _this60.updatedImages = {}, _this60.callbackDispatchedThisFrame = {}, _this60.loaded = !1, _this60.requestors = [], _this60.patterns = {}, _this60.atlasImage = new e.RGBAImage({\n          width: 1,\n          height: 1\n        }), _this60.dirty = !0;\n        return _this60;\n      }\n\n      _createClass(u, [{\n        key: \"isLoaded\",\n        value: function isLoaded() {\n          return this.loaded;\n        }\n      }, {\n        key: \"setLoaded\",\n        value: function setLoaded(e) {\n          if (this.loaded !== e && (this.loaded = e, e)) {\n            var _iterator154 = _createForOfIteratorHelper(this.requestors),\n                _step154;\n\n            try {\n              for (_iterator154.s(); !(_step154 = _iterator154.n()).done;) {\n                var _ref165 = _step154.value;\n                var _e221 = _ref165.ids;\n                var _t236 = _ref165.callback;\n\n                this._notify(_e221, _t236);\n              }\n            } catch (err) {\n              _iterator154.e(err);\n            } finally {\n              _iterator154.f();\n            }\n\n            this.requestors = [];\n          }\n        }\n      }, {\n        key: \"getImage\",\n        value: function getImage(e) {\n          return this.images[e];\n        }\n      }, {\n        key: \"addImage\",\n        value: function addImage(e, t) {\n          this._validate(e, t) && (this.images[e] = t);\n        }\n      }, {\n        key: \"_validate\",\n        value: function _validate(t, i) {\n          var o = !0;\n          return this._validateStretch(i.stretchX, i.data && i.data.width) || (this.fire(new e.ErrorEvent(new Error(\"Image \\\"\".concat(t, \"\\\" has invalid \\\"stretchX\\\" value\")))), o = !1), this._validateStretch(i.stretchY, i.data && i.data.height) || (this.fire(new e.ErrorEvent(new Error(\"Image \\\"\".concat(t, \"\\\" has invalid \\\"stretchY\\\" value\")))), o = !1), this._validateContent(i.content, i) || (this.fire(new e.ErrorEvent(new Error(\"Image \\\"\".concat(t, \"\\\" has invalid \\\"content\\\" value\")))), o = !1), o;\n        }\n      }, {\n        key: \"_validateStretch\",\n        value: function _validateStretch(e, t) {\n          if (!e) return !0;\n          var i = 0;\n\n          var _iterator155 = _createForOfIteratorHelper(e),\n              _step155;\n\n          try {\n            for (_iterator155.s(); !(_step155 = _iterator155.n()).done;) {\n              var _o50 = _step155.value;\n              if (_o50[0] < i || _o50[1] < _o50[0] || t < _o50[1]) return !1;\n              i = _o50[1];\n            }\n          } catch (err) {\n            _iterator155.e(err);\n          } finally {\n            _iterator155.f();\n          }\n\n          return !0;\n        }\n      }, {\n        key: \"_validateContent\",\n        value: function _validateContent(e, t) {\n          return !(e && (4 !== e.length || e[0] < 0 || t.data.width < e[0] || e[1] < 0 || t.data.height < e[1] || e[2] < 0 || t.data.width < e[2] || e[3] < 0 || t.data.height < e[3] || e[2] < e[0] || e[3] < e[1]));\n        }\n      }, {\n        key: \"updateImage\",\n        value: function updateImage(e, t) {\n          t.version = this.images[e].version + 1, this.images[e] = t, this.updatedImages[e] = !0;\n        }\n      }, {\n        key: \"removeImage\",\n        value: function removeImage(e) {\n          var t = this.images[e];\n          delete this.images[e], delete this.patterns[e], t.userImage && t.userImage.onRemove && t.userImage.onRemove();\n        }\n      }, {\n        key: \"listImages\",\n        value: function listImages() {\n          return Object.keys(this.images);\n        }\n      }, {\n        key: \"getImages\",\n        value: function getImages(e, t) {\n          var i = !0;\n\n          if (!this.isLoaded()) {\n            var _iterator156 = _createForOfIteratorHelper(e),\n                _step156;\n\n            try {\n              for (_iterator156.s(); !(_step156 = _iterator156.n()).done;) {\n                var _t237 = _step156.value;\n                this.images[_t237] || (i = !1);\n              }\n            } catch (err) {\n              _iterator156.e(err);\n            } finally {\n              _iterator156.f();\n            }\n          }\n\n          this.isLoaded() || i ? this._notify(e, t) : this.requestors.push({\n            ids: e,\n            callback: t\n          });\n        }\n      }, {\n        key: \"_notify\",\n        value: function _notify(t, i) {\n          var o = {};\n\n          var _iterator157 = _createForOfIteratorHelper(t),\n              _step157;\n\n          try {\n            for (_iterator157.s(); !(_step157 = _iterator157.n()).done;) {\n              var _i159 = _step157.value;\n              this.images[_i159] || this.fire(new e.Event(\"styleimagemissing\", {\n                id: _i159\n              }));\n              var _t238 = this.images[_i159];\n              _t238 ? o[_i159] = {\n                data: _t238.data.clone(),\n                pixelRatio: _t238.pixelRatio,\n                sdf: _t238.sdf,\n                version: _t238.version,\n                stretchX: _t238.stretchX,\n                stretchY: _t238.stretchY,\n                content: _t238.content,\n                hasRenderCallback: Boolean(_t238.userImage && _t238.userImage.render)\n              } : e.warnOnce(\"Image \\\"\".concat(_i159, \"\\\" could not be loaded. Please make sure you have added the image with map.addImage() or a \\\"sprite\\\" property in your style. You can provide missing images by listening for the \\\"styleimagemissing\\\" map event.\"));\n            }\n          } catch (err) {\n            _iterator157.e(err);\n          } finally {\n            _iterator157.f();\n          }\n\n          i(null, o);\n        }\n      }, {\n        key: \"getPixelSize\",\n        value: function getPixelSize() {\n          var _this$atlasImage = this.atlasImage,\n              e = _this$atlasImage.width,\n              t = _this$atlasImage.height;\n          return {\n            width: e,\n            height: t\n          };\n        }\n      }, {\n        key: \"getPattern\",\n        value: function getPattern(t) {\n          var i = this.patterns[t],\n              o = this.getImage(t);\n          if (!o) return null;\n          if (i && i.position.version === o.version) return i.position;\n          if (i) i.position.version = o.version;else {\n            var _i160 = {\n              w: o.data.width + 2,\n              h: o.data.height + 2,\n              x: 0,\n              y: 0\n            },\n                _a85 = new e.ImagePosition(_i160, o);\n\n            this.patterns[t] = {\n              bin: _i160,\n              position: _a85\n            };\n          }\n          return this._updatePatternAtlas(), this.patterns[t].position;\n        }\n      }, {\n        key: \"bind\",\n        value: function bind(t) {\n          var i = t.gl;\n          this.atlasTexture ? this.dirty && (this.atlasTexture.update(this.atlasImage), this.dirty = !1) : this.atlasTexture = new e.Texture(t, this.atlasImage, i.RGBA), this.atlasTexture.bind(i.LINEAR, i.CLAMP_TO_EDGE);\n        }\n      }, {\n        key: \"_updatePatternAtlas\",\n        value: function _updatePatternAtlas() {\n          var t = [];\n\n          for (var _e222 in this.patterns) {\n            t.push(this.patterns[_e222].bin);\n          }\n\n          var _e$potpack = e.potpack(t),\n              i = _e$potpack.w,\n              o = _e$potpack.h,\n              a = this.atlasImage;\n\n          a.resize({\n            width: i || 1,\n            height: o || 1\n          });\n\n          for (var _t239 in this.patterns) {\n            var _i161 = this.patterns[_t239].bin,\n                _o51 = _i161.x + 1,\n                _r209 = _i161.y + 1,\n                _n125 = this.images[_t239].data,\n                _s96 = _n125.width,\n                _l37 = _n125.height;\n\n            e.RGBAImage.copy(_n125, a, {\n              x: 0,\n              y: 0\n            }, {\n              x: _o51,\n              y: _r209\n            }, {\n              width: _s96,\n              height: _l37\n            }), e.RGBAImage.copy(_n125, a, {\n              x: 0,\n              y: _l37 - 1\n            }, {\n              x: _o51,\n              y: _r209 - 1\n            }, {\n              width: _s96,\n              height: 1\n            }), e.RGBAImage.copy(_n125, a, {\n              x: 0,\n              y: 0\n            }, {\n              x: _o51,\n              y: _r209 + _l37\n            }, {\n              width: _s96,\n              height: 1\n            }), e.RGBAImage.copy(_n125, a, {\n              x: _s96 - 1,\n              y: 0\n            }, {\n              x: _o51 - 1,\n              y: _r209\n            }, {\n              width: 1,\n              height: _l37\n            }), e.RGBAImage.copy(_n125, a, {\n              x: 0,\n              y: 0\n            }, {\n              x: _o51 + _s96,\n              y: _r209\n            }, {\n              width: 1,\n              height: _l37\n            });\n          }\n\n          this.dirty = !0;\n        }\n      }, {\n        key: \"beginFrame\",\n        value: function beginFrame() {\n          this.callbackDispatchedThisFrame = {};\n        }\n      }, {\n        key: \"dispatchRenderCallbacks\",\n        value: function dispatchRenderCallbacks(e) {\n          var _iterator158 = _createForOfIteratorHelper(e),\n              _step158;\n\n          try {\n            for (_iterator158.s(); !(_step158 = _iterator158.n()).done;) {\n              var _t240 = _step158.value;\n              if (this.callbackDispatchedThisFrame[_t240]) continue;\n              this.callbackDispatchedThisFrame[_t240] = !0;\n              var _e223 = this.images[_t240];\n              h(_e223) && this.updateImage(_t240, _e223);\n            }\n          } catch (err) {\n            _iterator158.e(err);\n          } finally {\n            _iterator158.f();\n          }\n        }\n      }]);\n\n      return u;\n    }(e.Evented);\n\n    var d = new e.Properties({\n      anchor: new e.DataConstantProperty(e.styleSpec.light.anchor),\n      position: new ( /*#__PURE__*/function () {\n        function _class17() {\n          _classCallCheck(this, _class17);\n\n          this.specification = e.styleSpec.light.position;\n        }\n\n        _createClass(_class17, [{\n          key: \"possiblyEvaluate\",\n          value: function possiblyEvaluate(t, i) {\n            return function (_ref166) {\n              var _ref167 = _slicedToArray(_ref166, 3),\n                  t = _ref167[0],\n                  i = _ref167[1],\n                  o = _ref167[2];\n\n              var a = e.degToRad(i + 90),\n                  r = e.degToRad(o);\n              return {\n                x: t * Math.cos(a) * Math.sin(r),\n                y: t * Math.sin(a) * Math.sin(r),\n                z: t * Math.cos(r),\n                azimuthal: i,\n                polar: o\n              };\n            }(t.expression.evaluate(i));\n          }\n        }, {\n          key: \"interpolate\",\n          value: function interpolate(t, i, o) {\n            return {\n              x: e.number(t.x, i.x, o),\n              y: e.number(t.y, i.y, o),\n              z: e.number(t.z, i.z, o),\n              azimuthal: e.number(t.azimuthal, i.azimuthal, o),\n              polar: e.number(t.polar, i.polar, o)\n            };\n          }\n        }]);\n\n        return _class17;\n      }())(),\n      color: new e.DataConstantProperty(e.styleSpec.light.color),\n      intensity: new e.DataConstantProperty(e.styleSpec.light.intensity)\n    });\n\n    var _ = /*#__PURE__*/function (_e$Evented2) {\n      _inherits(_, _e$Evented2);\n\n      var _super103 = _createSuper(_);\n\n      function _(t) {\n        var _this61;\n\n        _classCallCheck(this, _);\n\n        _this61 = _super103.call(this), _this61._transitionable = new e.Transitionable(d), _this61.setLight(t), _this61._transitioning = _this61._transitionable.untransitioned();\n        return _this61;\n      }\n\n      _createClass(_, [{\n        key: \"getLight\",\n        value: function getLight() {\n          return this._transitionable.serialize();\n        }\n      }, {\n        key: \"setLight\",\n        value: function setLight(t) {\n          var i = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n          if (!this._validate(e.validateLight, t, i)) for (var _i162 in t) {\n            var _o52 = t[_i162];\n            e.endsWith(_i162, \"-transition\") ? this._transitionable.setTransition(_i162.slice(0, -\"-transition\".length), _o52) : this._transitionable.setValue(_i162, _o52);\n          }\n        }\n      }, {\n        key: \"updateTransitions\",\n        value: function updateTransitions(e) {\n          this._transitioning = this._transitionable.transitioned(e, this._transitioning);\n        }\n      }, {\n        key: \"hasTransition\",\n        value: function hasTransition() {\n          return this._transitioning.hasTransition();\n        }\n      }, {\n        key: \"recalculate\",\n        value: function recalculate(e) {\n          this.properties = this._transitioning.possiblyEvaluate(e);\n        }\n      }, {\n        key: \"_validate\",\n        value: function _validate(t, i, o) {\n          return (!o || !1 !== o.validate) && e.emitValidationErrors(this, t.call(e.validateStyle, e.extend({\n            value: i,\n            style: {\n              glyphs: !0,\n              sprite: !0\n            },\n            styleSpec: e.styleSpec\n          })));\n        }\n      }]);\n\n      return _;\n    }(e.Evented);\n\n    var m = new e.Properties({\n      source: new e.DataConstantProperty(e.styleSpec.terrain.source),\n      exaggeration: new e.DataConstantProperty(e.styleSpec.terrain.exaggeration)\n    });\n\n    var p = /*#__PURE__*/function (_e$Evented3) {\n      _inherits(p, _e$Evented3);\n\n      var _super104 = _createSuper(p);\n\n      function p(t) {\n        var _this62;\n\n        _classCallCheck(this, p);\n\n        _this62 = _super104.call(this), _this62._transitionable = new e.Transitionable(m), _this62.set(t), _this62._transitioning = _this62._transitionable.untransitioned();\n        return _this62;\n      }\n\n      _createClass(p, [{\n        key: \"get\",\n        value: function get() {\n          return this._transitionable.serialize();\n        }\n      }, {\n        key: \"set\",\n        value: function set(t) {\n          for (var _i163 in t) {\n            var _o53 = t[_i163];\n            e.endsWith(_i163, \"-transition\") ? this._transitionable.setTransition(_i163.slice(0, -\"-transition\".length), _o53) : this._transitionable.setValue(_i163, _o53);\n          }\n        }\n      }, {\n        key: \"updateTransitions\",\n        value: function updateTransitions(e) {\n          this._transitioning = this._transitionable.transitioned(e, this._transitioning);\n        }\n      }, {\n        key: \"hasTransition\",\n        value: function hasTransition() {\n          return this._transitioning.hasTransition();\n        }\n      }, {\n        key: \"recalculate\",\n        value: function recalculate(e) {\n          this.properties = this._transitioning.possiblyEvaluate(e);\n        }\n      }]);\n\n      return p;\n    }(e.Evented);\n\n    var f = /*#__PURE__*/function () {\n      function f(e, t) {\n        _classCallCheck(this, f);\n\n        this.width = e, this.height = t, this.nextRow = 0, this.data = new Uint8Array(this.width * this.height), this.dashEntry = {};\n      }\n\n      _createClass(f, [{\n        key: \"getDash\",\n        value: function getDash(e, t) {\n          var i = e.join(\",\") + String(t);\n          return this.dashEntry[i] || (this.dashEntry[i] = this.addDash(e, t)), this.dashEntry[i];\n        }\n      }, {\n        key: \"getDashRanges\",\n        value: function getDashRanges(e, t, i) {\n          var o = [];\n          var a = e.length % 2 == 1 ? -e[e.length - 1] * i : 0,\n              r = e[0] * i,\n              n = !0;\n          o.push({\n            left: a,\n            right: r,\n            isDash: n,\n            zeroLength: 0 === e[0]\n          });\n          var s = e[0];\n\n          for (var _t241 = 1; _t241 < e.length; _t241++) {\n            n = !n;\n            var _l38 = e[_t241];\n            a = s * i, s += _l38, r = s * i, o.push({\n              left: a,\n              right: r,\n              isDash: n,\n              zeroLength: 0 === _l38\n            });\n          }\n\n          return o;\n        }\n      }, {\n        key: \"addRoundDash\",\n        value: function addRoundDash(e, t, i) {\n          var o = t / 2;\n\n          for (var _t242 = -i; _t242 <= i; _t242++) {\n            var _a86 = this.width * (this.nextRow + i + _t242);\n\n            var _r210 = 0,\n                _n126 = e[_r210];\n\n            for (var _s97 = 0; _s97 < this.width; _s97++) {\n              _s97 / _n126.right > 1 && (_n126 = e[++_r210]);\n\n              var _l39 = Math.abs(_s97 - _n126.left),\n                  _c27 = Math.abs(_s97 - _n126.right),\n                  _h16 = Math.min(_l39, _c27);\n\n              var _u36 = void 0;\n\n              var _d13 = _t242 / i * (o + 1);\n\n              if (_n126.isDash) {\n                var _e224 = o - Math.abs(_d13);\n\n                _u36 = Math.sqrt(_h16 * _h16 + _e224 * _e224);\n              } else _u36 = o - Math.sqrt(_h16 * _h16 + _d13 * _d13);\n\n              this.data[_a86 + _s97] = Math.max(0, Math.min(255, _u36 + 128));\n            }\n          }\n        }\n      }, {\n        key: \"addRegularDash\",\n        value: function addRegularDash(e) {\n          for (var _t243 = e.length - 1; _t243 >= 0; --_t243) {\n            var _i164 = e[_t243],\n                _o54 = e[_t243 + 1];\n            _i164.zeroLength ? e.splice(_t243, 1) : _o54 && _o54.isDash === _i164.isDash && (_o54.left = _i164.left, e.splice(_t243, 1));\n          }\n\n          var t = e[0],\n              i = e[e.length - 1];\n          t.isDash === i.isDash && (t.left = i.left - this.width, i.right = t.right + this.width);\n          var o = this.width * this.nextRow;\n          var a = 0,\n              r = e[a];\n\n          for (var _t244 = 0; _t244 < this.width; _t244++) {\n            _t244 / r.right > 1 && (r = e[++a]);\n\n            var _i165 = Math.abs(_t244 - r.left),\n                _n127 = Math.abs(_t244 - r.right),\n                _s98 = Math.min(_i165, _n127);\n\n            this.data[o + _t244] = Math.max(0, Math.min(255, (r.isDash ? _s98 : -_s98) + 128));\n          }\n        }\n      }, {\n        key: \"addDash\",\n        value: function addDash(t, i) {\n          var o = i ? 7 : 0,\n              a = 2 * o + 1;\n          if (this.nextRow + a > this.height) return e.warnOnce(\"LineAtlas out of space\"), null;\n          0 === t.length && t.push(1);\n          var r = 0;\n\n          for (var _i166 = 0; _i166 < t.length; _i166++) {\n            t[_i166] < 0 && (e.warnOnce(\"Negative value is found in line dasharray, replacing values with 0\"), t[_i166] = 0), r += t[_i166];\n          }\n\n          if (0 !== r) {\n            var _e225 = this.width / r,\n                _a87 = this.getDashRanges(t, this.width, _e225);\n\n            i ? this.addRoundDash(_a87, _e225, o) : this.addRegularDash(_a87);\n          }\n\n          var n = {\n            y: (this.nextRow + o + .5) / this.height,\n            height: 2 * o / this.height,\n            width: r\n          };\n          return this.nextRow += a, this.dirty = !0, n;\n        }\n      }, {\n        key: \"bind\",\n        value: function bind(e) {\n          var t = e.gl;\n          this.texture ? (t.bindTexture(t.TEXTURE_2D, this.texture), this.dirty && (this.dirty = !1, t.texSubImage2D(t.TEXTURE_2D, 0, 0, 0, this.width, this.height, t.ALPHA, t.UNSIGNED_BYTE, this.data))) : (this.texture = t.createTexture(), t.bindTexture(t.TEXTURE_2D, this.texture), t.texParameteri(t.TEXTURE_2D, t.TEXTURE_WRAP_S, t.REPEAT), t.texParameteri(t.TEXTURE_2D, t.TEXTURE_WRAP_T, t.REPEAT), t.texParameteri(t.TEXTURE_2D, t.TEXTURE_MIN_FILTER, t.LINEAR), t.texParameteri(t.TEXTURE_2D, t.TEXTURE_MAG_FILTER, t.LINEAR), t.texImage2D(t.TEXTURE_2D, 0, t.ALPHA, this.width, this.height, 0, t.ALPHA, t.UNSIGNED_BYTE, this.data));\n        }\n      }]);\n\n      return f;\n    }();\n\n    var g = /*#__PURE__*/function () {\n      function g(t, i) {\n        var _this63 = this;\n\n        _classCallCheck(this, g);\n\n        this.workerPool = t, this.actors = [], this.currentActor = 0, this.id = e.uniqueId();\n        var o = this.workerPool.acquire(this.id);\n\n        for (var _e226 = 0; _e226 < o.length; _e226++) {\n          var _t245 = new g.Actor(o[_e226], i, this.id);\n\n          _t245.name = \"Worker \".concat(_e226), this.actors.push(_t245);\n        }\n\n        this.ready = !1, this.broadcast(\"checkIfReady\", null, function () {\n          _this63.ready = !0;\n        });\n      }\n\n      _createClass(g, [{\n        key: \"broadcast\",\n        value: function broadcast(t, i, o) {\n          e.asyncAll(this.actors, function (e, o) {\n            e.send(t, i, o);\n          }, o = o || function () {});\n        }\n      }, {\n        key: \"getActor\",\n        value: function getActor() {\n          return this.currentActor = (this.currentActor + 1) % this.actors.length, this.actors[this.currentActor];\n        }\n      }, {\n        key: \"remove\",\n        value: function remove() {\n          this.actors.forEach(function (e) {\n            e.remove();\n          }), this.actors = [], this.workerPool.release(this.id);\n        }\n      }]);\n\n      return g;\n    }();\n\n    function v(t, i, o) {\n      return i * (e.EXTENT / (t.tileSize * Math.pow(2, o - t.tileID.overscaledZ)));\n    }\n\n    g.Actor = e.Actor;\n\n    var x = /*#__PURE__*/function () {\n      function x(e, t, i, o) {\n        _classCallCheck(this, x);\n\n        this.screenBounds = e, this.cameraPoint = t, this._screenRaycastCache = {}, this._cameraRaycastCache = {}, this.isAboveHorizon = i, this.screenGeometry = this.bufferedScreenGeometry(0), this.screenGeometryMercator = this.screenGeometry.map(function (e) {\n          return o.pointCoordinate3D(e);\n        }), this.cameraGeometry = this.bufferedCameraGeometry(0);\n      }\n\n      _createClass(x, [{\n        key: \"isPointQuery\",\n        value: function isPointQuery() {\n          return 1 === this.screenBounds.length;\n        }\n      }, {\n        key: \"bufferedScreenGeometry\",\n        value: function bufferedScreenGeometry(t) {\n          return e.polygonizeBounds(this.screenBounds[0], 1 === this.screenBounds.length ? this.screenBounds[0] : this.screenBounds[1], t);\n        }\n      }, {\n        key: \"bufferedCameraGeometry\",\n        value: function bufferedCameraGeometry(t) {\n          var i = this.screenBounds[0],\n              o = 1 === this.screenBounds.length ? this.screenBounds[0].add(new e.Point(1, 1)) : this.screenBounds[1],\n              a = e.polygonizeBounds(i, o, 0, !1);\n          return this.cameraPoint.y > o.y && (this.cameraPoint.x > i.x && this.cameraPoint.x < o.x ? a.splice(3, 0, this.cameraPoint) : this.cameraPoint.x >= o.x ? a[2] = this.cameraPoint : this.cameraPoint.x <= i.x && (a[3] = this.cameraPoint)), e.bufferConvexPolygon(a, t);\n        }\n      }, {\n        key: \"containsTile\",\n        value: function containsTile(t, i, o) {\n          var a = t.queryPadding + 1,\n              r = o ? this._bufferedCameraMercator(a, i).map(function (e) {\n            return t.tileID.getTilePoint(e);\n          }) : this._bufferedScreenMercator(a, i).map(function (e) {\n            return t.tileID.getTilePoint(e);\n          }),\n              n = this.screenGeometryMercator.map(function (e) {\n            return t.tileID.getTileVec3(e);\n          }),\n              s = n.map(function (t) {\n            return new e.Point(t[0], t[1]);\n          }),\n              l = i.getFreeCameraOptions().position || new e.MercatorCoordinate(0, 0, 0),\n              c = t.tileID.getTileVec3(l),\n              h = n.map(function (t) {\n            var i = e.sub(t, t, c);\n            return e.normalize(i, i), new e.Ray(c, i);\n          }),\n              u = v(t, 1, i.zoom);\n          if (e.polygonIntersectsBox(r, 0, 0, e.EXTENT, e.EXTENT)) return {\n            queryGeometry: this,\n            tilespaceGeometry: s,\n            tilespaceRays: h,\n            bufferedTilespaceGeometry: r,\n            bufferedTilespaceBounds: (d = e.getBounds(r), d.min.x = e.clamp(d.min.x, 0, e.EXTENT), d.min.y = e.clamp(d.min.y, 0, e.EXTENT), d.max.x = e.clamp(d.max.x, 0, e.EXTENT), d.max.y = e.clamp(d.max.y, 0, e.EXTENT), d),\n            tile: t,\n            tileID: t.tileID,\n            pixelToTileUnitsFactor: u\n          };\n          var d;\n        }\n      }, {\n        key: \"_bufferedScreenMercator\",\n        value: function _bufferedScreenMercator(e, t) {\n          var i = y(e);\n          if (this._screenRaycastCache[i]) return this._screenRaycastCache[i];\n          {\n            var _o55 = this.bufferedScreenGeometry(e).map(function (e) {\n              return t.pointCoordinate3D(e);\n            });\n\n            return this._screenRaycastCache[i] = _o55, _o55;\n          }\n        }\n      }, {\n        key: \"_bufferedCameraMercator\",\n        value: function _bufferedCameraMercator(e, t) {\n          var i = y(e);\n          if (this._cameraRaycastCache[i]) return this._cameraRaycastCache[i];\n          {\n            var _o56 = this.bufferedCameraGeometry(e).map(function (e) {\n              return t.pointCoordinate3D(e);\n            });\n\n            return this._cameraRaycastCache[i] = _o56, _o56;\n          }\n        }\n      }], [{\n        key: \"createFromScreenPoints\",\n        value: function createFromScreenPoints(t, i) {\n          var o, a;\n\n          if (t instanceof e.Point || \"number\" == typeof t[0]) {\n            var _r211 = e.Point.convert(t);\n\n            o = [e.Point.convert(t)], a = i.isPointAboveHorizon(_r211);\n          } else {\n            var _r212 = e.Point.convert(t[0]),\n                _n128 = e.Point.convert(t[1]);\n\n            o = [_r212, _n128], a = e.polygonizeBounds(_r212, _n128).every(function (e) {\n              return i.isPointAboveHorizon(e);\n            });\n          }\n\n          return new x(o, i.getCameraPoint(), a, i);\n        }\n      }]);\n\n      return x;\n    }();\n\n    function y(e) {\n      return 100 * e | 0;\n    }\n\n    function b(t, i, o) {\n      var a = function a(_a89, r) {\n        if (_a89) return o(_a89);\n\n        if (r) {\n          var _a88 = e.pick(e.extend(r, t), [\"tiles\", \"minzoom\", \"maxzoom\", \"attribution\", \"mapbox_logo\", \"bounds\", \"scheme\", \"tileSize\", \"encoding\"]);\n\n          r.vector_layers && (_a88.vectorLayers = r.vector_layers, _a88.vectorLayerIds = _a88.vectorLayers.map(function (e) {\n            return e.id;\n          })), _a88.tiles = i.canonicalizeTileset(_a88, t.url), o(null, _a88);\n        }\n      };\n\n      return t.url ? e.getJSON(i.transformRequest(i.normalizeSourceURL(t.url), e.ResourceType.Source), a) : e.browser.frame(function () {\n        return a(null, t);\n      });\n    }\n\n    var w = /*#__PURE__*/function () {\n      function w(t, i, o) {\n        _classCallCheck(this, w);\n\n        this.bounds = e.LngLatBounds.convert(this.validateBounds(t)), this.minzoom = i || 0, this.maxzoom = o || 24;\n      }\n\n      _createClass(w, [{\n        key: \"validateBounds\",\n        value: function validateBounds(e) {\n          return Array.isArray(e) && 4 === e.length ? [Math.max(-180, e[0]), Math.max(-90, e[1]), Math.min(180, e[2]), Math.min(90, e[3])] : [-180, -90, 180, 90];\n        }\n      }, {\n        key: \"contains\",\n        value: function contains(t) {\n          var i = Math.pow(2, t.z),\n              o = Math.floor(e.mercatorXfromLng(this.bounds.getWest()) * i),\n              a = Math.floor(e.mercatorYfromLat(this.bounds.getNorth()) * i),\n              r = Math.ceil(e.mercatorXfromLng(this.bounds.getEast()) * i),\n              n = Math.ceil(e.mercatorYfromLat(this.bounds.getSouth()) * i);\n          return t.x >= o && t.x < r && t.y >= a && t.y < n;\n        }\n      }]);\n\n      return w;\n    }();\n\n    var T = /*#__PURE__*/function (_e$Evented4) {\n      _inherits(T, _e$Evented4);\n\n      var _super105 = _createSuper(T);\n\n      function T(t, i, o, a) {\n        var _this64;\n\n        _classCallCheck(this, T);\n\n        _this64 = _super105.call(this), _this64.id = t, _this64.dispatcher = o, _this64.setEventedParent(a), _this64.type = \"raster\", _this64.minzoom = 0, _this64.maxzoom = 22, _this64.roundZoom = !0, _this64.scheme = \"xyz\", _this64.tileSize = 512, _this64._loaded = !1, _this64._options = e.extend({\n          type: \"raster\"\n        }, i), e.extend(_assertThisInitialized(_this64), e.pick(i, [\"url\", \"scheme\", \"tileSize\"]));\n        return _this64;\n      }\n\n      _createClass(T, [{\n        key: \"load\",\n        value: function load() {\n          var _this65 = this;\n\n          this._loaded = !1, this.fire(new e.Event(\"dataloading\", {\n            dataType: \"source\"\n          })), this._tileJSONRequest = b(this._options, this.map._requestManager, function (t, i) {\n            _this65._tileJSONRequest = null, _this65._loaded = !0, t ? _this65.fire(new e.ErrorEvent(t)) : i && (e.extend(_this65, i), i.bounds && (_this65.tileBounds = new w(i.bounds, _this65.minzoom, _this65.maxzoom)), e.postTurnstileEvent(i.tiles), _this65.fire(new e.Event(\"data\", {\n              dataType: \"source\",\n              sourceDataType: \"metadata\"\n            })), _this65.fire(new e.Event(\"data\", {\n              dataType: \"source\",\n              sourceDataType: \"content\"\n            })));\n          });\n        }\n      }, {\n        key: \"loaded\",\n        value: function loaded() {\n          return this._loaded;\n        }\n      }, {\n        key: \"onAdd\",\n        value: function onAdd(e) {\n          this.map = e, this.load();\n        }\n      }, {\n        key: \"onRemove\",\n        value: function onRemove() {\n          this._tileJSONRequest && (this._tileJSONRequest.cancel(), this._tileJSONRequest = null);\n        }\n      }, {\n        key: \"serialize\",\n        value: function serialize() {\n          return e.extend({}, this._options);\n        }\n      }, {\n        key: \"hasTile\",\n        value: function hasTile(e) {\n          return !this.tileBounds || this.tileBounds.contains(e.canonical);\n        }\n      }, {\n        key: \"loadTile\",\n        value: function loadTile(t, i) {\n          var _this66 = this;\n\n          var o = e.browser.devicePixelRatio >= 2,\n              a = this.map._requestManager.normalizeTileURL(t.tileID.canonical.url(this.tiles, this.scheme), o, this.tileSize);\n\n          t.request = e.getImage(this.map._requestManager.transformRequest(a, e.ResourceType.Tile), function (o, a) {\n            if (delete t.request, t.aborted) t.state = \"unloaded\", i(null);else if (o) t.state = \"errored\", i(o);else if (a) {\n              _this66.map._refreshExpiredTiles && t.setExpiryData(a), delete a.cacheControl, delete a.expires;\n              var _o57 = _this66.map.painter.context,\n                  _r213 = _o57.gl;\n              t.texture = _this66.map.painter.getTileTexture(a.width), t.texture ? t.texture.update(a, {\n                useMipmap: !0\n              }) : (t.texture = new e.Texture(_o57, a, _r213.RGBA, {\n                useMipmap: !0\n              }), t.texture.bind(_r213.LINEAR, _r213.CLAMP_TO_EDGE, _r213.LINEAR_MIPMAP_NEAREST), _o57.extTextureFilterAnisotropic && _r213.texParameterf(_r213.TEXTURE_2D, _o57.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT, _o57.extTextureFilterAnisotropicMax)), t.state = \"loaded\", e.cacheEntryPossiblyAdded(_this66.dispatcher), i(null);\n            }\n          });\n        }\n      }, {\n        key: \"abortTile\",\n        value: function abortTile(e, t) {\n          e.request && (e.request.cancel(), delete e.request), t();\n        }\n      }, {\n        key: \"unloadTile\",\n        value: function unloadTile(e, t) {\n          e.texture && this.map.painter.saveTileTexture(e.texture), t();\n        }\n      }, {\n        key: \"hasTransition\",\n        value: function hasTransition() {\n          return !1;\n        }\n      }]);\n\n      return T;\n    }(e.Evented);\n\n    var E = e.createLayout([{\n      name: \"a_pos\",\n      type: \"Int16\",\n      components: 2\n    }, {\n      name: \"a_texture_pos\",\n      type: \"Int16\",\n      components: 2\n    }]);\n\n    var C = /*#__PURE__*/function (_e$Evented5) {\n      _inherits(C, _e$Evented5);\n\n      var _super106 = _createSuper(C);\n\n      function C(e, t, i, o) {\n        var _this67;\n\n        _classCallCheck(this, C);\n\n        _this67 = _super106.call(this), _this67.id = e, _this67.dispatcher = i, _this67.coordinates = t.coordinates, _this67.type = \"image\", _this67.minzoom = 0, _this67.maxzoom = 22, _this67.tileSize = 512, _this67.tiles = {}, _this67._loaded = !1, _this67.setEventedParent(o), _this67.options = t;\n        return _this67;\n      }\n\n      _createClass(C, [{\n        key: \"load\",\n        value: function load(t, i) {\n          var _this68 = this;\n\n          this._loaded = !1, this.fire(new e.Event(\"dataloading\", {\n            dataType: \"source\"\n          })), this.url = this.options.url, e.getImage(this.map._requestManager.transformRequest(this.url, e.ResourceType.Image), function (o, a) {\n            _this68._loaded = !0, o ? _this68.fire(new e.ErrorEvent(o)) : a && (_this68.image = a, t && (_this68.coordinates = t), i && i(), _this68._finishLoading());\n          });\n        }\n      }, {\n        key: \"loaded\",\n        value: function loaded() {\n          return this._loaded;\n        }\n      }, {\n        key: \"updateImage\",\n        value: function updateImage(e) {\n          var _this69 = this;\n\n          return this.image && e.url ? (this.options.url = e.url, this.load(e.coordinates, function () {\n            _this69.texture = null;\n          }), this) : this;\n        }\n      }, {\n        key: \"_finishLoading\",\n        value: function _finishLoading() {\n          this.map && (this.setCoordinates(this.coordinates), this.fire(new e.Event(\"data\", {\n            dataType: \"source\",\n            sourceDataType: \"metadata\"\n          })));\n        }\n      }, {\n        key: \"onAdd\",\n        value: function onAdd(e) {\n          this.map = e, this.load();\n        }\n      }, {\n        key: \"setCoordinates\",\n        value: function setCoordinates(t) {\n          var _this70 = this;\n\n          this.coordinates = t;\n          var i = t.map(e.MercatorCoordinate.fromLngLat);\n          this.tileID = function (t) {\n            var i = 1 / 0,\n                o = 1 / 0,\n                a = -1 / 0,\n                r = -1 / 0;\n\n            var _iterator159 = _createForOfIteratorHelper(t),\n                _step159;\n\n            try {\n              for (_iterator159.s(); !(_step159 = _iterator159.n()).done;) {\n                var _e227 = _step159.value;\n                i = Math.min(i, _e227.x), o = Math.min(o, _e227.y), a = Math.max(a, _e227.x), r = Math.max(r, _e227.y);\n              }\n            } catch (err) {\n              _iterator159.e(err);\n            } finally {\n              _iterator159.f();\n            }\n\n            var n = Math.max(a - i, r - o),\n                s = Math.max(0, Math.floor(-Math.log(n) / Math.LN2)),\n                l = Math.pow(2, s);\n            return new e.CanonicalTileID(s, Math.floor((i + a) / 2 * l), Math.floor((o + r) / 2 * l));\n          }(i), this.minzoom = this.maxzoom = this.tileID.z;\n          var o = i.map(function (e) {\n            return _this70.tileID.getTilePoint(e)._round();\n          });\n          return this._boundsArray = new e.StructArrayLayout4i8(), this._boundsArray.emplaceBack(o[0].x, o[0].y, 0, 0), this._boundsArray.emplaceBack(o[1].x, o[1].y, e.EXTENT, 0), this._boundsArray.emplaceBack(o[3].x, o[3].y, 0, e.EXTENT), this._boundsArray.emplaceBack(o[2].x, o[2].y, e.EXTENT, e.EXTENT), this.boundsBuffer && (this.boundsBuffer.destroy(), delete this.boundsBuffer), this.fire(new e.Event(\"data\", {\n            dataType: \"source\",\n            sourceDataType: \"content\"\n          })), this;\n        }\n      }, {\n        key: \"prepare\",\n        value: function prepare() {\n          if (0 === Object.keys(this.tiles).length || !this.image) return;\n          var t = this.map.painter.context,\n              i = t.gl;\n          this.boundsBuffer || (this.boundsBuffer = t.createVertexBuffer(this._boundsArray, E.members)), this.boundsSegments || (this.boundsSegments = e.SegmentVector.simpleSegment(0, 0, 4, 2)), this.texture || (this.texture = new e.Texture(t, this.image, i.RGBA), this.texture.bind(i.LINEAR, i.CLAMP_TO_EDGE));\n\n          for (var _e228 in this.tiles) {\n            var _t246 = this.tiles[_e228];\n            \"loaded\" !== _t246.state && (_t246.state = \"loaded\", _t246.texture = this.texture);\n          }\n        }\n      }, {\n        key: \"loadTile\",\n        value: function loadTile(e, t) {\n          this.tileID && this.tileID.equals(e.tileID.canonical) ? (this.tiles[String(e.tileID.wrap)] = e, e.buckets = {}, t(null)) : (e.state = \"errored\", t(null));\n        }\n      }, {\n        key: \"serialize\",\n        value: function serialize() {\n          return {\n            type: \"image\",\n            url: this.options.url,\n            coordinates: this.coordinates\n          };\n        }\n      }, {\n        key: \"hasTransition\",\n        value: function hasTransition() {\n          return !1;\n        }\n      }]);\n\n      return C;\n    }(e.Evented);\n\n    var S = {\n      vector: /*#__PURE__*/function (_e$Evented6) {\n        _inherits(vector, _e$Evented6);\n\n        var _super107 = _createSuper(vector);\n\n        function vector(t, i, o, a) {\n          var _this71;\n\n          _classCallCheck(this, vector);\n\n          if (_this71 = _super107.call(this), _this71.id = t, _this71.dispatcher = o, _this71.type = \"vector\", _this71.minzoom = 0, _this71.maxzoom = 22, _this71.scheme = \"xyz\", _this71.tileSize = 512, _this71.reparseOverscaled = !0, _this71.isTileClipped = !0, _this71._loaded = !1, e.extend(_assertThisInitialized(_this71), e.pick(i, [\"url\", \"scheme\", \"tileSize\", \"promoteId\"])), _this71._options = e.extend({\n            type: \"vector\"\n          }, i), _this71._collectResourceTiming = i.collectResourceTiming, 512 !== _this71.tileSize) throw new Error(\"vector tile sources must have a tileSize of 512\");\n          _this71.setEventedParent(a), _this71._tileWorkers = {}, _this71._deduped = new e.DedupedRequest();\n          return _possibleConstructorReturn(_this71);\n        }\n\n        _createClass(vector, [{\n          key: \"load\",\n          value: function load() {\n            var _this72 = this;\n\n            this._loaded = !1, this.fire(new e.Event(\"dataloading\", {\n              dataType: \"source\"\n            })), this._tileJSONRequest = b(this._options, this.map._requestManager, function (t, i) {\n              _this72._tileJSONRequest = null, _this72._loaded = !0, t ? _this72.fire(new e.ErrorEvent(t)) : i && (e.extend(_this72, i), i.bounds && (_this72.tileBounds = new w(i.bounds, _this72.minzoom, _this72.maxzoom)), e.postTurnstileEvent(i.tiles, _this72.map._requestManager._customAccessToken), _this72.fire(new e.Event(\"data\", {\n                dataType: \"source\",\n                sourceDataType: \"metadata\"\n              })), _this72.fire(new e.Event(\"data\", {\n                dataType: \"source\",\n                sourceDataType: \"content\"\n              })));\n            });\n          }\n        }, {\n          key: \"loaded\",\n          value: function loaded() {\n            return this._loaded;\n          }\n        }, {\n          key: \"hasTile\",\n          value: function hasTile(e) {\n            return !this.tileBounds || this.tileBounds.contains(e.canonical);\n          }\n        }, {\n          key: \"onAdd\",\n          value: function onAdd(e) {\n            this.map = e, this.load();\n          }\n        }, {\n          key: \"setSourceProperty\",\n          value: function setSourceProperty(e) {\n            this._tileJSONRequest && this._tileJSONRequest.cancel(), e();\n\n            var t = this.map.style._getSourceCaches(this.id);\n\n            var _iterator160 = _createForOfIteratorHelper(t),\n                _step160;\n\n            try {\n              for (_iterator160.s(); !(_step160 = _iterator160.n()).done;) {\n                var _e229 = _step160.value;\n\n                _e229.clearTiles();\n              }\n            } catch (err) {\n              _iterator160.e(err);\n            } finally {\n              _iterator160.f();\n            }\n\n            this.load();\n          }\n        }, {\n          key: \"setTiles\",\n          value: function setTiles(e) {\n            var _this73 = this;\n\n            return this.setSourceProperty(function () {\n              _this73._options.tiles = e;\n            }), this;\n          }\n        }, {\n          key: \"setUrl\",\n          value: function setUrl(e) {\n            var _this74 = this;\n\n            return this.setSourceProperty(function () {\n              _this74.url = e, _this74._options.url = e;\n            }), this;\n          }\n        }, {\n          key: \"onRemove\",\n          value: function onRemove() {\n            this._tileJSONRequest && (this._tileJSONRequest.cancel(), this._tileJSONRequest = null);\n          }\n        }, {\n          key: \"serialize\",\n          value: function serialize() {\n            return e.extend({}, this._options);\n          }\n        }, {\n          key: \"loadTile\",\n          value: function loadTile(t, i) {\n            var _this75 = this;\n\n            var o = this.map._requestManager.normalizeTileURL(t.tileID.canonical.url(this.tiles, this.scheme)),\n                a = {\n              request: this.map._requestManager.transformRequest(o, e.ResourceType.Tile),\n              data: void 0,\n              uid: t.uid,\n              tileID: t.tileID,\n              tileZoom: t.tileZoom,\n              zoom: t.tileID.overscaledZ,\n              tileSize: this.tileSize * t.tileID.overscaleFactor(),\n              type: this.type,\n              source: this.id,\n              pixelRatio: e.browser.devicePixelRatio,\n              showCollisionBoxes: this.map.showCollisionBoxes,\n              promoteId: this.promoteId,\n              isSymbolTile: t.isSymbolTile\n            };\n\n            if (a.request.collectResourceTiming = this._collectResourceTiming, t.actor && \"expired\" !== t.state) \"loading\" === t.state ? t.reloadCallback = i : t.request = t.actor.send(\"reloadTile\", a, r.bind(this));else if (t.actor = this._tileWorkers[o] = this._tileWorkers[o] || this.dispatcher.getActor(), this.dispatcher.ready) t.request = t.actor.send(\"loadTile\", a, r.bind(this));else {\n              var _i167 = e.loadVectorTile.call({\n                deduped: this._deduped\n              }, a, function (e, i) {\n                e || !i ? r.call(_this75, e) : (a.data = {\n                  cacheControl: i.cacheControl,\n                  expires: i.expires,\n                  rawData: i.rawData.slice(0)\n                }, t.actor && t.actor.send(\"loadTile\", a, r.bind(_this75)));\n              }, !0);\n\n              t.request = {\n                cancel: _i167\n              };\n            }\n\n            function r(o, a) {\n              return delete t.request, t.aborted ? i(null) : o && 404 !== o.status ? i(o) : (a && a.resourceTiming && (t.resourceTiming = a.resourceTiming), this.map._refreshExpiredTiles && a && t.setExpiryData(a), t.loadVectorData(a, this.map.painter), e.cacheEntryPossiblyAdded(this.dispatcher), i(null), void (t.reloadCallback && (this.loadTile(t, t.reloadCallback), t.reloadCallback = null)));\n            }\n          }\n        }, {\n          key: \"abortTile\",\n          value: function abortTile(e) {\n            e.request && (e.request.cancel(), delete e.request), e.actor && e.actor.send(\"abortTile\", {\n              uid: e.uid,\n              type: this.type,\n              source: this.id\n            }, void 0);\n          }\n        }, {\n          key: \"unloadTile\",\n          value: function unloadTile(e) {\n            e.unloadVectorData(), e.actor && e.actor.send(\"removeTile\", {\n              uid: e.uid,\n              type: this.type,\n              source: this.id\n            }, void 0);\n          }\n        }, {\n          key: \"hasTransition\",\n          value: function hasTransition() {\n            return !1;\n          }\n        }, {\n          key: \"afterUpdate\",\n          value: function afterUpdate() {\n            this._tileWorkers = {};\n          }\n        }]);\n\n        return vector;\n      }(e.Evented),\n      raster: T,\n      \"raster-dem\": /*#__PURE__*/function (_T3) {\n        _inherits(rasterDem, _T3);\n\n        var _super108 = _createSuper(rasterDem);\n\n        function rasterDem(t, i, o, a) {\n          var _this76;\n\n          _classCallCheck(this, rasterDem);\n\n          _this76 = _super108.call(this, t, i, o, a), _this76.type = \"raster-dem\", _this76.maxzoom = 22, _this76._options = e.extend({\n            type: \"raster-dem\"\n          }, i), _this76.encoding = i.encoding || \"mapbox\";\n          return _this76;\n        }\n\n        _createClass(rasterDem, [{\n          key: \"serialize\",\n          value: function serialize() {\n            return {\n              type: \"raster-dem\",\n              url: this.url,\n              tileSize: this.tileSize,\n              tiles: this.tiles,\n              bounds: this.bounds,\n              encoding: this.encoding\n            };\n          }\n        }, {\n          key: \"loadTile\",\n          value: function loadTile(t, i) {\n            var o = this.map._requestManager.normalizeTileURL(t.tileID.canonical.url(this.tiles, this.scheme), !1, this.tileSize);\n\n            function a(e, o) {\n              e && (t.state = \"errored\", i(e)), o && (t.dem = o, t.dem.onDeserialize(), t.needsHillshadePrepare = !0, t.needsDEMTextureUpload = !0, t.state = \"loaded\", i(null));\n            }\n\n            t.request = e.getImage(this.map._requestManager.transformRequest(o, e.ResourceType.Tile), function (o, r) {\n              if (delete t.request, t.aborted) t.state = \"unloaded\", i(null);else if (o) t.state = \"errored\", i(o);else if (r) {\n                this.map._refreshExpiredTiles && t.setExpiryData(r), delete r.cacheControl, delete r.expires;\n\n                var _i168 = e.window.ImageBitmap && r instanceof e.window.ImageBitmap && e.offscreenCanvasSupported(),\n                    _o58 = 1 - (r.width - e.prevPowerOfTwo(r.width)) / 2;\n\n                _o58 < 1 || t.neighboringTiles || (t.neighboringTiles = this._getNeighboringTiles(t.tileID));\n\n                var _n129 = _i168 ? r : e.browser.getImageData(r, _o58),\n                    _s99 = {\n                  uid: t.uid,\n                  coord: t.tileID,\n                  source: this.id,\n                  rawImageData: _n129,\n                  encoding: this.encoding,\n                  padding: _o58\n                };\n\n                t.actor && \"expired\" !== t.state || (t.actor = this.dispatcher.getActor(), t.actor.send(\"loadDEMTile\", _s99, a.bind(this)));\n              }\n            }.bind(this));\n          }\n        }, {\n          key: \"_getNeighboringTiles\",\n          value: function _getNeighboringTiles(t) {\n            var i = t.canonical,\n                o = Math.pow(2, i.z),\n                a = (i.x - 1 + o) % o,\n                r = 0 === i.x ? t.wrap - 1 : t.wrap,\n                n = (i.x + 1 + o) % o,\n                s = i.x + 1 === o ? t.wrap + 1 : t.wrap,\n                l = {};\n            return l[new e.OverscaledTileID(t.overscaledZ, r, i.z, a, i.y).key] = {\n              backfilled: !1\n            }, l[new e.OverscaledTileID(t.overscaledZ, s, i.z, n, i.y).key] = {\n              backfilled: !1\n            }, i.y > 0 && (l[new e.OverscaledTileID(t.overscaledZ, r, i.z, a, i.y - 1).key] = {\n              backfilled: !1\n            }, l[new e.OverscaledTileID(t.overscaledZ, t.wrap, i.z, i.x, i.y - 1).key] = {\n              backfilled: !1\n            }, l[new e.OverscaledTileID(t.overscaledZ, s, i.z, n, i.y - 1).key] = {\n              backfilled: !1\n            }), i.y + 1 < o && (l[new e.OverscaledTileID(t.overscaledZ, r, i.z, a, i.y + 1).key] = {\n              backfilled: !1\n            }, l[new e.OverscaledTileID(t.overscaledZ, t.wrap, i.z, i.x, i.y + 1).key] = {\n              backfilled: !1\n            }, l[new e.OverscaledTileID(t.overscaledZ, s, i.z, n, i.y + 1).key] = {\n              backfilled: !1\n            }), l;\n          }\n        }, {\n          key: \"unloadTile\",\n          value: function unloadTile(e) {\n            e.demTexture && this.map.painter.saveTileTexture(e.demTexture), e.fbo && (e.fbo.destroy(), delete e.fbo), e.dem && delete e.dem, delete e.neighboringTiles, e.state = \"unloaded\";\n          }\n        }]);\n\n        return rasterDem;\n      }(T),\n      geojson: /*#__PURE__*/function (_e$Evented7) {\n        _inherits(geojson, _e$Evented7);\n\n        var _super109 = _createSuper(geojson);\n\n        function geojson(t, i, o, a) {\n          var _this77;\n\n          _classCallCheck(this, geojson);\n\n          _this77 = _super109.call(this), _this77.id = t, _this77.type = \"geojson\", _this77.minzoom = 0, _this77.maxzoom = 18, _this77.tileSize = 512, _this77.isTileClipped = !0, _this77.reparseOverscaled = !0, _this77._removed = !1, _this77._loaded = !1, _this77.actor = o.getActor(), _this77.setEventedParent(a), _this77._data = i.data, _this77._options = e.extend({}, i), _this77._collectResourceTiming = i.collectResourceTiming, _this77._resourceTiming = [], void 0 !== i.maxzoom && (_this77.maxzoom = i.maxzoom), i.type && (_this77.type = i.type), i.attribution && (_this77.attribution = i.attribution), _this77.promoteId = i.promoteId;\n          var r = e.EXTENT / _this77.tileSize;\n          _this77.workerOptions = e.extend({\n            source: _this77.id,\n            cluster: i.cluster || !1,\n            geojsonVtOptions: {\n              buffer: (void 0 !== i.buffer ? i.buffer : 128) * r,\n              tolerance: (void 0 !== i.tolerance ? i.tolerance : .375) * r,\n              extent: e.EXTENT,\n              maxZoom: _this77.maxzoom,\n              lineMetrics: i.lineMetrics || !1,\n              generateId: i.generateId || !1\n            },\n            superclusterOptions: {\n              maxZoom: void 0 !== i.clusterMaxZoom ? i.clusterMaxZoom : _this77.maxzoom - 1,\n              minPoints: Math.max(2, i.clusterMinPoints || 2),\n              extent: e.EXTENT,\n              radius: (i.clusterRadius || 50) * r,\n              log: !1,\n              generateId: i.generateId || !1\n            },\n            clusterProperties: i.clusterProperties,\n            filter: i.filter\n          }, i.workerOptions);\n          return _this77;\n        }\n\n        _createClass(geojson, [{\n          key: \"load\",\n          value: function load() {\n            var _this78 = this;\n\n            this.fire(new e.Event(\"dataloading\", {\n              dataType: \"source\"\n            })), this._updateWorkerData(function (t) {\n              if (t) return void _this78.fire(new e.ErrorEvent(t));\n              var i = {\n                dataType: \"source\",\n                sourceDataType: \"metadata\"\n              };\n              _this78._collectResourceTiming && _this78._resourceTiming && _this78._resourceTiming.length > 0 && (i.resourceTiming = _this78._resourceTiming, _this78._resourceTiming = []), _this78.fire(new e.Event(\"data\", i));\n            });\n          }\n        }, {\n          key: \"onAdd\",\n          value: function onAdd(e) {\n            this.map = e, this.load();\n          }\n        }, {\n          key: \"setData\",\n          value: function setData(t) {\n            var _this79 = this;\n\n            return this._data = t, this.fire(new e.Event(\"dataloading\", {\n              dataType: \"source\"\n            })), this._updateWorkerData(function (t) {\n              if (t) return void _this79.fire(new e.ErrorEvent(t));\n              var i = {\n                dataType: \"source\",\n                sourceDataType: \"content\"\n              };\n              _this79._collectResourceTiming && _this79._resourceTiming && _this79._resourceTiming.length > 0 && (i.resourceTiming = _this79._resourceTiming, _this79._resourceTiming = []), _this79.fire(new e.Event(\"data\", i));\n            }), this;\n          }\n        }, {\n          key: \"getClusterExpansionZoom\",\n          value: function getClusterExpansionZoom(e, t) {\n            return this.actor.send(\"geojson.getClusterExpansionZoom\", {\n              clusterId: e,\n              source: this.id\n            }, t), this;\n          }\n        }, {\n          key: \"getClusterChildren\",\n          value: function getClusterChildren(e, t) {\n            return this.actor.send(\"geojson.getClusterChildren\", {\n              clusterId: e,\n              source: this.id\n            }, t), this;\n          }\n        }, {\n          key: \"getClusterLeaves\",\n          value: function getClusterLeaves(e, t, i, o) {\n            return this.actor.send(\"geojson.getClusterLeaves\", {\n              source: this.id,\n              clusterId: e,\n              limit: t,\n              offset: i\n            }, o), this;\n          }\n        }, {\n          key: \"_updateWorkerData\",\n          value: function _updateWorkerData(t) {\n            var _this80 = this;\n\n            this._loaded = !1;\n            var i = e.extend({}, this.workerOptions),\n                o = this._data;\n            \"string\" == typeof o ? (i.request = this.map._requestManager.transformRequest(e.browser.resolveURL(o), e.ResourceType.Source), i.request.collectResourceTiming = this._collectResourceTiming) : i.data = JSON.stringify(o), this.actor.send(\"\".concat(this.type, \".loadData\"), i, function (e, o) {\n              _this80._removed || o && o.abandoned || (_this80._loaded = !0, o && o.resourceTiming && o.resourceTiming[_this80.id] && (_this80._resourceTiming = o.resourceTiming[_this80.id].slice(0)), _this80.actor.send(\"\".concat(_this80.type, \".coalesce\"), {\n                source: i.source\n              }, null), t(e));\n            });\n          }\n        }, {\n          key: \"loaded\",\n          value: function loaded() {\n            return this._loaded;\n          }\n        }, {\n          key: \"loadTile\",\n          value: function loadTile(t, i) {\n            var _this81 = this;\n\n            var o = t.actor ? \"reloadTile\" : \"loadTile\";\n            t.actor = this.actor, t.request = this.actor.send(o, {\n              type: this.type,\n              uid: t.uid,\n              tileID: t.tileID,\n              tileZoom: t.tileZoom,\n              zoom: t.tileID.overscaledZ,\n              maxZoom: this.maxzoom,\n              tileSize: this.tileSize,\n              source: this.id,\n              pixelRatio: e.browser.devicePixelRatio,\n              showCollisionBoxes: this.map.showCollisionBoxes,\n              promoteId: this.promoteId\n            }, function (e, a) {\n              return delete t.request, t.unloadVectorData(), t.aborted ? i(null) : e ? i(e) : (t.loadVectorData(a, _this81.map.painter, \"reloadTile\" === o), i(null));\n            });\n          }\n        }, {\n          key: \"abortTile\",\n          value: function abortTile(e) {\n            e.request && (e.request.cancel(), delete e.request), e.aborted = !0;\n          }\n        }, {\n          key: \"unloadTile\",\n          value: function unloadTile(e) {\n            e.unloadVectorData(), this.actor.send(\"removeTile\", {\n              uid: e.uid,\n              type: this.type,\n              source: this.id\n            });\n          }\n        }, {\n          key: \"onRemove\",\n          value: function onRemove() {\n            this._removed = !0, this.actor.send(\"removeSource\", {\n              type: this.type,\n              source: this.id\n            });\n          }\n        }, {\n          key: \"serialize\",\n          value: function serialize() {\n            return e.extend({}, this._options, {\n              type: this.type,\n              data: this._data\n            });\n          }\n        }, {\n          key: \"hasTransition\",\n          value: function hasTransition() {\n            return !1;\n          }\n        }]);\n\n        return geojson;\n      }(e.Evented),\n      video: /*#__PURE__*/function (_C) {\n        _inherits(video, _C);\n\n        var _super110 = _createSuper(video);\n\n        function video(e, t, i, o) {\n          var _this82;\n\n          _classCallCheck(this, video);\n\n          _this82 = _super110.call(this, e, t, i, o), _this82.roundZoom = !0, _this82.type = \"video\", _this82.options = t;\n          return _this82;\n        }\n\n        _createClass(video, [{\n          key: \"load\",\n          value: function load() {\n            var _this83 = this;\n\n            this._loaded = !1;\n            var t = this.options;\n            this.urls = [];\n\n            var _iterator161 = _createForOfIteratorHelper(t.urls),\n                _step161;\n\n            try {\n              for (_iterator161.s(); !(_step161 = _iterator161.n()).done;) {\n                var _i169 = _step161.value;\n                this.urls.push(this.map._requestManager.transformRequest(_i169, e.ResourceType.Source).url);\n              }\n            } catch (err) {\n              _iterator161.e(err);\n            } finally {\n              _iterator161.f();\n            }\n\n            e.getVideo(this.urls, function (t, i) {\n              _this83._loaded = !0, t ? _this83.fire(new e.ErrorEvent(t)) : i && (_this83.video = i, _this83.video.loop = !0, _this83.video.addEventListener(\"playing\", function () {\n                _this83.map.triggerRepaint();\n              }), _this83.map && _this83.video.play(), _this83._finishLoading());\n            });\n          }\n        }, {\n          key: \"pause\",\n          value: function pause() {\n            this.video && this.video.pause();\n          }\n        }, {\n          key: \"play\",\n          value: function play() {\n            this.video && this.video.play();\n          }\n        }, {\n          key: \"seek\",\n          value: function seek(t) {\n            if (this.video) {\n              var _i170 = this.video.seekable;\n              t < _i170.start(0) || t > _i170.end(0) ? this.fire(new e.ErrorEvent(new e.ValidationError(\"sources.\".concat(this.id), null, \"Playback for this video can be set only between the \".concat(_i170.start(0), \" and \").concat(_i170.end(0), \"-second mark.\")))) : this.video.currentTime = t;\n            }\n          }\n        }, {\n          key: \"getVideo\",\n          value: function getVideo() {\n            return this.video;\n          }\n        }, {\n          key: \"onAdd\",\n          value: function onAdd(e) {\n            this.map || (this.map = e, this.load(), this.video && (this.video.play(), this.setCoordinates(this.coordinates)));\n          }\n        }, {\n          key: \"prepare\",\n          value: function prepare() {\n            if (0 === Object.keys(this.tiles).length || this.video.readyState < 2) return;\n            var t = this.map.painter.context,\n                i = t.gl;\n            this.boundsBuffer || (this.boundsBuffer = t.createVertexBuffer(this._boundsArray, E.members)), this.boundsSegments || (this.boundsSegments = e.SegmentVector.simpleSegment(0, 0, 4, 2)), this.texture ? this.video.paused || (this.texture.bind(i.LINEAR, i.CLAMP_TO_EDGE), i.texSubImage2D(i.TEXTURE_2D, 0, 0, 0, i.RGBA, i.UNSIGNED_BYTE, this.video)) : (this.texture = new e.Texture(t, this.video, i.RGBA), this.texture.bind(i.LINEAR, i.CLAMP_TO_EDGE));\n\n            for (var _e230 in this.tiles) {\n              var _t247 = this.tiles[_e230];\n              \"loaded\" !== _t247.state && (_t247.state = \"loaded\", _t247.texture = this.texture);\n            }\n          }\n        }, {\n          key: \"serialize\",\n          value: function serialize() {\n            return {\n              type: \"video\",\n              urls: this.urls,\n              coordinates: this.coordinates\n            };\n          }\n        }, {\n          key: \"hasTransition\",\n          value: function hasTransition() {\n            return this.video && !this.video.paused;\n          }\n        }]);\n\n        return video;\n      }(C),\n      image: C,\n      canvas: /*#__PURE__*/function (_C2) {\n        _inherits(canvas, _C2);\n\n        var _super111 = _createSuper(canvas);\n\n        function canvas(t, i, o, a) {\n          var _this84;\n\n          _classCallCheck(this, canvas);\n\n          _this84 = _super111.call(this, t, i, o, a), i.coordinates ? Array.isArray(i.coordinates) && 4 === i.coordinates.length && !i.coordinates.some(function (e) {\n            return !Array.isArray(e) || 2 !== e.length || e.some(function (e) {\n              return \"number\" != typeof e;\n            });\n          }) || _this84.fire(new e.ErrorEvent(new e.ValidationError(\"sources.\".concat(t), null, '\"coordinates\" property must be an array of 4 longitude/latitude array pairs'))) : _this84.fire(new e.ErrorEvent(new e.ValidationError(\"sources.\".concat(t), null, 'missing required property \"coordinates\"'))), i.animate && \"boolean\" != typeof i.animate && _this84.fire(new e.ErrorEvent(new e.ValidationError(\"sources.\".concat(t), null, 'optional \"animate\" property must be a boolean value'))), i.canvas ? \"string\" == typeof i.canvas || i.canvas instanceof e.window.HTMLCanvasElement || _this84.fire(new e.ErrorEvent(new e.ValidationError(\"sources.\".concat(t), null, '\"canvas\" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))) : _this84.fire(new e.ErrorEvent(new e.ValidationError(\"sources.\".concat(t), null, 'missing required property \"canvas\"'))), _this84.options = i, _this84.animate = void 0 === i.animate || i.animate;\n          return _this84;\n        }\n\n        _createClass(canvas, [{\n          key: \"load\",\n          value: function load() {\n            this._loaded = !0, this.canvas || (this.canvas = this.options.canvas instanceof e.window.HTMLCanvasElement ? this.options.canvas : e.window.document.getElementById(this.options.canvas)), this.width = this.canvas.width, this.height = this.canvas.height, this._hasInvalidDimensions() ? this.fire(new e.ErrorEvent(new Error(\"Canvas dimensions cannot be less than or equal to zero.\"))) : (this.play = function () {\n              this._playing = !0, this.map.triggerRepaint();\n            }, this.pause = function () {\n              this._playing && (this.prepare(), this._playing = !1);\n            }, this._finishLoading());\n          }\n        }, {\n          key: \"getCanvas\",\n          value: function getCanvas() {\n            return this.canvas;\n          }\n        }, {\n          key: \"onAdd\",\n          value: function onAdd(e) {\n            this.map = e, this.load(), this.canvas && this.animate && this.play();\n          }\n        }, {\n          key: \"onRemove\",\n          value: function onRemove() {\n            this.pause();\n          }\n        }, {\n          key: \"prepare\",\n          value: function prepare() {\n            var t = !1;\n            if (this.canvas.width !== this.width && (this.width = this.canvas.width, t = !0), this.canvas.height !== this.height && (this.height = this.canvas.height, t = !0), this._hasInvalidDimensions()) return;\n            if (0 === Object.keys(this.tiles).length) return;\n            var i = this.map.painter.context,\n                o = i.gl;\n            this.boundsBuffer || (this.boundsBuffer = i.createVertexBuffer(this._boundsArray, E.members)), this.boundsSegments || (this.boundsSegments = e.SegmentVector.simpleSegment(0, 0, 4, 2)), this.texture ? (t || this._playing) && this.texture.update(this.canvas, {\n              premultiply: !0\n            }) : this.texture = new e.Texture(i, this.canvas, o.RGBA, {\n              premultiply: !0\n            });\n\n            for (var _e231 in this.tiles) {\n              var _t248 = this.tiles[_e231];\n              \"loaded\" !== _t248.state && (_t248.state = \"loaded\", _t248.texture = this.texture);\n            }\n          }\n        }, {\n          key: \"serialize\",\n          value: function serialize() {\n            return {\n              type: \"canvas\",\n              coordinates: this.coordinates\n            };\n          }\n        }, {\n          key: \"hasTransition\",\n          value: function hasTransition() {\n            return this._playing;\n          }\n        }, {\n          key: \"_hasInvalidDimensions\",\n          value: function _hasInvalidDimensions() {\n            for (var _i171 = 0, _arr2 = [this.canvas.width, this.canvas.height]; _i171 < _arr2.length; _i171++) {\n              var _e232 = _arr2[_i171];\n              if (isNaN(_e232) || _e232 <= 0) return !0;\n            }\n\n            return !1;\n          }\n        }]);\n\n        return canvas;\n      }(C)\n    },\n        I = function I(t, i, o, a) {\n      var r = new S[i.type](t, i, o, a);\n      if (r.id !== t) throw new Error(\"Expected Source id to be \".concat(t, \" instead of \").concat(r.id));\n      return e.bindAll([\"load\", \"abort\", \"unload\", \"serialize\", \"prepare\"], r), r;\n    };\n\n    function P(t, i) {\n      var o = e.identity([]);\n      return e.scale(o, o, [.5 * t.width, .5 * -t.height, 1]), e.translate(o, o, [1, -1, 0]), e.multiply(o, o, t.calculatePosMatrix(i.toUnwrapped()));\n    }\n\n    function M(e, t, i, o, a, r, n) {\n      var s = arguments.length > 7 && arguments[7] !== undefined ? arguments[7] : !1;\n      var l = e.tilesIn(o, n, s);\n      l.sort(A);\n      var c = [];\n\n      var _iterator162 = _createForOfIteratorHelper(l),\n          _step162;\n\n      try {\n        for (_iterator162.s(); !(_step162 = _iterator162.n()).done;) {\n          var _o61 = _step162.value;\n          c.push({\n            wrappedTileID: _o61.tile.tileID.wrapped().key,\n            queryResults: _o61.tile.queryRenderedFeatures(t, i, e._state, _o61, a, r, P(e.transform, _o61.tile.tileID), s)\n          });\n        }\n      } catch (err) {\n        _iterator162.e(err);\n      } finally {\n        _iterator162.f();\n      }\n\n      var h = function (e) {\n        var t = {},\n            i = {};\n\n        var _iterator163 = _createForOfIteratorHelper(e),\n            _step163;\n\n        try {\n          for (_iterator163.s(); !(_step163 = _iterator163.n()).done;) {\n            var _o59 = _step163.value;\n\n            var _e233 = _o59.queryResults,\n                _a90 = _o59.wrappedTileID,\n                _r214 = i[_a90] = i[_a90] || {};\n\n            for (var _i172 in _e233) {\n              var _o60 = _e233[_i172],\n                  _a91 = _r214[_i172] = _r214[_i172] || {},\n                  _n130 = t[_i172] = t[_i172] || [];\n\n              var _iterator164 = _createForOfIteratorHelper(_o60),\n                  _step164;\n\n              try {\n                for (_iterator164.s(); !(_step164 = _iterator164.n()).done;) {\n                  var _e234 = _step164.value;\n                  _a91[_e234.featureIndex] || (_a91[_e234.featureIndex] = !0, _n130.push(_e234));\n                }\n              } catch (err) {\n                _iterator164.e(err);\n              } finally {\n                _iterator164.f();\n              }\n            }\n          }\n        } catch (err) {\n          _iterator163.e(err);\n        } finally {\n          _iterator163.f();\n        }\n\n        return t;\n      }(c);\n\n      for (var _t249 in h) {\n        h[_t249].forEach(function (t) {\n          var i = t.feature,\n              o = e.getFeatureState(i.layer[\"source-layer\"], i.id);\n          i.source = i.layer.source, i.layer[\"source-layer\"] && (i.sourceLayer = i.layer[\"source-layer\"]), i.state = o;\n        });\n      }\n\n      return h;\n    }\n\n    function z(e, t) {\n      var i = e.getRenderableIds().map(function (t) {\n        return e.getTileByID(t);\n      }),\n          o = [],\n          a = {};\n\n      for (var _e235 = 0; _e235 < i.length; _e235++) {\n        var _r215 = i[_e235],\n            _n131 = _r215.tileID.canonical.key;\n        a[_n131] || (a[_n131] = !0, _r215.querySourceFeatures(o, t));\n      }\n\n      return o;\n    }\n\n    function A(e, t) {\n      var i = e.tileID,\n          o = t.tileID;\n      return i.overscaledZ - o.overscaledZ || i.canonical.y - o.canonical.y || i.wrap - o.wrap || i.canonical.x - o.canonical.x;\n    }\n\n    function D() {\n      return null != fa.workerClass ? new fa.workerClass() : new e.window.Worker(fa.workerUrl);\n    }\n\n    var L = \"mapboxgl_preloaded_worker_pool\";\n\n    var R = /*#__PURE__*/function () {\n      function R() {\n        _classCallCheck(this, R);\n\n        this.active = {};\n      }\n\n      _createClass(R, [{\n        key: \"acquire\",\n        value: function acquire(e) {\n          if (!this.workers) for (this.workers = []; this.workers.length < R.workerCount;) {\n            this.workers.push(new D());\n          }\n          return this.active[e] = !0, this.workers.slice();\n        }\n      }, {\n        key: \"release\",\n        value: function release(e) {\n          delete this.active[e], 0 === this.numActive() && (this.workers.forEach(function (e) {\n            e.terminate();\n          }), this.workers = null);\n        }\n      }, {\n        key: \"isPreloaded\",\n        value: function isPreloaded() {\n          return !!this.active[L];\n        }\n      }, {\n        key: \"numActive\",\n        value: function numActive() {\n          return Object.keys(this.active).length;\n        }\n      }]);\n\n      return R;\n    }();\n\n    var k;\n\n    function B() {\n      return k || (k = new R()), k;\n    }\n\n    function F(t, i) {\n      var o = {};\n\n      for (var _e236 in t) {\n        \"ref\" !== _e236 && (o[_e236] = t[_e236]);\n      }\n\n      return e.refProperties.forEach(function (e) {\n        e in i && (o[e] = i[e]);\n      }), o;\n    }\n\n    function O(e) {\n      e = e.slice();\n      var t = Object.create(null);\n\n      for (var _i173 = 0; _i173 < e.length; _i173++) {\n        t[e[_i173].id] = e[_i173];\n      }\n\n      for (var _i174 = 0; _i174 < e.length; _i174++) {\n        \"ref\" in e[_i174] && (e[_i174] = F(e[_i174], t[e[_i174].ref]));\n      }\n\n      return e;\n    }\n\n    R.workerCount = 2;\n    var U = {\n      setStyle: \"setStyle\",\n      addLayer: \"addLayer\",\n      removeLayer: \"removeLayer\",\n      setPaintProperty: \"setPaintProperty\",\n      setLayoutProperty: \"setLayoutProperty\",\n      setFilter: \"setFilter\",\n      addSource: \"addSource\",\n      removeSource: \"removeSource\",\n      setGeoJSONSourceData: \"setGeoJSONSourceData\",\n      setLayerZoomRange: \"setLayerZoomRange\",\n      setLayerProperty: \"setLayerProperty\",\n      setCenter: \"setCenter\",\n      setZoom: \"setZoom\",\n      setBearing: \"setBearing\",\n      setPitch: \"setPitch\",\n      setSprite: \"setSprite\",\n      setGlyphs: \"setGlyphs\",\n      setTransition: \"setTransition\",\n      setLight: \"setLight\",\n      setTerrain: \"setTerrain\"\n    };\n\n    function N(e, t, i) {\n      i.push({\n        command: U.addSource,\n        args: [e, t[e]]\n      });\n    }\n\n    function Z(e, t, i) {\n      t.push({\n        command: U.removeSource,\n        args: [e]\n      }), i[e] = !0;\n    }\n\n    function G(e, t, i, o) {\n      Z(e, i, o), N(e, t, i);\n    }\n\n    function V(t, i, o) {\n      var a;\n\n      for (a in t[o]) {\n        if (t[o].hasOwnProperty(a) && \"data\" !== a && !e.deepEqual(t[o][a], i[o][a])) return !1;\n      }\n\n      for (a in i[o]) {\n        if (i[o].hasOwnProperty(a) && \"data\" !== a && !e.deepEqual(t[o][a], i[o][a])) return !1;\n      }\n\n      return !0;\n    }\n\n    function q(t, i, o, a, r, n) {\n      var s;\n\n      for (s in i = i || {}, t = t || {}) {\n        t.hasOwnProperty(s) && (e.deepEqual(t[s], i[s]) || o.push({\n          command: n,\n          args: [a, s, i[s], r]\n        }));\n      }\n\n      for (s in i) {\n        i.hasOwnProperty(s) && !t.hasOwnProperty(s) && (e.deepEqual(t[s], i[s]) || o.push({\n          command: n,\n          args: [a, s, i[s], r]\n        }));\n      }\n    }\n\n    function j(e) {\n      return e.id;\n    }\n\n    function $(e, t) {\n      return e[t.id] = t, e;\n    }\n\n    var X = /*#__PURE__*/function () {\n      function X(e, t) {\n        _classCallCheck(this, X);\n\n        this.reset(e, t);\n      }\n\n      _createClass(X, [{\n        key: \"reset\",\n        value: function reset(e, t) {\n          this.points = e || [], this._distances = [0];\n\n          for (var _e237 = 1; _e237 < this.points.length; _e237++) {\n            this._distances[_e237] = this._distances[_e237 - 1] + this.points[_e237].dist(this.points[_e237 - 1]);\n          }\n\n          this.length = this._distances[this._distances.length - 1], this.padding = Math.min(t || 0, .5 * this.length), this.paddedLength = this.length - 2 * this.padding;\n        }\n      }, {\n        key: \"lerp\",\n        value: function lerp(t) {\n          if (1 === this.points.length) return this.points[0];\n          t = e.clamp(t, 0, 1);\n          var i = 1,\n              o = this._distances[i];\n          var a = t * this.paddedLength + this.padding;\n\n          for (; o < a && i < this._distances.length;) {\n            o = this._distances[++i];\n          }\n\n          var r = i - 1,\n              n = this._distances[r],\n              s = o - n,\n              l = s > 0 ? (a - n) / s : 0;\n          return this.points[r].mult(1 - l).add(this.points[i].mult(l));\n        }\n      }]);\n\n      return X;\n    }();\n\n    var W = /*#__PURE__*/function () {\n      function W(e, t, i) {\n        _classCallCheck(this, W);\n\n        var o = this.boxCells = [],\n            a = this.circleCells = [];\n        this.xCellCount = Math.ceil(e / i), this.yCellCount = Math.ceil(t / i);\n\n        for (var _e238 = 0; _e238 < this.xCellCount * this.yCellCount; _e238++) {\n          o.push([]), a.push([]);\n        }\n\n        this.circleKeys = [], this.boxKeys = [], this.bboxes = [], this.circles = [], this.width = e, this.height = t, this.xScale = this.xCellCount / e, this.yScale = this.yCellCount / t, this.boxUid = 0, this.circleUid = 0;\n      }\n\n      _createClass(W, [{\n        key: \"keysLength\",\n        value: function keysLength() {\n          return this.boxKeys.length + this.circleKeys.length;\n        }\n      }, {\n        key: \"insert\",\n        value: function insert(e, t, i, o, a) {\n          this._forEachCell(t, i, o, a, this._insertBoxCell, this.boxUid++), this.boxKeys.push(e), this.bboxes.push(t), this.bboxes.push(i), this.bboxes.push(o), this.bboxes.push(a);\n        }\n      }, {\n        key: \"insertCircle\",\n        value: function insertCircle(e, t, i, o) {\n          this._forEachCell(t - o, i - o, t + o, i + o, this._insertCircleCell, this.circleUid++), this.circleKeys.push(e), this.circles.push(t), this.circles.push(i), this.circles.push(o);\n        }\n      }, {\n        key: \"_insertBoxCell\",\n        value: function _insertBoxCell(e, t, i, o, a, r) {\n          this.boxCells[a].push(r);\n        }\n      }, {\n        key: \"_insertCircleCell\",\n        value: function _insertCircleCell(e, t, i, o, a, r) {\n          this.circleCells[a].push(r);\n        }\n      }, {\n        key: \"_query\",\n        value: function _query(e, t, i, o, a, r) {\n          if (i < 0 || e > this.width || o < 0 || t > this.height) return !a && [];\n          var n = [];\n\n          if (e <= 0 && t <= 0 && this.width <= i && this.height <= o) {\n            if (a) return !0;\n\n            for (var _e239 = 0; _e239 < this.boxKeys.length; _e239++) {\n              n.push({\n                key: this.boxKeys[_e239],\n                x1: this.bboxes[4 * _e239],\n                y1: this.bboxes[4 * _e239 + 1],\n                x2: this.bboxes[4 * _e239 + 2],\n                y2: this.bboxes[4 * _e239 + 3]\n              });\n            }\n\n            for (var _e240 = 0; _e240 < this.circleKeys.length; _e240++) {\n              var _t250 = this.circles[3 * _e240],\n                  _i175 = this.circles[3 * _e240 + 1],\n                  _o62 = this.circles[3 * _e240 + 2];\n              n.push({\n                key: this.circleKeys[_e240],\n                x1: _t250 - _o62,\n                y1: _i175 - _o62,\n                x2: _t250 + _o62,\n                y2: _i175 + _o62\n              });\n            }\n\n            return r ? n.filter(r) : n;\n          }\n\n          return this._forEachCell(e, t, i, o, this._queryCell, n, {\n            hitTest: a,\n            seenUids: {\n              box: {},\n              circle: {}\n            }\n          }, r), a ? n.length > 0 : n;\n        }\n      }, {\n        key: \"_queryCircle\",\n        value: function _queryCircle(e, t, i, o, a) {\n          var r = e - i,\n              n = e + i,\n              s = t - i,\n              l = t + i;\n          if (n < 0 || r > this.width || l < 0 || s > this.height) return !o && [];\n          var c = [];\n          return this._forEachCell(r, s, n, l, this._queryCellCircle, c, {\n            hitTest: o,\n            circle: {\n              x: e,\n              y: t,\n              radius: i\n            },\n            seenUids: {\n              box: {},\n              circle: {}\n            }\n          }, a), o ? c.length > 0 : c;\n        }\n      }, {\n        key: \"query\",\n        value: function query(e, t, i, o, a) {\n          return this._query(e, t, i, o, !1, a);\n        }\n      }, {\n        key: \"hitTest\",\n        value: function hitTest(e, t, i, o, a) {\n          return this._query(e, t, i, o, !0, a);\n        }\n      }, {\n        key: \"hitTestCircle\",\n        value: function hitTestCircle(e, t, i, o) {\n          return this._queryCircle(e, t, i, !0, o);\n        }\n      }, {\n        key: \"_queryCell\",\n        value: function _queryCell(e, t, i, o, a, r, n, s) {\n          var l = n.seenUids,\n              c = this.boxCells[a];\n\n          if (null !== c) {\n            var _a92 = this.bboxes;\n\n            var _iterator165 = _createForOfIteratorHelper(c),\n                _step165;\n\n            try {\n              for (_iterator165.s(); !(_step165 = _iterator165.n()).done;) {\n                var _h17 = _step165.value;\n\n                if (!l.box[_h17]) {\n                  l.box[_h17] = !0;\n\n                  var _c28 = 4 * _h17;\n\n                  if (e <= _a92[_c28 + 2] && t <= _a92[_c28 + 3] && i >= _a92[_c28 + 0] && o >= _a92[_c28 + 1] && (!s || s(this.boxKeys[_h17]))) {\n                    if (n.hitTest) return r.push(!0), !0;\n                    r.push({\n                      key: this.boxKeys[_h17],\n                      x1: _a92[_c28],\n                      y1: _a92[_c28 + 1],\n                      x2: _a92[_c28 + 2],\n                      y2: _a92[_c28 + 3]\n                    });\n                  }\n                }\n              }\n            } catch (err) {\n              _iterator165.e(err);\n            } finally {\n              _iterator165.f();\n            }\n          }\n\n          var h = this.circleCells[a];\n\n          if (null !== h) {\n            var _a93 = this.circles;\n\n            var _iterator166 = _createForOfIteratorHelper(h),\n                _step166;\n\n            try {\n              for (_iterator166.s(); !(_step166 = _iterator166.n()).done;) {\n                var _c29 = _step166.value;\n\n                if (!l.circle[_c29]) {\n                  l.circle[_c29] = !0;\n\n                  var _h18 = 3 * _c29;\n\n                  if (this._circleAndRectCollide(_a93[_h18], _a93[_h18 + 1], _a93[_h18 + 2], e, t, i, o) && (!s || s(this.circleKeys[_c29]))) {\n                    if (n.hitTest) return r.push(!0), !0;\n                    {\n                      var _e241 = _a93[_h18],\n                          _t251 = _a93[_h18 + 1],\n                          _i176 = _a93[_h18 + 2];\n                      r.push({\n                        key: this.circleKeys[_c29],\n                        x1: _e241 - _i176,\n                        y1: _t251 - _i176,\n                        x2: _e241 + _i176,\n                        y2: _t251 + _i176\n                      });\n                    }\n                  }\n                }\n              }\n            } catch (err) {\n              _iterator166.e(err);\n            } finally {\n              _iterator166.f();\n            }\n          }\n        }\n      }, {\n        key: \"_queryCellCircle\",\n        value: function _queryCellCircle(e, t, i, o, a, r, n, s) {\n          var l = n.circle,\n              c = n.seenUids,\n              h = this.boxCells[a];\n\n          if (null !== h) {\n            var _e242 = this.bboxes;\n\n            var _iterator167 = _createForOfIteratorHelper(h),\n                _step167;\n\n            try {\n              for (_iterator167.s(); !(_step167 = _iterator167.n()).done;) {\n                var _t252 = _step167.value;\n\n                if (!c.box[_t252]) {\n                  c.box[_t252] = !0;\n\n                  var _i177 = 4 * _t252;\n\n                  if (this._circleAndRectCollide(l.x, l.y, l.radius, _e242[_i177 + 0], _e242[_i177 + 1], _e242[_i177 + 2], _e242[_i177 + 3]) && (!s || s(this.boxKeys[_t252]))) return r.push(!0), !0;\n                }\n              }\n            } catch (err) {\n              _iterator167.e(err);\n            } finally {\n              _iterator167.f();\n            }\n          }\n\n          var u = this.circleCells[a];\n\n          if (null !== u) {\n            var _e243 = this.circles;\n\n            var _iterator168 = _createForOfIteratorHelper(u),\n                _step168;\n\n            try {\n              for (_iterator168.s(); !(_step168 = _iterator168.n()).done;) {\n                var _t253 = _step168.value;\n\n                if (!c.circle[_t253]) {\n                  c.circle[_t253] = !0;\n\n                  var _i178 = 3 * _t253;\n\n                  if (this._circlesCollide(_e243[_i178], _e243[_i178 + 1], _e243[_i178 + 2], l.x, l.y, l.radius) && (!s || s(this.circleKeys[_t253]))) return r.push(!0), !0;\n                }\n              }\n            } catch (err) {\n              _iterator168.e(err);\n            } finally {\n              _iterator168.f();\n            }\n          }\n        }\n      }, {\n        key: \"_forEachCell\",\n        value: function _forEachCell(e, t, i, o, a, r, n, s) {\n          var l = this._convertToXCellCoord(e),\n              c = this._convertToYCellCoord(t),\n              h = this._convertToXCellCoord(i),\n              u = this._convertToYCellCoord(o);\n\n          for (var _d14 = l; _d14 <= h; _d14++) {\n            for (var _l40 = c; _l40 <= u; _l40++) {\n              if (a.call(this, e, t, i, o, this.xCellCount * _l40 + _d14, r, n, s)) return;\n            }\n          }\n        }\n      }, {\n        key: \"_convertToXCellCoord\",\n        value: function _convertToXCellCoord(e) {\n          return Math.max(0, Math.min(this.xCellCount - 1, Math.floor(e * this.xScale)));\n        }\n      }, {\n        key: \"_convertToYCellCoord\",\n        value: function _convertToYCellCoord(e) {\n          return Math.max(0, Math.min(this.yCellCount - 1, Math.floor(e * this.yScale)));\n        }\n      }, {\n        key: \"_circlesCollide\",\n        value: function _circlesCollide(e, t, i, o, a, r) {\n          var n = o - e,\n              s = a - t,\n              l = i + r;\n          return l * l > n * n + s * s;\n        }\n      }, {\n        key: \"_circleAndRectCollide\",\n        value: function _circleAndRectCollide(e, t, i, o, a, r, n) {\n          var s = (r - o) / 2,\n              l = Math.abs(e - (o + s));\n          if (l > s + i) return !1;\n          var c = (n - a) / 2,\n              h = Math.abs(t - (a + c));\n          if (h > c + i) return !1;\n          if (l <= s || h <= c) return !0;\n          var u = l - s,\n              d = h - c;\n          return u * u + d * d <= i * i;\n        }\n      }]);\n\n      return W;\n    }();\n\n    function H(t, i, o, a, r) {\n      var n = e.create();\n      return i ? (e.scale(n, n, [1 / r, 1 / r, 1]), o || e.rotateZ(n, n, a.angle)) : e.multiply(n, a.labelPlaneMatrix, t), n;\n    }\n\n    function K(t, i, o, a, r) {\n      if (i) {\n        var _i179 = e.clone(t);\n\n        return e.scale(_i179, _i179, [r, r, 1]), o || e.rotateZ(_i179, _i179, -a.angle), _i179;\n      }\n\n      return a.glCoordMatrix;\n    }\n\n    function Y(t, i) {\n      var o = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0;\n      var a = [t.x, t.y, o, 1];\n      o ? e.transformMat4(a, a, i) : le(a, a, i);\n      var r = a[3];\n      return {\n        point: new e.Point(a[0] / r, a[1] / r),\n        signedDistanceFromCamera: r\n      };\n    }\n\n    function J(e, t) {\n      return Math.min(.5 + e / t * .5, 1.5);\n    }\n\n    function Q(e, t) {\n      var i = e[0] / e[3],\n          o = e[1] / e[3];\n      return i >= -t[0] && i <= t[0] && o >= -t[1] && o <= t[1];\n    }\n\n    function ee(t, i, o, a, r, n, s, l, c) {\n      var h = a ? t.textSizeData : t.iconSizeData,\n          u = e.evaluateSizeForZoom(h, o.transform.zoom),\n          d = [256 / o.width * 2 + 1, 256 / o.height * 2 + 1],\n          _ = a ? t.text.dynamicLayoutVertexArray : t.icon.dynamicLayoutVertexArray;\n\n      _.clear();\n\n      var m = t.lineVertexArray,\n          p = a ? t.text.placedSymbolArray : t.icon.placedSymbolArray,\n          f = o.transform.width / o.transform.height;\n      var g = !1;\n\n      for (var _a94 = 0; _a94 < p.length; _a94++) {\n        var _v10 = p.get(_a94);\n\n        if (_v10.hidden || _v10.writingMode === e.WritingMode.vertical && !g) {\n          se(_v10.numGlyphs, _);\n          continue;\n        }\n\n        g = !1;\n\n        var _x9 = c ? c({\n          x: _v10.anchorX,\n          y: _v10.anchorY\n        }) : 0,\n            _y10 = [_v10.anchorX, _v10.anchorY, _x9, 1];\n\n        if (e.transformMat4(_y10, _y10, i), !Q(_y10, d)) {\n          se(_v10.numGlyphs, _);\n          continue;\n        }\n\n        var _b9 = J(o.transform.cameraToCenterDistance, _y10[3]),\n            _w8 = e.evaluateSizeForFeature(h, u, _v10),\n            _T4 = s ? _w8 / _b9 : _w8 * _b9,\n            _E2 = new e.Point(_v10.anchorX, _v10.anchorY),\n            _C3 = Y(_E2, r, _x9);\n\n        if (_C3.signedDistanceFromCamera <= 0) {\n          se(_v10.numGlyphs, _);\n          continue;\n        }\n\n        var _S5 = _C3.point;\n        var _I3 = {};\n\n        var _P = s ? null : c,\n            _M = oe(_v10, _T4, !1, l, i, r, n, t.glyphOffsetArray, m, _, _S5, _E2, _I3, f, _P);\n\n        g = _M.useVertical, _P && _M.needsFlipping && (_I3 = {}), (_M.notEnoughRoom || g || _M.needsFlipping && oe(_v10, _T4, !0, l, i, r, n, t.glyphOffsetArray, m, _, _S5, _E2, _I3, f, _P).notEnoughRoom) && se(_v10.numGlyphs, _);\n      }\n\n      a ? t.text.dynamicLayoutVertexBuffer.updateData(_) : t.icon.dynamicLayoutVertexBuffer.updateData(_);\n    }\n\n    function te(e, t, i, o, a, r, n, s, l, c, h, u, d) {\n      var _ = s.glyphStartIndex + s.numGlyphs,\n          m = s.lineStartIndex,\n          p = s.lineStartIndex + s.lineLength,\n          f = t.getoffsetX(s.glyphStartIndex),\n          g = t.getoffsetX(_ - 1),\n          v = re(e * f, i, o, a, r, n, s.segment, m, p, l, c, h, u, d, !0);\n\n      if (!v) return null;\n      var x = re(e * g, i, o, a, r, n, s.segment, m, p, l, c, h, u, d, !0);\n      return x ? {\n        first: v,\n        last: x\n      } : null;\n    }\n\n    function ie(t, i, o, a) {\n      return t === e.WritingMode.horizontal && Math.abs(o.y - i.y) > Math.abs(o.x - i.x) * a ? {\n        useVertical: !0\n      } : (t === e.WritingMode.vertical ? i.y < o.y : i.x > o.x) ? {\n        needsFlipping: !0\n      } : null;\n    }\n\n    function oe(t, i, o, a, r, n, s, l, c, h, u, d, _, m, p) {\n      var f = i / 24,\n          g = t.lineOffsetX * f,\n          v = t.lineOffsetY * f;\n      var x;\n\n      if (t.numGlyphs > 1) {\n        var _e244 = t.glyphStartIndex + t.numGlyphs,\n            _i180 = t.lineStartIndex,\n            _r216 = t.lineStartIndex + t.lineLength,\n            _h19 = te(f, l, g, v, o, u, d, t, c, n, _, p);\n\n        if (!_h19) return {\n          notEnoughRoom: !0\n        };\n        var _y11 = Y(_h19.first.point, s).point,\n            _b10 = Y(_h19.last.point, s).point;\n\n        if (a && !o) {\n          var _e245 = ie(t.writingMode, _y11, _b10, m);\n\n          if (_e245) return _e245;\n        }\n\n        x = [_h19.first];\n\n        for (var _a95 = t.glyphStartIndex + 1; _a95 < _e244 - 1; _a95++) {\n          x.push(re(f * l.getoffsetX(_a95), g, v, o, u, d, t.segment, _i180, _r216, c, n, _, p));\n        }\n\n        x.push(_h19.last);\n      } else {\n        if (a && !o) {\n          var _i182 = Y(d, r).point,\n              _o63 = t.lineStartIndex + t.segment + 1,\n              _a96 = new e.Point(c.getx(_o63), c.gety(_o63)),\n              _n132 = Y(_a96, r),\n              _s100 = _n132.signedDistanceFromCamera > 0 ? _n132.point : ae(d, _a96, _i182, 1, r),\n              _l41 = ie(t.writingMode, _i182, _s100, m);\n\n          if (_l41) return _l41;\n        }\n\n        var _i181 = re(f * l.getoffsetX(t.glyphStartIndex), g, v, o, u, d, t.segment, t.lineStartIndex, t.lineStartIndex + t.lineLength, c, n, _, p);\n\n        if (!_i181) return {\n          notEnoughRoom: !0\n        };\n        x = [_i181];\n      }\n\n      var _iterator169 = _createForOfIteratorHelper(x),\n          _step169;\n\n      try {\n        for (_iterator169.s(); !(_step169 = _iterator169.n()).done;) {\n          var _t254 = _step169.value;\n          e.addDynamicAttributes(h, _t254.point, _t254.angle);\n        }\n      } catch (err) {\n        _iterator169.e(err);\n      } finally {\n        _iterator169.f();\n      }\n\n      return {};\n    }\n\n    function ae(e, t, i, o, a, r) {\n      var n = e.add(e.sub(t)._unit()),\n          s = Y(n, a, r ? r(n) : 0).point,\n          l = i.sub(s);\n      return i.add(l._mult(o / l.mag()));\n    }\n\n    function re(t, i, o, a, r, n, s, l, c, h, u, d, _, m, p) {\n      var f = a ? t - i : t + i;\n      var g = f > 0 ? 1 : -1,\n          v = 0;\n      a && (g *= -1, v = Math.PI), g < 0 && (v += Math.PI);\n      var x = g > 0 ? l + s : l + s + 1,\n          y = r,\n          b = r,\n          w = 0,\n          T = 0;\n      var E = Math.abs(f),\n          C = [],\n          S = [];\n      var I = n;\n\n      var P = function P() {\n        var t = x - g;\n        return 0 === w ? n : new e.Point(h.getx(t), h.gety(t));\n      },\n          M = function M() {\n        return ae(P(), I, b, E - w + 1, u, _);\n      };\n\n      for (; w + T <= E;) {\n        if (x += g, x < l || x >= c) return null;\n\n        if (b = y, C.push(y), m && S.push(I || P()), y = d[x], void 0 === y) {\n          I = new e.Point(h.getx(x), h.gety(x));\n\n          var _t255 = Y(I, u, _ ? _(I) : 0);\n\n          y = _t255.signedDistanceFromCamera > 0 ? d[x] = _t255.point : M();\n        } else I = null;\n\n        w += T, T = b.dist(y);\n      }\n\n      p && _ && (I = I || new e.Point(h.getx(x), h.gety(x)), d[x] = y = void 0 === d[x] ? y : M(), T = b.dist(y));\n\n      var z = (E - w) / T,\n          A = y.sub(b),\n          D = A.mult(z)._add(b);\n\n      o && D._add(A._unit()._perp()._mult(o * g));\n      var L = v + Math.atan2(y.y - b.y, y.x - b.x);\n      return C.push(D), m && (I = I || new e.Point(h.getx(x), h.gety(x)), S.push(function (t, i, o) {\n        var a = 1 - o;\n        return new e.Point(t.x * a + i.x * o, t.y * a + i.y * o);\n      }(S.length > 0 ? S[S.length - 1] : I, I, z))), {\n        point: D,\n        angle: L,\n        path: C,\n        tilePath: S\n      };\n    }\n\n    var ne = new Float32Array([-1 / 0, -1 / 0, 0, -1 / 0, -1 / 0, 0, -1 / 0, -1 / 0, 0, -1 / 0, -1 / 0, 0]);\n\n    function se(e, t) {\n      for (var _i183 = 0; _i183 < e; _i183++) {\n        var _e246 = t.length;\n        t.resize(_e246 + 4), t.float32.set(ne, 3 * _e246);\n      }\n    }\n\n    function le(e, t, i) {\n      var o = t[0],\n          a = t[1];\n      return e[0] = i[0] * o + i[4] * a + i[12], e[1] = i[1] * o + i[5] * a + i[13], e[3] = i[3] * o + i[7] * a + i[15], e;\n    }\n\n    var ce = /*#__PURE__*/function () {\n      function ce(e) {\n        var t = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : new W(e.width + 200, e.height + 200, 25);\n        var i = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : new W(e.width + 200, e.height + 200, 25);\n\n        _classCallCheck(this, ce);\n\n        this.transform = e, this.grid = t, this.ignoredGrid = i, this.pitchfactor = Math.cos(e._pitch) * e.cameraToCenterDistance, this.screenRightBoundary = e.width + 100, this.screenBottomBoundary = e.height + 100, this.gridRightBoundary = e.width + 200, this.gridBottomBoundary = e.height + 200;\n      }\n\n      _createClass(ce, [{\n        key: \"placeCollisionBox\",\n        value: function placeCollisionBox(e, t, i, o, a, r, n) {\n          var s = this.projectAndGetPerspectiveRatio(r, t.anchorPointX, t.anchorPointY, t.elevation),\n              l = a * s.perspectiveRatio,\n              c = (t.x1 * e + i.x - t.padding) * l + s.point.x,\n              h = (t.y1 * e + i.y - t.padding) * l + s.point.y,\n              u = (t.x2 * e + i.x + t.padding) * l + s.point.x,\n              d = (t.y2 * e + i.y + t.padding) * l + s.point.y,\n              _ = s.perspectiveRatio <= .55 || s.aboveHorizon;\n\n          return !this.isInsideGrid(c, h, u, d) || !o && this.grid.hitTest(c, h, u, d, n) || _ ? {\n            box: [],\n            offscreen: !1\n          } : {\n            box: [c, h, u, d],\n            offscreen: this.isOffscreen(c, h, u, d)\n          };\n        }\n      }, {\n        key: \"placeCollisionCircles\",\n        value: function placeCollisionCircles(t, i, o, a, r, n, s, l, c, h, u, d, _, m) {\n          var p = [],\n              f = this.transform.elevation,\n              g = f ? function (e) {\n            return f.getAtTileOffset(m, e.x, e.y);\n          } : function (e) {\n            return 0;\n          },\n              v = new e.Point(i.anchorX, i.anchorY),\n              x = g(v),\n              y = this.projectAndGetPerspectiveRatio(n, v.x, v.y, x),\n              b = y.perspectiveRatio,\n              w = (h ? r / b : r * b) / e.ONE_EM,\n              T = Y(v, s, x).point,\n              E = y.signedDistanceFromCamera > 0 ? te(w, a, i.lineOffsetX * w, i.lineOffsetY * w, !1, T, v, i, o, s, {}, f && !h ? g : null, h && !!f) : null;\n          var C = !1,\n              S = !1,\n              I = !0;\n\n          if (E && !y.aboveHorizon) {\n            var _i184 = .5 * d * b + _,\n                _o64 = new e.Point(-100, -100),\n                _a97 = new e.Point(this.screenRightBoundary, this.screenBottomBoundary),\n                _r217 = new X(),\n                _n133 = E.first,\n                _s101 = E.last;\n\n            var _h20 = [];\n\n            for (var _e247 = _n133.path.length - 1; _e247 >= 1; _e247--) {\n              _h20.push(_n133.path[_e247]);\n            }\n\n            for (var _e248 = 1; _e248 < _s101.path.length; _e248++) {\n              _h20.push(_s101.path[_e248]);\n            }\n\n            var _m12 = 2.5 * _i184;\n\n            if (l) {\n              var _e249 = _h20.map(f ? function (e, t) {\n                var i = g(t < _n133.path.length - 1 ? _n133.tilePath[_n133.path.length - 1 - t] : _s101.tilePath[t - _n133.path.length + 2]);\n                return Y(e, l, i);\n              } : function (e) {\n                return Y(e, l);\n              });\n\n              _h20 = _e249.some(function (e) {\n                return e.signedDistanceFromCamera <= 0;\n              }) ? [] : _e249.map(function (e) {\n                return e.point;\n              });\n            }\n\n            var _v11 = [];\n\n            if (_h20.length > 0) {\n              var _t256 = _h20[0].clone(),\n                  _i185 = _h20[0].clone();\n\n              for (var _e250 = 1; _e250 < _h20.length; _e250++) {\n                _t256.x = Math.min(_t256.x, _h20[_e250].x), _t256.y = Math.min(_t256.y, _h20[_e250].y), _i185.x = Math.max(_i185.x, _h20[_e250].x), _i185.y = Math.max(_i185.y, _h20[_e250].y);\n              }\n\n              _v11 = _t256.x >= _o64.x && _i185.x <= _a97.x && _t256.y >= _o64.y && _i185.y <= _a97.y ? [_h20] : _i185.x < _o64.x || _t256.x > _a97.x || _i185.y < _o64.y || _t256.y > _a97.y ? [] : e.clipLine([_h20], _o64.x, _o64.y, _a97.x, _a97.y);\n            }\n\n            var _iterator170 = _createForOfIteratorHelper(_v11),\n                _step170;\n\n            try {\n              for (_iterator170.s(); !(_step170 = _iterator170.n()).done;) {\n                var _e251 = _step170.value;\n\n                _r217.reset(_e251, .25 * _i184);\n\n                var _o65 = 0;\n                _o65 = _r217.length <= .5 * _i184 ? 1 : Math.ceil(_r217.paddedLength / _m12) + 1;\n\n                for (var _e252 = 0; _e252 < _o65; _e252++) {\n                  var _a98 = _e252 / Math.max(_o65 - 1, 1),\n                      _n134 = _r217.lerp(_a98),\n                      _s102 = _n134.x + 100,\n                      _l42 = _n134.y + 100;\n\n                  p.push(_s102, _l42, _i184, 0);\n\n                  var _h21 = _s102 - _i184,\n                      _d15 = _l42 - _i184,\n                      _10 = _s102 + _i184,\n                      _m13 = _l42 + _i184;\n\n                  if (I = I && this.isOffscreen(_h21, _d15, _10, _m13), S = S || this.isInsideGrid(_h21, _d15, _10, _m13), !t && this.grid.hitTestCircle(_s102, _l42, _i184, u) && (C = !0, !c)) return {\n                    circles: [],\n                    offscreen: !1,\n                    collisionDetected: C\n                  };\n                }\n              }\n            } catch (err) {\n              _iterator170.e(err);\n            } finally {\n              _iterator170.f();\n            }\n          }\n\n          return {\n            circles: !c && C || !S ? [] : p,\n            offscreen: I,\n            collisionDetected: C\n          };\n        }\n      }, {\n        key: \"queryRenderedSymbols\",\n        value: function queryRenderedSymbols(t) {\n          if (0 === t.length || 0 === this.grid.keysLength() && 0 === this.ignoredGrid.keysLength()) return {};\n          var i = [];\n          var o = 1 / 0,\n              a = 1 / 0,\n              r = -1 / 0,\n              n = -1 / 0;\n\n          var _iterator171 = _createForOfIteratorHelper(t),\n              _step171;\n\n          try {\n            for (_iterator171.s(); !(_step171 = _iterator171.n()).done;) {\n              var _s103 = _step171.value;\n\n              var _t257 = new e.Point(_s103.x + 100, _s103.y + 100);\n\n              o = Math.min(o, _t257.x), a = Math.min(a, _t257.y), r = Math.max(r, _t257.x), n = Math.max(n, _t257.y), i.push(_t257);\n            }\n          } catch (err) {\n            _iterator171.e(err);\n          } finally {\n            _iterator171.f();\n          }\n\n          var s = this.grid.query(o, a, r, n).concat(this.ignoredGrid.query(o, a, r, n)),\n              l = {},\n              c = {};\n\n          var _iterator172 = _createForOfIteratorHelper(s),\n              _step172;\n\n          try {\n            for (_iterator172.s(); !(_step172 = _iterator172.n()).done;) {\n              var _t258 = _step172.value;\n              var _o66 = _t258.key;\n              if (void 0 === l[_o66.bucketInstanceId] && (l[_o66.bucketInstanceId] = {}), l[_o66.bucketInstanceId][_o66.featureIndex]) continue;\n              var _a99 = [new e.Point(_t258.x1, _t258.y1), new e.Point(_t258.x2, _t258.y1), new e.Point(_t258.x2, _t258.y2), new e.Point(_t258.x1, _t258.y2)];\n              e.polygonIntersectsPolygon(i, _a99) && (l[_o66.bucketInstanceId][_o66.featureIndex] = !0, void 0 === c[_o66.bucketInstanceId] && (c[_o66.bucketInstanceId] = []), c[_o66.bucketInstanceId].push(_o66.featureIndex));\n            }\n          } catch (err) {\n            _iterator172.e(err);\n          } finally {\n            _iterator172.f();\n          }\n\n          return c;\n        }\n      }, {\n        key: \"insertCollisionBox\",\n        value: function insertCollisionBox(e, t, i, o, a) {\n          (t ? this.ignoredGrid : this.grid).insert({\n            bucketInstanceId: i,\n            featureIndex: o,\n            collisionGroupID: a\n          }, e[0], e[1], e[2], e[3]);\n        }\n      }, {\n        key: \"insertCollisionCircles\",\n        value: function insertCollisionCircles(e, t, i, o, a) {\n          var r = t ? this.ignoredGrid : this.grid,\n              n = {\n            bucketInstanceId: i,\n            featureIndex: o,\n            collisionGroupID: a\n          };\n\n          for (var _t259 = 0; _t259 < e.length; _t259 += 4) {\n            r.insertCircle(n, e[_t259], e[_t259 + 1], e[_t259 + 2]);\n          }\n        }\n      }, {\n        key: \"projectAndGetPerspectiveRatio\",\n        value: function projectAndGetPerspectiveRatio(t, i, o, a) {\n          var r = [i, o, a || 0, 1];\n          var n = !1;\n          return a || this.transform.pitch > 0 ? (e.transformMat4(r, r, t), n = r[2] > r[3]) : le(r, r, t), {\n            point: new e.Point((r[0] / r[3] + 1) / 2 * this.transform.width + 100, (-r[1] / r[3] + 1) / 2 * this.transform.height + 100),\n            perspectiveRatio: Math.min(.5 + this.transform.cameraToCenterDistance / r[3] * .5, 1.5),\n            signedDistanceFromCamera: r[3],\n            aboveHorizon: n\n          };\n        }\n      }, {\n        key: \"isOffscreen\",\n        value: function isOffscreen(e, t, i, o) {\n          return i < 100 || e >= this.screenRightBoundary || o < 100 || t > this.screenBottomBoundary;\n        }\n      }, {\n        key: \"isInsideGrid\",\n        value: function isInsideGrid(e, t, i, o) {\n          return i >= 0 && e < this.gridRightBoundary && o >= 0 && t < this.gridBottomBoundary;\n        }\n      }, {\n        key: \"getViewportMatrix\",\n        value: function getViewportMatrix() {\n          var t = e.identity([]);\n          return e.translate(t, t, [-100, -100, 0]), t;\n        }\n      }]);\n\n      return ce;\n    }();\n\n    var he = /*#__PURE__*/function () {\n      function he(e, t, i, o) {\n        _classCallCheck(this, he);\n\n        this.opacity = e ? Math.max(0, Math.min(1, e.opacity + (e.placed ? t : -t))) : o && i ? 1 : 0, this.placed = i;\n      }\n\n      _createClass(he, [{\n        key: \"isHidden\",\n        value: function isHidden() {\n          return 0 === this.opacity && !this.placed;\n        }\n      }]);\n\n      return he;\n    }();\n\n    var ue = /*#__PURE__*/function () {\n      function ue(e, t, i, o, a) {\n        _classCallCheck(this, ue);\n\n        this.text = new he(e ? e.text : null, t, i, a), this.icon = new he(e ? e.icon : null, t, o, a);\n      }\n\n      _createClass(ue, [{\n        key: \"isHidden\",\n        value: function isHidden() {\n          return this.text.isHidden() && this.icon.isHidden();\n        }\n      }]);\n\n      return ue;\n    }();\n\n    var de = function de(e, t, i) {\n      _classCallCheck(this, de);\n\n      this.text = e, this.icon = t, this.skipFade = i;\n    };\n\n    var _e = function _e() {\n      _classCallCheck(this, _e);\n\n      this.invProjMatrix = e.create(), this.viewportMatrix = e.create(), this.circles = [];\n    };\n\n    var me = function me(e, t, i, o, a) {\n      _classCallCheck(this, me);\n\n      this.bucketInstanceId = e, this.featureIndex = t, this.sourceLayerIndex = i, this.bucketIndex = o, this.tileID = a;\n    };\n\n    var pe = /*#__PURE__*/function () {\n      function pe(e) {\n        _classCallCheck(this, pe);\n\n        this.crossSourceCollisions = e, this.maxGroupID = 0, this.collisionGroups = {};\n      }\n\n      _createClass(pe, [{\n        key: \"get\",\n        value: function get(e) {\n          if (this.crossSourceCollisions) return {\n            ID: 0,\n            predicate: null\n          };\n\n          if (!this.collisionGroups[e]) {\n            var _t260 = ++this.maxGroupID;\n\n            this.collisionGroups[e] = {\n              ID: _t260,\n              predicate: function predicate(e) {\n                return e.collisionGroupID === _t260;\n              }\n            };\n          }\n\n          return this.collisionGroups[e];\n        }\n      }]);\n\n      return pe;\n    }();\n\n    function fe(t, i, o, a, r) {\n      var _e$getAnchorAlignment = e.getAnchorAlignment(t),\n          n = _e$getAnchorAlignment.horizontalAlign,\n          s = _e$getAnchorAlignment.verticalAlign,\n          l = -(n - .5) * i,\n          c = -(s - .5) * o,\n          h = e.evaluateVariableOffset(t, a);\n\n      return new e.Point(l + h[0] * r, c + h[1] * r);\n    }\n\n    function ge(t, i, o, a, r) {\n      var n = new e.Point(t, i);\n      return o && n._rotate(a ? r : -r), n;\n    }\n\n    var ve = /*#__PURE__*/function () {\n      function ve(e, t, i, o) {\n        _classCallCheck(this, ve);\n\n        this.transform = e.clone(), this.collisionIndex = new ce(this.transform), this.placements = {}, this.opacities = {}, this.variableOffsets = {}, this.stale = !1, this.commitTime = 0, this.fadeDuration = t, this.retainedQueryData = {}, this.collisionGroups = new pe(i), this.collisionCircleArrays = {}, this.prevPlacement = o, o && (o.prevPlacement = void 0), this.placedOrientations = {};\n      }\n\n      _createClass(ve, [{\n        key: \"getBucketParts\",\n        value: function getBucketParts(t, i, o, a) {\n          var r = o.getBucket(i),\n              n = o.latestFeatureIndex;\n          if (!r || !n || i.id !== r.layerIds[0]) return;\n\n          var s = o.collisionBoxArray,\n              l = r.layers[0].layout,\n              c = Math.pow(2, this.transform.zoom - o.tileID.overscaledZ),\n              h = o.tileSize / e.EXTENT,\n              u = this.transform.calculatePosMatrix(o.tileID.toUnwrapped()),\n              d = \"map\" === l.get(\"text-pitch-alignment\"),\n              _ = \"map\" === l.get(\"text-rotation-alignment\"),\n              m = v(o, 1, this.transform.zoom),\n              p = H(u, d, _, this.transform, m);\n\n          var f = null;\n\n          if (d) {\n            var _t261 = K(u, d, _, this.transform, m);\n\n            f = e.multiply([], this.transform.labelPlaneMatrix, _t261);\n          }\n\n          this.retainedQueryData[r.bucketInstanceId] = new me(r.bucketInstanceId, n, r.sourceLayerIndex, r.index, o.tileID);\n          var g = {\n            bucket: r,\n            layout: l,\n            posMatrix: u,\n            textLabelPlaneMatrix: p,\n            labelToScreenMatrix: f,\n            scale: c,\n            textPixelRatio: h,\n            holdingForFade: o.holdingForFade(),\n            collisionBoxArray: s,\n            partiallyEvaluatedTextSize: e.evaluateSizeForZoom(r.textSizeData, this.transform.zoom),\n            partiallyEvaluatedIconSize: e.evaluateSizeForZoom(r.iconSizeData, this.transform.zoom),\n            collisionGroup: this.collisionGroups.get(r.sourceID)\n          };\n\n          if (a) {\n            var _iterator173 = _createForOfIteratorHelper(r.sortKeyRanges),\n                _step173;\n\n            try {\n              for (_iterator173.s(); !(_step173 = _iterator173.n()).done;) {\n                var _e253 = _step173.value;\n                var _i186 = _e253.sortKey,\n                    _o67 = _e253.symbolInstanceStart,\n                    _a100 = _e253.symbolInstanceEnd;\n                t.push({\n                  sortKey: _i186,\n                  symbolInstanceStart: _o67,\n                  symbolInstanceEnd: _a100,\n                  parameters: g\n                });\n              }\n            } catch (err) {\n              _iterator173.e(err);\n            } finally {\n              _iterator173.f();\n            }\n          } else t.push({\n            symbolInstanceStart: 0,\n            symbolInstanceEnd: r.symbolInstances.length,\n            parameters: g\n          });\n        }\n      }, {\n        key: \"attemptAnchorPlacement\",\n        value: function attemptAnchorPlacement(e, t, i, o, a, r, n, s, l, c, h, u, d, _, m, p, f, g) {\n          var v = [u.textOffset0, u.textOffset1],\n              x = _.getSymbolInstanceTextSize(f, u, this.transform.zoom, d),\n              y = fe(e, i, o, v, a),\n              b = this.collisionIndex.placeCollisionBox(x, t, ge(y.x, y.y, r, n, this.transform.angle), h, s, l, c.predicate);\n\n          if ((!p || 0 !== this.collisionIndex.placeCollisionBox(_.getSymbolInstanceIconSize(g, this.transform.zoom, d), p, ge(y.x, y.y, r, n, this.transform.angle), h, s, l, c.predicate).box.length) && b.box.length > 0) {\n            var _t262;\n\n            return this.prevPlacement && this.prevPlacement.variableOffsets[u.crossTileID] && this.prevPlacement.placements[u.crossTileID] && this.prevPlacement.placements[u.crossTileID].text && (_t262 = this.prevPlacement.variableOffsets[u.crossTileID].anchor), this.variableOffsets[u.crossTileID] = {\n              textOffset: v,\n              width: i,\n              height: o,\n              anchor: e,\n              textBoxScale: a,\n              prevAnchor: _t262\n            }, this.markUsedJustification(_, e, u, m), _.allowVerticalPlacement && (this.markUsedOrientation(_, m, u), this.placedOrientations[u.crossTileID] = m), {\n              shift: y,\n              placedGlyphBoxes: b\n            };\n          }\n        }\n      }, {\n        key: \"placeLayerBucketPart\",\n        value: function placeLayerBucketPart(t, i, o) {\n          var _this85 = this;\n\n          var _t$parameters = t.parameters,\n              a = _t$parameters.bucket,\n              r = _t$parameters.layout,\n              n = _t$parameters.posMatrix,\n              s = _t$parameters.textLabelPlaneMatrix,\n              l = _t$parameters.labelToScreenMatrix,\n              c = _t$parameters.textPixelRatio,\n              h = _t$parameters.holdingForFade,\n              u = _t$parameters.collisionBoxArray,\n              d = _t$parameters.partiallyEvaluatedTextSize,\n              _ = _t$parameters.partiallyEvaluatedIconSize,\n              m = _t$parameters.collisionGroup,\n              p = r.get(\"text-optional\"),\n              f = r.get(\"icon-optional\"),\n              g = r.get(\"text-allow-overlap\"),\n              v = r.get(\"icon-allow-overlap\"),\n              x = \"map\" === r.get(\"text-rotation-alignment\"),\n              y = \"map\" === r.get(\"text-pitch-alignment\"),\n              b = \"none\" !== r.get(\"icon-text-fit\"),\n              w = \"viewport-y\" === r.get(\"symbol-z-order\"),\n              T = g && (v || !a.hasIconData() || f),\n              E = v && (g || !a.hasTextData() || p);\n          !a.collisionArrays && u && a.deserializeCollisionBoxes(u), o && a.updateCollisionDebugBuffers(this.transform.zoom, u);\n\n          var C = function C(t, u, w) {\n            if (i[t.crossTileID]) return;\n            if (h) return void (_this85.placements[t.crossTileID] = new de(!1, !1, !1));\n            var C = !1,\n                S = !1,\n                I = !0,\n                P = null,\n                M = {\n              box: null,\n              offscreen: null\n            },\n                z = {\n              box: null,\n              offscreen: null\n            },\n                A = null,\n                D = null,\n                L = null,\n                R = 0,\n                k = 0,\n                B = 0;\n            w.textFeatureIndex ? R = w.textFeatureIndex : t.useRuntimeCollisionCircles && (R = t.featureIndex), w.verticalTextFeatureIndex && (k = w.verticalTextFeatureIndex);\n\n            var F = function F(e) {\n              (_this85.transform.elevation || e.elevation) && (e.elevation = _this85.transform.elevation ? _this85.transform.elevation.getAtTileOffset(_this85.retainedQueryData[a.bucketInstanceId].tileID, e.anchorPointX, e.anchorPointY) : 0);\n            },\n                O = w.textBox;\n\n            if (O) {\n              F(O);\n\n              var _i187 = function _i187(i) {\n                var o = e.WritingMode.horizontal;\n\n                if (a.allowVerticalPlacement && !i && _this85.prevPlacement) {\n                  var _e254 = _this85.prevPlacement.placedOrientations[t.crossTileID];\n                  _e254 && (_this85.placedOrientations[t.crossTileID] = _e254, o = _e254, _this85.markUsedOrientation(a, o, t));\n                }\n\n                return o;\n              },\n                  _o68 = function _o68(i, o) {\n                if (a.allowVerticalPlacement && t.numVerticalGlyphVertices > 0 && w.verticalTextBox) {\n                  var _iterator174 = _createForOfIteratorHelper(a.writingModes),\n                      _step174;\n\n                  try {\n                    for (_iterator174.s(); !(_step174 = _iterator174.n()).done;) {\n                      var _t263 = _step174.value;\n                      if (_t263 === e.WritingMode.vertical ? (M = o(), z = M) : M = i(), M && M.box && M.box.length) break;\n                    }\n                  } catch (err) {\n                    _iterator174.e(err);\n                  } finally {\n                    _iterator174.f();\n                  }\n                } else M = i();\n              };\n\n              if (r.get(\"text-variable-anchor\")) {\n                var _s104 = r.get(\"text-variable-anchor\");\n\n                if (_this85.prevPlacement && _this85.prevPlacement.variableOffsets[t.crossTileID]) {\n                  var _e255 = _this85.prevPlacement.variableOffsets[t.crossTileID];\n                  _s104.indexOf(_e255.anchor) > 0 && (_s104 = _s104.filter(function (t) {\n                    return t !== _e255.anchor;\n                  }), _s104.unshift(_e255.anchor));\n                }\n\n                var _l43 = function _l43(e, i, o) {\n                  var r = t.textBoxScale,\n                      l = (e.x2 - e.x1) * r + 2 * e.padding,\n                      h = (e.y2 - e.y1) * r + 2 * e.padding,\n                      p = b && !v ? i : null;\n                  p && F(p);\n                  var f = {\n                    box: [],\n                    offscreen: !1\n                  };\n                  var w = g ? 2 * _s104.length : _s104.length;\n\n                  for (var _i188 = 0; _i188 < w; ++_i188) {\n                    var _g13 = _this85.attemptAnchorPlacement(_s104[_i188 % _s104.length], e, l, h, r, x, y, c, n, m, _i188 >= _s104.length, t, u, a, o, p, d, _);\n\n                    if (_g13 && (f = _g13.placedGlyphBoxes, f && f.box && f.box.length)) {\n                      C = !0, P = _g13.shift;\n                      break;\n                    }\n                  }\n\n                  return f;\n                };\n\n                _o68(function () {\n                  return _l43(O, w.iconBox, e.WritingMode.horizontal);\n                }, function () {\n                  var i = w.verticalTextBox;\n                  return i && F(i), a.allowVerticalPlacement && !(M && M.box && M.box.length) && t.numVerticalGlyphVertices > 0 && i ? _l43(i, w.verticalIconBox, e.WritingMode.vertical) : {\n                    box: null,\n                    offscreen: null\n                  };\n                }), M && (C = M.box, I = M.offscreen);\n\n                var _h22 = _i187(M && M.box);\n\n                if (!C && _this85.prevPlacement) {\n                  var _e256 = _this85.prevPlacement.variableOffsets[t.crossTileID];\n                  _e256 && (_this85.variableOffsets[t.crossTileID] = _e256, _this85.markUsedJustification(a, _e256.anchor, t, _h22));\n                }\n              } else {\n                var _r218 = function _r218(i, o) {\n                  var r = a.getSymbolInstanceTextSize(d, t, _this85.transform.zoom, u),\n                      s = _this85.collisionIndex.placeCollisionBox(r, i, new e.Point(0, 0), g, c, n, m.predicate);\n\n                  return s && s.box && s.box.length && (_this85.markUsedOrientation(a, o, t), _this85.placedOrientations[t.crossTileID] = o), s;\n                };\n\n                _o68(function () {\n                  return _r218(O, e.WritingMode.horizontal);\n                }, function () {\n                  var i = w.verticalTextBox;\n                  return a.allowVerticalPlacement && t.numVerticalGlyphVertices > 0 && i ? (F(i), _r218(i, e.WritingMode.vertical)) : {\n                    box: null,\n                    offscreen: null\n                  };\n                }), _i187(M && M.box && M.box.length);\n              }\n            }\n\n            if (A = M, C = A && A.box && A.box.length > 0, I = A && A.offscreen, t.useRuntimeCollisionCircles) {\n              var _i189 = a.text.placedSymbolArray.get(t.centerJustifiedTextSymbolIndex),\n                  _c30 = e.evaluateSizeForFeature(a.textSizeData, d, _i189),\n                  _h23 = r.get(\"text-padding\");\n\n              D = _this85.collisionIndex.placeCollisionCircles(g, _i189, a.lineVertexArray, a.glyphOffsetArray, _c30, n, s, l, o, y, m.predicate, t.collisionCircleDiameter, _h23, _this85.retainedQueryData[a.bucketInstanceId].tileID), C = g || D.circles.length > 0 && !D.collisionDetected, I = I && D.offscreen;\n            }\n\n            if (w.iconFeatureIndex && (B = w.iconFeatureIndex), w.iconBox) {\n              var _t264 = function _t264(t) {\n                F(t);\n                var i = b && P ? ge(P.x, P.y, x, y, _this85.transform.angle) : new e.Point(0, 0),\n                    o = a.getSymbolInstanceIconSize(_, _this85.transform.zoom, u);\n                return _this85.collisionIndex.placeCollisionBox(o, t, i, v, c, n, m.predicate);\n              };\n\n              z && z.box && z.box.length && w.verticalIconBox ? (L = _t264(w.verticalIconBox), S = L.box.length > 0) : (L = _t264(w.iconBox), S = L.box.length > 0), I = I && L.offscreen;\n            }\n\n            var U = p || 0 === t.numHorizontalGlyphVertices && 0 === t.numVerticalGlyphVertices,\n                N = f || 0 === t.numIconVertices;\n\n            if (U || N ? N ? U || (S = S && C) : C = S && C : S = C = S && C, C && A && A.box && _this85.collisionIndex.insertCollisionBox(A.box, r.get(\"text-ignore-placement\"), a.bucketInstanceId, z && z.box && k ? k : R, m.ID), S && L && _this85.collisionIndex.insertCollisionBox(L.box, r.get(\"icon-ignore-placement\"), a.bucketInstanceId, B, m.ID), D && (C && _this85.collisionIndex.insertCollisionCircles(D.circles, r.get(\"text-ignore-placement\"), a.bucketInstanceId, R, m.ID), o)) {\n              var _e257 = a.bucketInstanceId;\n              var _t265 = _this85.collisionCircleArrays[_e257];\n              void 0 === _t265 && (_t265 = _this85.collisionCircleArrays[_e257] = new _e());\n\n              for (var _e258 = 0; _e258 < D.circles.length; _e258 += 4) {\n                _t265.circles.push(D.circles[_e258 + 0]), _t265.circles.push(D.circles[_e258 + 1]), _t265.circles.push(D.circles[_e258 + 2]), _t265.circles.push(D.collisionDetected ? 1 : 0);\n              }\n            }\n\n            _this85.placements[t.crossTileID] = new de(C || T, S || E, I || a.justReloaded), i[t.crossTileID] = !0;\n          };\n\n          if (w) {\n            var _e259 = a.getSortedSymbolIndexes(this.transform.angle);\n\n            for (var _t266 = _e259.length - 1; _t266 >= 0; --_t266) {\n              var _i190 = _e259[_t266];\n              C(a.symbolInstances.get(_i190), _i190, a.collisionArrays[_i190]);\n            }\n          } else for (var _e260 = t.symbolInstanceStart; _e260 < t.symbolInstanceEnd; _e260++) {\n            C(a.symbolInstances.get(_e260), _e260, a.collisionArrays[_e260]);\n          }\n\n          if (o && a.bucketInstanceId in this.collisionCircleArrays) {\n            var _t267 = this.collisionCircleArrays[a.bucketInstanceId];\n            e.invert(_t267.invProjMatrix, n), _t267.viewportMatrix = this.collisionIndex.getViewportMatrix();\n          }\n\n          a.justReloaded = !1;\n        }\n      }, {\n        key: \"markUsedJustification\",\n        value: function markUsedJustification(t, i, o, a) {\n          var r;\n          r = a === e.WritingMode.vertical ? o.verticalPlacedTextSymbolIndex : {\n            left: o.leftJustifiedTextSymbolIndex,\n            center: o.centerJustifiedTextSymbolIndex,\n            right: o.rightJustifiedTextSymbolIndex\n          }[e.getAnchorJustification(i)];\n          var n = [o.leftJustifiedTextSymbolIndex, o.centerJustifiedTextSymbolIndex, o.rightJustifiedTextSymbolIndex, o.verticalPlacedTextSymbolIndex];\n\n          for (var _i191 = 0, _n135 = n; _i191 < _n135.length; _i191++) {\n            var _e261 = _n135[_i191];\n            _e261 >= 0 && (t.text.placedSymbolArray.get(_e261).crossTileID = r >= 0 && _e261 !== r ? 0 : o.crossTileID);\n          }\n        }\n      }, {\n        key: \"markUsedOrientation\",\n        value: function markUsedOrientation(t, i, o) {\n          var a = i === e.WritingMode.horizontal || i === e.WritingMode.horizontalOnly ? i : 0,\n              r = i === e.WritingMode.vertical ? i : 0,\n              n = [o.leftJustifiedTextSymbolIndex, o.centerJustifiedTextSymbolIndex, o.rightJustifiedTextSymbolIndex];\n\n          for (var _i192 = 0, _n136 = n; _i192 < _n136.length; _i192++) {\n            var _e262 = _n136[_i192];\n            t.text.placedSymbolArray.get(_e262).placedOrientation = a;\n          }\n\n          o.verticalPlacedTextSymbolIndex && (t.text.placedSymbolArray.get(o.verticalPlacedTextSymbolIndex).placedOrientation = r);\n        }\n      }, {\n        key: \"commit\",\n        value: function commit(e) {\n          this.commitTime = e, this.zoomAtLastRecencyCheck = this.transform.zoom;\n          var t = this.prevPlacement;\n          var i = !1;\n          this.prevZoomAdjustment = t ? t.zoomAdjustment(this.transform.zoom) : 0;\n          var o = t ? t.symbolFadeChange(e) : 1,\n              a = t ? t.opacities : {},\n              r = t ? t.variableOffsets : {},\n              n = t ? t.placedOrientations : {};\n\n          for (var _e263 in this.placements) {\n            var _t268 = this.placements[_e263],\n                _r219 = a[_e263];\n            _r219 ? (this.opacities[_e263] = new ue(_r219, o, _t268.text, _t268.icon), i = i || _t268.text !== _r219.text.placed || _t268.icon !== _r219.icon.placed) : (this.opacities[_e263] = new ue(null, o, _t268.text, _t268.icon, _t268.skipFade), i = i || _t268.text || _t268.icon);\n          }\n\n          for (var _e264 in a) {\n            var _t269 = a[_e264];\n\n            if (!this.opacities[_e264]) {\n              var _a101 = new ue(_t269, o, !1, !1);\n\n              _a101.isHidden() || (this.opacities[_e264] = _a101, i = i || _t269.text.placed || _t269.icon.placed);\n            }\n          }\n\n          for (var _e265 in r) {\n            this.variableOffsets[_e265] || !this.opacities[_e265] || this.opacities[_e265].isHidden() || (this.variableOffsets[_e265] = r[_e265]);\n          }\n\n          for (var _e266 in n) {\n            this.placedOrientations[_e266] || !this.opacities[_e266] || this.opacities[_e266].isHidden() || (this.placedOrientations[_e266] = n[_e266]);\n          }\n\n          i ? this.lastPlacementChangeTime = e : \"number\" != typeof this.lastPlacementChangeTime && (this.lastPlacementChangeTime = t ? t.lastPlacementChangeTime : e);\n        }\n      }, {\n        key: \"updateLayerOpacities\",\n        value: function updateLayerOpacities(e, t) {\n          var i = {};\n\n          var _iterator175 = _createForOfIteratorHelper(t),\n              _step175;\n\n          try {\n            for (_iterator175.s(); !(_step175 = _iterator175.n()).done;) {\n              var _o69 = _step175.value;\n\n              var _t270 = _o69.getBucket(e);\n\n              _t270 && _o69.latestFeatureIndex && e.id === _t270.layerIds[0] && this.updateBucketOpacities(_t270, i, _o69.collisionBoxArray);\n            }\n          } catch (err) {\n            _iterator175.e(err);\n          } finally {\n            _iterator175.f();\n          }\n        }\n      }, {\n        key: \"updateBucketOpacities\",\n        value: function updateBucketOpacities(t, i, o) {\n          var _this86 = this;\n\n          t.hasTextData() && t.text.opacityVertexArray.clear(), t.hasIconData() && t.icon.opacityVertexArray.clear(), t.hasIconCollisionBoxData() && t.iconCollisionBox.collisionVertexArray.clear(), t.hasTextCollisionBoxData() && t.textCollisionBox.collisionVertexArray.clear();\n          var a = t.layers[0].layout,\n              r = new ue(null, 0, !1, !1, !0),\n              n = a.get(\"text-allow-overlap\"),\n              s = a.get(\"icon-allow-overlap\"),\n              l = a.get(\"text-variable-anchor\"),\n              c = \"map\" === a.get(\"text-rotation-alignment\"),\n              h = \"map\" === a.get(\"text-pitch-alignment\"),\n              u = \"none\" !== a.get(\"icon-text-fit\"),\n              d = new ue(null, 0, n && (s || !t.hasIconData() || a.get(\"icon-optional\")), s && (n || !t.hasTextData() || a.get(\"text-optional\")), !0);\n          !t.collisionArrays && o && (t.hasIconCollisionBoxData() || t.hasTextCollisionBoxData()) && t.deserializeCollisionBoxes(o);\n\n          var _ = function _(e, t, i) {\n            for (var _o70 = 0; _o70 < t / 4; _o70++) {\n              e.opacityVertexArray.emplaceBack(i);\n            }\n          };\n\n          var _loop7 = function _loop7(_o71) {\n            var a = t.symbolInstances.get(_o71),\n                n = a.numHorizontalGlyphVertices,\n                s = a.numVerticalGlyphVertices,\n                m = a.crossTileID;\n            var p = _this86.opacities[m];\n            i[m] ? p = r : p || (p = d, _this86.opacities[m] = p), i[m] = !0;\n            var f = a.numIconVertices > 0,\n                g = _this86.placedOrientations[a.crossTileID],\n                v = g === e.WritingMode.vertical,\n                x = g === e.WritingMode.horizontal || g === e.WritingMode.horizontalOnly;\n\n            if (n > 0 || s > 0) {\n              var _e268 = Ie(p.text);\n\n              _(t.text, n, v ? Pe : _e268), _(t.text, s, x ? Pe : _e268);\n\n              var _i193 = p.text.isHidden();\n\n              [a.rightJustifiedTextSymbolIndex, a.centerJustifiedTextSymbolIndex, a.leftJustifiedTextSymbolIndex].forEach(function (e) {\n                e >= 0 && (t.text.placedSymbolArray.get(e).hidden = _i193 || v ? 1 : 0);\n              }), a.verticalPlacedTextSymbolIndex >= 0 && (t.text.placedSymbolArray.get(a.verticalPlacedTextSymbolIndex).hidden = _i193 || x ? 1 : 0);\n              var _o72 = _this86.variableOffsets[a.crossTileID];\n              _o72 && _this86.markUsedJustification(t, _o72.anchor, a, g);\n              var _r220 = _this86.placedOrientations[a.crossTileID];\n              _r220 && (_this86.markUsedJustification(t, \"left\", a, _r220), _this86.markUsedOrientation(t, _r220, a));\n            }\n\n            if (f) {\n              var _e269 = Ie(p.icon),\n                  _i194 = !(u && a.verticalPlacedIconSymbolIndex && v);\n\n              a.placedIconSymbolIndex >= 0 && (_(t.icon, a.numIconVertices, _i194 ? _e269 : Pe), t.icon.placedSymbolArray.get(a.placedIconSymbolIndex).hidden = p.icon.isHidden()), a.verticalPlacedIconSymbolIndex >= 0 && (_(t.icon, a.numVerticalIconVertices, _i194 ? Pe : _e269), t.icon.placedSymbolArray.get(a.verticalPlacedIconSymbolIndex).hidden = p.icon.isHidden());\n            }\n\n            if (t.hasIconCollisionBoxData() || t.hasTextCollisionBoxData()) {\n              var _i195 = t.collisionArrays[_o71];\n\n              if (_i195) {\n                var _o73 = new e.Point(0, 0);\n\n                if (_i195.textBox || _i195.verticalTextBox) {\n                  var _e270 = !0;\n\n                  if (l) {\n                    var _t271 = _this86.variableOffsets[m];\n                    _t271 ? (_o73 = fe(_t271.anchor, _t271.width, _t271.height, _t271.textOffset, _t271.textBoxScale), c && _o73._rotate(h ? _this86.transform.angle : -_this86.transform.angle)) : _e270 = !1;\n                  }\n\n                  _i195.textBox && xe(t.textCollisionBox.collisionVertexArray, p.text.placed, !_e270 || v, _o73.x, _o73.y), _i195.verticalTextBox && xe(t.textCollisionBox.collisionVertexArray, p.text.placed, !_e270 || x, _o73.x, _o73.y);\n                }\n\n                var _a102 = Boolean(!x && _i195.verticalIconBox);\n\n                _i195.iconBox && xe(t.iconCollisionBox.collisionVertexArray, p.icon.placed, _a102, u ? _o73.x : 0, u ? _o73.y : 0), _i195.verticalIconBox && xe(t.iconCollisionBox.collisionVertexArray, p.icon.placed, !_a102, u ? _o73.x : 0, u ? _o73.y : 0);\n              }\n            }\n          };\n\n          for (var _o71 = 0; _o71 < t.symbolInstances.length; _o71++) {\n            _loop7(_o71);\n          }\n\n          if (t.sortFeatures(this.transform.angle), this.retainedQueryData[t.bucketInstanceId] && (this.retainedQueryData[t.bucketInstanceId].featureSortOrder = t.featureSortOrder), t.hasTextData() && t.text.opacityVertexBuffer && t.text.opacityVertexBuffer.updateData(t.text.opacityVertexArray), t.hasIconData() && t.icon.opacityVertexBuffer && t.icon.opacityVertexBuffer.updateData(t.icon.opacityVertexArray), t.hasIconCollisionBoxData() && t.iconCollisionBox.collisionVertexBuffer && t.iconCollisionBox.collisionVertexBuffer.updateData(t.iconCollisionBox.collisionVertexArray), t.hasTextCollisionBoxData() && t.textCollisionBox.collisionVertexBuffer && t.textCollisionBox.collisionVertexBuffer.updateData(t.textCollisionBox.collisionVertexArray), t.bucketInstanceId in this.collisionCircleArrays) {\n            var _e267 = this.collisionCircleArrays[t.bucketInstanceId];\n            t.placementInvProjMatrix = _e267.invProjMatrix, t.placementViewportMatrix = _e267.viewportMatrix, t.collisionCircleArray = _e267.circles, delete this.collisionCircleArrays[t.bucketInstanceId];\n          }\n        }\n      }, {\n        key: \"symbolFadeChange\",\n        value: function symbolFadeChange(e) {\n          return 0 === this.fadeDuration ? 1 : (e - this.commitTime) / this.fadeDuration + this.prevZoomAdjustment;\n        }\n      }, {\n        key: \"zoomAdjustment\",\n        value: function zoomAdjustment(e) {\n          return Math.max(0, (this.transform.zoom - e) / 1.5);\n        }\n      }, {\n        key: \"hasTransitions\",\n        value: function hasTransitions(e) {\n          return this.stale || e - this.lastPlacementChangeTime < this.fadeDuration;\n        }\n      }, {\n        key: \"stillRecent\",\n        value: function stillRecent(e, t) {\n          var i = this.zoomAtLastRecencyCheck === t ? 1 - this.zoomAdjustment(t) : 1;\n          return this.zoomAtLastRecencyCheck = t, this.commitTime + this.fadeDuration * i > e;\n        }\n      }, {\n        key: \"setStale\",\n        value: function setStale() {\n          this.stale = !0;\n        }\n      }]);\n\n      return ve;\n    }();\n\n    function xe(e, t, i, o, a) {\n      e.emplaceBack(t ? 1 : 0, i ? 1 : 0, o || 0, a || 0), e.emplaceBack(t ? 1 : 0, i ? 1 : 0, o || 0, a || 0), e.emplaceBack(t ? 1 : 0, i ? 1 : 0, o || 0, a || 0), e.emplaceBack(t ? 1 : 0, i ? 1 : 0, o || 0, a || 0);\n    }\n\n    var ye = Math.pow(2, 25),\n        be = Math.pow(2, 24),\n        we = Math.pow(2, 17),\n        Te = Math.pow(2, 16),\n        Ee = Math.pow(2, 9),\n        Ce = Math.pow(2, 8),\n        Se = Math.pow(2, 1);\n\n    function Ie(e) {\n      if (0 === e.opacity && !e.placed) return 0;\n      if (1 === e.opacity && e.placed) return 4294967295;\n      var t = e.placed ? 1 : 0,\n          i = Math.floor(127 * e.opacity);\n      return i * ye + t * be + i * we + t * Te + i * Ee + t * Ce + i * Se + t;\n    }\n\n    var Pe = 0;\n\n    var Me = /*#__PURE__*/function () {\n      function Me(e) {\n        _classCallCheck(this, Me);\n\n        this._sortAcrossTiles = \"viewport-y\" !== e.layout.get(\"symbol-z-order\") && void 0 !== e.layout.get(\"symbol-sort-key\").constantOr(1), this._currentTileIndex = 0, this._currentPartIndex = 0, this._seenCrossTileIDs = {}, this._bucketParts = [];\n      }\n\n      _createClass(Me, [{\n        key: \"continuePlacement\",\n        value: function continuePlacement(e, t, i, o, a) {\n          var r = this._bucketParts;\n\n          for (; this._currentTileIndex < e.length;) {\n            if (t.getBucketParts(r, o, e[this._currentTileIndex], this._sortAcrossTiles), this._currentTileIndex++, a()) return !0;\n          }\n\n          for (this._sortAcrossTiles && (this._sortAcrossTiles = !1, r.sort(function (e, t) {\n            return e.sortKey - t.sortKey;\n          })); this._currentPartIndex < r.length;) {\n            if (t.placeLayerBucketPart(r[this._currentPartIndex], this._seenCrossTileIDs, i), this._currentPartIndex++, a()) return !0;\n          }\n\n          return !1;\n        }\n      }]);\n\n      return Me;\n    }();\n\n    var ze = /*#__PURE__*/function () {\n      function ze(e, t, i, o, a, r, n) {\n        _classCallCheck(this, ze);\n\n        this.placement = new ve(e, a, r, n), this._currentPlacementIndex = t.length - 1, this._forceFullPlacement = i, this._showCollisionBoxes = o, this._done = !1;\n      }\n\n      _createClass(ze, [{\n        key: \"isDone\",\n        value: function isDone() {\n          return this._done;\n        }\n      }, {\n        key: \"continuePlacement\",\n        value: function continuePlacement(t, i, o) {\n          var _this87 = this;\n\n          var a = e.browser.now(),\n              r = function r() {\n            var t = e.browser.now() - a;\n            return !_this87._forceFullPlacement && t > 2;\n          };\n\n          for (; this._currentPlacementIndex >= 0;) {\n            var _e271 = i[t[this._currentPlacementIndex]],\n                _a103 = this.placement.collisionIndex.transform.zoom;\n\n            if (\"symbol\" === _e271.type && (!_e271.minzoom || _e271.minzoom <= _a103) && (!_e271.maxzoom || _e271.maxzoom > _a103)) {\n              if (this._inProgressLayer || (this._inProgressLayer = new Me(_e271)), this._inProgressLayer.continuePlacement(o[_e271.source], this.placement, this._showCollisionBoxes, _e271, r)) return;\n              delete this._inProgressLayer;\n            }\n\n            this._currentPlacementIndex--;\n          }\n\n          this._done = !0;\n        }\n      }, {\n        key: \"commit\",\n        value: function commit(e) {\n          return this.placement.commit(e), this.placement;\n        }\n      }]);\n\n      return ze;\n    }();\n\n    var Ae = 512 / e.EXTENT / 2;\n\n    var De = /*#__PURE__*/function () {\n      function De(e, t, i) {\n        _classCallCheck(this, De);\n\n        this.tileID = e, this.indexedSymbolInstances = {}, this.bucketInstanceId = i;\n\n        for (var _i196 = 0; _i196 < t.length; _i196++) {\n          var _o74 = t.get(_i196),\n              _a104 = _o74.key;\n\n          this.indexedSymbolInstances[_a104] || (this.indexedSymbolInstances[_a104] = []), this.indexedSymbolInstances[_a104].push({\n            crossTileID: _o74.crossTileID,\n            coord: this.getScaledCoordinates(_o74, e)\n          });\n        }\n      }\n\n      _createClass(De, [{\n        key: \"getScaledCoordinates\",\n        value: function getScaledCoordinates(t, i) {\n          var o = Ae / Math.pow(2, i.canonical.z - this.tileID.canonical.z);\n          return {\n            x: Math.floor((i.canonical.x * e.EXTENT + t.anchorX) * o),\n            y: Math.floor((i.canonical.y * e.EXTENT + t.anchorY) * o)\n          };\n        }\n      }, {\n        key: \"findMatches\",\n        value: function findMatches(e, t, i) {\n          var o = this.tileID.canonical.z < t.canonical.z ? 1 : Math.pow(2, this.tileID.canonical.z - t.canonical.z);\n\n          for (var _a105 = 0; _a105 < e.length; _a105++) {\n            var _r221 = e.get(_a105);\n\n            if (_r221.crossTileID) continue;\n            var _n137 = this.indexedSymbolInstances[_r221.key];\n            if (!_n137) continue;\n\n            var _s105 = this.getScaledCoordinates(_r221, t);\n\n            var _iterator176 = _createForOfIteratorHelper(_n137),\n                _step176;\n\n            try {\n              for (_iterator176.s(); !(_step176 = _iterator176.n()).done;) {\n                var _e272 = _step176.value;\n\n                if (Math.abs(_e272.coord.x - _s105.x) <= o && Math.abs(_e272.coord.y - _s105.y) <= o && !i[_e272.crossTileID]) {\n                  i[_e272.crossTileID] = !0, _r221.crossTileID = _e272.crossTileID;\n                  break;\n                }\n              }\n            } catch (err) {\n              _iterator176.e(err);\n            } finally {\n              _iterator176.f();\n            }\n          }\n        }\n      }]);\n\n      return De;\n    }();\n\n    var Le = /*#__PURE__*/function () {\n      function Le() {\n        _classCallCheck(this, Le);\n\n        this.maxCrossTileID = 0;\n      }\n\n      _createClass(Le, [{\n        key: \"generate\",\n        value: function generate() {\n          return ++this.maxCrossTileID;\n        }\n      }]);\n\n      return Le;\n    }();\n\n    var Re = /*#__PURE__*/function () {\n      function Re() {\n        _classCallCheck(this, Re);\n\n        this.indexes = {}, this.usedCrossTileIDs = {}, this.lng = 0;\n      }\n\n      _createClass(Re, [{\n        key: \"handleWrapJump\",\n        value: function handleWrapJump(e) {\n          var t = Math.round((e - this.lng) / 360);\n          if (0 !== t) for (var _e273 in this.indexes) {\n            var _i197 = this.indexes[_e273],\n                _o75 = {};\n\n            for (var _e274 in _i197) {\n              var _a106 = _i197[_e274];\n              _a106.tileID = _a106.tileID.unwrapTo(_a106.tileID.wrap + t), _o75[_a106.tileID.key] = _a106;\n            }\n\n            this.indexes[_e273] = _o75;\n          }\n          this.lng = e;\n        }\n      }, {\n        key: \"addBucket\",\n        value: function addBucket(e, t, i) {\n          if (this.indexes[e.overscaledZ] && this.indexes[e.overscaledZ][e.key]) {\n            if (this.indexes[e.overscaledZ][e.key].bucketInstanceId === t.bucketInstanceId) return !1;\n            this.removeBucketCrossTileIDs(e.overscaledZ, this.indexes[e.overscaledZ][e.key]);\n          }\n\n          for (var _e275 = 0; _e275 < t.symbolInstances.length; _e275++) {\n            t.symbolInstances.get(_e275).crossTileID = 0;\n          }\n\n          this.usedCrossTileIDs[e.overscaledZ] || (this.usedCrossTileIDs[e.overscaledZ] = {});\n          var o = this.usedCrossTileIDs[e.overscaledZ];\n\n          for (var _i198 in this.indexes) {\n            var _a107 = this.indexes[_i198];\n            if (Number(_i198) > e.overscaledZ) for (var _i199 in _a107) {\n              var _r222 = _a107[_i199];\n              _r222.tileID.isChildOf(e) && _r222.findMatches(t.symbolInstances, e, o);\n            } else {\n              var _r223 = _a107[e.scaledTo(Number(_i198)).key];\n\n              _r223 && _r223.findMatches(t.symbolInstances, e, o);\n            }\n          }\n\n          for (var _e276 = 0; _e276 < t.symbolInstances.length; _e276++) {\n            var _a108 = t.symbolInstances.get(_e276);\n\n            _a108.crossTileID || (_a108.crossTileID = i.generate(), o[_a108.crossTileID] = !0);\n          }\n\n          return void 0 === this.indexes[e.overscaledZ] && (this.indexes[e.overscaledZ] = {}), this.indexes[e.overscaledZ][e.key] = new De(e, t.symbolInstances, t.bucketInstanceId), !0;\n        }\n      }, {\n        key: \"removeBucketCrossTileIDs\",\n        value: function removeBucketCrossTileIDs(e, t) {\n          for (var _i200 in t.indexedSymbolInstances) {\n            var _iterator177 = _createForOfIteratorHelper(t.indexedSymbolInstances[_i200]),\n                _step177;\n\n            try {\n              for (_iterator177.s(); !(_step177 = _iterator177.n()).done;) {\n                var _o76 = _step177.value;\n                delete this.usedCrossTileIDs[e][_o76.crossTileID];\n              }\n            } catch (err) {\n              _iterator177.e(err);\n            } finally {\n              _iterator177.f();\n            }\n          }\n        }\n      }, {\n        key: \"removeStaleBuckets\",\n        value: function removeStaleBuckets(e) {\n          var t = !1;\n\n          for (var _i201 in this.indexes) {\n            var _o77 = this.indexes[_i201];\n\n            for (var _a109 in _o77) {\n              e[_o77[_a109].bucketInstanceId] || (this.removeBucketCrossTileIDs(_i201, _o77[_a109]), delete _o77[_a109], t = !0);\n            }\n          }\n\n          return t;\n        }\n      }]);\n\n      return Re;\n    }();\n\n    var ke = /*#__PURE__*/function () {\n      function ke() {\n        _classCallCheck(this, ke);\n\n        this.layerIndexes = {}, this.crossTileIDs = new Le(), this.maxBucketInstanceId = 0, this.bucketsInCurrentPlacement = {};\n      }\n\n      _createClass(ke, [{\n        key: \"addLayer\",\n        value: function addLayer(e, t, i) {\n          var o = this.layerIndexes[e.id];\n          void 0 === o && (o = this.layerIndexes[e.id] = new Re());\n          var a = !1;\n          var r = {};\n          o.handleWrapJump(i);\n\n          var _iterator178 = _createForOfIteratorHelper(t),\n              _step178;\n\n          try {\n            for (_iterator178.s(); !(_step178 = _iterator178.n()).done;) {\n              var _i202 = _step178.value;\n\n              var _t272 = _i202.getBucket(e);\n\n              _t272 && e.id === _t272.layerIds[0] && (_t272.bucketInstanceId || (_t272.bucketInstanceId = ++this.maxBucketInstanceId), o.addBucket(_i202.tileID, _t272, this.crossTileIDs) && (a = !0), r[_t272.bucketInstanceId] = !0);\n            }\n          } catch (err) {\n            _iterator178.e(err);\n          } finally {\n            _iterator178.f();\n          }\n\n          return o.removeStaleBuckets(r) && (a = !0), a;\n        }\n      }, {\n        key: \"pruneUnusedLayers\",\n        value: function pruneUnusedLayers(e) {\n          var t = {};\n          e.forEach(function (e) {\n            t[e] = !0;\n          });\n\n          for (var _e277 in this.layerIndexes) {\n            t[_e277] || delete this.layerIndexes[_e277];\n          }\n        }\n      }]);\n\n      return ke;\n    }();\n\n    var Be = function Be(t, i) {\n      return e.emitValidationErrors(t, i && i.filter(function (e) {\n        return \"source.canvas\" !== e.identifier;\n      }));\n    },\n        Fe = e.pick(U, [\"addLayer\", \"removeLayer\", \"setPaintProperty\", \"setLayoutProperty\", \"setFilter\", \"addSource\", \"removeSource\", \"setLayerZoomRange\", \"setLight\", \"setTransition\", \"setGeoJSONSourceData\", \"setTerrain\"]),\n        Oe = e.pick(U, [\"setCenter\", \"setZoom\", \"setBearing\", \"setPitch\"]),\n        Ue = function () {\n      var t = {},\n          i = e.styleSpec.$version;\n\n      for (var _o78 in e.styleSpec.$root) {\n        var _a110 = e.styleSpec.$root[_o78];\n\n        if (_a110.required) {\n          var _e278 = null;\n          _e278 = \"version\" === _o78 ? i : \"array\" === _a110.type ? [] : {}, null != _e278 && (t[_o78] = _e278);\n        }\n      }\n\n      return t;\n    }(),\n        Ne = {\n      fill: !0,\n      line: !0,\n      background: !0,\n      hillshade: !0,\n      raster: !0\n    };\n\n    var Ze = /*#__PURE__*/function (_e$Evented8) {\n      _inherits(Ze, _e$Evented8);\n\n      var _super112 = _createSuper(Ze);\n\n      function Ze(t) {\n        var _this88;\n\n        var i = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n        _classCallCheck(this, Ze);\n\n        _this88 = _super112.call(this), _this88.map = t, _this88.dispatcher = new g(B(), _assertThisInitialized(_this88)), _this88.imageManager = new u(), _this88.imageManager.setEventedParent(_assertThisInitialized(_this88)), _this88.glyphManager = new e.GlyphManager(t._requestManager, i.localFontFamily ? e.LocalGlyphMode.all : i.localIdeographFontFamily ? e.LocalGlyphMode.ideographs : e.LocalGlyphMode.none, i.localFontFamily || i.localIdeographFontFamily), _this88.lineAtlas = new f(256, 512), _this88.crossTileSymbolIndex = new ke(), _this88._layers = {}, _this88._num3DLayers = 0, _this88._numSymbolLayers = 0, _this88._numCircleLayers = 0, _this88._serializedLayers = {}, _this88._sourceCaches = {}, _this88._otherSourceCaches = {}, _this88._symbolSourceCaches = {}, _this88.zoomHistory = new e.ZoomHistory(), _this88._loaded = !1, _this88._availableImages = [], _this88._order = [], _this88._drapedFirstOrder = [], _this88._resetUpdates(), _this88.dispatcher.broadcast(\"setReferrer\", e.getReferrer());\n\n        var o = _assertThisInitialized(_this88);\n\n        _this88._rtlTextPluginCallback = Ze.registerForPluginStateChange(function (t) {\n          o.dispatcher.broadcast(\"syncRTLPluginState\", {\n            pluginStatus: t.pluginStatus,\n            pluginURL: t.pluginURL\n          }, function (t, i) {\n            if (e.triggerPluginCompletionEvent(t), i && i.every(function (e) {\n              return e;\n            })) for (var _e279 in o._sourceCaches) {\n              var _t273 = o._sourceCaches[_e279],\n                  _i203 = _t273.getSource().type;\n\n              \"vector\" !== _i203 && \"geojson\" !== _i203 || _t273.reload();\n            }\n          });\n        }), _this88.on(\"data\", function (e) {\n          if (\"source\" !== e.dataType || \"metadata\" !== e.sourceDataType) return;\n\n          var t = _this88.getSource(e.sourceId);\n\n          if (t && t.vectorLayerIds) for (var _e280 in _this88._layers) {\n            var _i204 = _this88._layers[_e280];\n            _i204.source === t.id && _this88._validateLayer(_i204);\n          }\n        });\n        return _this88;\n      }\n\n      _createClass(Ze, [{\n        key: \"loadURL\",\n        value: function loadURL(t) {\n          var _this89 = this;\n\n          var i = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n          this.fire(new e.Event(\"dataloading\", {\n            dataType: \"style\"\n          }));\n          var o = \"boolean\" == typeof i.validate ? i.validate : !e.isMapboxURL(t);\n          t = this.map._requestManager.normalizeStyleURL(t, i.accessToken);\n\n          var a = this.map._requestManager.transformRequest(t, e.ResourceType.Style);\n\n          this._request = e.getJSON(a, function (t, i) {\n            _this89._request = null, t ? _this89.fire(new e.ErrorEvent(t)) : i && _this89._load(i, o);\n          });\n        }\n      }, {\n        key: \"loadJSON\",\n        value: function loadJSON(t) {\n          var _this90 = this;\n\n          var i = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n          this.fire(new e.Event(\"dataloading\", {\n            dataType: \"style\"\n          })), this._request = e.browser.frame(function () {\n            _this90._request = null, _this90._load(t, !1 !== i.validate);\n          });\n        }\n      }, {\n        key: \"loadEmpty\",\n        value: function loadEmpty() {\n          this.fire(new e.Event(\"dataloading\", {\n            dataType: \"style\"\n          })), this._load(Ue, !1);\n        }\n      }, {\n        key: \"_updateLayerCount\",\n        value: function _updateLayerCount(e, t) {\n          var i = t ? 1 : -1;\n          e.is3D() && (this._num3DLayers += i), \"circle\" === e.type && (this._numCircleLayers += i), \"symbol\" === e.type && (this._numSymbolLayers += i);\n        }\n      }, {\n        key: \"_load\",\n        value: function _load(t, i) {\n          if (i && Be(this, e.validateStyle(t))) return;\n          this._loaded = !0, this.stylesheet = t;\n\n          for (var _e281 in t.sources) {\n            this.addSource(_e281, t.sources[_e281], {\n              validate: !1\n            });\n          }\n\n          this._changed = !1, t.sprite ? this._loadSprite(t.sprite) : (this.imageManager.setLoaded(!0), this.dispatcher.broadcast(\"spriteLoaded\", !0)), this.glyphManager.setURL(t.glyphs);\n          var o = O(this.stylesheet.layers);\n          this._order = o.map(function (e) {\n            return e.id;\n          }), this._layers = {}, this._serializedLayers = {};\n\n          var _iterator179 = _createForOfIteratorHelper(o),\n              _step179;\n\n          try {\n            for (_iterator179.s(); !(_step179 = _iterator179.n()).done;) {\n              var _t274 = _step179.value;\n              _t274 = e.createStyleLayer(_t274), _t274.setEventedParent(this, {\n                layer: {\n                  id: _t274.id\n                }\n              }), this._layers[_t274.id] = _t274, this._serializedLayers[_t274.id] = _t274.serialize(), this._updateLayerCount(_t274, !0);\n            }\n          } catch (err) {\n            _iterator179.e(err);\n          } finally {\n            _iterator179.f();\n          }\n\n          this.dispatcher.broadcast(\"setLayers\", this._serializeLayers(this._order)), this.light = new _(this.stylesheet.light), this.stylesheet.terrain && this._createTerrain(this.stylesheet.terrain), this._updateDrapeFirstLayers(), this.fire(new e.Event(\"data\", {\n            dataType: \"style\"\n          })), this.fire(new e.Event(\"style.load\"));\n        }\n      }, {\n        key: \"_loadSprite\",\n        value: function _loadSprite(t) {\n          var _this91 = this;\n\n          this._spriteRequest = function (t, i, o) {\n            var a, r, n;\n            var s = e.browser.devicePixelRatio > 1 ? \"@2x\" : \"\";\n            var l = e.getJSON(i.transformRequest(i.normalizeSpriteURL(t, s, \".json\"), e.ResourceType.SpriteJSON), function (e, t) {\n              l = null, n || (n = e, a = t, h());\n            }),\n                c = e.getImage(i.transformRequest(i.normalizeSpriteURL(t, s, \".png\"), e.ResourceType.SpriteImage), function (e, t) {\n              c = null, n || (n = e, r = t, h());\n            });\n\n            function h() {\n              if (n) o(n);else if (a && r) {\n                var _t275 = e.browser.getImageData(r),\n                    _i205 = {};\n\n                for (var _o79 in a) {\n                  var _a$_o = a[_o79],\n                      _r224 = _a$_o.width,\n                      _n138 = _a$_o.height,\n                      _s106 = _a$_o.x,\n                      _l44 = _a$_o.y,\n                      _c31 = _a$_o.sdf,\n                      _h24 = _a$_o.pixelRatio,\n                      _u37 = _a$_o.stretchX,\n                      _d16 = _a$_o.stretchY,\n                      _11 = _a$_o.content,\n                      _m14 = new e.RGBAImage({\n                    width: _r224,\n                    height: _n138\n                  });\n\n                  e.RGBAImage.copy(_t275, _m14, {\n                    x: _s106,\n                    y: _l44\n                  }, {\n                    x: 0,\n                    y: 0\n                  }, {\n                    width: _r224,\n                    height: _n138\n                  }), _i205[_o79] = {\n                    data: _m14,\n                    pixelRatio: _h24,\n                    sdf: _c31,\n                    stretchX: _u37,\n                    stretchY: _d16,\n                    content: _11\n                  };\n                }\n\n                o(null, _i205);\n              }\n            }\n\n            return {\n              cancel: function cancel() {\n                l && (l.cancel(), l = null), c && (c.cancel(), c = null);\n              }\n            };\n          }(t, this.map._requestManager, function (t, i) {\n            if (_this91._spriteRequest = null, t) _this91.fire(new e.ErrorEvent(t));else if (i) for (var _e282 in i) {\n              _this91.imageManager.addImage(_e282, i[_e282]);\n            }\n            _this91.imageManager.setLoaded(!0), _this91._availableImages = _this91.imageManager.listImages(), _this91.dispatcher.broadcast(\"setImages\", _this91._availableImages), _this91.dispatcher.broadcast(\"spriteLoaded\", !0), _this91.fire(new e.Event(\"data\", {\n              dataType: \"style\"\n            }));\n          });\n        }\n      }, {\n        key: \"_validateLayer\",\n        value: function _validateLayer(t) {\n          var i = this.getSource(t.source);\n          if (!i) return;\n          var o = t.sourceLayer;\n          o && (\"geojson\" === i.type || i.vectorLayerIds && -1 === i.vectorLayerIds.indexOf(o)) && this.fire(new e.ErrorEvent(new Error(\"Source layer \\\"\".concat(o, \"\\\" \") + \"does not exist on source \\\"\".concat(i.id, \"\\\" \") + \"as specified by style layer \\\"\".concat(t.id, \"\\\"\"))));\n        }\n      }, {\n        key: \"loaded\",\n        value: function loaded() {\n          if (!this._loaded) return !1;\n          if (Object.keys(this._updatedSources).length) return !1;\n\n          for (var _e283 in this._sourceCaches) {\n            if (!this._sourceCaches[_e283].loaded()) return !1;\n          }\n\n          return !!this.imageManager.isLoaded();\n        }\n      }, {\n        key: \"_serializeLayers\",\n        value: function _serializeLayers(e) {\n          var t = [];\n\n          var _iterator180 = _createForOfIteratorHelper(e),\n              _step180;\n\n          try {\n            for (_iterator180.s(); !(_step180 = _iterator180.n()).done;) {\n              var _i206 = _step180.value;\n              var _e284 = this._layers[_i206];\n              \"custom\" !== _e284.type && t.push(_e284.serialize());\n            }\n          } catch (err) {\n            _iterator180.e(err);\n          } finally {\n            _iterator180.f();\n          }\n\n          return t;\n        }\n      }, {\n        key: \"hasTransitions\",\n        value: function hasTransitions() {\n          if (this.light && this.light.hasTransition()) return !0;\n\n          for (var _e285 in this._sourceCaches) {\n            if (this._sourceCaches[_e285].hasTransition()) return !0;\n          }\n\n          for (var _e286 in this._layers) {\n            if (this._layers[_e286].hasTransition()) return !0;\n          }\n\n          return !1;\n        }\n      }, {\n        key: \"order\",\n        get: function get() {\n          return this.map._optimizeForTerrain && this.terrain ? this._drapedFirstOrder : this._order;\n        }\n      }, {\n        key: \"isLayerDraped\",\n        value: function isLayerDraped(e) {\n          return !!this.terrain && Ne[e.type];\n        }\n      }, {\n        key: \"_checkLoaded\",\n        value: function _checkLoaded() {\n          if (!this._loaded) throw new Error(\"Style is not done loading\");\n        }\n      }, {\n        key: \"update\",\n        value: function update(t) {\n          if (!this._loaded) return;\n          var i = this._changed;\n\n          if (this._changed) {\n            var _e287 = Object.keys(this._updatedLayers),\n                _i207 = Object.keys(this._removedLayers);\n\n            (_e287.length || _i207.length) && this._updateWorkerLayers(_e287, _i207);\n\n            for (var _e288 in this._updatedSources) {\n              var _t276 = this._updatedSources[_e288];\n              \"reload\" === _t276 ? this._reloadSource(_e288) : \"clear\" === _t276 && this._clearSource(_e288);\n            }\n\n            this._updateTilesForChangedImages();\n\n            for (var _e289 in this._updatedPaintProps) {\n              this._layers[_e289].updateTransitions(t);\n            }\n\n            this.light.updateTransitions(t), this._resetUpdates();\n          }\n\n          var o = {};\n\n          for (var _e290 in this._sourceCaches) {\n            var _t277 = this._sourceCaches[_e290];\n            o[_e290] = _t277.used, _t277.used = !1;\n          }\n\n          var _iterator181 = _createForOfIteratorHelper(this._order),\n              _step181;\n\n          try {\n            for (_iterator181.s(); !(_step181 = _iterator181.n()).done;) {\n              var _e291 = _step181.value;\n              var _i209 = this._layers[_e291];\n\n              if (_i209.recalculate(t, this._availableImages), !_i209.isHidden(t.zoom)) {\n                var _e292 = this._getLayerSourceCache(_i209);\n\n                _e292 && (_e292.used = !0);\n              }\n\n              var _o80 = this.map.painter;\n\n              if (_o80) {\n                var _e293 = _i209.getProgramIds();\n\n                if (!_e293) continue;\n\n                var _a111 = _i209.getProgramConfiguration(t.zoom);\n\n                var _iterator182 = _createForOfIteratorHelper(_e293),\n                    _step182;\n\n                try {\n                  for (_iterator182.s(); !(_step182 = _iterator182.n()).done;) {\n                    var _t279 = _step182.value;\n\n                    _o80.useProgram(_t279, _a111);\n                  }\n                } catch (err) {\n                  _iterator182.e(err);\n                } finally {\n                  _iterator182.f();\n                }\n              }\n            }\n          } catch (err) {\n            _iterator181.e(err);\n          } finally {\n            _iterator181.f();\n          }\n\n          for (var _t278 in o) {\n            var _i208 = this._sourceCaches[_t278];\n            o[_t278] !== _i208.used && _i208.getSource().fire(new e.Event(\"data\", {\n              sourceDataType: \"visibility\",\n              dataType: \"source\",\n              sourceId: _i208.getSource().id\n            }));\n          }\n\n          this.light.recalculate(t), this.terrain && this.terrain.recalculate(t), this.z = t.zoom, i && this.fire(new e.Event(\"data\", {\n            dataType: \"style\"\n          }));\n        }\n      }, {\n        key: \"_updateTilesForChangedImages\",\n        value: function _updateTilesForChangedImages() {\n          var e = Object.keys(this._changedImages);\n\n          if (e.length) {\n            for (var _t280 in this._sourceCaches) {\n              this._sourceCaches[_t280].reloadTilesForDependencies([\"icons\", \"patterns\"], e);\n            }\n\n            this._changedImages = {};\n          }\n        }\n      }, {\n        key: \"_updateWorkerLayers\",\n        value: function _updateWorkerLayers(e, t) {\n          this.dispatcher.broadcast(\"updateLayers\", {\n            layers: this._serializeLayers(e),\n            removedIds: t\n          });\n        }\n      }, {\n        key: \"_resetUpdates\",\n        value: function _resetUpdates() {\n          this._changed = !1, this._updatedLayers = {}, this._removedLayers = {}, this._updatedSources = {}, this._updatedPaintProps = {}, this._changedImages = {};\n        }\n      }, {\n        key: \"setState\",\n        value: function setState(t) {\n          var _this92 = this;\n\n          if (this._checkLoaded(), Be(this, e.validateStyle(t))) return !1;\n          (t = e.clone$1(t)).layers = O(t.layers);\n\n          var i = function (t, i) {\n            if (!t) return [{\n              command: U.setStyle,\n              args: [i]\n            }];\n            var o = [];\n\n            try {\n              if (!e.deepEqual(t.version, i.version)) return [{\n                command: U.setStyle,\n                args: [i]\n              }];\n              e.deepEqual(t.center, i.center) || o.push({\n                command: U.setCenter,\n                args: [i.center]\n              }), e.deepEqual(t.zoom, i.zoom) || o.push({\n                command: U.setZoom,\n                args: [i.zoom]\n              }), e.deepEqual(t.bearing, i.bearing) || o.push({\n                command: U.setBearing,\n                args: [i.bearing]\n              }), e.deepEqual(t.pitch, i.pitch) || o.push({\n                command: U.setPitch,\n                args: [i.pitch]\n              }), e.deepEqual(t.sprite, i.sprite) || o.push({\n                command: U.setSprite,\n                args: [i.sprite]\n              }), e.deepEqual(t.glyphs, i.glyphs) || o.push({\n                command: U.setGlyphs,\n                args: [i.glyphs]\n              }), e.deepEqual(t.transition, i.transition) || o.push({\n                command: U.setTransition,\n                args: [i.transition]\n              }), e.deepEqual(t.light, i.light) || o.push({\n                command: U.setLight,\n                args: [i.light]\n              });\n              var _a112 = {},\n                  _r225 = [];\n              !function (t, i, o, a) {\n                var r;\n\n                for (r in i = i || {}, t = t || {}) {\n                  t.hasOwnProperty(r) && (i.hasOwnProperty(r) || Z(r, o, a));\n                }\n\n                for (r in i) {\n                  i.hasOwnProperty(r) && (t.hasOwnProperty(r) ? e.deepEqual(t[r], i[r]) || (\"geojson\" === t[r].type && \"geojson\" === i[r].type && V(t, i, r) ? o.push({\n                    command: U.setGeoJSONSourceData,\n                    args: [r, i[r].data]\n                  }) : G(r, i, o, a)) : N(r, i, o));\n                }\n              }(t.sources, i.sources, _r225, _a112);\n              var _n139 = [];\n              t.layers && t.layers.forEach(function (e) {\n                _a112[e.source] ? o.push({\n                  command: U.removeLayer,\n                  args: [e.id]\n                }) : _n139.push(e);\n              });\n              var _s107 = t.terrain;\n              _s107 && _a112[_s107.source] && (o.push({\n                command: U.setTerrain,\n                args: [void 0]\n              }), _s107 = void 0), o = o.concat(_r225), e.deepEqual(_s107, i.terrain) || o.push({\n                command: U.setTerrain,\n                args: [i.terrain]\n              }), function (t, i, o) {\n                i = i || [];\n                var a = (t = t || []).map(j),\n                    r = i.map(j),\n                    n = t.reduce($, {}),\n                    s = i.reduce($, {}),\n                    l = a.slice(),\n                    c = Object.create(null);\n\n                var h, u, d, _, m, p, f;\n\n                for (h = 0, u = 0; h < a.length; h++) {\n                  d = a[h], s.hasOwnProperty(d) ? u++ : (o.push({\n                    command: U.removeLayer,\n                    args: [d]\n                  }), l.splice(l.indexOf(d, u), 1));\n                }\n\n                for (h = 0, u = 0; h < r.length; h++) {\n                  d = r[r.length - 1 - h], l[l.length - 1 - h] !== d && (n.hasOwnProperty(d) ? (o.push({\n                    command: U.removeLayer,\n                    args: [d]\n                  }), l.splice(l.lastIndexOf(d, l.length - u), 1)) : u++, p = l[l.length - h], o.push({\n                    command: U.addLayer,\n                    args: [s[d], p]\n                  }), l.splice(l.length - h, 0, d), c[d] = !0);\n                }\n\n                for (h = 0; h < r.length; h++) {\n                  if (d = r[h], _ = n[d], m = s[d], !c[d] && !e.deepEqual(_, m)) if (e.deepEqual(_.source, m.source) && e.deepEqual(_[\"source-layer\"], m[\"source-layer\"]) && e.deepEqual(_.type, m.type)) {\n                    for (f in q(_.layout, m.layout, o, d, null, U.setLayoutProperty), q(_.paint, m.paint, o, d, null, U.setPaintProperty), e.deepEqual(_.filter, m.filter) || o.push({\n                      command: U.setFilter,\n                      args: [d, m.filter]\n                    }), e.deepEqual(_.minzoom, m.minzoom) && e.deepEqual(_.maxzoom, m.maxzoom) || o.push({\n                      command: U.setLayerZoomRange,\n                      args: [d, m.minzoom, m.maxzoom]\n                    }), _) {\n                      _.hasOwnProperty(f) && \"layout\" !== f && \"paint\" !== f && \"filter\" !== f && \"metadata\" !== f && \"minzoom\" !== f && \"maxzoom\" !== f && (0 === f.indexOf(\"paint.\") ? q(_[f], m[f], o, d, f.slice(6), U.setPaintProperty) : e.deepEqual(_[f], m[f]) || o.push({\n                        command: U.setLayerProperty,\n                        args: [d, f, m[f]]\n                      }));\n                    }\n\n                    for (f in m) {\n                      m.hasOwnProperty(f) && !_.hasOwnProperty(f) && \"layout\" !== f && \"paint\" !== f && \"filter\" !== f && \"metadata\" !== f && \"minzoom\" !== f && \"maxzoom\" !== f && (0 === f.indexOf(\"paint.\") ? q(_[f], m[f], o, d, f.slice(6), U.setPaintProperty) : e.deepEqual(_[f], m[f]) || o.push({\n                        command: U.setLayerProperty,\n                        args: [d, f, m[f]]\n                      }));\n                    }\n                  } else o.push({\n                    command: U.removeLayer,\n                    args: [d]\n                  }), p = l[l.lastIndexOf(d) + 1], o.push({\n                    command: U.addLayer,\n                    args: [m, p]\n                  });\n                }\n              }(_n139, i.layers, o);\n            } catch (e) {\n              console.warn(\"Unable to compute style diff:\", e), o = [{\n                command: U.setStyle,\n                args: [i]\n              }];\n            }\n\n            return o;\n          }(this.serialize(), t).filter(function (e) {\n            return !(e.command in Oe);\n          });\n\n          if (0 === i.length) return !1;\n          var o = i.filter(function (e) {\n            return !(e.command in Fe);\n          });\n          if (o.length > 0) throw new Error(\"Unimplemented: \".concat(o.map(function (e) {\n            return e.command;\n          }).join(\", \"), \".\"));\n          return i.forEach(function (e) {\n            \"setTransition\" !== e.command && _this92[e.command].apply(_this92, e.args);\n          }), this.stylesheet = t, !0;\n        }\n      }, {\n        key: \"addImage\",\n        value: function addImage(t, i) {\n          if (this.getImage(t)) return this.fire(new e.ErrorEvent(new Error(\"An image with this name already exists.\")));\n          this.imageManager.addImage(t, i), this._afterImageUpdated(t);\n        }\n      }, {\n        key: \"updateImage\",\n        value: function updateImage(e, t) {\n          this.imageManager.updateImage(e, t);\n        }\n      }, {\n        key: \"getImage\",\n        value: function getImage(e) {\n          return this.imageManager.getImage(e);\n        }\n      }, {\n        key: \"removeImage\",\n        value: function removeImage(t) {\n          if (!this.getImage(t)) return this.fire(new e.ErrorEvent(new Error(\"No image with this name exists.\")));\n          this.imageManager.removeImage(t), this._afterImageUpdated(t);\n        }\n      }, {\n        key: \"_afterImageUpdated\",\n        value: function _afterImageUpdated(t) {\n          this._availableImages = this.imageManager.listImages(), this._changedImages[t] = !0, this._changed = !0, this.dispatcher.broadcast(\"setImages\", this._availableImages), this.fire(new e.Event(\"data\", {\n            dataType: \"style\"\n          }));\n        }\n      }, {\n        key: \"listImages\",\n        value: function listImages() {\n          return this._checkLoaded(), this.imageManager.listImages();\n        }\n      }, {\n        key: \"addSource\",\n        value: function addSource(t, i) {\n          var _this93 = this;\n\n          var o = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n          if (this._checkLoaded(), void 0 !== this.getSource(t)) throw new Error(\"There is already a source with this ID\");\n          if (!i.type) throw new Error(\"The type property must be defined, but only the following properties were given: \".concat(Object.keys(i).join(\", \"), \".\"));\n          if ([\"vector\", \"raster\", \"geojson\", \"video\", \"image\"].indexOf(i.type) >= 0 && this._validate(e.validateStyle.source, \"sources.\".concat(t), i, null, o)) return;\n          this.map && this.map._collectResourceTiming && (i.collectResourceTiming = !0);\n          var a = I(t, i, this.dispatcher, this);\n          a.setEventedParent(this, function () {\n            return {\n              isSourceLoaded: _this93.loaded(),\n              source: a.serialize(),\n              sourceId: t\n            };\n          });\n\n          var r = function r(i) {\n            var o = (i ? \"symbol:\" : \"other:\") + t,\n                r = _this93._sourceCaches[o] = new e.SourceCache(o, a, i);\n            (i ? _this93._symbolSourceCaches : _this93._otherSourceCaches)[t] = r, r.style = _this93, r.onAdd(_this93.map);\n          };\n\n          r(!1), \"vector\" !== i.type && \"geojson\" !== i.type || r(!0), a.onAdd && a.onAdd(this.map), this._changed = !0;\n        }\n      }, {\n        key: \"removeSource\",\n        value: function removeSource(t) {\n          this._checkLoaded();\n\n          var i = this.getSource(t);\n          if (void 0 === i) throw new Error(\"There is no source with this ID\");\n\n          for (var _i210 in this._layers) {\n            if (this._layers[_i210].source === t) return this.fire(new e.ErrorEvent(new Error(\"Source \\\"\".concat(t, \"\\\" cannot be removed while layer \\\"\").concat(_i210, \"\\\" is using it.\"))));\n          }\n\n          if (this.terrain && this.terrain.get().source === t) return this.fire(new e.ErrorEvent(new Error(\"Source \\\"\".concat(t, \"\\\" cannot be removed while terrain is using it.\"))));\n\n          var o = this._getSourceCaches(t);\n\n          var _iterator183 = _createForOfIteratorHelper(o),\n              _step183;\n\n          try {\n            for (_iterator183.s(); !(_step183 = _iterator183.n()).done;) {\n              var _t281 = _step183.value;\n              delete this._sourceCaches[_t281.id], delete this._updatedSources[_t281.id], _t281.fire(new e.Event(\"data\", {\n                sourceDataType: \"metadata\",\n                dataType: \"source\",\n                sourceId: _t281.getSource().id\n              })), _t281.setEventedParent(null), _t281.clearTiles();\n            }\n          } catch (err) {\n            _iterator183.e(err);\n          } finally {\n            _iterator183.f();\n          }\n\n          delete this._otherSourceCaches[t], delete this._symbolSourceCaches[t], i.setEventedParent(null), i.onRemove && i.onRemove(this.map), this._changed = !0;\n        }\n      }, {\n        key: \"setGeoJSONSourceData\",\n        value: function setGeoJSONSourceData(e, t) {\n          this._checkLoaded(), this.getSource(e).setData(t), this._changed = !0;\n        }\n      }, {\n        key: \"getSource\",\n        value: function getSource(e) {\n          var t = this._getSourceCache(e);\n\n          return t && t.getSource();\n        }\n      }, {\n        key: \"addLayer\",\n        value: function addLayer(t, i) {\n          var o = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n\n          this._checkLoaded();\n\n          var a = t.id;\n          if (this.getLayer(a)) return void this.fire(new e.ErrorEvent(new Error(\"Layer with id \\\"\".concat(a, \"\\\" already exists on this map\"))));\n          var r;\n\n          if (\"custom\" === t.type) {\n            if (Be(this, e.validateCustomStyleLayer(t))) return;\n            r = e.createStyleLayer(t);\n          } else {\n            if (\"object\" == _typeof(t.source) && (this.addSource(a, t.source), t = e.clone$1(t), t = e.extend(t, {\n              source: a\n            })), this._validate(e.validateStyle.layer, \"layers.\".concat(a), t, {\n              arrayIndex: -1\n            }, o)) return;\n            r = e.createStyleLayer(t), this._validateLayer(r), r.setEventedParent(this, {\n              layer: {\n                id: a\n              }\n            }), this._serializedLayers[r.id] = r.serialize(), this._updateLayerCount(r, !0);\n          }\n\n          var n = i ? this._order.indexOf(i) : this._order.length;\n          if (i && -1 === n) return void this.fire(new e.ErrorEvent(new Error(\"Layer with id \\\"\".concat(i, \"\\\" does not exist on this map.\"))));\n          this._order.splice(n, 0, a), this._layerOrderChanged = !0, this._layers[a] = r;\n\n          var s = this._getLayerSourceCache(r);\n\n          if (this._removedLayers[a] && r.source && s && \"custom\" !== r.type) {\n            var _e294 = this._removedLayers[a];\n            delete this._removedLayers[a], _e294.type !== r.type ? this._updatedSources[r.source] = \"clear\" : (this._updatedSources[r.source] = \"reload\", s.pause());\n          }\n\n          this._updateLayer(r), r.onAdd && r.onAdd(this.map), this._updateDrapeFirstLayers();\n        }\n      }, {\n        key: \"moveLayer\",\n        value: function moveLayer(t, i) {\n          if (this._checkLoaded(), this._changed = !0, !this._layers[t]) return void this.fire(new e.ErrorEvent(new Error(\"The layer '\".concat(t, \"' does not exist in the map's style and cannot be moved.\"))));\n          if (t === i) return;\n\n          var o = this._order.indexOf(t);\n\n          this._order.splice(o, 1);\n\n          var a = i ? this._order.indexOf(i) : this._order.length;\n          i && -1 === a ? this.fire(new e.ErrorEvent(new Error(\"Layer with id \\\"\".concat(i, \"\\\" does not exist on this map.\")))) : (this._order.splice(a, 0, t), this._layerOrderChanged = !0, this._updateDrapeFirstLayers());\n        }\n      }, {\n        key: \"removeLayer\",\n        value: function removeLayer(t) {\n          this._checkLoaded();\n\n          var i = this._layers[t];\n          if (!i) return void this.fire(new e.ErrorEvent(new Error(\"The layer '\".concat(t, \"' does not exist in the map's style and cannot be removed.\"))));\n          i.setEventedParent(null), this._updateLayerCount(i, !1);\n\n          var o = this._order.indexOf(t);\n\n          this._order.splice(o, 1), this._layerOrderChanged = !0, this._changed = !0, this._removedLayers[t] = i, delete this._layers[t], delete this._serializedLayers[t], delete this._updatedLayers[t], delete this._updatedPaintProps[t], i.onRemove && i.onRemove(this.map), this._updateDrapeFirstLayers();\n        }\n      }, {\n        key: \"getLayer\",\n        value: function getLayer(e) {\n          return this._layers[e];\n        }\n      }, {\n        key: \"hasLayer\",\n        value: function hasLayer(e) {\n          return e in this._layers;\n        }\n      }, {\n        key: \"hasLayerType\",\n        value: function hasLayerType(e) {\n          for (var _t282 in this._layers) {\n            if (this._layers[_t282].type === e) return !0;\n          }\n\n          return !1;\n        }\n      }, {\n        key: \"setLayerZoomRange\",\n        value: function setLayerZoomRange(t, i, o) {\n          this._checkLoaded();\n\n          var a = this.getLayer(t);\n          a ? a.minzoom === i && a.maxzoom === o || (null != i && (a.minzoom = i), null != o && (a.maxzoom = o), this._updateLayer(a)) : this.fire(new e.ErrorEvent(new Error(\"The layer '\".concat(t, \"' does not exist in the map's style and cannot have zoom extent.\"))));\n        }\n      }, {\n        key: \"setFilter\",\n        value: function setFilter(t, i) {\n          var o = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n\n          this._checkLoaded();\n\n          var a = this.getLayer(t);\n\n          if (a) {\n            if (!e.deepEqual(a.filter, i)) return null == i ? (a.filter = void 0, void this._updateLayer(a)) : void (this._validate(e.validateStyle.filter, \"layers.\".concat(a.id, \".filter\"), i, null, o) || (a.filter = e.clone$1(i), this._updateLayer(a)));\n          } else this.fire(new e.ErrorEvent(new Error(\"The layer '\".concat(t, \"' does not exist in the map's style and cannot be filtered.\"))));\n        }\n      }, {\n        key: \"getFilter\",\n        value: function getFilter(t) {\n          return e.clone$1(this.getLayer(t).filter);\n        }\n      }, {\n        key: \"setLayoutProperty\",\n        value: function setLayoutProperty(t, i, o) {\n          var a = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};\n\n          this._checkLoaded();\n\n          var r = this.getLayer(t);\n          r ? e.deepEqual(r.getLayoutProperty(i), o) || (r.setLayoutProperty(i, o, a), this._updateLayer(r)) : this.fire(new e.ErrorEvent(new Error(\"The layer '\".concat(t, \"' does not exist in the map's style and cannot be styled.\"))));\n        }\n      }, {\n        key: \"getLayoutProperty\",\n        value: function getLayoutProperty(t, i) {\n          var o = this.getLayer(t);\n          if (o) return o.getLayoutProperty(i);\n          this.fire(new e.ErrorEvent(new Error(\"The layer '\".concat(t, \"' does not exist in the map's style.\"))));\n        }\n      }, {\n        key: \"setPaintProperty\",\n        value: function setPaintProperty(t, i, o) {\n          var a = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};\n\n          this._checkLoaded();\n\n          var r = this.getLayer(t);\n          r ? e.deepEqual(r.getPaintProperty(i), o) || (r.setPaintProperty(i, o, a) && this._updateLayer(r), this._changed = !0, this._updatedPaintProps[t] = !0) : this.fire(new e.ErrorEvent(new Error(\"The layer '\".concat(t, \"' does not exist in the map's style and cannot be styled.\"))));\n        }\n      }, {\n        key: \"getPaintProperty\",\n        value: function getPaintProperty(e, t) {\n          return this.getLayer(e).getPaintProperty(t);\n        }\n      }, {\n        key: \"setFeatureState\",\n        value: function setFeatureState(t, i) {\n          this._checkLoaded();\n\n          var o = t.source,\n              a = t.sourceLayer,\n              r = this.getSource(o);\n          if (void 0 === r) return void this.fire(new e.ErrorEvent(new Error(\"The source '\".concat(o, \"' does not exist in the map's style.\"))));\n          var n = r.type;\n          if (\"geojson\" === n && a) return void this.fire(new e.ErrorEvent(new Error(\"GeoJSON sources cannot have a sourceLayer parameter.\")));\n          if (\"vector\" === n && !a) return void this.fire(new e.ErrorEvent(new Error(\"The sourceLayer parameter must be provided for vector source types.\")));\n          void 0 === t.id && this.fire(new e.ErrorEvent(new Error(\"The feature id parameter must be provided.\")));\n\n          var s = this._getSourceCaches(o);\n\n          var _iterator184 = _createForOfIteratorHelper(s),\n              _step184;\n\n          try {\n            for (_iterator184.s(); !(_step184 = _iterator184.n()).done;) {\n              var _e295 = _step184.value;\n\n              _e295.setFeatureState(a, t.id, i);\n            }\n          } catch (err) {\n            _iterator184.e(err);\n          } finally {\n            _iterator184.f();\n          }\n        }\n      }, {\n        key: \"removeFeatureState\",\n        value: function removeFeatureState(t, i) {\n          this._checkLoaded();\n\n          var o = t.source,\n              a = this.getSource(o);\n          if (void 0 === a) return void this.fire(new e.ErrorEvent(new Error(\"The source '\".concat(o, \"' does not exist in the map's style.\"))));\n          var r = a.type,\n              n = \"vector\" === r ? t.sourceLayer : void 0;\n          if (\"vector\" === r && !n) return void this.fire(new e.ErrorEvent(new Error(\"The sourceLayer parameter must be provided for vector source types.\")));\n          if (i && \"string\" != typeof t.id && \"number\" != typeof t.id) return void this.fire(new e.ErrorEvent(new Error(\"A feature id is required to remove its specific state property.\")));\n\n          var s = this._getSourceCaches(o);\n\n          var _iterator185 = _createForOfIteratorHelper(s),\n              _step185;\n\n          try {\n            for (_iterator185.s(); !(_step185 = _iterator185.n()).done;) {\n              var _e296 = _step185.value;\n\n              _e296.removeFeatureState(n, t.id, i);\n            }\n          } catch (err) {\n            _iterator185.e(err);\n          } finally {\n            _iterator185.f();\n          }\n        }\n      }, {\n        key: \"getFeatureState\",\n        value: function getFeatureState(t) {\n          this._checkLoaded();\n\n          var i = t.source,\n              o = t.sourceLayer,\n              a = this.getSource(i);\n\n          if (void 0 !== a) {\n            if (\"vector\" !== a.type || o) return void 0 === t.id && this.fire(new e.ErrorEvent(new Error(\"The feature id parameter must be provided.\"))), this._getSourceCaches(i)[0].getFeatureState(o, t.id);\n            this.fire(new e.ErrorEvent(new Error(\"The sourceLayer parameter must be provided for vector source types.\")));\n          } else this.fire(new e.ErrorEvent(new Error(\"The source '\".concat(i, \"' does not exist in the map's style.\"))));\n        }\n      }, {\n        key: \"getTransition\",\n        value: function getTransition() {\n          return e.extend({\n            duration: 300,\n            delay: 0\n          }, this.stylesheet && this.stylesheet.transition);\n        }\n      }, {\n        key: \"serialize\",\n        value: function serialize() {\n          var t = {};\n\n          for (var _e297 in this._sourceCaches) {\n            var _i211 = this._sourceCaches[_e297].getSource();\n\n            t[_i211.id] || (t[_i211.id] = _i211.serialize());\n          }\n\n          return e.filterObject({\n            version: this.stylesheet.version,\n            name: this.stylesheet.name,\n            metadata: this.stylesheet.metadata,\n            light: this.stylesheet.light,\n            terrain: this.stylesheet.terrain,\n            center: this.stylesheet.center,\n            zoom: this.stylesheet.zoom,\n            bearing: this.stylesheet.bearing,\n            pitch: this.stylesheet.pitch,\n            sprite: this.stylesheet.sprite,\n            glyphs: this.stylesheet.glyphs,\n            transition: this.stylesheet.transition,\n            sources: t,\n            layers: this._serializeLayers(this._order)\n          }, function (e) {\n            return void 0 !== e;\n          });\n        }\n      }, {\n        key: \"_updateLayer\",\n        value: function _updateLayer(e) {\n          this._updatedLayers[e.id] = !0;\n\n          var t = this._getLayerSourceCache(e);\n\n          e.source && !this._updatedSources[e.source] && t && \"raster\" !== t.getSource().type && (this._updatedSources[e.source] = \"reload\", t.pause()), this._changed = !0;\n        }\n      }, {\n        key: \"_flattenAndSortRenderedFeatures\",\n        value: function _flattenAndSortRenderedFeatures(e) {\n          var _this94 = this;\n\n          var t = function t(e) {\n            return \"fill-extrusion\" === _this94._layers[e].type;\n          },\n              i = {},\n              o = [];\n\n          for (var _a113 = this._order.length - 1; _a113 >= 0; _a113--) {\n            var _r226 = this._order[_a113];\n\n            if (t(_r226)) {\n              i[_r226] = _a113;\n\n              var _iterator186 = _createForOfIteratorHelper(e),\n                  _step186;\n\n              try {\n                for (_iterator186.s(); !(_step186 = _iterator186.n()).done;) {\n                  var _t283 = _step186.value;\n                  var _e298 = _t283[_r226];\n\n                  if (_e298) {\n                    var _iterator187 = _createForOfIteratorHelper(_e298),\n                        _step187;\n\n                    try {\n                      for (_iterator187.s(); !(_step187 = _iterator187.n()).done;) {\n                        var _t284 = _step187.value;\n                        o.push(_t284);\n                      }\n                    } catch (err) {\n                      _iterator187.e(err);\n                    } finally {\n                      _iterator187.f();\n                    }\n                  }\n                }\n              } catch (err) {\n                _iterator186.e(err);\n              } finally {\n                _iterator186.f();\n              }\n            }\n          }\n\n          o.sort(function (e, t) {\n            return t.intersectionZ - e.intersectionZ;\n          });\n          var a = [];\n\n          for (var _r227 = this._order.length - 1; _r227 >= 0; _r227--) {\n            var _n140 = this._order[_r227];\n            if (t(_n140)) for (var _e299 = o.length - 1; _e299 >= 0; _e299--) {\n              var _t285 = o[_e299].feature;\n              if (i[_t285.layer.id] < _r227) break;\n              a.push(_t285), o.pop();\n            } else {\n              var _iterator188 = _createForOfIteratorHelper(e),\n                  _step188;\n\n              try {\n                for (_iterator188.s(); !(_step188 = _iterator188.n()).done;) {\n                  var _t286 = _step188.value;\n                  var _e300 = _t286[_n140];\n\n                  if (_e300) {\n                    var _iterator189 = _createForOfIteratorHelper(_e300),\n                        _step189;\n\n                    try {\n                      for (_iterator189.s(); !(_step189 = _iterator189.n()).done;) {\n                        var _t287 = _step189.value;\n                        a.push(_t287.feature);\n                      }\n                    } catch (err) {\n                      _iterator189.e(err);\n                    } finally {\n                      _iterator189.f();\n                    }\n                  }\n                }\n              } catch (err) {\n                _iterator188.e(err);\n              } finally {\n                _iterator188.f();\n              }\n            }\n          }\n\n          return a;\n        }\n      }, {\n        key: \"queryRenderedFeatures\",\n        value: function queryRenderedFeatures(t, i, o) {\n          var _this95 = this;\n\n          i && i.filter && this._validate(e.validateStyle.filter, \"queryRenderedFeatures.filter\", i.filter, null, i);\n          var a = {};\n\n          if (i && i.layers) {\n            if (!Array.isArray(i.layers)) return this.fire(new e.ErrorEvent(new Error(\"parameters.layers must be an Array.\"))), [];\n\n            var _iterator190 = _createForOfIteratorHelper(i.layers),\n                _step190;\n\n            try {\n              for (_iterator190.s(); !(_step190 = _iterator190.n()).done;) {\n                var _t288 = _step190.value;\n                var _i212 = this._layers[_t288];\n                if (!_i212) return this.fire(new e.ErrorEvent(new Error(\"The layer '\".concat(_t288, \"' does not exist in the map's style and cannot be queried for features.\")))), [];\n                a[_i212.source] = !0;\n              }\n            } catch (err) {\n              _iterator190.e(err);\n            } finally {\n              _iterator190.f();\n            }\n          }\n\n          var r = [];\n          i.availableImages = this._availableImages;\n          var n = i && i.layers ? i.layers.some(function (e) {\n            var t = _this95.getLayer(e);\n\n            return t && t.is3D();\n          }) : this.has3DLayers(),\n              s = x.createFromScreenPoints(t, o);\n\n          for (var _e301 in this._sourceCaches) {\n            var _t289 = this._sourceCaches[_e301].getSource().id;\n\n            i.layers && !a[_t289] || r.push(M(this._sourceCaches[_e301], this._layers, this._serializedLayers, s, i, o, n, !!this.map._showQueryGeometry));\n          }\n\n          return this.placement && r.push(function (e, t, i, o, a, r, n) {\n            var s = {},\n                l = r.queryRenderedSymbols(o),\n                c = [];\n\n            var _iterator191 = _createForOfIteratorHelper(Object.keys(l).map(Number)),\n                _step191;\n\n            try {\n              for (_iterator191.s(); !(_step191 = _iterator191.n()).done;) {\n                var _e304 = _step191.value;\n                c.push(n[_e304]);\n              }\n            } catch (err) {\n              _iterator191.e(err);\n            } finally {\n              _iterator191.f();\n            }\n\n            c.sort(A);\n\n            var _loop8 = function _loop8() {\n              var i = _c32[_i213];\n              var o = i.featureIndex.lookupSymbolFeatures(l[i.bucketInstanceId], t, i.bucketIndex, i.sourceLayerIndex, a.filter, a.layers, a.availableImages, e);\n\n              for (var _e302 in o) {\n                var _t290 = s[_e302] = s[_e302] || [],\n                    _a114 = o[_e302];\n\n                _a114.sort(function (e, t) {\n                  var o = i.featureSortOrder;\n\n                  if (o) {\n                    var _i214 = o.indexOf(e.featureIndex);\n\n                    return o.indexOf(t.featureIndex) - _i214;\n                  }\n\n                  return t.featureIndex - e.featureIndex;\n                });\n\n                var _iterator192 = _createForOfIteratorHelper(_a114),\n                    _step192;\n\n                try {\n                  for (_iterator192.s(); !(_step192 = _iterator192.n()).done;) {\n                    var _e303 = _step192.value;\n\n                    _t290.push(_e303);\n                  }\n                } catch (err) {\n                  _iterator192.e(err);\n                } finally {\n                  _iterator192.f();\n                }\n              }\n            };\n\n            for (var _i213 = 0, _c32 = c; _i213 < _c32.length; _i213++) {\n              _loop8();\n            }\n\n            var _loop9 = function _loop9(_t291) {\n              s[_t291].forEach(function (o) {\n                var a = o.feature,\n                    r = i(e[_t291]).getFeatureState(a.layer[\"source-layer\"], a.id);\n                a.source = a.layer.source, a.layer[\"source-layer\"] && (a.sourceLayer = a.layer[\"source-layer\"]), a.state = r;\n              });\n            };\n\n            for (var _t291 in s) {\n              _loop9(_t291);\n            }\n\n            return s;\n          }(this._layers, this._serializedLayers, this._getLayerSourceCache.bind(this), s.screenGeometry, i, this.placement.collisionIndex, this.placement.retainedQueryData)), this._flattenAndSortRenderedFeatures(r);\n        }\n      }, {\n        key: \"querySourceFeatures\",\n        value: function querySourceFeatures(t, i) {\n          i && i.filter && this._validate(e.validateStyle.filter, \"querySourceFeatures.filter\", i.filter, null, i);\n\n          var o = this._getSourceCaches(t);\n\n          var a = [];\n\n          var _iterator193 = _createForOfIteratorHelper(o),\n              _step193;\n\n          try {\n            for (_iterator193.s(); !(_step193 = _iterator193.n()).done;) {\n              var _e305 = _step193.value;\n              a = a.concat(z(_e305, i));\n            }\n          } catch (err) {\n            _iterator193.e(err);\n          } finally {\n            _iterator193.f();\n          }\n\n          return a;\n        }\n      }, {\n        key: \"addSourceType\",\n        value: function addSourceType(e, t, i) {\n          return Ze.getSourceType(e) ? i(new Error(\"A source type called \\\"\".concat(e, \"\\\" already exists.\"))) : (Ze.setSourceType(e, t), t.workerSourceURL ? void this.dispatcher.broadcast(\"loadWorkerSource\", {\n            name: e,\n            url: t.workerSourceURL\n          }, i) : i(null, null));\n        }\n      }, {\n        key: \"getLight\",\n        value: function getLight() {\n          return this.light.getLight();\n        }\n      }, {\n        key: \"setLight\",\n        value: function setLight(t) {\n          var i = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n          this._checkLoaded();\n\n          var o = this.light.getLight();\n          var a = !1;\n\n          for (var _i215 in t) {\n            if (!e.deepEqual(t[_i215], o[_i215])) {\n              a = !0;\n              break;\n            }\n          }\n\n          if (!a) return;\n          var r = {\n            now: e.browser.now(),\n            transition: e.extend({\n              duration: 300,\n              delay: 0\n            }, this.stylesheet.transition)\n          };\n          this.light.setLight(t, i), this.light.updateTransitions(r);\n        }\n      }, {\n        key: \"setTerrain\",\n        value: function setTerrain(t) {\n          if (this._checkLoaded(), !t) return delete this.terrain, delete this.stylesheet.terrain, this.dispatcher.broadcast(\"enableTerrain\", !1), void this._force3DLayerUpdate();\n\n          if (\"object\" == _typeof(t.source)) {\n            var _i216 = \"terrain-dem-src\";\n            this.addSource(_i216, t.source), t = e.clone$1(t), t = e.extend(t, {\n              source: _i216\n            });\n          }\n\n          if (!this._validate(e.validateStyle.terrain, \"terrain\", t)) {\n            if (this.terrain) {\n              var _i217 = this.terrain,\n                  _o81 = _i217.get();\n\n              for (var _a115 in t) {\n                if (!e.deepEqual(t[_a115], _o81[_a115])) {\n                  _i217.set(t), this.stylesheet.terrain = t;\n                  var _o82 = {\n                    now: e.browser.now(),\n                    transition: e.extend({\n                      duration: 0\n                    }, this.stylesheet.transition)\n                  };\n\n                  _i217.updateTransitions(_o82);\n\n                  break;\n                }\n              }\n            } else this._createTerrain(t);\n\n            this._updateDrapeFirstLayers();\n          }\n        }\n      }, {\n        key: \"_updateDrapeFirstLayers\",\n        value: function _updateDrapeFirstLayers() {\n          var _this96 = this,\n              _this$_drapedFirstOrd,\n              _this$_drapedFirstOrd2;\n\n          if (!this.map._optimizeForTerrain || !this.terrain) return;\n\n          var e = this._order.filter(function (e) {\n            return _this96.isLayerDraped(_this96._layers[e]);\n          }),\n              t = this._order.filter(function (e) {\n            return !_this96.isLayerDraped(_this96._layers[e]);\n          });\n\n          this._drapedFirstOrder = [], (_this$_drapedFirstOrd = this._drapedFirstOrder).push.apply(_this$_drapedFirstOrd, _toConsumableArray(e)), (_this$_drapedFirstOrd2 = this._drapedFirstOrder).push.apply(_this$_drapedFirstOrd2, _toConsumableArray(t));\n        }\n      }, {\n        key: \"_createTerrain\",\n        value: function _createTerrain(t) {\n          var i = this.terrain = new p(t);\n          this.stylesheet.terrain = t, this.dispatcher.broadcast(\"enableTerrain\", !0), this._force3DLayerUpdate();\n          var o = {\n            now: e.browser.now(),\n            transition: e.extend({\n              duration: 0\n            }, this.stylesheet.transition)\n          };\n          i.updateTransitions(o);\n        }\n      }, {\n        key: \"_force3DLayerUpdate\",\n        value: function _force3DLayerUpdate() {\n          for (var _e306 in this._layers) {\n            var _t292 = this._layers[_e306];\n            \"fill-extrusion\" === _t292.type && this._updateLayer(_t292);\n          }\n        }\n      }, {\n        key: \"_validate\",\n        value: function _validate(t, i, o, a) {\n          var r = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : {};\n          return (!r || !1 !== r.validate) && Be(this, t.call(e.validateStyle, e.extend({\n            key: i,\n            style: this.serialize(),\n            value: o,\n            styleSpec: e.styleSpec\n          }, a)));\n        }\n      }, {\n        key: \"_remove\",\n        value: function _remove() {\n          this._request && (this._request.cancel(), this._request = null), this._spriteRequest && (this._spriteRequest.cancel(), this._spriteRequest = null), e.evented.off(\"pluginStateChange\", this._rtlTextPluginCallback);\n\n          for (var _e307 in this._layers) {\n            this._layers[_e307].setEventedParent(null);\n          }\n\n          for (var _e308 in this._sourceCaches) {\n            this._sourceCaches[_e308].clearTiles(), this._sourceCaches[_e308].setEventedParent(null);\n          }\n\n          this.imageManager.setEventedParent(null), this.setEventedParent(null), this.dispatcher.remove();\n        }\n      }, {\n        key: \"_clearSource\",\n        value: function _clearSource(e) {\n          var t = this._getSourceCaches(e);\n\n          var _iterator194 = _createForOfIteratorHelper(t),\n              _step194;\n\n          try {\n            for (_iterator194.s(); !(_step194 = _iterator194.n()).done;) {\n              var _e309 = _step194.value;\n\n              _e309.clearTiles();\n            }\n          } catch (err) {\n            _iterator194.e(err);\n          } finally {\n            _iterator194.f();\n          }\n        }\n      }, {\n        key: \"_reloadSource\",\n        value: function _reloadSource(e) {\n          var t = this._getSourceCaches(e);\n\n          var _iterator195 = _createForOfIteratorHelper(t),\n              _step195;\n\n          try {\n            for (_iterator195.s(); !(_step195 = _iterator195.n()).done;) {\n              var _e310 = _step195.value;\n              _e310.resume(), _e310.reload();\n            }\n          } catch (err) {\n            _iterator195.e(err);\n          } finally {\n            _iterator195.f();\n          }\n        }\n      }, {\n        key: \"_updateSources\",\n        value: function _updateSources(e) {\n          for (var _t293 in this._sourceCaches) {\n            this._sourceCaches[_t293].update(e);\n          }\n        }\n      }, {\n        key: \"_generateCollisionBoxes\",\n        value: function _generateCollisionBoxes() {\n          for (var _e311 in this._sourceCaches) {\n            var _t294 = this._sourceCaches[_e311];\n            _t294.resume(), _t294.reload();\n          }\n        }\n      }, {\n        key: \"_updatePlacement\",\n        value: function _updatePlacement(t, i, o, a) {\n          var _this97 = this;\n\n          var r = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : !1;\n          var n = !1,\n              s = !1;\n          var l = {};\n\n          var _iterator196 = _createForOfIteratorHelper(this._order),\n              _step196;\n\n          try {\n            for (_iterator196.s(); !(_step196 = _iterator196.n()).done;) {\n              var _e313 = _step196.value;\n              var _i218 = this._layers[_e313];\n              if (\"symbol\" !== _i218.type) continue;\n\n              if (!l[_i218.source]) {\n                var _ret3 = function () {\n                  var e = _this97._getLayerSourceCache(_i218);\n\n                  if (!e) return \"continue\";\n                  l[_i218.source] = e.getRenderableIds(!0).map(function (t) {\n                    return e.getTileByID(t);\n                  }).sort(function (e, t) {\n                    return t.tileID.overscaledZ - e.tileID.overscaledZ || (e.tileID.isLessThan(t.tileID) ? -1 : 1);\n                  });\n                }();\n\n                if (_ret3 === \"continue\") continue;\n              }\n\n              var _o83 = this.crossTileSymbolIndex.addLayer(_i218, l[_i218.source], t.center.lng);\n\n              n = n || _o83;\n            }\n          } catch (err) {\n            _iterator196.e(err);\n          } finally {\n            _iterator196.f();\n          }\n\n          if (this.crossTileSymbolIndex.pruneUnusedLayers(this._order), r = r || this._layerOrderChanged || 0 === o, this._layerOrderChanged && this.fire(new e.Event(\"neworder\")), (r || !this.pauseablePlacement || this.pauseablePlacement.isDone() && !this.placement.stillRecent(e.browser.now(), t.zoom)) && (this.pauseablePlacement = new ze(t, this._order, r, i, o, a, this.placement), this._layerOrderChanged = !1), this.pauseablePlacement.isDone() ? this.placement.setStale() : (this.pauseablePlacement.continuePlacement(this._order, this._layers, l), this.pauseablePlacement.isDone() && (this.placement = this.pauseablePlacement.commit(e.browser.now()), s = !0), n && this.pauseablePlacement.placement.setStale()), s || n) {\n            var _iterator197 = _createForOfIteratorHelper(this._order),\n                _step197;\n\n            try {\n              for (_iterator197.s(); !(_step197 = _iterator197.n()).done;) {\n                var _e312 = _step197.value;\n                var _t295 = this._layers[_e312];\n                \"symbol\" === _t295.type && this.placement.updateLayerOpacities(_t295, l[_t295.source]);\n              }\n            } catch (err) {\n              _iterator197.e(err);\n            } finally {\n              _iterator197.f();\n            }\n          }\n\n          return !this.pauseablePlacement.isDone() || this.placement.hasTransitions(e.browser.now());\n        }\n      }, {\n        key: \"_releaseSymbolFadeTiles\",\n        value: function _releaseSymbolFadeTiles() {\n          for (var _e314 in this._sourceCaches) {\n            this._sourceCaches[_e314].releaseSymbolFadeTiles();\n          }\n        }\n      }, {\n        key: \"getImages\",\n        value: function getImages(e, t, i) {\n          this.imageManager.getImages(t.icons, i), this._updateTilesForChangedImages();\n\n          var o = function o(e) {\n            e && e.setDependencies(t.tileID.key, t.type, t.icons);\n          };\n\n          o(this._otherSourceCaches[t.source]), o(this._symbolSourceCaches[t.source]);\n        }\n      }, {\n        key: \"getGlyphs\",\n        value: function getGlyphs(e, t, i) {\n          this.glyphManager.getGlyphs(t.stacks, i);\n        }\n      }, {\n        key: \"getResource\",\n        value: function getResource(t, i, o) {\n          return e.makeRequest(i, o);\n        }\n      }, {\n        key: \"_getSourceCache\",\n        value: function _getSourceCache(e) {\n          return this._otherSourceCaches[e];\n        }\n      }, {\n        key: \"_getLayerSourceCache\",\n        value: function _getLayerSourceCache(e) {\n          return \"symbol\" === e.type ? this._symbolSourceCaches[e.source] : this._otherSourceCaches[e.source];\n        }\n      }, {\n        key: \"_getSourceCaches\",\n        value: function _getSourceCaches(e) {\n          var t = [];\n          return this._otherSourceCaches[e] && t.push(this._otherSourceCaches[e]), this._symbolSourceCaches[e] && t.push(this._symbolSourceCaches[e]), t;\n        }\n      }, {\n        key: \"has3DLayers\",\n        value: function has3DLayers() {\n          return this._num3DLayers > 0;\n        }\n      }, {\n        key: \"hasSymbolLayers\",\n        value: function hasSymbolLayers() {\n          return this._numSymbolLayers > 0;\n        }\n      }, {\n        key: \"hasCircleLayers\",\n        value: function hasCircleLayers() {\n          return this._numCircleLayers > 0;\n        }\n      }]);\n\n      return Ze;\n    }(e.Evented);\n\n    Ze.getSourceType = function (e) {\n      return S[e];\n    }, Ze.setSourceType = function (e, t) {\n      S[e] = t;\n    }, Ze.registerForPluginStateChange = e.registerForPluginStateChange;\n    var Ge = \"attribute highp vec3 a_pos_3f;uniform lowp mat4 u_matrix;varying highp vec3 v_uv;void main() {const mat3 half_neg_pi_around_x=mat3(1.0,0.0, 0.0,0.0,0.0,-1.0,0.0,1.0, 0.0);v_uv=half_neg_pi_around_x*a_pos_3f;vec4 pos=u_matrix*vec4(a_pos_3f,1.0);gl_Position=pos.xyww;}\";\n    var Ve = {};\n    Ve = bt(\"\", \"\\n#define ELEVATION_SCALE 7.3\\n#ifdef TERRAIN\\nuniform sampler2D u_dem;uniform sampler2D u_dem_prev;uniform vec4 u_dem_unpack;uniform vec2 u_dem_tl;uniform vec2 u_dem_tl_prev;uniform float u_dem_scale;uniform float u_dem_scale_prev;uniform float u_dem_size;uniform float u_dem_lerp;uniform float u_exaggeration;uniform float u_meter_to_dem;uniform mat4 u_label_plane_matrix_inv;uniform sampler2D u_depth;uniform vec2 u_depth_size_inv;vec4 tileUvToDemSample(vec2 uv,float dem_size,float dem_scale,vec2 dem_tl) {vec2 pos=dem_size*(uv*dem_scale+dem_tl)+1.0;vec2 f=fract(pos);return vec4((pos-f+0.5)/(dem_size+2.0),f);}float decodeElevation(vec4 v) {return dot(vec4(v.xyz*255.0,-1.0),u_dem_unpack);}float currentElevation(vec2 apos) {float dd=1.0/(u_dem_size+2.0);vec4 r=tileUvToDemSample(apos/8192.0,u_dem_size,u_dem_scale,u_dem_tl);vec2 pos=r.xy;vec2 f=r.zw;float tl=decodeElevation(texture2D(u_dem,pos));float tr=decodeElevation(texture2D(u_dem,pos+vec2(dd,0.0)));float bl=decodeElevation(texture2D(u_dem,pos+vec2(0.0,dd)));float br=decodeElevation(texture2D(u_dem,pos+vec2(dd,dd)));return u_exaggeration*mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);}float prevElevation(vec2 apos) {float dd=1.0/(u_dem_size+2.0);vec4 r=tileUvToDemSample(apos/8192.0,u_dem_size,u_dem_scale_prev,u_dem_tl_prev);vec2 pos=r.xy;vec2 f=r.zw;float tl=decodeElevation(texture2D(u_dem_prev,pos));float tr=decodeElevation(texture2D(u_dem_prev,pos+vec2(dd,0.0)));float bl=decodeElevation(texture2D(u_dem_prev,pos+vec2(0.0,dd)));float br=decodeElevation(texture2D(u_dem_prev,pos+vec2(dd,dd)));return u_exaggeration*mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);}\\n#ifdef TERRAIN_VERTEX_MORPHING\\nfloat elevation(vec2 apos) {float nextElevation=currentElevation(apos);float prevElevation=prevElevation(apos);return mix(prevElevation,nextElevation,u_dem_lerp);}\\n#else\\nfloat elevation(vec2 apos) {return currentElevation(apos);}\\n#endif\\nfloat unpack_depth(vec4 rgba_depth)\\n{const vec4 bit_shift=vec4(1.0/(256.0*256.0*256.0),1.0/(256.0*256.0),1.0/256.0,1.0);return dot(rgba_depth,bit_shift)*2.0-1.0;}bool isOccluded(vec4 frag) {vec3 coord=frag.xyz/frag.w;float depth=unpack_depth(texture2D(u_depth,(coord.xy+1.0)*0.5));return coord.z > depth+0.0005;}float occlusionFade(vec4 frag) {vec3 coord=frag.xyz/frag.w;vec3 df=vec3(5.0*u_depth_size_inv,0.0);vec2 uv=0.5*coord.xy+0.5;vec4 depth=vec4(\\nunpack_depth(texture2D(u_depth,uv-df.xz)),unpack_depth(texture2D(u_depth,uv+df.xz)),unpack_depth(texture2D(u_depth,uv-df.zy)),unpack_depth(texture2D(u_depth,uv+df.zy))\\n);return dot(vec4(0.25),vec4(1.0)-clamp(300.0*(vec4(coord.z-0.001)-depth),0.0,1.0));}vec4 fourSample(vec2 pos,vec2 off) {vec4 demtl=vec4(texture2D(u_dem,pos).xyz*255.0,-1.0);float tl=dot(demtl,u_dem_unpack);vec4 demtr=vec4(texture2D(u_dem,pos+vec2(off.x,0.0)).xyz*255.0,-1.0);float tr=dot(demtr,u_dem_unpack);vec4 dembl=vec4(texture2D(u_dem,pos+vec2(0.0,off.y)).xyz*255.0,-1.0);float bl=dot(dembl,u_dem_unpack);vec4 dembr=vec4(texture2D(u_dem,pos+off).xyz*255.0,-1.0);float br=dot(dembr,u_dem_unpack);return vec4(tl,tr,bl,br);}float flatElevation(vec2 pack) {vec2 apos=floor(pack/8.0);vec2 span=10.0*(pack-apos*8.0);vec2 uvTex=(apos-vec2(1.0,1.0))/8190.0;float size=u_dem_size+2.0;float dd=1.0/size;vec2 pos=u_dem_size*(uvTex*u_dem_scale+u_dem_tl)+1.0;vec2 f=fract(pos);pos=(pos-f+0.5)*dd;vec4 h=fourSample(pos,vec2(dd));float z=mix(mix(h.x,h.y,f.x),mix(h.z,h.w,f.x),f.y);vec2 w=floor(0.5*(span*u_meter_to_dem-1.0));vec2 d=dd*w;vec4 bounds=vec4(d,vec2(1.0)-d);h=fourSample(pos-d,2.0*d+vec2(dd));vec4 diff=abs(h.xzxy-h.ywzw);vec2 slope=min(vec2(0.25),u_meter_to_dem*0.5*(diff.xz+diff.yw)/(2.0*w+vec2(1.0)));vec2 fix=slope*span;float base=z+max(fix.x,fix.y);return u_exaggeration*base;}float elevationFromUint16(float word) {return u_exaggeration*word/ELEVATION_SCALE;}\\n#else\\nfloat elevation(vec2 pos) { return 0.0; }bool isOccluded(vec4 frag) { return false; }float occlusionFade(vec4 frag) { return 1.0; }\\n#endif\", !0);\n\n    var qe = bt(\"#ifdef GL_ES\\nprecision mediump float;\\n#else\\n#if !defined(lowp)\\n#define lowp\\n#endif\\n#if !defined(mediump)\\n#define mediump\\n#endif\\n#if !defined(highp)\\n#define highp\\n#endif\\n#endif\\nconst float PI=3.141592653589793;\", \"#ifdef GL_ES\\nprecision highp float;\\n#else\\n#if !defined(lowp)\\n#define lowp\\n#endif\\n#if !defined(mediump)\\n#define mediump\\n#endif\\n#if !defined(highp)\\n#define highp\\n#endif\\n#endif\\nvec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(\\nunpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0\\n);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}const float PI=3.141592653589793;const vec4 AWAY=vec4(-1000.0,-1000.0,-1000.0,1);//Normalized device coordinate that is not rendered.\"),\n        je = bt(\"uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;\\n#ifdef OVERDRAW_INSPECTOR\\ngl_FragColor=vec4(1.0);\\n#endif\\n}\", \"attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}\"),\n        $e = bt(\"uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;\\n#ifdef OVERDRAW_INSPECTOR\\ngl_FragColor=vec4(1.0);\\n#endif\\n}\", \"uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}\"),\n        Xe = bt(\"varying vec3 v_data;varying float v_visibility;\\n#pragma mapbox: define highp vec4 color\\n#pragma mapbox: define mediump float radius\\n#pragma mapbox: define lowp float blur\\n#pragma mapbox: define lowp float opacity\\n#pragma mapbox: define highp vec4 stroke_color\\n#pragma mapbox: define mediump float stroke_width\\n#pragma mapbox: define lowp float stroke_opacity\\nvoid main() {\\n#pragma mapbox: initialize highp vec4 color\\n#pragma mapbox: initialize mediump float radius\\n#pragma mapbox: initialize lowp float blur\\n#pragma mapbox: initialize lowp float opacity\\n#pragma mapbox: initialize highp vec4 stroke_color\\n#pragma mapbox: initialize mediump float stroke_width\\n#pragma mapbox: initialize lowp float stroke_opacity\\nvec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(\\nantialiased_blur,0.0,extrude_length-radius/(radius+stroke_width)\\n);gl_FragColor=v_visibility*opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);\\n#ifdef OVERDRAW_INSPECTOR\\ngl_FragColor=vec4(1.0);\\n#endif\\n}\", \"#define NUM_VISIBILITY_RINGS 2\\n#define INV_SQRT2 0.70710678\\n#define ELEVATION_BIAS 0.0001\\n#define NUM_SAMPLES_PER_RING 16\\nuniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;varying float v_visibility;\\n#pragma mapbox: define highp vec4 color\\n#pragma mapbox: define mediump float radius\\n#pragma mapbox: define lowp float blur\\n#pragma mapbox: define lowp float opacity\\n#pragma mapbox: define highp vec4 stroke_color\\n#pragma mapbox: define mediump float stroke_width\\n#pragma mapbox: define lowp float stroke_opacity\\nvec2 calc_offset(vec2 extrusion,float radius,float stroke_width, float view_scale) {return extrusion*(radius+stroke_width)*u_extrude_scale*view_scale;}float cantilevered_elevation(vec2 pos,float radius,float stroke_width,float view_scale) {vec2 c1=pos+calc_offset(vec2(-1,-1),radius,stroke_width,view_scale);vec2 c2=pos+calc_offset(vec2(1,-1),radius,stroke_width,view_scale);vec2 c3=pos+calc_offset(vec2(1,1),radius,stroke_width,view_scale);vec2 c4=pos+calc_offset(vec2(-1,1),radius,stroke_width,view_scale);float h1=elevation(c1)+ELEVATION_BIAS;float h2=elevation(c2)+ELEVATION_BIAS;float h3=elevation(c3)+ELEVATION_BIAS;float h4=elevation(c4)+ELEVATION_BIAS;return max(h4,max(h3,max(h1,h2)));}float circle_elevation(vec2 pos) {\\n#if defined(TERRAIN)\\nreturn elevation(pos)+ELEVATION_BIAS;\\n#else\\nreturn 0.0;\\n#endif\\n}vec4 project_vertex(vec2 extrusion,vec4 world_center,vec4 projected_center,float radius,float stroke_width, float view_scale) {vec2 sample_offset=calc_offset(extrusion,radius,stroke_width,view_scale);\\n#ifdef PITCH_WITH_MAP\\nreturn u_matrix*( world_center+vec4(sample_offset,0,0) );\\n#else\\nreturn projected_center+vec4(sample_offset,0,0);\\n#endif\\n}float get_sample_step() {\\n#ifdef PITCH_WITH_MAP\\nreturn 2.0*PI/float(NUM_SAMPLES_PER_RING);\\n#else\\nreturn PI/float(NUM_SAMPLES_PER_RING);\\n#endif\\n}void main(void) {\\n#pragma mapbox: initialize highp vec4 color\\n#pragma mapbox: initialize mediump float radius\\n#pragma mapbox: initialize lowp float blur\\n#pragma mapbox: initialize lowp float opacity\\n#pragma mapbox: initialize highp vec4 stroke_color\\n#pragma mapbox: initialize mediump float stroke_width\\n#pragma mapbox: initialize lowp float stroke_opacity\\nvec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);float height=circle_elevation(circle_center);vec4 world_center=vec4(circle_center,height,1);vec4 projected_center=u_matrix*world_center;float view_scale=0.0;\\n#ifdef PITCH_WITH_MAP\\n#ifdef SCALE_WITH_MAP\\nview_scale=1.0;\\n#else\\nview_scale=projected_center.w/u_camera_to_center_distance;\\n#endif\\n#else\\n#ifdef SCALE_WITH_MAP\\nview_scale=u_camera_to_center_distance;\\n#else\\nview_scale=projected_center.w;\\n#endif\\n#endif\\ngl_Position=project_vertex(extrude,world_center,projected_center,radius,stroke_width,view_scale);float visibility=0.0;\\n#ifdef TERRAIN\\nfloat step=get_sample_step();\\n#ifdef PITCH_WITH_MAP\\nfloat cantilevered_height=cantilevered_elevation(circle_center,radius,stroke_width,view_scale);vec4 occlusion_world_center=vec4(circle_center,cantilevered_height,1);vec4 occlusion_projected_center=u_matrix*occlusion_world_center;\\n#else\\nvec4 occlusion_world_center=world_center;vec4 occlusion_projected_center=projected_center;\\n#endif\\nfor(int ring=0; ring < NUM_VISIBILITY_RINGS; ring++) {float scale=(float(ring)+1.0)/float(NUM_VISIBILITY_RINGS);for(int i=0; i < NUM_SAMPLES_PER_RING; i++) {vec2 extrusion=vec2(cos(step*float(i)),-sin(step*float(i)))*scale;vec4 frag_pos=project_vertex(extrusion,occlusion_world_center,occlusion_projected_center,radius,stroke_width,view_scale);visibility+=float(!isOccluded(frag_pos));}}visibility/=float(NUM_VISIBILITY_RINGS)*float(NUM_SAMPLES_PER_RING);\\n#else\\nvisibility=1.0;\\n#endif\\nv_visibility=visibility;lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);}\"),\n        We = bt(\"void main() {gl_FragColor=vec4(1.0);}\", \"attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}\"),\n        He = bt(\"uniform highp float u_intensity;varying vec2 v_extrude;\\n#pragma mapbox: define highp float weight\\n#define GAUSS_COEF 0.3989422804014327\\nvoid main() {\\n#pragma mapbox: initialize highp float weight\\nfloat d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);\\n#ifdef OVERDRAW_INSPECTOR\\ngl_FragColor=vec4(1.0);\\n#endif\\n}\", \"uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;\\n#pragma mapbox: define highp float weight\\n#pragma mapbox: define mediump float radius\\nconst highp float ZERO=1.0/255.0/16.0;\\n#define GAUSS_COEF 0.3989422804014327\\nvoid main(void) {\\n#pragma mapbox: initialize highp float weight\\n#pragma mapbox: initialize mediump float radius\\nvec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,elevation(floor(a_pos*0.5)),1);gl_Position=u_matrix*pos;}\"),\n        Ke = bt(\"uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;\\n#ifdef OVERDRAW_INSPECTOR\\ngl_FragColor=vec4(0.0);\\n#endif\\n}\", \"uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}\"),\n        Ye = bt(\"varying float v_placed;varying float v_notUsed;void main() {vec4 red =vec4(1.0,0.0,0.0,1.0);vec4 blue=vec4(0.0,0.0,1.0,0.5);gl_FragColor =mix(red,blue,step(0.5,v_placed))*0.5;gl_FragColor*=mix(1.0,0.1,step(0.5,v_notUsed));}\", \"attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;attribute float a_size_scale;attribute vec2 a_padding;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_anchor_pos,elevation(a_anchor_pos),1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(\\n0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,1.5);gl_Position=u_matrix*vec4(a_pos,elevation(a_pos),1.0);gl_Position.xy+=(a_extrude*a_size_scale+a_shift+a_padding)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}\"),\n        Je = bt(\"varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}\", \"attribute vec2 a_pos_2f;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos_2f;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(\\nmix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(\\n0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}\"),\n        Qe = bt(\"uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}\", \"attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {float h=elevation(a_pos);v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,h,1);}\"),\n        et = bt(\"#pragma mapbox: define highp vec4 color\\n#pragma mapbox: define lowp float opacity\\nvoid main() {\\n#pragma mapbox: initialize highp vec4 color\\n#pragma mapbox: initialize lowp float opacity\\ngl_FragColor=color*opacity;\\n#ifdef OVERDRAW_INSPECTOR\\ngl_FragColor=vec4(1.0);\\n#endif\\n}\", \"attribute vec2 a_pos;uniform mat4 u_matrix;\\n#pragma mapbox: define highp vec4 color\\n#pragma mapbox: define lowp float opacity\\nvoid main() {\\n#pragma mapbox: initialize highp vec4 color\\n#pragma mapbox: initialize lowp float opacity\\ngl_Position=u_matrix*vec4(a_pos,0,1);}\"),\n        tt = bt(\"varying vec2 v_pos;\\n#pragma mapbox: define highp vec4 outline_color\\n#pragma mapbox: define lowp float opacity\\nvoid main() {\\n#pragma mapbox: initialize highp vec4 outline_color\\n#pragma mapbox: initialize lowp float opacity\\nfloat dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);\\n#ifdef OVERDRAW_INSPECTOR\\ngl_FragColor=vec4(1.0);\\n#endif\\n}\", \"attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;\\n#pragma mapbox: define highp vec4 outline_color\\n#pragma mapbox: define lowp float opacity\\nvoid main() {\\n#pragma mapbox: initialize highp vec4 outline_color\\n#pragma mapbox: initialize lowp float opacity\\ngl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}\"),\n        it = bt(\"uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;\\n#pragma mapbox: define lowp float opacity\\n#pragma mapbox: define lowp vec4 pattern_from\\n#pragma mapbox: define lowp vec4 pattern_to\\nvoid main() {\\n#pragma mapbox: initialize lowp float opacity\\n#pragma mapbox: initialize mediump vec4 pattern_from\\n#pragma mapbox: initialize mediump vec4 pattern_to\\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;\\n#ifdef OVERDRAW_INSPECTOR\\ngl_FragColor=vec4(1.0);\\n#endif\\n}\", \"uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;\\n#pragma mapbox: define lowp float opacity\\n#pragma mapbox: define lowp vec4 pattern_from\\n#pragma mapbox: define lowp vec4 pattern_to\\n#pragma mapbox: define lowp float pixel_ratio_from\\n#pragma mapbox: define lowp float pixel_ratio_to\\nvoid main() {\\n#pragma mapbox: initialize lowp float opacity\\n#pragma mapbox: initialize mediump vec4 pattern_from\\n#pragma mapbox: initialize mediump vec4 pattern_to\\n#pragma mapbox: initialize lowp float pixel_ratio_from\\n#pragma mapbox: initialize lowp float pixel_ratio_to\\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}\"),\n        ot = bt(\"uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;\\n#pragma mapbox: define lowp float opacity\\n#pragma mapbox: define lowp vec4 pattern_from\\n#pragma mapbox: define lowp vec4 pattern_to\\nvoid main() {\\n#pragma mapbox: initialize lowp float opacity\\n#pragma mapbox: initialize mediump vec4 pattern_from\\n#pragma mapbox: initialize mediump vec4 pattern_to\\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;\\n#ifdef OVERDRAW_INSPECTOR\\ngl_FragColor=vec4(1.0);\\n#endif\\n}\", \"uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;\\n#pragma mapbox: define lowp float opacity\\n#pragma mapbox: define lowp vec4 pattern_from\\n#pragma mapbox: define lowp vec4 pattern_to\\n#pragma mapbox: define lowp float pixel_ratio_from\\n#pragma mapbox: define lowp float pixel_ratio_to\\nvoid main() {\\n#pragma mapbox: initialize lowp float opacity\\n#pragma mapbox: initialize mediump vec4 pattern_from\\n#pragma mapbox: initialize mediump vec4 pattern_to\\n#pragma mapbox: initialize lowp float pixel_ratio_from\\n#pragma mapbox: initialize lowp float pixel_ratio_to\\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}\"),\n        at = bt(\"varying vec4 v_color;void main() {gl_FragColor=v_color;\\n#ifdef OVERDRAW_INSPECTOR\\ngl_FragColor=vec4(1.0);\\n#endif\\n}\", \"uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec4 a_pos_normal_ed;attribute vec2 a_centroid_pos;varying vec4 v_color;\\n#pragma mapbox: define highp float base\\n#pragma mapbox: define highp float height\\n#pragma mapbox: define highp vec4 color\\nvoid main() {\\n#pragma mapbox: initialize highp float base\\n#pragma mapbox: initialize highp float height\\n#pragma mapbox: initialize highp vec4 color\\nvec3 pos_nx=floor(a_pos_normal_ed.xyz*0.5);mediump vec3 top_up_ny=a_pos_normal_ed.xyz-2.0*pos_nx;float x_normal=pos_nx.z/8192.0;vec3 normal=top_up_ny.y==1.0 ? vec3(0.0,0.0,1.0) : normalize(vec3(x_normal,(2.0*top_up_ny.z-1.0)*(1.0-abs(x_normal)),0.0));base=max(0.0,base);height=max(0.0,height);float t=top_up_ny.x;\\n#ifdef TERRAIN\\nvec2 centroid_pos=a_centroid_pos;bool flat_roof=centroid_pos.x !=0.0;float ele=elevation(pos_nx.xy);float hidden=float(centroid_pos.x==0.0 && centroid_pos.y==1.0);float c_ele=flat_roof ? centroid_pos.y==0.0 ? elevationFromUint16(centroid_pos.x) : flatElevation(centroid_pos) : ele;float h=flat_roof ? max(c_ele+height,ele+base+2.0) : ele+(t > 0.0 ? height : base==0.0 ?-5.0 : base);gl_Position=mix(u_matrix*vec4(pos_nx.xy,h,1),AWAY,hidden);\\n#else\\ngl_Position=u_matrix*vec4(pos_nx.xy,t > 0.0 ? height : base,1);\\n#endif\\nfloat colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=(\\n(1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}\"),\n        rt = bt(\"uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;\\n#pragma mapbox: define lowp float base\\n#pragma mapbox: define lowp float height\\n#pragma mapbox: define lowp vec4 pattern_from\\n#pragma mapbox: define lowp vec4 pattern_to\\n#pragma mapbox: define lowp float pixel_ratio_from\\n#pragma mapbox: define lowp float pixel_ratio_to\\nvoid main() {\\n#pragma mapbox: initialize lowp float base\\n#pragma mapbox: initialize lowp float height\\n#pragma mapbox: initialize mediump vec4 pattern_from\\n#pragma mapbox: initialize mediump vec4 pattern_to\\n#pragma mapbox: initialize lowp float pixel_ratio_from\\n#pragma mapbox: initialize lowp float pixel_ratio_to\\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;\\n#ifdef OVERDRAW_INSPECTOR\\ngl_FragColor=vec4(1.0);\\n#endif\\n}\", \"uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec4 a_pos_normal_ed;attribute vec2 a_centroid_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;\\n#pragma mapbox: define lowp float base\\n#pragma mapbox: define lowp float height\\n#pragma mapbox: define lowp vec4 pattern_from\\n#pragma mapbox: define lowp vec4 pattern_to\\n#pragma mapbox: define lowp float pixel_ratio_from\\n#pragma mapbox: define lowp float pixel_ratio_to\\nvoid main() {\\n#pragma mapbox: initialize lowp float base\\n#pragma mapbox: initialize lowp float height\\n#pragma mapbox: initialize mediump vec4 pattern_from\\n#pragma mapbox: initialize mediump vec4 pattern_to\\n#pragma mapbox: initialize lowp float pixel_ratio_from\\n#pragma mapbox: initialize lowp float pixel_ratio_to\\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 pos_nx=floor(a_pos_normal_ed.xyz*0.5);mediump vec3 top_up_ny=a_pos_normal_ed.xyz-2.0*pos_nx;float x_normal=pos_nx.z/8192.0;vec3 normal=top_up_ny.y==1.0 ? vec3(0.0,0.0,1.0) : normalize(vec3(x_normal,(2.0*top_up_ny.z-1.0)*(1.0-abs(x_normal)),0.0));float edgedistance=a_pos_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;base=max(0.0,base);height=max(0.0,height);float t=top_up_ny.x;float z=t > 0.0 ? height : base;\\n#ifdef TERRAIN\\nvec2 centroid_pos=a_centroid_pos;bool flat_roof=centroid_pos.x !=0.0;float ele=elevation(pos_nx.xy);float hidden=float(centroid_pos.x==0.0 && centroid_pos.y==1.0);float c_ele=flat_roof ? centroid_pos.y==0.0 ? elevationFromUint16(centroid_pos.x) : flatElevation(centroid_pos) : ele;float h=flat_roof ? max(c_ele+height,ele+base+2.0) : ele+(t > 0.0 ? height : base==0.0 ?-5.0 : base);gl_Position=mix(u_matrix*vec4(pos_nx.xy,h,1),AWAY,hidden);\\n#else\\ngl_Position=u_matrix*vec4(pos_nx.xy,z,1);\\n#endif\\nvec2 pos=normal.z==1.0\\n? pos_nx.xy\\n: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=(\\n(1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}\"),\n        nt = bt(\"#ifdef GL_ES\\nprecision highp float;\\n#endif\\nuniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2(\\n(c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c)\\n)/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(\\nderiv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);\\n#ifdef OVERDRAW_INSPECTOR\\ngl_FragColor=vec4(1.0);\\n#endif\\n}\", \"uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}\"),\n        st = bt(\"uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;\\n#ifdef OVERDRAW_INSPECTOR\\ngl_FragColor=vec4(1.0);\\n#endif\\n}\", \"uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}\"),\n        lt = bt(\"uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;\\n#pragma mapbox: define highp vec4 color\\n#pragma mapbox: define lowp float blur\\n#pragma mapbox: define lowp float opacity\\nvoid main() {\\n#pragma mapbox: initialize highp vec4 color\\n#pragma mapbox: initialize lowp float blur\\n#pragma mapbox: initialize lowp float opacity\\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);\\n#ifdef OVERDRAW_INSPECTOR\\ngl_FragColor=vec4(1.0);\\n#endif\\n}\", \"\\n#define scale 0.015873016\\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;\\n#pragma mapbox: define highp vec4 color\\n#pragma mapbox: define lowp float blur\\n#pragma mapbox: define lowp float opacity\\n#pragma mapbox: define mediump float gapwidth\\n#pragma mapbox: define lowp float offset\\n#pragma mapbox: define mediump float width\\nvoid main() {\\n#pragma mapbox: initialize highp vec4 color\\n#pragma mapbox: initialize lowp float blur\\n#pragma mapbox: initialize lowp float opacity\\n#pragma mapbox: initialize mediump float gapwidth\\n#pragma mapbox: initialize lowp float offset\\n#pragma mapbox: initialize mediump float width\\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;\\n#ifndef RENDER_TO_TEXTURE\\nfloat extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;\\n#else\\nv_gamma_scale=1.0;\\n#endif\\nv_width2=vec2(outset,inset);}\"),\n        ct = bt(\"uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec2 v_uv;\\n#pragma mapbox: define lowp float blur\\n#pragma mapbox: define lowp float opacity\\nvoid main() {\\n#pragma mapbox: initialize lowp float blur\\n#pragma mapbox: initialize lowp float opacity\\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,v_uv);gl_FragColor=color*(alpha*opacity);\\n#ifdef OVERDRAW_INSPECTOR\\ngl_FragColor=vec4(1.0);\\n#endif\\n}\", \"\\n#define scale 0.015873016\\nattribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_uv_x;attribute float a_split_index;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec2 v_uv;\\n#pragma mapbox: define lowp float blur\\n#pragma mapbox: define lowp float opacity\\n#pragma mapbox: define mediump float gapwidth\\n#pragma mapbox: define lowp float offset\\n#pragma mapbox: define mediump float width\\nvoid main() {\\n#pragma mapbox: initialize lowp float blur\\n#pragma mapbox: initialize lowp float opacity\\n#pragma mapbox: initialize mediump float gapwidth\\n#pragma mapbox: initialize lowp float offset\\n#pragma mapbox: initialize mediump float width\\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;\\n#ifndef RENDER_TO_TEXTURE\\nfloat extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;\\n#else\\nv_gamma_scale=1.0;\\n#endif\\nv_width2=vec2(outset,inset);}\"),\n        ht = bt(\"uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;\\n#pragma mapbox: define lowp vec4 pattern_from\\n#pragma mapbox: define lowp vec4 pattern_to\\n#pragma mapbox: define lowp float pixel_ratio_from\\n#pragma mapbox: define lowp float pixel_ratio_to\\n#pragma mapbox: define lowp float blur\\n#pragma mapbox: define lowp float opacity\\nvoid main() {\\n#pragma mapbox: initialize mediump vec4 pattern_from\\n#pragma mapbox: initialize mediump vec4 pattern_to\\n#pragma mapbox: initialize lowp float pixel_ratio_from\\n#pragma mapbox: initialize lowp float pixel_ratio_to\\n#pragma mapbox: initialize lowp float blur\\n#pragma mapbox: initialize lowp float opacity\\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;\\n#ifdef OVERDRAW_INSPECTOR\\ngl_FragColor=vec4(1.0);\\n#endif\\n}\", \"\\n#define scale 0.015873016\\nattribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_linesofar;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;\\n#pragma mapbox: define lowp float blur\\n#pragma mapbox: define lowp float opacity\\n#pragma mapbox: define lowp float offset\\n#pragma mapbox: define mediump float gapwidth\\n#pragma mapbox: define mediump float width\\n#pragma mapbox: define lowp float floorwidth\\n#pragma mapbox: define lowp vec4 pattern_from\\n#pragma mapbox: define lowp vec4 pattern_to\\n#pragma mapbox: define lowp float pixel_ratio_from\\n#pragma mapbox: define lowp float pixel_ratio_to\\nvoid main() {\\n#pragma mapbox: initialize lowp float blur\\n#pragma mapbox: initialize lowp float opacity\\n#pragma mapbox: initialize lowp float offset\\n#pragma mapbox: initialize mediump float gapwidth\\n#pragma mapbox: initialize mediump float width\\n#pragma mapbox: initialize lowp float floorwidth\\n#pragma mapbox: initialize mediump vec4 pattern_from\\n#pragma mapbox: initialize mediump vec4 pattern_to\\n#pragma mapbox: initialize lowp float pixel_ratio_from\\n#pragma mapbox: initialize lowp float pixel_ratio_to\\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;\\n#ifndef RENDER_TO_TEXTURE\\nfloat extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;\\n#else\\nv_gamma_scale=1.0;\\n#endif\\nv_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}\"),\n        ut = bt(\"uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;\\n#pragma mapbox: define highp vec4 color\\n#pragma mapbox: define lowp float blur\\n#pragma mapbox: define lowp float opacity\\n#pragma mapbox: define mediump float width\\n#pragma mapbox: define lowp float floorwidth\\nvoid main() {\\n#pragma mapbox: initialize highp vec4 color\\n#pragma mapbox: initialize lowp float blur\\n#pragma mapbox: initialize lowp float opacity\\n#pragma mapbox: initialize mediump float width\\n#pragma mapbox: initialize lowp float floorwidth\\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);\\n#ifdef OVERDRAW_INSPECTOR\\ngl_FragColor=vec4(1.0);\\n#endif\\n}\", \"\\n#define scale 0.015873016\\nattribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_linesofar;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;\\n#pragma mapbox: define highp vec4 color\\n#pragma mapbox: define lowp float blur\\n#pragma mapbox: define lowp float opacity\\n#pragma mapbox: define mediump float gapwidth\\n#pragma mapbox: define lowp float offset\\n#pragma mapbox: define mediump float width\\n#pragma mapbox: define lowp float floorwidth\\nvoid main() {\\n#pragma mapbox: initialize highp vec4 color\\n#pragma mapbox: initialize lowp float blur\\n#pragma mapbox: initialize lowp float opacity\\n#pragma mapbox: initialize mediump float gapwidth\\n#pragma mapbox: initialize lowp float offset\\n#pragma mapbox: initialize mediump float width\\n#pragma mapbox: initialize lowp float floorwidth\\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;\\n#ifndef RENDER_TO_TEXTURE\\nfloat extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;\\n#else\\nv_gamma_scale=1.0;\\n#endif\\nv_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}\"),\n        dt = bt(\"uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(\\ndot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);\\n#ifdef OVERDRAW_INSPECTOR\\ngl_FragColor=vec4(1.0);\\n#endif\\n}\", \"uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}\"),\n        _t = bt(\"uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;\\n#pragma mapbox: define lowp float opacity\\nvoid main() {\\n#pragma mapbox: initialize lowp float opacity\\nlowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;\\n#ifdef OVERDRAW_INSPECTOR\\ngl_FragColor=vec4(1.0);\\n#endif\\n}\", \"attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;varying vec2 v_tex;varying float v_fade_opacity;\\n#pragma mapbox: define lowp float opacity\\nvoid main() {\\n#pragma mapbox: initialize lowp float opacity\\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}float h=elevation(a_pos);vec4 projectedPoint=u_matrix*vec4(a_pos,h,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\\ncamera_to_anchor_distance/u_camera_to_center_distance :\\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(\\n0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),h,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,h,1.0);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0);\\n#ifdef PITCH_WITH_MAP_TERRAIN\\nvec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);\\n#endif\\nfloat occlusion_fade=occlusionFade(projectedPoint);gl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,float(projectedPoint.w <=0.0 || occlusion_fade==0.0));v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;v_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change));}\"),\n        mt = bt(\"#define SDF_PX 8.0\\nuniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;\\n#pragma mapbox: define highp vec4 fill_color\\n#pragma mapbox: define highp vec4 halo_color\\n#pragma mapbox: define lowp float opacity\\n#pragma mapbox: define lowp float halo_width\\n#pragma mapbox: define lowp float halo_blur\\nvoid main() {\\n#pragma mapbox: initialize highp vec4 fill_color\\n#pragma mapbox: initialize highp vec4 halo_color\\n#pragma mapbox: initialize lowp float opacity\\n#pragma mapbox: initialize lowp float halo_width\\n#pragma mapbox: initialize lowp float halo_blur\\nfloat EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);\\n#ifdef OVERDRAW_INSPECTOR\\ngl_FragColor=vec4(1.0);\\n#endif\\n}\", \"attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;varying vec2 v_data0;varying vec3 v_data1;\\n#pragma mapbox: define highp vec4 fill_color\\n#pragma mapbox: define highp vec4 halo_color\\n#pragma mapbox: define lowp float opacity\\n#pragma mapbox: define lowp float halo_width\\n#pragma mapbox: define lowp float halo_blur\\nvoid main() {\\n#pragma mapbox: initialize highp vec4 fill_color\\n#pragma mapbox: initialize highp vec4 halo_color\\n#pragma mapbox: initialize lowp float opacity\\n#pragma mapbox: initialize lowp float halo_width\\n#pragma mapbox: initialize lowp float halo_blur\\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}float h=elevation(a_pos);vec4 projectedPoint=u_matrix*vec4(a_pos,h,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\\ncamera_to_anchor_distance/u_camera_to_center_distance :\\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(\\n0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),h,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,h,1.0);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset);\\n#ifdef PITCH_WITH_MAP_TERRAIN\\nvec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);\\n#endif\\nfloat occlusion_fade=occlusionFade(projectedPoint);gl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,float(projectedPoint.w <=0.0 || occlusion_fade==0.0));float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}\"),\n        pt = bt(\"#define SDF_PX 8.0\\n#define SDF 1.0\\n#define ICON 0.0\\nuniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;\\n#pragma mapbox: define highp vec4 fill_color\\n#pragma mapbox: define highp vec4 halo_color\\n#pragma mapbox: define lowp float opacity\\n#pragma mapbox: define lowp float halo_width\\n#pragma mapbox: define lowp float halo_blur\\nvoid main() {\\n#pragma mapbox: initialize highp vec4 fill_color\\n#pragma mapbox: initialize highp vec4 halo_color\\n#pragma mapbox: initialize lowp float opacity\\n#pragma mapbox: initialize lowp float halo_width\\n#pragma mapbox: initialize lowp float halo_blur\\nfloat fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;\\n#ifdef OVERDRAW_INSPECTOR\\ngl_FragColor=vec4(1.0);\\n#endif\\nreturn;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);\\n#ifdef OVERDRAW_INSPECTOR\\ngl_FragColor=vec4(1.0);\\n#endif\\n}\", \"attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;varying vec4 v_data0;varying vec4 v_data1;\\n#pragma mapbox: define highp vec4 fill_color\\n#pragma mapbox: define highp vec4 halo_color\\n#pragma mapbox: define lowp float opacity\\n#pragma mapbox: define lowp float halo_width\\n#pragma mapbox: define lowp float halo_blur\\nvoid main() {\\n#pragma mapbox: initialize highp vec4 fill_color\\n#pragma mapbox: initialize highp vec4 halo_color\\n#pragma mapbox: initialize lowp float opacity\\n#pragma mapbox: initialize lowp float halo_width\\n#pragma mapbox: initialize lowp float halo_blur\\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}float h=elevation(a_pos);vec4 projectedPoint=u_matrix*vec4(a_pos,h,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\\ncamera_to_anchor_distance/u_camera_to_center_distance :\\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(\\n0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),h,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,h,1.0);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*fontScale);\\n#ifdef PITCH_WITH_MAP_TERRAIN\\nvec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);\\n#endif\\nfloat occlusion_fade=occlusionFade(projectedPoint);gl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,float(projectedPoint.w <=0.0 || occlusion_fade==0.0));float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}\"),\n        ft = bt(\"uniform sampler2D u_image0;varying vec2 v_pos0;void main() {gl_FragColor=texture2D(u_image0,v_pos0);\\n#ifdef OVERDRAW_INSPECTOR\\ngl_FragColor=vec4(1.0);\\n#endif\\n}\", \"uniform mat4 u_matrix;uniform float u_skirt_height;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;const float skirtOffset=24575.0;void main() {v_pos0=a_texture_pos/8192.0;float skirt=float(a_pos.x >=skirtOffset);float elevation=elevation(a_texture_pos)-skirt*u_skirt_height;vec2 decodedPos=a_pos-vec2(skirt*skirtOffset,0.0);gl_Position=u_matrix*vec4(decodedPos,elevation,1.0);}\"),\n        gt = bt(\"#ifdef GL_ES\\nprecision highp float;\\n#endif\\nvec4 pack_depth(float ndc_z) {float depth=ndc_z*0.5+0.5;const vec4 bit_shift=vec4(256.0*256.0*256.0,256.0*256.0,256.0,1.0);const vec4 bit_mask =vec4(0.0,1.0/256.0,1.0/256.0,1.0/256.0);vec4 res=fract(depth*bit_shift);res-=res.xxyz*bit_mask;return res;}varying float v_depth;void main() {gl_FragColor=pack_depth(v_depth);}\", \"uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying float v_depth;void main() {float elevation=elevation(a_texture_pos);gl_Position=u_matrix*vec4(a_pos,elevation,1.0);v_depth=gl_Position.z/gl_Position.w;}\"),\n        vt = bt(\"\\nvarying lowp vec3 v_uv;uniform lowp samplerCube u_cubemap;uniform lowp float u_opacity;uniform highp float u_temporal_offset;uniform highp vec3 u_sun_direction;highp vec3 hash(highp vec2 p) {highp vec3 p3=fract(vec3(p.xyx)*vec3(443.8975,397.2973,491.1871));p3+=dot(p3,p3.yxz+19.19);return fract(vec3((p3.x+p3.y)*p3.z,(p3.x+p3.z)*p3.y,(p3.y+p3.z)*p3.x));}vec3 dither(vec3 color,highp vec2 seed) {vec3 rnd=hash(seed)+hash(seed+0.59374)-0.5;color.rgb+=rnd/255.0;return color;}float sun_disk(highp vec3 ray_direction,highp vec3 sun_direction) {highp float cos_angle=dot(normalize(ray_direction),sun_direction);const highp float cos_sun_angular_diameter=0.99996192306;const highp float smoothstep_delta=1e-5;return smoothstep(\\ncos_sun_angular_diameter-smoothstep_delta,cos_sun_angular_diameter+smoothstep_delta,cos_angle);}float map(float value,float start,float end,float new_start,float new_end) {return ((value-start)*(new_end-new_start))/(end-start)+new_start;}void main() {vec3 uv=v_uv;const float y_bias=0.015;uv.y+=y_bias;uv.y=pow(abs(uv.y),1.0/5.0);uv.y=map(uv.y,0.0,1.0,-1.0,1.0);vec3 sky_color=textureCube(u_cubemap,uv).rgb;sky_color.rgb=dither(sky_color.rgb,gl_FragCoord.xy+u_temporal_offset);sky_color+=0.1*sun_disk(v_uv,u_sun_direction);gl_FragColor=vec4(sky_color*u_opacity,u_opacity);\\n#ifdef OVERDRAW_INSPECTOR\\ngl_FragColor=vec4(1.0);\\n#endif\\n}\", Ge),\n        xt = bt(\"varying highp vec3 v_uv;uniform lowp sampler2D u_color_ramp;uniform lowp vec3 u_center_direction;uniform lowp float u_radius;uniform lowp float u_opacity;uniform highp float u_temporal_offset;highp vec3 hash(highp vec2 p) {highp vec3 p3=fract(vec3(p.xyx)*vec3(443.8975,397.2973,491.1871));p3+=dot(p3,p3.yxz+19.19);return fract(vec3((p3.x+p3.y)*p3.z,(p3.x+p3.z)*p3.y,(p3.y+p3.z)*p3.x));}vec3 dither(vec3 color,highp vec2 seed) {vec3 rnd=hash(seed)+hash(seed+0.59374)-0.5;color.rgb+=rnd/255.0;return color;}void main() {float progress=acos(dot(normalize(v_uv),u_center_direction))/u_radius;vec4 color=texture2D(u_color_ramp,vec2(progress,0.5))*u_opacity;color.rgb=dither(color.rgb,gl_FragCoord.xy+u_temporal_offset);gl_FragColor=color;\\n#ifdef OVERDRAW_INSPECTOR\\ngl_FragColor=vec4(1.0);\\n#endif\\n}\", Ge),\n        yt = bt(\"\\nvarying highp vec3 v_position;uniform highp float u_sun_intensity;uniform highp float u_luminance;uniform lowp vec3 u_sun_direction;uniform highp vec4 u_color_tint_r;uniform highp vec4 u_color_tint_m;\\n#ifdef GL_ES\\nprecision highp float;\\n#endif\\n#define BETA_R                  vec3(5.5e-6,13.0e-6,22.4e-6)\\n#define BETA_M                  vec3(21e-6,21e-6,21e-6)\\n#define MIE_G                   0.76\\n#define DENSITY_HEIGHT_SCALE_R  8000.0\\n#define DENSITY_HEIGHT_SCALE_M  1200.0\\n#define PLANET_RADIUS           6360e3\\n#define ATMOSPHERE_RADIUS       6420e3\\n#define SAMPLE_STEPS            10\\n#define DENSITY_STEPS           4\\nfloat ray_sphere_exit(vec3 orig,vec3 dir,float radius) {float a=dot(dir,dir);float b=2.0*dot(dir,orig);float c=dot(orig,orig)-radius*radius;float d=sqrt(b*b-4.0*a*c);return (-b+d)/(2.0*a);}vec3 extinction(vec2 density) {return exp(-vec3(BETA_R*u_color_tint_r.a*density.x+BETA_M*u_color_tint_m.a*density.y));}vec2 local_density(vec3 point) {float height=max(length(point)-PLANET_RADIUS,0.0);float exp_r=exp(-height/DENSITY_HEIGHT_SCALE_R);float exp_m=exp(-height/DENSITY_HEIGHT_SCALE_M);return vec2(exp_r,exp_m);}float phase_ray(float cos_angle) {return (3.0/(16.0*PI))*(1.0+cos_angle*cos_angle);}float phase_mie(float cos_angle) {return (3.0/(8.0*PI))*((1.0-MIE_G*MIE_G)*(1.0+cos_angle*cos_angle))/((2.0+MIE_G*MIE_G)*pow(1.0+MIE_G*MIE_G-2.0*MIE_G*cos_angle,1.5));}vec2 density_to_atmosphere(vec3 point,vec3 light_dir) {float ray_len=ray_sphere_exit(point,light_dir,ATMOSPHERE_RADIUS);float step_len=ray_len/float(DENSITY_STEPS);vec2 density_point_to_atmosphere=vec2(0.0);for (int i=0; i < DENSITY_STEPS;++i) {vec3 point_on_ray=point+light_dir*((float(i)+0.5)*step_len);density_point_to_atmosphere+=local_density(point_on_ray)*step_len;;}return density_point_to_atmosphere;}vec3 atmosphere(vec3 ray_dir,vec3 sun_direction,float sun_intensity) {vec2 density_orig_to_point=vec2(0.0);vec3 scatter_r=vec3(0.0);vec3 scatter_m=vec3(0.0);vec3 origin=vec3(0.0,PLANET_RADIUS,0.0);float ray_len=ray_sphere_exit(origin,ray_dir,ATMOSPHERE_RADIUS);float step_len=ray_len/float(SAMPLE_STEPS);for (int i=0; i < SAMPLE_STEPS;++i) {vec3 point_on_ray=origin+ray_dir*((float(i)+0.5)*step_len);vec2 density=local_density(point_on_ray)*step_len;density_orig_to_point+=density;vec2 density_point_to_atmosphere=density_to_atmosphere(point_on_ray,sun_direction);vec2 density_orig_to_atmosphere=density_orig_to_point+density_point_to_atmosphere;vec3 extinction=extinction(density_orig_to_atmosphere);scatter_r+=density.x*extinction;scatter_m+=density.y*extinction;}float cos_angle=dot(ray_dir,sun_direction);float phase_r=phase_ray(cos_angle);float phase_m=phase_mie(cos_angle);vec3 beta_r=BETA_R*u_color_tint_r.rgb*u_color_tint_r.a;vec3 beta_m=BETA_M*u_color_tint_m.rgb*u_color_tint_m.a;return (scatter_r*phase_r*beta_r+scatter_m*phase_m*beta_m)*sun_intensity;}const float A=0.15;const float B=0.50;const float C=0.10;const float D=0.20;const float E=0.02;const float F=0.30;vec3 uncharted2_tonemap(vec3 x) {return ((x*(A*x+C*B)+D*E)/(x*(A*x+B)+D*F))-E/F;}void main() {vec3 ray_direction=v_position;ray_direction.y=pow(ray_direction.y,5.0);const float y_bias=0.015;ray_direction.y+=y_bias;vec3 color=atmosphere(normalize(ray_direction),u_sun_direction,u_sun_intensity);float white_scale=1.0748724675633854;color=uncharted2_tonemap((log2(2.0/pow(u_luminance,4.0)))*color)*white_scale;gl_FragColor=vec4(color,1.0);}\", \"attribute highp vec3 a_pos_3f;uniform mat3 u_matrix_3f;varying highp vec3 v_position;float map(float value,float start,float end,float new_start,float new_end) {return ((value-start)*(new_end-new_start))/(end-start)+new_start;}void main() {vec4 pos=vec4(u_matrix_3f*a_pos_3f,1.0);v_position=pos.xyz;v_position.y*=-1.0;v_position.y=map(v_position.y,-1.0,1.0,0.0,1.0);gl_Position=vec4(a_pos_3f.xy,0.0,1.0);}\");\n\n    function bt(e, t, i) {\n      var o = /#pragma mapbox: ([\\w]+) ([\\w]+) ([\\w]+) ([\\w]+)/g,\n          a = t.match(/attribute (highp |mediump |lowp )?([\\w]+) ([\\w]+)/g),\n          r = e.match(/uniform (highp |mediump |lowp )?([\\w]+) ([\\w]+)([\\s]*)([\\w]*)/g),\n          n = t.match(/uniform (highp |mediump |lowp )?([\\w]+) ([\\w]+)([\\s]*)([\\w]*)/g);\n      var s = n ? n.concat(r) : r;\n      i || (s = Ve.staticUniforms.concat(s));\n      var l = {};\n      return {\n        fragmentSource: e = e.replace(o, function (e, t, i, o, a) {\n          return l[a] = !0, \"define\" === t ? \"\\n#ifndef HAS_UNIFORM_u_\".concat(a, \"\\nvarying \").concat(i, \" \").concat(o, \" \").concat(a, \";\\n#else\\nuniform \").concat(i, \" \").concat(o, \" u_\").concat(a, \";\\n#endif\\n\") : \"\\n#ifdef HAS_UNIFORM_u_\".concat(a, \"\\n    \").concat(i, \" \").concat(o, \" \").concat(a, \" = u_\").concat(a, \";\\n#endif\\n\");\n        }),\n        vertexSource: t = t.replace(o, function (e, t, i, o, a) {\n          var r = \"float\" === o ? \"vec2\" : \"vec4\",\n              n = a.match(/color/) ? \"color\" : r;\n          return l[a] ? \"define\" === t ? \"\\n#ifndef HAS_UNIFORM_u_\".concat(a, \"\\nuniform lowp float u_\").concat(a, \"_t;\\nattribute \").concat(i, \" \").concat(r, \" a_\").concat(a, \";\\nvarying \").concat(i, \" \").concat(o, \" \").concat(a, \";\\n#else\\nuniform \").concat(i, \" \").concat(o, \" u_\").concat(a, \";\\n#endif\\n\") : \"vec4\" === n ? \"\\n#ifndef HAS_UNIFORM_u_\".concat(a, \"\\n    \").concat(a, \" = a_\").concat(a, \";\\n#else\\n    \").concat(i, \" \").concat(o, \" \").concat(a, \" = u_\").concat(a, \";\\n#endif\\n\") : \"\\n#ifndef HAS_UNIFORM_u_\".concat(a, \"\\n    \").concat(a, \" = unpack_mix_\").concat(n, \"(a_\").concat(a, \", u_\").concat(a, \"_t);\\n#else\\n    \").concat(i, \" \").concat(o, \" \").concat(a, \" = u_\").concat(a, \";\\n#endif\\n\") : \"define\" === t ? \"\\n#ifndef HAS_UNIFORM_u_\".concat(a, \"\\nuniform lowp float u_\").concat(a, \"_t;\\nattribute \").concat(i, \" \").concat(r, \" a_\").concat(a, \";\\n#else\\nuniform \").concat(i, \" \").concat(o, \" u_\").concat(a, \";\\n#endif\\n\") : \"vec4\" === n ? \"\\n#ifndef HAS_UNIFORM_u_\".concat(a, \"\\n    \").concat(i, \" \").concat(o, \" \").concat(a, \" = a_\").concat(a, \";\\n#else\\n    \").concat(i, \" \").concat(o, \" \").concat(a, \" = u_\").concat(a, \";\\n#endif\\n\") : \"\\n#ifndef HAS_UNIFORM_u_\".concat(a, \"\\n    \").concat(i, \" \").concat(o, \" \").concat(a, \" = unpack_mix_\").concat(n, \"(a_\").concat(a, \", u_\").concat(a, \"_t);\\n#else\\n    \").concat(i, \" \").concat(o, \" \").concat(a, \" = u_\").concat(a, \";\\n#endif\\n\");\n        }),\n        staticAttributes: a,\n        staticUniforms: s\n      };\n    }\n\n    var wt = Object.freeze({\n      __proto__: null,\n\n      get preludeTerrain() {\n        return Ve;\n      },\n\n      prelude: qe,\n      background: je,\n      backgroundPattern: $e,\n      circle: Xe,\n      clippingMask: We,\n      heatmap: He,\n      heatmapTexture: Ke,\n      collisionBox: Ye,\n      collisionCircle: Je,\n      debug: Qe,\n      fill: et,\n      fillOutline: tt,\n      fillOutlinePattern: it,\n      fillPattern: ot,\n      fillExtrusion: at,\n      fillExtrusionPattern: rt,\n      hillshadePrepare: nt,\n      hillshade: st,\n      line: lt,\n      lineGradient: ct,\n      linePattern: ht,\n      lineSDF: ut,\n      raster: dt,\n      symbolIcon: _t,\n      symbolSDF: mt,\n      symbolTextAndIcon: pt,\n      terrainRaster: ft,\n      terrainDepth: gt,\n      skybox: vt,\n      skyboxGradient: xt,\n      skyboxCapture: yt\n    });\n\n    var Tt = /*#__PURE__*/function () {\n      function Tt() {\n        _classCallCheck(this, Tt);\n\n        this.boundProgram = null, this.boundLayoutVertexBuffer = null, this.boundPaintVertexBuffers = [], this.boundIndexBuffer = null, this.boundVertexOffset = null, this.boundDynamicVertexBuffer = null, this.vao = null;\n      }\n\n      _createClass(Tt, [{\n        key: \"bind\",\n        value: function bind(e, t, i, o, a, r, n, s) {\n          this.context = e;\n          var l = this.boundPaintVertexBuffers.length !== o.length;\n\n          for (var _e315 = 0; !l && _e315 < o.length; _e315++) {\n            this.boundPaintVertexBuffers[_e315] !== o[_e315] && (l = !0);\n          }\n\n          e.extVertexArrayObject && this.vao && this.boundProgram === t && this.boundLayoutVertexBuffer === i && !l && this.boundIndexBuffer === a && this.boundVertexOffset === r && this.boundDynamicVertexBuffer === n && this.boundDynamicVertexBuffer2 === s ? (e.bindVertexArrayOES.set(this.vao), n && n.bind(), a && a.dynamicDraw && a.bind(), s && s.bind()) : this.freshBind(t, i, o, a, r, n, s);\n        }\n      }, {\n        key: \"freshBind\",\n        value: function freshBind(e, t, i, o, a, r, n) {\n          var s;\n          var l = e.numAttributes,\n              c = this.context,\n              h = c.gl;\n          if (c.extVertexArrayObject) this.vao && this.destroy(), this.vao = c.extVertexArrayObject.createVertexArrayOES(), c.bindVertexArrayOES.set(this.vao), s = 0, this.boundProgram = e, this.boundLayoutVertexBuffer = t, this.boundPaintVertexBuffers = i, this.boundIndexBuffer = o, this.boundVertexOffset = a, this.boundDynamicVertexBuffer = r, this.boundDynamicVertexBuffer2 = n;else {\n            s = c.currentNumAttributes || 0;\n\n            for (var _e316 = l; _e316 < s; _e316++) {\n              h.disableVertexAttribArray(_e316);\n            }\n          }\n          t.enableAttributes(h, e);\n\n          var _iterator198 = _createForOfIteratorHelper(i),\n              _step198;\n\n          try {\n            for (_iterator198.s(); !(_step198 = _iterator198.n()).done;) {\n              var _t296 = _step198.value;\n\n              _t296.enableAttributes(h, e);\n            }\n          } catch (err) {\n            _iterator198.e(err);\n          } finally {\n            _iterator198.f();\n          }\n\n          r && r.enableAttributes(h, e), n && n.enableAttributes(h, e), t.bind(), t.setVertexAttribPointers(h, e, a);\n\n          var _iterator199 = _createForOfIteratorHelper(i),\n              _step199;\n\n          try {\n            for (_iterator199.s(); !(_step199 = _iterator199.n()).done;) {\n              var _t297 = _step199.value;\n              _t297.bind(), _t297.setVertexAttribPointers(h, e, a);\n            }\n          } catch (err) {\n            _iterator199.e(err);\n          } finally {\n            _iterator199.f();\n          }\n\n          r && (r.bind(), r.setVertexAttribPointers(h, e, a)), o && o.bind(), n && (n.bind(), n.setVertexAttribPointers(h, e, a)), c.currentNumAttributes = l;\n        }\n      }, {\n        key: \"destroy\",\n        value: function destroy() {\n          this.vao && (this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao), this.vao = null);\n        }\n      }]);\n\n      return Tt;\n    }();\n\n    function Et(t, i) {\n      var o = Math.pow(2, i.canonical.z),\n          a = i.canonical.y;\n      return [new e.MercatorCoordinate(0, a / o).toLngLat().lat, new e.MercatorCoordinate(0, (a + 1) / o).toLngLat().lat];\n    }\n\n    function Ct(t, i, o, a, r, n, s) {\n      var l = t.context,\n          c = l.gl,\n          h = o.fbo;\n      if (!h) return;\n      t.prepareDrawTile(i);\n      var u = t.useProgram(\"hillshade\");\n      l.activeTexture.set(c.TEXTURE0), c.bindTexture(c.TEXTURE_2D, h.colorAttachment.get());\n\n      var d = function (e, t, i, o) {\n        var a = i.paint.get(\"hillshade-shadow-color\"),\n            r = i.paint.get(\"hillshade-highlight-color\"),\n            n = i.paint.get(\"hillshade-accent-color\");\n        var s = i.paint.get(\"hillshade-illumination-direction\") * (Math.PI / 180);\n        \"viewport\" === i.paint.get(\"hillshade-illumination-anchor\") && (s -= e.transform.angle);\n        var l = !e.options.moving;\n        return {\n          u_matrix: o || e.transform.calculatePosMatrix(t.tileID.toUnwrapped(), l),\n          u_image: 0,\n          u_latrange: Et(0, t.tileID),\n          u_light: [i.paint.get(\"hillshade-exaggeration\"), s],\n          u_shadow: a,\n          u_highlight: r,\n          u_accent: n\n        };\n      }(t, o, a, t.terrain ? i.posMatrix : null);\n\n      u.draw(l, c.TRIANGLES, r, n, s, e.CullFaceMode.disabled, d, a.id, t.rasterBoundsBuffer, t.quadTriangleIndexBuffer, t.rasterBoundsSegments);\n    }\n\n    function St(t, i, o) {\n      if (!i.needsDEMTextureUpload) return;\n      var a = t.context,\n          r = a.gl;\n      a.pixelStoreUnpackPremultiplyAlpha.set(!1), i.demTexture = i.demTexture || t.getTileTexture(o.stride);\n      var n = o.getPixels();\n      i.demTexture ? i.demTexture.update(n, {\n        premultiply: !1\n      }) : i.demTexture = new e.Texture(a, n, r.RGBA, {\n        premultiply: !1\n      }), i.needsDEMTextureUpload = !1;\n    }\n\n    function It(t, i, o, a, r, n) {\n      var s = t.context,\n          l = s.gl;\n      if (!i.dem) return;\n      var c = i.dem;\n      if (s.activeTexture.set(l.TEXTURE1), St(t, i, c), !i.demTexture) return;\n      i.demTexture.bind(l.NEAREST, l.CLAMP_TO_EDGE);\n      var h = c.dim;\n      s.activeTexture.set(l.TEXTURE0);\n      var u = i.fbo;\n\n      if (!u) {\n        var _t298 = new e.Texture(s, {\n          width: h,\n          height: h,\n          data: null\n        }, l.RGBA);\n\n        _t298.bind(l.LINEAR, l.CLAMP_TO_EDGE), u = i.fbo = s.createFramebuffer(h, h, !0), u.colorAttachment.set(_t298.texture);\n      }\n\n      s.bindFramebuffer.set(u.framebuffer), s.viewport.set([0, 0, h, h]), t.useProgram(\"hillshadePrepare\").draw(s, l.TRIANGLES, a, r, n, e.CullFaceMode.disabled, function (t, i) {\n        var o = i.stride,\n            a = e.create();\n        return e.ortho(a, 0, e.EXTENT, -e.EXTENT, 0, 0, 1), e.translate(a, a, [0, -e.EXTENT, 0]), {\n          u_matrix: a,\n          u_image: 1,\n          u_dimension: [o, o],\n          u_zoom: t.overscaledZ,\n          u_unpack: i.unpackVector\n        };\n      }(i.tileID, c), o.id, t.rasterBoundsBuffer, t.quadTriangleIndexBuffer, t.rasterBoundsSegments), i.needsHillshadePrepare = !1;\n    }\n\n    var Pt = function Pt(t, i) {\n      return {\n        u_matrix: new e.UniformMatrix4f(t, i.u_matrix),\n        u_image0: new e.Uniform1i(t, i.u_image0),\n        u_skirt_height: new e.Uniform1f(t, i.u_skirt_height)\n      };\n    },\n        Mt = function Mt(e, t) {\n      return {\n        u_matrix: e,\n        u_image0: 0,\n        u_skirt_height: t\n      };\n    },\n        zt = new ( /*#__PURE__*/function () {\n      function _class18() {\n        _classCallCheck(this, _class18);\n\n        this.operations = {};\n      }\n\n      _createClass(_class18, [{\n        key: \"newMorphing\",\n        value: function newMorphing(e, t, i, o, a) {\n          if (e in this.operations) {\n            var _t299 = this.operations[e];\n            _t299.to.tileID.key !== i.tileID.key && (_t299.queued = i);\n          } else this.operations[e] = {\n            startTime: o,\n            phase: 0,\n            duration: a,\n            from: t,\n            to: i,\n            queued: null\n          };\n        }\n      }, {\n        key: \"getMorphValuesForProxy\",\n        value: function getMorphValuesForProxy(e) {\n          if (!(e in this.operations)) return null;\n          var t = this.operations[e];\n          return {\n            from: t.from,\n            to: t.to,\n            phase: t.phase\n          };\n        }\n      }, {\n        key: \"update\",\n        value: function update(e) {\n          for (var _t300 in this.operations) {\n            var _i219 = this.operations[_t300];\n\n            for (_i219.phase = (e - _i219.startTime) / _i219.duration; _i219.phase >= 1 || !this._validOp(_i219);) {\n              if (!this._nextOp(_i219, e)) {\n                delete this.operations[_t300];\n                break;\n              }\n            }\n          }\n        }\n      }, {\n        key: \"_nextOp\",\n        value: function _nextOp(e, t) {\n          return !!e.queued && (e.from = e.to, e.to = e.queued, e.queued = null, e.phase = 0, e.startTime = t, !0);\n        }\n      }, {\n        key: \"_validOp\",\n        value: function _validOp(e) {\n          return e.from.hasData() && e.to.hasData();\n        }\n      }]);\n\n      return _class18;\n    }())(),\n        At = {\n      0: null,\n      1: \"TERRAIN_VERTEX_MORPHING\"\n    };\n\n    function Dt(t, i, o, a, r) {\n      var n = t.context,\n          s = n.gl;\n      var l = t.useProgram(\"terrainRaster\"),\n          c = 0;\n      var h = t.colorModeForRenderPass(),\n          u = new e.DepthMode(s.LEQUAL, e.DepthMode.ReadWrite, t.depthRangeFor3D);\n      zt.update(r);\n\n      var d = t.transform,\n          _ = 6 * Math.pow(1.5, 22 - d.zoom) * i.exaggeration();\n\n      var m, p, f;\n\n      var _iterator200 = _createForOfIteratorHelper(a),\n          _step200;\n\n      try {\n        for (_iterator200.s(); !(_step200 = _iterator200.n()).done;) {\n          var _g14 = _step200.value;\n\n          var _a116 = o.getTile(_g14),\n              _v12 = e.StencilMode.disabled,\n              _x10 = i.prevTerrainTileForTile[_g14.key],\n              _y12 = i.terrainTileForTile[_g14.key];\n\n          f = _y12, null != (p = _x10) && null != f && p.hasData() && f.hasData() && null != p.demTexture && null != f.demTexture && p.tileID.key !== f.tileID.key && zt.newMorphing(_g14.key, _x10, _y12, r, 250), n.activeTexture.set(s.TEXTURE0), _a116.texture.bind(s.LINEAR, s.CLAMP_TO_EDGE, s.LINEAR_MIPMAP_NEAREST);\n\n          var _b11 = zt.getMorphValuesForProxy(_g14.key),\n              _w9 = _b11 ? 1 : 0;\n\n          var _T5 = void 0;\n\n          _b11 && (_T5 = {\n            morphing: {\n              srcDemTile: _b11.from,\n              dstDemTile: _b11.to,\n              phase: e.easeCubicInOut(_b11.phase)\n            }\n          });\n\n          var _E3 = Mt(_g14.posMatrix, Lt(_g14.canonical, d.renderWorldCopies) ? _ / 10 : _);\n\n          c !== (m = _w9) && (l = t.useProgram(\"terrainRaster\", null, At[m]), c = m), i.setupElevationDraw(_a116, l, _T5), l.draw(n, s.TRIANGLES, u, _v12, h, e.CullFaceMode.backCCW, _E3, \"terrain_raster\", i.gridBuffer, i.gridIndexBuffer, i.gridSegments);\n        }\n      } catch (err) {\n        _iterator200.e(err);\n      } finally {\n        _iterator200.f();\n      }\n    }\n\n    function Lt(e, t) {\n      var i = 1 << e.z;\n      return !t && (0 === e.x || e.x === i - 1) || 0 === e.y || e.y === i - 1;\n    }\n\n    var Rt = function Rt(e) {\n      return {\n        u_matrix: e\n      };\n    };\n\n    function kt(t, i, o, a, r) {\n      if (r > 0) {\n        var _n141 = e.browser.now(),\n            _s108 = (_n141 - t.timeAdded) / r,\n            _l45 = i ? (_n141 - i.timeAdded) / r : -1,\n            _c33 = o.getSource(),\n            _h25 = a.coveringZoomLevel({\n          tileSize: _c33.tileSize,\n          roundZoom: _c33.roundZoom\n        }),\n            _u38 = !i || Math.abs(i.tileID.overscaledZ - _h25) > Math.abs(t.tileID.overscaledZ - _h25),\n            _d17 = _u38 && t.refreshedUponExpiration ? 1 : e.clamp(_u38 ? _s108 : 1 - _l45, 0, 1);\n\n        return t.refreshedUponExpiration && _s108 >= 1 && (t.refreshedUponExpiration = !1), i ? {\n          opacity: 1,\n          mix: 1 - _d17\n        } : {\n          opacity: _d17,\n          mix: 0\n        };\n      }\n\n      return {\n        opacity: 1,\n        mix: 0\n      };\n    }\n\n    var Bt = /*#__PURE__*/function (_e$SourceCache) {\n      _inherits(Bt, _e$SourceCache);\n\n      var _super113 = _createSuper(Bt);\n\n      function Bt(e) {\n        var _this98;\n\n        _classCallCheck(this, Bt);\n\n        var t = I(\"proxy\", {\n          type: \"geojson\",\n          maxzoom: e.transform.maxZoom\n        }, new g(B(), null), e.style);\n        _this98 = _super113.call(this, \"proxy\", t, !1), t.setEventedParent(_assertThisInitialized(_this98)), _this98.map = _this98.getSource().map = e, _this98.used = _this98._sourceLoaded = !0, _this98.renderCache = [], _this98.renderCachePool = [], _this98.proxyCachedFBO = {};\n        return _this98;\n      }\n\n      _createClass(Bt, [{\n        key: \"update\",\n        value: function update(t, i, o) {\n          var _this99 = this;\n\n          if (t.freezeTileCoverage) return;\n          this.transform = t;\n          var a = t.coveringTiles({\n            tileSize: this._source.tileSize,\n            minzoom: this._source.minzoom,\n            maxzoom: this._source.maxzoom,\n            roundZoom: this._source.roundZoom,\n            reparseOverscaled: this._source.reparseOverscaled,\n            useElevationData: !0\n          }).reduce(function (i, o) {\n            if (i[o.key] = \"\", !_this99._tiles[o.key]) {\n              var _i220 = new e.Tile(o, _this99._source.tileSize * o.overscaleFactor(), t.tileZoom);\n\n              _i220.state = \"loaded\", _this99._tiles[o.key] = _i220;\n            }\n\n            return i;\n          }, {});\n\n          for (var _e317 in this._tiles) {\n            _e317 in a || (this.freeFBO(_e317), this._tiles[_e317].state = \"unloaded\", delete this._tiles[_e317]);\n          }\n        }\n      }, {\n        key: \"freeFBO\",\n        value: function freeFBO(e) {\n          var t = this.proxyCachedFBO[e];\n\n          if (void 0 !== t) {\n            var _this$renderCachePool;\n\n            var _i221 = Object.values(t);\n\n            (_this$renderCachePool = this.renderCachePool).push.apply(_this$renderCachePool, _toConsumableArray(_i221)), delete this.proxyCachedFBO[e];\n          }\n        }\n      }, {\n        key: \"deallocRenderCache\",\n        value: function deallocRenderCache() {\n          this.renderCache.forEach(function (e) {\n            return e.fb.destroy();\n          }), this.renderCache = [], this.renderCachePool = [], this.proxyCachedFBO = {};\n        }\n      }]);\n\n      return Bt;\n    }(e.SourceCache);\n\n    var Ft = /*#__PURE__*/function (_e$OverscaledTileID) {\n      _inherits(Ft, _e$OverscaledTileID);\n\n      var _super114 = _createSuper(Ft);\n\n      function Ft(e, t, i) {\n        var _this100;\n\n        _classCallCheck(this, Ft);\n\n        _this100 = _super114.call(this, e.overscaledZ, e.wrap, e.canonical.z, e.canonical.x, e.canonical.y), _this100.proxyTileKey = t, _this100.posMatrix = i;\n        return _this100;\n      }\n\n      return Ft;\n    }(e.OverscaledTileID);\n\n    var Ot = /*#__PURE__*/function (_e$Elevation) {\n      _inherits(Ot, _e$Elevation);\n\n      var _super115 = _createSuper(Ot);\n\n      function Ot(t, i) {\n        var _this101;\n\n        _classCallCheck(this, Ot);\n\n        _this101 = _super115.call(this), _this101.painter = t, _this101.terrainTileForTile = {}, _this101.prevTerrainTileForTile = {};\n\n        var _ref168 = function (t) {\n          var i = new e.StructArrayLayout4i8(),\n              o = new e.StructArrayLayout3ui6();\n          i.reserve(17161), o.reserve(33800);\n          var a = e.EXTENT / 128,\n              r = e.EXTENT + a / 2,\n              n = r + a;\n\n          for (var _t301 = -a; _t301 < n; _t301 += a) {\n            for (var _o84 = -a; _o84 < n; _o84 += a) {\n              var _a117 = _o84 < 0 || _o84 > r || _t301 < 0 || _t301 > r ? 24575 : 0,\n                  _n142 = e.clamp(Math.round(_o84), 0, e.EXTENT),\n                  _s109 = e.clamp(Math.round(_t301), 0, e.EXTENT);\n\n              i.emplaceBack(_n142 + _a117, _s109, _n142, _s109);\n            }\n          }\n\n          var s = function s(e, t) {\n            var i = 131 * t + e;\n            o.emplaceBack(i + 1, i, i + 131), o.emplaceBack(i + 131, i + 131 + 1, i + 1);\n          };\n\n          for (var _e318 = 1; _e318 < 129; _e318++) {\n            for (var _t302 = 1; _t302 < 129; _t302++) {\n              s(_t302, _e318);\n            }\n          }\n\n          return [0, 129].forEach(function (e) {\n            for (var _t303 = 0; _t303 < 130; _t303++) {\n              s(_t303, e), s(e, _t303);\n            }\n          }), [i, o, 32768];\n        }(),\n            _ref169 = _slicedToArray(_ref168, 3),\n            o = _ref169[0],\n            a = _ref169[1],\n            r = _ref169[2],\n            n = t.context;\n\n        _this101.gridBuffer = n.createVertexBuffer(o, E.members), _this101.gridIndexBuffer = n.createIndexBuffer(a), _this101.gridSegments = e.SegmentVector.simpleSegment(0, 0, o.length, a.length), _this101.gridNoSkirtSegments = e.SegmentVector.simpleSegment(0, 0, o.length, r), _this101.proxyCoords = [], _this101.proxiedCoords = {}, _this101._visibleDemTiles = [], _this101._drapedRenderBatches = [], _this101._sourceTilesOverlap = {}, _this101.proxySourceCache = new Bt(i.map), _this101.orthoMatrix = e.create(), e.ortho(_this101.orthoMatrix, 0, e.EXTENT, 0, e.EXTENT, 0, 1);\n        var s = n.gl;\n        _this101._overlapStencilMode = new e.StencilMode({\n          func: s.GEQUAL,\n          mask: 255\n        }, 0, 255, s.KEEP, s.KEEP, s.REPLACE), _this101._previousZoom = t.transform.zoom, _this101.pool = [], _this101._findCoveringTileCache = {}, _this101._tilesDirty = {}, _this101.style = i, _this101._useVertexMorphing = !0;\n        return _this101;\n      }\n\n      _createClass(Ot, [{\n        key: \"style\",\n        set: function set(e) {\n          e.on(\"data\", this._onStyleDataEvent.bind(this)), e.on(\"neworder\", this._checkRenderCacheEfficiency.bind(this)), this._style = e, this._checkRenderCacheEfficiency();\n        }\n      }, {\n        key: \"update\",\n        value: function update(t, i, o) {\n          var _this102 = this;\n\n          if (t && t.terrain) {\n            this._style !== t && (this.style = t), this.enabled = !0;\n            var _a118 = t.terrain.properties;\n            this.sourceCache = t._getSourceCache(_a118.get(\"source\")), this._exaggeration = _a118.get(\"exaggeration\");\n\n            var _r228 = function _r228() {\n              _this102.sourceCache.used && e.warnOnce(\"Raster DEM source '\".concat(_this102.sourceCache.id, \"' is used both for terrain and as layer source.\\n\") + \"This leads to lower resolution of hillshade. For full hillshade resolution but higher memory consumption, define another raster DEM source.\");\n\n              var t = _this102.sourceCache.getSource().tileSize / 128,\n                  o = _this102.proxySourceCache.getSource().tileSize;\n\n              _this102.sourceCache.update(i, t * o, !0), _this102._findCoveringTileCache[_this102.sourceCache.id] = {};\n            };\n\n            this.sourceCache.usedForTerrain || (this._findCoveringTileCache[this.sourceCache.id] = {}, this.sourceCache.usedForTerrain = !0, _r228(), this._initializing = !0), _r228(), i.updateElevation(!o), this._findCoveringTileCache[this.proxySourceCache.id] = {}, this.proxySourceCache.update(i), this._emptyDEMTextureDirty = !0;\n          } else this._disable();\n        }\n      }, {\n        key: \"_checkRenderCacheEfficiency\",\n        value: function _checkRenderCacheEfficiency() {\n          var t = this.renderCacheEfficiency(this._style);\n          this._style.map._optimizeForTerrain || 100 !== t.efficiency && e.warnOnce(\"Terrain render cache efficiency is not optimal (\".concat(t.efficiency, \"%) and performance\\n                may be affected negatively, consider placing all background, fill and line layers before layer\\n                with id '\").concat(t.firstUndrapedLayer, \"' or create a map using optimizeForTerrain: true option.\"));\n        }\n      }, {\n        key: \"_onStyleDataEvent\",\n        value: function _onStyleDataEvent(e) {\n          e.coord && \"source\" === e.dataType ? this._clearRenderCacheForTile(e.sourceCacheId, e.coord) : \"style\" === e.dataType && (this._invalidateRenderCache = !0);\n        }\n      }, {\n        key: \"_disable\",\n        value: function _disable() {\n          if (this.enabled && (this.enabled = !1, this.proxySourceCache.deallocRenderCache(), this._style)) for (var _e319 in this._style._sourceCaches) {\n            this._style._sourceCaches[_e319].usedForTerrain = !1;\n          }\n        }\n      }, {\n        key: \"destroy\",\n        value: function destroy() {\n          this._disable(), this._emptyDEMTexture && this._emptyDEMTexture.destroy(), this.pool.forEach(function (e) {\n            return e.fb.destroy();\n          }), this.pool = [], this._depthFBO && (this._depthFBO.destroy(), delete this._depthFBO, delete this._depthTexture);\n        }\n      }, {\n        key: \"_source\",\n        value: function _source() {\n          return this.enabled ? this.sourceCache : null;\n        }\n      }, {\n        key: \"exaggeration\",\n        value: function exaggeration() {\n          return this._exaggeration;\n        }\n      }, {\n        key: \"visibleDemTiles\",\n        get: function get() {\n          return this._visibleDemTiles;\n        }\n      }, {\n        key: \"drapeBufferSize\",\n        get: function get() {\n          var e = 2 * this.proxySourceCache.getSource().tileSize;\n          return [e, e];\n        }\n      }, {\n        key: \"useVertexMorphing\",\n        set: function set(e) {\n          this._useVertexMorphing = e;\n        }\n      }, {\n        key: \"updateTileBinding\",\n        value: function updateTileBinding(t) {\n          var _this103 = this;\n\n          if (!this.enabled) return;\n          this.prevTerrainTileForTile = this.terrainTileForTile;\n          var i = this.proxySourceCache,\n              o = this.painter.transform;\n          this._initializing && (this._initializing = 0 === o._centerAltitude && -1 === this.getAtPoint(e.MercatorCoordinate.fromLngLat(o.center), -1), this._emptyDEMTextureDirty = !this._initializing);\n          var a = this.painter.options;\n          this.renderCached = (a.zooming || a.moving || a.rotating || !!this.forceRenderCached) && !this._invalidateRenderCache, this._invalidateRenderCache = !1;\n          var r = this.proxyCoords = i.getIds().map(function (e) {\n            var t = i.getTileByID(e).tileID;\n            return t.posMatrix = o.calculatePosMatrix(t.toUnwrapped()), t;\n          });\n          !function (t, i) {\n            var o = i.transform.pointCoordinate(i.transform.getCameraPoint()),\n                a = new e.Point(o.x, o.y);\n            t.sort(function (t, i) {\n              if (i.overscaledZ - t.overscaledZ) return i.overscaledZ - t.overscaledZ;\n              var o = new e.Point(t.canonical.x + (1 << t.canonical.z) * t.wrap, t.canonical.y),\n                  r = new e.Point(i.canonical.x + (1 << i.canonical.z) * i.wrap, i.canonical.y),\n                  n = a.mult(1 << t.canonical.z);\n              return n.x -= .5, n.y -= .5, n.distSqr(o) - n.distSqr(r);\n            });\n          }(r, this.painter), this._previousZoom = o.zoom;\n          var n = this.proxyToSource || {};\n          this.proxyToSource = {}, r.forEach(function (e) {\n            _this103.proxyToSource[e.key] = {};\n          }), this.terrainTileForTile = {};\n          var s = this._style._sourceCaches;\n\n          for (var _e320 in s) {\n            var _i222 = s[_e320];\n            if (!_i222.used) continue;\n            if (_i222 !== this.sourceCache && (this._findCoveringTileCache[_i222.id] = {}), this._setupProxiedCoordsForOrtho(_i222, t[_e320], n), _i222.usedForTerrain) continue;\n            var _o85 = t[_e320];\n            _i222.getSource().reparseOverscaled && this._assignTerrainTiles(_o85);\n          }\n\n          this.proxiedCoords[i.id] = r.map(function (e) {\n            return new Ft(e, e.key, _this103.orthoMatrix);\n          }), this._assignTerrainTiles(r), this._prepareDEMTextures(), this._setupDrapedRenderBatches(), this._setupRenderCache(n), this.renderingToTexture = !1, this._initFBOPool(), this._updateTimestamp = e.browser.now();\n          var l = {};\n          this._visibleDemTiles = [];\n\n          var _iterator201 = _createForOfIteratorHelper(this.proxyCoords),\n              _step201;\n\n          try {\n            for (_iterator201.s(); !(_step201 = _iterator201.n()).done;) {\n              var _e321 = _step201.value;\n              var _t304 = this.terrainTileForTile[_e321.key];\n              if (!_t304) continue;\n              var _i223 = _t304.tileID.key;\n              _i223 in l || (this._visibleDemTiles.push(_t304), l[_i223] = _i223);\n            }\n          } catch (err) {\n            _iterator201.e(err);\n          } finally {\n            _iterator201.f();\n          }\n        }\n      }, {\n        key: \"_assignTerrainTiles\",\n        value: function _assignTerrainTiles(e) {\n          var _this104 = this;\n\n          this._initializing || e.forEach(function (e) {\n            if (_this104.terrainTileForTile[e.key]) return;\n\n            var t = _this104._findTileCoveringTileID(e, _this104.sourceCache);\n\n            t && (_this104.terrainTileForTile[e.key] = t);\n          });\n        }\n      }, {\n        key: \"_prepareDEMTextures\",\n        value: function _prepareDEMTextures() {\n          var e = this.painter.context,\n              t = e.gl;\n\n          for (var _i224 in this.terrainTileForTile) {\n            var _o86 = this.terrainTileForTile[_i224],\n                _a119 = _o86.dem;\n            !_a119 || _o86.demTexture && !_o86.needsDEMTextureUpload || (e.activeTexture.set(t.TEXTURE1), St(this.painter, _o86, _a119));\n          }\n        }\n      }, {\n        key: \"_prepareDemTileUniforms\",\n        value: function _prepareDemTileUniforms(e, t, i, o) {\n          if (!t || null == t.demTexture) return !1;\n          var a = e.tileID.canonical,\n              r = Math.pow(2, t.tileID.canonical.z - a.z),\n              n = o || \"\";\n          return i[\"u_dem_tl\".concat(n)] = [a.x * r % 1, a.y * r % 1], i[\"u_dem_scale\".concat(n)] = r, !0;\n        }\n      }, {\n        key: \"emptyDEMTexture\",\n        get: function get() {\n          return !this._emptyDEMTextureDirty && this._emptyDEMTexture ? this._emptyDEMTexture : this._updateEmptyDEMTexture();\n        }\n      }, {\n        key: \"_getLoadedAreaMinimum\",\n        value: function _getLoadedAreaMinimum() {\n          var e = 0;\n\n          var t = this._visibleDemTiles.reduce(function (t, i) {\n            if (!i.dem) return t;\n            var o = i.dem.tree.minimums[0];\n            return o > 0 && e++, t + o;\n          }, 0);\n\n          return e ? t / e : 0;\n        }\n      }, {\n        key: \"_updateEmptyDEMTexture\",\n        value: function _updateEmptyDEMTexture() {\n          var t = this.painter.context,\n              i = t.gl;\n          t.activeTexture.set(i.TEXTURE2);\n\n          var o = this._getLoadedAreaMinimum(),\n              a = {\n            width: 1,\n            height: 1,\n            data: new Uint8Array(e.DEMData.pack(o, this.sourceCache.getSource().encoding))\n          };\n\n          this._emptyDEMTextureDirty = !1;\n          var r = this._emptyDEMTexture;\n          return r ? r.update(a, {\n            premultiply: !1\n          }) : r = this._emptyDEMTexture = new e.Texture(t, a, i.RGBA, {\n            premultiply: !1\n          }), r;\n        }\n      }, {\n        key: \"setupElevationDraw\",\n        value: function setupElevationDraw(t, i, o) {\n          var a = this.painter.context,\n              r = a.gl,\n              n = (s = this.sourceCache.getSource().encoding, {\n            u_dem: 2,\n            u_dem_prev: 4,\n            u_dem_unpack: e.DEMData.getUnpackVector(s),\n            u_dem_tl: [0, 0],\n            u_dem_tl_prev: [0, 0],\n            u_dem_scale: 0,\n            u_dem_scale_prev: 0,\n            u_dem_size: 0,\n            u_dem_lerp: 1,\n            u_depth: 3,\n            u_depth_size_inv: [0, 0],\n            u_exaggeration: 0\n          });\n          var s;\n          n.u_dem_size = this.sourceCache.getSource().tileSize, n.u_exaggeration = this.exaggeration();\n          var l = null,\n              c = null,\n              h = 1;\n\n          if (o && o.morphing && this._useVertexMorphing) {\n            var _e322 = o.morphing.srcDemTile,\n                _i225 = o.morphing.dstDemTile;\n            h = o.morphing.phase, _e322 && _i225 && (this._prepareDemTileUniforms(t, _e322, n, \"_prev\") && (c = _e322), this._prepareDemTileUniforms(t, _i225, n) && (l = _i225));\n          }\n\n          if (c && l ? (a.activeTexture.set(r.TEXTURE2), l.demTexture.bind(r.NEAREST, r.CLAMP_TO_EDGE, r.NEAREST), a.activeTexture.set(r.TEXTURE4), c.demTexture.bind(r.NEAREST, r.CLAMP_TO_EDGE, r.NEAREST), n.u_dem_lerp = h) : (l = this.terrainTileForTile[t.tileID.key], a.activeTexture.set(r.TEXTURE2), (this._prepareDemTileUniforms(t, l, n) ? l.demTexture : this.emptyDEMTexture).bind(r.NEAREST, r.CLAMP_TO_EDGE, r.NEAREST)), o && o.useDepthForOcclusion && (a.activeTexture.set(r.TEXTURE3), this._depthTexture.bind(r.NEAREST, r.CLAMP_TO_EDGE, r.NEAREST), n.u_depth_size_inv = [1 / this._depthFBO.width, 1 / this._depthFBO.height]), o && o.useMeterToDem && l) {\n            var _t305 = (1 << l.tileID.canonical.z) * e.mercatorZfromAltitude(1, this.painter.transform.center.lat) * this.sourceCache.getSource().tileSize;\n\n            n.u_meter_to_dem = _t305;\n          }\n\n          o && o.labelPlaneMatrixInv && (n.u_label_plane_matrix_inv = o.labelPlaneMatrixInv), i.setTerrainUniformValues(a, n);\n        }\n      }, {\n        key: \"renderBatch\",\n        value: function renderBatch(t) {\n          var _this105 = this;\n\n          if (0 === this._drapedRenderBatches.length) return t + 1;\n          this.renderingToTexture = !0;\n\n          var i = this.painter,\n              o = this.painter.context,\n              a = this.proxySourceCache,\n              r = this.proxiedCoords[a.id],\n              n = function n() {\n            o.bindFramebuffer.set(null), o.viewport.set([0, 0, i.width, i.height]), _this105.renderingToTexture = !1;\n          },\n              s = this._drapedRenderBatches.shift();\n\n          var l = [];\n          var c = i.style.order;\n          var h = 0;\n\n          for (var _u39 = 0; _u39 < r.length; _u39++) {\n            var _d18 = r[_u39],\n                _12 = a.getTileByID(_d18.proxyTileKey),\n                _m15 = a.proxyCachedFBO[_d18.key] ? a.proxyCachedFBO[_d18.key][t] : void 0;\n\n            var _p17 = void 0,\n                _f14 = void 0;\n\n            if (_p17 = this.currentFBO = void 0 !== _m15 ? a.renderCache[_m15] : this.pool[h++], _12.texture = _p17.tex, void 0 === _m15 || _p17.dirty) {\n              o.bindFramebuffer.set(_p17.fb.framebuffer), this.renderedToTile = !1, _p17.dirty && (o.clear({\n                color: e.Color.transparent\n              }), _p17.dirty = !1);\n\n              for (var _e323 = s.start; _e323 <= s.end; ++_e323) {\n                var _t306 = i.style._layers[c[_e323]];\n                if (_t306.isHidden(i.transform.zoom)) continue;\n\n                var _a120 = i.style._getLayerSourceCache(_t306),\n                    _r229 = _a120 ? this.proxyToSource[_d18.key][_a120.id] : [_d18];\n\n                if (!_r229) continue;\n                var _n143 = _r229;\n                o.viewport.set([0, 0, _p17.fb.width, _p17.fb.height]), _f14 !== (_a120 ? _a120.id : null) && (this._setupStencil(_r229, _t306, _a120), _f14 = _a120 ? _a120.id : null), i.renderLayer(i, _a120, _t306, _n143);\n              }\n\n              _p17.dirty = this.renderedToTile, this.renderedToTile && l.push(_12.tileID), 5 === h && (h = 0, l.length > 0 && (n(), Dt(i, this, a, l, this._updateTimestamp), this.renderingToTexture = !0, l = []));\n            } else l.push(_12.tileID);\n          }\n\n          return n(), l.length > 0 && Dt(i, this, a, l, this._updateTimestamp), s.end + 1;\n        }\n      }, {\n        key: \"postRender\",\n        value: function postRender() {}\n      }, {\n        key: \"renderCacheEfficiency\",\n        value: function renderCacheEfficiency(e) {\n          var t = e.order.length;\n          if (0 === t) return {\n            efficiency: 100\n          };\n          var i,\n              o = 0,\n              a = 0,\n              r = !1;\n\n          for (var _n144 = 0; _n144 < t; ++_n144) {\n            var _t307 = e._layers[e.order[_n144]];\n            this._style.isLayerDraped(_t307) ? (r && ++o, ++a) : r || (r = !0, i = _t307.id);\n          }\n\n          return 0 === a ? {\n            efficiency: 100\n          } : {\n            efficiency: 100 * (1 - o / a),\n            firstUndrapedLayer: i\n          };\n        }\n      }, {\n        key: \"raycast\",\n        value: function raycast(e, t, i) {\n          if (!this._visibleDemTiles) return null;\n\n          var o = this._visibleDemTiles.filter(function (e) {\n            return e.dem;\n          }).map(function (o) {\n            var a = o.tileID,\n                r = Math.pow(2, a.overscaledZ),\n                _a$canonical = a.canonical,\n                n = _a$canonical.x,\n                s = _a$canonical.y,\n                l = n / r,\n                c = (n + 1) / r,\n                h = s / r,\n                u = (s + 1) / r;\n            return {\n              minx: l,\n              miny: h,\n              maxx: c,\n              maxy: u,\n              t: o.dem.tree.raycastRoot(l, h, c, u, e, t, i),\n              tile: o\n            };\n          });\n\n          o.sort(function (e, t) {\n            return (null !== e.t ? e.t : Number.MAX_VALUE) - (null !== t.t ? t.t : Number.MAX_VALUE);\n          });\n\n          var _iterator202 = _createForOfIteratorHelper(o),\n              _step202;\n\n          try {\n            for (_iterator202.s(); !(_step202 = _iterator202.n()).done;) {\n              var _a121 = _step202.value;\n              if (null == _a121.t) return null;\n\n              var _o87 = _a121.tile.dem.tree.raycast(_a121.minx, _a121.miny, _a121.maxx, _a121.maxy, e, t, i);\n\n              if (null != _o87) return _o87;\n            }\n          } catch (err) {\n            _iterator202.e(err);\n          } finally {\n            _iterator202.f();\n          }\n\n          return null;\n        }\n      }, {\n        key: \"_createFBO\",\n        value: function _createFBO() {\n          var t = this.painter.context,\n              i = t.gl,\n              o = this.drapeBufferSize;\n          t.activeTexture.set(i.TEXTURE0);\n          var a = new e.Texture(t, {\n            width: o[0],\n            height: o[1],\n            data: null\n          }, i.RGBA);\n          a.bind(i.LINEAR, i.CLAMP_TO_EDGE);\n          var r = t.createFramebuffer(o[0], o[1], !1);\n          return r.colorAttachment.set(a.texture), t.extTextureFilterAnisotropic && !t.extTextureFilterAnisotropicForceOff && i.texParameterf(i.TEXTURE_2D, t.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT, t.extTextureFilterAnisotropicMax), {\n            fb: r,\n            tex: a,\n            dirty: !1,\n            ref: 1\n          };\n        }\n      }, {\n        key: \"_initFBOPool\",\n        value: function _initFBOPool() {\n          for (; this.pool.length < Math.min(5, this.proxyCoords.length);) {\n            this.pool.push(this._createFBO());\n          }\n        }\n      }, {\n        key: \"_shouldDisableRenderCache\",\n        value: function _shouldDisableRenderCache() {\n          var _this106 = this;\n\n          return !this.renderCached || this._style.order.some(function (e) {\n            var t = _this106._style._layers[e],\n                i = !t.isHidden(_this106.painter.transform.zoom),\n                o = t.getCrossfadeParameters();\n            return \"custom\" !== t.type && !i && !!o && 1 !== o.t;\n          });\n        }\n      }, {\n        key: \"_clearRasterFadeFromRenderCache\",\n        value: function _clearRasterFadeFromRenderCache() {\n          var e = !1;\n\n          for (var _t308 in this._style._sourceCaches) {\n            if (this._style._sourceCaches[_t308]._source instanceof T) {\n              e = !0;\n              break;\n            }\n          }\n\n          if (e) for (var _e324 = 0; _e324 < this._style.order.length; ++_e324) {\n            var _t309 = this._style._layers[this._style.order[_e324]],\n                _i226 = _t309.isHidden(this.painter.transform.zoom),\n                _o88 = this._style._getLayerSourceCache(_t309);\n\n            if (\"raster\" !== _t309.type || _i226 || !_o88) continue;\n\n            var _a122 = _t309.paint.get(\"raster-fade-duration\");\n\n            var _iterator203 = _createForOfIteratorHelper(this.proxyCoords),\n                _step203;\n\n            try {\n              for (_iterator203.s(); !(_step203 = _iterator203.n()).done;) {\n                var _e325 = _step203.value;\n                var _t310 = this.proxyToSource[_e325.key][_o88.id];\n\n                if (_t310) {\n                  var _iterator204 = _createForOfIteratorHelper(_t310),\n                      _step204;\n\n                  try {\n                    for (_iterator204.s(); !(_step204 = _iterator204.n()).done;) {\n                      var _e326 = _step204.value;\n\n                      var _t311 = kt(_o88.getTile(_e326), _o88.findLoadedParent(_e326, 0), _o88, this.painter.transform, _a122);\n\n                      (1 !== _t311.opacity || 0 !== _t311.mix) && this._clearRenderCacheForTile(_o88.id, _e326);\n                    }\n                  } catch (err) {\n                    _iterator204.e(err);\n                  } finally {\n                    _iterator204.f();\n                  }\n                }\n              }\n            } catch (err) {\n              _iterator203.e(err);\n            } finally {\n              _iterator203.f();\n            }\n          }\n        }\n      }, {\n        key: \"_setupDrapedRenderBatches\",\n        value: function _setupDrapedRenderBatches() {\n          var e = this._style.order,\n              t = e.length;\n          if (0 === t) return;\n          var i = [];\n          var o,\n              a = 0,\n              r = this._style._layers[e[a]];\n\n          for (; !this._style.isLayerDraped(r) && r.isHidden(this.painter.transform.zoom) && ++a < t;) {\n            r = this._style._layers[e[a]];\n          }\n\n          for (; a < t; ++a) {\n            var _t312 = this._style._layers[e[a]];\n            _t312.isHidden(this.painter.transform.zoom) || (this._style.isLayerDraped(_t312) ? void 0 === o && (o = a) : void 0 !== o && (i.push({\n              start: o,\n              end: a - 1\n            }), o = void 0));\n          }\n\n          void 0 !== o && i.push({\n            start: o,\n            end: a - 1\n          }), this._drapedRenderBatches = i;\n        }\n      }, {\n        key: \"_setupRenderCache\",\n        value: function _setupRenderCache(e) {\n          var t = this.proxySourceCache;\n\n          if (this._shouldDisableRenderCache()) {\n            if (t.renderCache.length > t.renderCachePool.length) {\n              var _e327 = Object.values(t.proxyCachedFBO);\n\n              t.proxyCachedFBO = {};\n\n              for (var _i227 = 0; _i227 < _e327.length; ++_i227) {\n                var _t$renderCachePool;\n\n                var _o89 = Object.values(_e327[_i227]);\n\n                (_t$renderCachePool = t.renderCachePool).push.apply(_t$renderCachePool, _toConsumableArray(_o89));\n              }\n            }\n\n            return;\n          }\n\n          this._clearRasterFadeFromRenderCache();\n\n          var i = this.proxyCoords,\n              o = this._tilesDirty;\n\n          for (var _a123 = i.length - 1; _a123 >= 0; _a123--) {\n            var _r230 = i[_a123];\n\n            if (t.getTileByID(_r230.key), void 0 !== t.proxyCachedFBO[_r230.key]) {\n              var _i228 = e[_r230.key],\n                  _a124 = this.proxyToSource[_r230.key];\n              var _n145 = 0;\n\n              var _loop10 = function _loop10(_e328) {\n                var t = _a124[_e328],\n                    r = _i228[_e328];\n\n                if (!r || r.length !== t.length || t.some(function (t, i) {\n                  return t !== r[i] || o[_e328] && o[_e328].hasOwnProperty(t.key);\n                })) {\n                  _n145 = -1;\n                  return \"break\";\n                }\n\n                ++_n145;\n              };\n\n              for (var _e328 in _a124) {\n                var _ret4 = _loop10(_e328);\n\n                if (_ret4 === \"break\") break;\n              }\n\n              for (var _e329 in t.proxyCachedFBO[_r230.key]) {\n                t.renderCache[t.proxyCachedFBO[_r230.key][_e329]].dirty = _n145 < 0 || _n145 !== Object.values(_i228).length;\n              }\n            } else for (var _e330 = 0; _e330 < this._drapedRenderBatches.length; ++_e330) {\n              var _i229 = this._drapedRenderBatches[_e330];\n\n              var _o90 = t.renderCachePool.pop();\n\n              void 0 === _o90 && t.renderCache.length < 50 && (_o90 = t.renderCache.length, t.renderCache.push(this._createFBO())), void 0 !== _o90 && (void 0 === t.proxyCachedFBO[_r230.key] && (t.proxyCachedFBO[_r230.key] = {}), t.proxyCachedFBO[_r230.key][_i229.start] = _o90, t.renderCache[_o90].dirty = !0);\n            }\n          }\n\n          this._tilesDirty = {};\n        }\n      }, {\n        key: \"_setupStencil\",\n        value: function _setupStencil(t, i, o) {\n          if (!o || !this._sourceTilesOverlap[o.id]) return void (this._overlapStencilType && (this._overlapStencilType = !1));\n          var a = this.painter.context,\n              r = a.gl;\n          if (t.length <= 1) return void (this._overlapStencilType = !1);\n          var n = this.currentFBO,\n              s = n.fb;\n          var l;\n          if (i.isTileClipped()) l = t.length, this._overlapStencilMode.test = {\n            func: r.EQUAL,\n            mask: 255\n          }, this._overlapStencilType = \"Clip\";else {\n            if (!(t[0].overscaledZ > t[t.length - 1].overscaledZ)) return void (this._overlapStencilType = !1);\n            l = 1, this._overlapStencilMode.test = {\n              func: r.GREATER,\n              mask: 255\n            }, this._overlapStencilType = \"Mask\";\n          }\n\n          if (!s.depthAttachment) {\n            var _t313 = a.createRenderbuffer(a.gl.DEPTH_STENCIL, s.width, s.height);\n\n            s.depthAttachment = new e.DepthStencilAttachment(a, s.framebuffer), s.depthAttachment.set(_t313), a.clear({\n              stencil: 0\n            });\n          }\n\n          n.ref + l > 255 && (a.clear({\n            stencil: 0\n          }), n.ref = 0), n.ref += l, this._overlapStencilMode.ref = n.ref, i.isTileClipped() && this._renderTileClippingMasks(t, this._overlapStencilMode.ref);\n        }\n      }, {\n        key: \"stencilModeForRTTOverlap\",\n        value: function stencilModeForRTTOverlap(t) {\n          return this.renderingToTexture && this._overlapStencilType ? (\"Clip\" === this._overlapStencilType && (this._overlapStencilMode.ref = this.painter._tileClippingMaskIDs[t.key]), this._overlapStencilMode) : e.StencilMode.disabled;\n        }\n      }, {\n        key: \"_renderTileClippingMasks\",\n        value: function _renderTileClippingMasks(t, i) {\n          var o = this.painter,\n              a = this.painter.context,\n              r = a.gl;\n          o._tileClippingMaskIDs = {}, a.setColorMode(e.ColorMode.disabled), a.setDepthMode(e.DepthMode.disabled);\n          var n = o.useProgram(\"clippingMask\");\n\n          var _iterator205 = _createForOfIteratorHelper(t),\n              _step205;\n\n          try {\n            for (_iterator205.s(); !(_step205 = _iterator205.n()).done;) {\n              var _s110 = _step205.value;\n\n              var _t314 = o._tileClippingMaskIDs[_s110.key] = --i;\n\n              n.draw(a, r.TRIANGLES, e.DepthMode.disabled, new e.StencilMode({\n                func: r.ALWAYS,\n                mask: 0\n              }, _t314, 255, r.KEEP, r.KEEP, r.REPLACE), e.ColorMode.disabled, e.CullFaceMode.disabled, Rt(_s110.posMatrix), \"$clipping\", o.tileExtentBuffer, o.quadTriangleIndexBuffer, o.tileExtentSegments);\n            }\n          } catch (err) {\n            _iterator205.e(err);\n          } finally {\n            _iterator205.f();\n          }\n        }\n      }, {\n        key: \"pointCoordinate\",\n        value: function pointCoordinate(t) {\n          var i = this.painter.transform;\n          if (t.x < 0 || t.x > i.width || t.y < 0 || t.y > i.height) return null;\n          var o = [t.x, t.y, 1, 1];\n          e.transformMat4(o, o, i.pixelMatrixInverse), e.scale$1(o, o, 1 / o[3]), o[0] /= i.worldSize, o[1] /= i.worldSize;\n          var a = i._camera.position,\n              r = e.mercatorZfromAltitude(1, i.center.lat),\n              n = [a[0], a[1], a[2] / r, 0],\n              s = e.subtract([], o.slice(0, 3), n);\n          e.normalize(s, s);\n          var l = this.raycast(n, s, this._exaggeration);\n          return null !== l && l ? (e.scaleAndAdd(n, n, s, l), n[3] = n[2], n[2] *= r, n) : null;\n        }\n      }, {\n        key: \"drawDepth\",\n        value: function drawDepth() {\n          var t = this.painter,\n              i = t.context,\n              o = this.proxySourceCache,\n              a = Math.ceil(t.width),\n              r = Math.ceil(t.height);\n\n          if (!this._depthFBO || this._depthFBO.width === a && this._depthFBO.height === r || (this._depthFBO.destroy(), delete this._depthFBO, delete this._depthTexture), !this._depthFBO) {\n            var _t315 = i.gl,\n                _o91 = i.createFramebuffer(a, r, !0);\n\n            i.activeTexture.set(_t315.TEXTURE0);\n\n            var _n146 = new e.Texture(i, {\n              width: a,\n              height: r,\n              data: null\n            }, _t315.RGBA);\n\n            _n146.bind(_t315.NEAREST, _t315.CLAMP_TO_EDGE), _o91.colorAttachment.set(_n146.texture);\n\n            var _s111 = i.createRenderbuffer(i.gl.DEPTH_COMPONENT16, a, r);\n\n            _o91.depthAttachment.set(_s111), this._depthFBO = _o91, this._depthTexture = _n146;\n          }\n\n          i.bindFramebuffer.set(this._depthFBO.framebuffer), i.viewport.set([0, 0, a, r]), function (t, i, o, a) {\n            var r = t.context,\n                n = r.gl;\n            r.clear({\n              depth: 1\n            });\n            var s = t.useProgram(\"terrainDepth\"),\n                l = new e.DepthMode(n.LESS, e.DepthMode.ReadWrite, t.depthRangeFor3D);\n\n            var _iterator206 = _createForOfIteratorHelper(a),\n                _step206;\n\n            try {\n              for (_iterator206.s(); !(_step206 = _iterator206.n()).done;) {\n                var _t316 = _step206.value;\n\n                var _a125 = o.getTile(_t316),\n                    _c34 = Mt(_t316.posMatrix, 0);\n\n                i.setupElevationDraw(_a125, s), s.draw(r, n.TRIANGLES, l, e.StencilMode.disabled, e.ColorMode.unblended, e.CullFaceMode.backCCW, _c34, \"terrain_depth\", i.gridBuffer, i.gridIndexBuffer, i.gridNoSkirtSegments);\n              }\n            } catch (err) {\n              _iterator206.e(err);\n            } finally {\n              _iterator206.f();\n            }\n          }(t, this, o, this.proxyCoords);\n        }\n      }, {\n        key: \"_setupProxiedCoordsForOrtho\",\n        value: function _setupProxiedCoordsForOrtho(e, t, i) {\n          if (e.getSource() instanceof C) return this._setupProxiedCoordsForImageSource(e, t, i);\n          this._findCoveringTileCache[e.id] = this._findCoveringTileCache[e.id] || {};\n          var o = this.proxiedCoords[e.id] = [],\n              a = this.proxyCoords;\n\n          for (var _t317 = 0; _t317 < a.length; _t317++) {\n            var _r231 = a[_t317],\n                _n147 = this._findTileCoveringTileID(_r231, e);\n\n            if (_n147) {\n              var _t318 = this._createProxiedId(_r231, _n147, i[_r231.key] && i[_r231.key][e.id]);\n\n              o.push(_t318), this.proxyToSource[_r231.key][e.id] = [_t318];\n            }\n          }\n\n          var r = !1;\n\n          for (var _a126 = 0; _a126 < t.length; _a126++) {\n            var _n148 = e.getTile(t[_a126]);\n\n            if (!_n148 || !_n148.hasData()) continue;\n\n            var _s112 = this._findTileCoveringTileID(_n148.tileID, this.proxySourceCache);\n\n            if (_s112 && _s112.tileID.canonical.z !== _n148.tileID.canonical.z) {\n              var _t319 = this.proxyToSource[_s112.tileID.key][e.id],\n                  _a127 = this._createProxiedId(_s112.tileID, _n148, i[_s112.tileID.key] && i[_s112.tileID.key][e.id]);\n\n              _t319 ? _t319.splice(_t319.length - 1, 0, _a127) : this.proxyToSource[_s112.tileID.key][e.id] = [_a127], o.push(_a127), r = !0;\n            }\n          }\n\n          this._sourceTilesOverlap[e.id] = r;\n        }\n      }, {\n        key: \"_setupProxiedCoordsForImageSource\",\n        value: function _setupProxiedCoordsForImageSource(t, i, o) {\n          if (!t.getSource().loaded()) return;\n\n          var a = this.proxiedCoords[t.id] = [],\n              r = this.proxyCoords,\n              n = t.getSource(),\n              s = new e.Point(n.tileID.x, n.tileID.y)._div(1 << n.tileID.z),\n              l = n.coordinates.map(e.MercatorCoordinate.fromLngLat).reduce(function (e, t) {\n            return e.min.x = Math.min(e.min.x, t.x - s.x), e.min.y = Math.min(e.min.y, t.y - s.y), e.max.x = Math.max(e.max.x, t.x - s.x), e.max.y = Math.max(e.max.y, t.y - s.y), e;\n          }, {\n            min: new e.Point(Number.MAX_VALUE, Number.MAX_VALUE),\n            max: new e.Point(-Number.MAX_VALUE, -Number.MAX_VALUE)\n          }),\n              c = function c(t, i) {\n            var o = t.wrap + t.canonical.x / (1 << t.canonical.z),\n                a = t.canonical.y / (1 << t.canonical.z),\n                r = e.EXTENT / (1 << t.canonical.z),\n                n = i.wrap + i.canonical.x / (1 << i.canonical.z),\n                s = i.canonical.y / (1 << i.canonical.z);\n            return o + r < n + l.min.x || o > n + l.max.x || a + r < s + l.min.y || a > s + l.max.y;\n          };\n\n          for (var _e331 = 0; _e331 < r.length; _e331++) {\n            var _n149 = r[_e331];\n\n            for (var _e332 = 0; _e332 < i.length; _e332++) {\n              var _r232 = t.getTile(i[_e332]);\n\n              if (!_r232 || !_r232.hasData()) continue;\n              if (c(_n149, _r232.tileID)) continue;\n\n              var _s113 = this._createProxiedId(_n149, _r232, o[_n149.key] && o[_n149.key][t.id]),\n                  _l46 = this.proxyToSource[_n149.key][t.id];\n\n              _l46 ? _l46.push(_s113) : this.proxyToSource[_n149.key][t.id] = [_s113], a.push(_s113);\n            }\n          }\n        }\n      }, {\n        key: \"_createProxiedId\",\n        value: function _createProxiedId(t, i, o) {\n          var a = this.orthoMatrix;\n\n          if (o) {\n            var _e333 = o.find(function (e) {\n              return e.key === i.tileID.key;\n            });\n\n            if (_e333) return _e333;\n          }\n\n          if (i.tileID.key !== t.key) {\n            var _o92 = t.canonical.z - i.tileID.canonical.z;\n\n            var _r233, _n150, _s114;\n\n            a = e.create();\n\n            var _l47 = i.tileID.wrap - t.wrap << t.overscaledZ;\n\n            _o92 > 0 ? (_r233 = e.EXTENT >> _o92, _n150 = _r233 * ((i.tileID.canonical.x << _o92) - t.canonical.x + _l47), _s114 = _r233 * ((i.tileID.canonical.y << _o92) - t.canonical.y)) : (_r233 = e.EXTENT << -_o92, _n150 = e.EXTENT * (i.tileID.canonical.x - (t.canonical.x + _l47 << -_o92)), _s114 = e.EXTENT * (i.tileID.canonical.y - (t.canonical.y << -_o92))), e.ortho(a, 0, _r233, 0, _r233, 0, 1), e.translate(a, a, [_n150, _s114, 0]);\n          }\n\n          return new Ft(i.tileID, t.key, a);\n        }\n      }, {\n        key: \"_findTileCoveringTileID\",\n        value: function _findTileCoveringTileID(t, i) {\n          var o = i.getTile(t);\n          if (o && o.hasData()) return o;\n          var a = this._findCoveringTileCache[i.id],\n              r = a[t.key];\n          if (o = r ? i.getTileByID(r) : null, o && o.hasData() || null === r) return o;\n          var n = o ? o.tileID : t,\n              s = n.overscaledZ;\n          var l = i.getSource().minzoom,\n              c = [];\n\n          if (!r) {\n            var _a128 = i.getSource().maxzoom;\n\n            if (t.canonical.z >= _a128) {\n              var _o93 = t.canonical.z - _a128;\n\n              i.getSource().reparseOverscaled ? (s = Math.max(t.canonical.z + 2, i.transform.tileZoom), n = new e.OverscaledTileID(s, t.wrap, _a128, t.canonical.x >> _o93, t.canonical.y >> _o93)) : 0 !== _o93 && (s = _a128, n = new e.OverscaledTileID(s, t.wrap, _a128, t.canonical.x >> _o93, t.canonical.y >> _o93));\n            }\n\n            n.key !== t.key && (c.push(n.key), o = i.getTile(n));\n          }\n\n          var h = function h(e) {\n            c.forEach(function (t) {\n              a[t] = e;\n            }), c.length = 0;\n          };\n\n          for (s -= 1; s >= l && (!o || !o.hasData()); s--) {\n            o && h(o.tileID.key);\n\n            var _e334 = n.calculateScaledKey(s);\n\n            if (o = i.getTileByID(_e334), o && o.hasData()) break;\n            var _t320 = a[_e334];\n            if (null === _t320) break;\n            void 0 === _t320 ? c.push(_e334) : o = i.getTileByID(_t320);\n          }\n\n          return h(o ? o.tileID.key : null), o && o.hasData() ? o : null;\n        }\n      }, {\n        key: \"findDEMTileFor\",\n        value: function findDEMTileFor(e) {\n          return this.enabled ? this._findTileCoveringTileID(e, this.sourceCache) : null;\n        }\n      }, {\n        key: \"prepareDrawTile\",\n        value: function prepareDrawTile(e) {\n          this.renderedToTile || (this.renderedToTile = !0);\n        }\n      }, {\n        key: \"_clearRenderCacheForTile\",\n        value: function _clearRenderCacheForTile(e, t) {\n          var i = this._tilesDirty[e];\n          i || (i = this._tilesDirty[e] = {}), i[t.key] = !0;\n        }\n      }]);\n\n      return Ot;\n    }(e.Elevation);\n\n    function Ut(e) {\n      var t = [];\n\n      for (var _i230 = 0; _i230 < e.length; _i230++) {\n        if (null === e[_i230]) continue;\n\n        var _o94 = e[_i230].split(\" \");\n\n        t.push(_o94.pop());\n      }\n\n      return t;\n    }\n\n    var Nt = /*#__PURE__*/function () {\n      function Nt(t, i, o, a, r, n) {\n        _classCallCheck(this, Nt);\n\n        var s = t.gl;\n        this.program = s.createProgram();\n\n        var l = Ut(o.staticAttributes),\n            c = a ? a.getBinderAttributes() : [],\n            h = l.concat(c),\n            u = o.staticUniforms ? Ut(o.staticUniforms) : [],\n            d = a ? a.getBinderUniforms() : [],\n            _ = u.concat(d),\n            m = [];\n\n        var _iterator207 = _createForOfIteratorHelper(_),\n            _step207;\n\n        try {\n          for (_iterator207.s(); !(_step207 = _iterator207.n()).done;) {\n            var _e338 = _step207.value;\n            m.indexOf(_e338) < 0 && m.push(_e338);\n          }\n        } catch (err) {\n          _iterator207.e(err);\n        } finally {\n          _iterator207.f();\n        }\n\n        var p = a ? a.defines() : [];\n        p = p.concat(n.map(function (e) {\n          return \"#define \".concat(e);\n        }));\n        var f = p.concat(qe.fragmentSource, o.fragmentSource).join(\"\\n\"),\n            g = p.concat(qe.vertexSource, Ve.vertexSource, o.vertexSource).join(\"\\n\"),\n            v = s.createShader(s.FRAGMENT_SHADER);\n        if (s.isContextLost()) return void (this.failedToCreate = !0);\n        s.shaderSource(v, f), s.compileShader(v), s.attachShader(this.program, v);\n        var x = s.createShader(s.VERTEX_SHADER);\n        if (s.isContextLost()) return void (this.failedToCreate = !0);\n        s.shaderSource(x, g), s.compileShader(x), s.attachShader(this.program, x), this.attributes = {};\n        var y = {};\n        this.numAttributes = h.length;\n\n        for (var _e335 = 0; _e335 < this.numAttributes; _e335++) {\n          h[_e335] && (s.bindAttribLocation(this.program, _e335, h[_e335]), this.attributes[h[_e335]] = _e335);\n        }\n\n        s.linkProgram(this.program), s.deleteShader(x), s.deleteShader(v);\n\n        for (var _e336 = 0; _e336 < m.length; _e336++) {\n          var _t321 = m[_e336];\n\n          if (_t321 && !y[_t321]) {\n            var _e337 = s.getUniformLocation(this.program, _t321);\n\n            _e337 && (y[_t321] = _e337);\n          }\n        }\n\n        this.fixedUniforms = r(t, y), this.binderUniforms = a ? a.getUniforms(t, y) : [], -1 !== n.indexOf(\"TERRAIN\") && (this.terrainUniforms = function (t, i) {\n          return {\n            u_dem: new e.Uniform1i(t, i.u_dem),\n            u_dem_prev: new e.Uniform1i(t, i.u_dem_prev),\n            u_dem_unpack: new e.Uniform4f(t, i.u_dem_unpack),\n            u_dem_tl: new e.Uniform2f(t, i.u_dem_tl),\n            u_dem_scale: new e.Uniform1f(t, i.u_dem_scale),\n            u_dem_tl_prev: new e.Uniform2f(t, i.u_dem_tl_prev),\n            u_dem_scale_prev: new e.Uniform1f(t, i.u_dem_scale_prev),\n            u_dem_size: new e.Uniform1f(t, i.u_dem_size),\n            u_dem_lerp: new e.Uniform1f(t, i.u_dem_lerp),\n            u_exaggeration: new e.Uniform1f(t, i.u_exaggeration),\n            u_depth: new e.Uniform1i(t, i.u_depth),\n            u_depth_size_inv: new e.Uniform2f(t, i.u_depth_size_inv),\n            u_meter_to_dem: new e.Uniform1f(t, i.u_meter_to_dem),\n            u_label_plane_matrix_inv: new e.UniformMatrix4f(t, i.u_label_plane_matrix_inv)\n          };\n        }(t, y));\n      }\n\n      _createClass(Nt, [{\n        key: \"setTerrainUniformValues\",\n        value: function setTerrainUniformValues(e, t) {\n          if (!this.terrainUniforms) return;\n          var i = this.terrainUniforms;\n\n          if (!this.failedToCreate) {\n            e.program.set(this.program);\n\n            for (var _e339 in t) {\n              i[_e339].set(t[_e339]);\n            }\n          }\n        }\n      }, {\n        key: \"draw\",\n        value: function draw(e, t, i, o, a, r, n, s, l, c, h, u, d, _, m, p) {\n          var _f$LINES$f$TRIANGLES$;\n\n          var f = e.gl;\n          if (this.failedToCreate) return;\n          e.program.set(this.program), e.setDepthMode(i), e.setStencilMode(o), e.setColorMode(a), e.setCullFace(r);\n\n          for (var _e340 in this.fixedUniforms) {\n            this.fixedUniforms[_e340].set(n[_e340]);\n          }\n\n          _ && _.setUniforms(e, this.binderUniforms, u, {\n            zoom: d\n          });\n          var g = (_f$LINES$f$TRIANGLES$ = {}, _defineProperty(_f$LINES$f$TRIANGLES$, f.LINES, 2), _defineProperty(_f$LINES$f$TRIANGLES$, f.TRIANGLES, 3), _defineProperty(_f$LINES$f$TRIANGLES$, f.LINE_STRIP, 1), _f$LINES$f$TRIANGLES$)[t];\n\n          var _iterator208 = _createForOfIteratorHelper(h.get()),\n              _step208;\n\n          try {\n            for (_iterator208.s(); !(_step208 = _iterator208.n()).done;) {\n              var _i231 = _step208.value;\n\n              var _o95 = _i231.vaos || (_i231.vaos = {});\n\n              (_o95[s] || (_o95[s] = new Tt())).bind(e, this, l, _ ? _.getPaintVertexBuffers() : [], c, _i231.vertexOffset, m, p), f.drawElements(t, _i231.primitiveLength * g, f.UNSIGNED_SHORT, _i231.primitiveOffset * g * 2);\n            }\n          } catch (err) {\n            _iterator208.e(err);\n          } finally {\n            _iterator208.f();\n          }\n        }\n      }], [{\n        key: \"cacheKey\",\n        value: function cacheKey(e, t, i) {\n          var o = \"\".concat(e).concat(i ? i.cacheKey : \"\");\n\n          var _iterator209 = _createForOfIteratorHelper(t),\n              _step209;\n\n          try {\n            for (_iterator209.s(); !(_step209 = _iterator209.n()).done;) {\n              var _e341 = _step209.value;\n              o += \"/\".concat(_e341);\n            }\n          } catch (err) {\n            _iterator209.e(err);\n          } finally {\n            _iterator209.f();\n          }\n\n          return o;\n        }\n      }]);\n\n      return Nt;\n    }();\n\n    function Zt(e, t, i) {\n      var o = 1 / v(i, 1, t.transform.tileZoom),\n          a = Math.pow(2, i.tileID.overscaledZ),\n          r = i.tileSize * Math.pow(2, t.transform.tileZoom) / a,\n          n = r * (i.tileID.canonical.x + i.tileID.wrap * a),\n          s = r * i.tileID.canonical.y;\n      return {\n        u_image: 0,\n        u_texsize: i.imageAtlasTexture.size,\n        u_scale: [o, e.fromScale, e.toScale],\n        u_fade: e.t,\n        u_pixel_coord_upper: [n >> 16, s >> 16],\n        u_pixel_coord_lower: [65535 & n, 65535 & s]\n      };\n    }\n\n    var Gt = function Gt(t, i, o, a) {\n      var r = i.style.light,\n          n = r.properties.get(\"position\"),\n          s = [n.x, n.y, n.z],\n          l = e.create$1();\n      \"viewport\" === r.properties.get(\"anchor\") && (e.fromRotation(l, -i.transform.angle), e.transformMat3(s, s, l));\n      var c = r.properties.get(\"color\");\n      return {\n        u_matrix: t,\n        u_lightpos: s,\n        u_lightintensity: r.properties.get(\"intensity\"),\n        u_lightcolor: [c.r, c.g, c.b],\n        u_vertical_gradient: +o,\n        u_opacity: a\n      };\n    },\n        Vt = function Vt(t, i, o, a, r, n, s) {\n      return e.extend(Gt(t, i, o, a), Zt(n, i, s), {\n        u_height_factor: -Math.pow(2, r.overscaledZ) / s.tileSize / 8\n      });\n    },\n        qt = function qt(e) {\n      return {\n        u_matrix: e\n      };\n    },\n        jt = function jt(t, i, o, a) {\n      return e.extend(qt(t), Zt(o, i, a));\n    },\n        $t = function $t(e, t) {\n      return {\n        u_matrix: e,\n        u_world: t\n      };\n    },\n        Xt = function Xt(t, i, o, a, r) {\n      return e.extend(jt(t, i, o, a), {\n        u_world: r\n      });\n    },\n        Wt = function Wt(t, i, o, a) {\n      var r = t.transform;\n      var n;\n\n      if (\"map\" === a.paint.get(\"circle-pitch-alignment\")) {\n        var _e342 = v(o, 1, r.zoom);\n\n        n = [_e342, _e342];\n      } else n = r.pixelsToGLUnits;\n\n      return {\n        u_camera_to_center_distance: r.cameraToCenterDistance,\n        u_matrix: t.translatePosMatrix(i.posMatrix, o, a.paint.get(\"circle-translate\"), a.paint.get(\"circle-translate-anchor\")),\n        u_device_pixel_ratio: e.browser.devicePixelRatio,\n        u_extrude_scale: n\n      };\n    },\n        Ht = function Ht(e) {\n      var t = [];\n      return \"map\" === e.paint.get(\"circle-pitch-alignment\") && t.push(\"PITCH_WITH_MAP\"), \"map\" === e.paint.get(\"circle-pitch-scale\") && t.push(\"SCALE_WITH_MAP\"), t;\n    },\n        Kt = function Kt(t, i, o) {\n      var a = e.EXTENT / o.tileSize;\n      return {\n        u_matrix: t,\n        u_camera_to_center_distance: i.cameraToCenterDistance,\n        u_extrude_scale: [i.pixelsToGLUnits[0] / a, i.pixelsToGLUnits[1] / a]\n      };\n    },\n        Yt = function Yt(e, t) {\n      var i = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 1;\n      return {\n        u_matrix: e,\n        u_color: t,\n        u_overlay: 0,\n        u_overlay_scale: i\n      };\n    },\n        Jt = function Jt(e, t, i, o) {\n      return {\n        u_matrix: e,\n        u_extrude_scale: v(t, 1, i),\n        u_intensity: o\n      };\n    },\n        Qt = function Qt(t, i, o, a) {\n      var r = t.transform;\n      return {\n        u_matrix: ai(t, i, o, a),\n        u_ratio: 1 / v(i, 1, r.zoom),\n        u_device_pixel_ratio: e.browser.devicePixelRatio,\n        u_units_to_pixels: [1 / r.pixelsToGLUnits[0], 1 / r.pixelsToGLUnits[1]]\n      };\n    },\n        ei = function ei(t, i, o, a, r) {\n      return e.extend(Qt(t, i, o, a), {\n        u_image: 0,\n        u_image_height: r\n      });\n    },\n        ti = function ti(t, i, o, a, r) {\n      var n = t.transform,\n          s = oi(i, n);\n      return {\n        u_matrix: ai(t, i, o, r),\n        u_texsize: i.imageAtlasTexture.size,\n        u_ratio: 1 / v(i, 1, n.zoom),\n        u_device_pixel_ratio: e.browser.devicePixelRatio,\n        u_image: 0,\n        u_scale: [s, a.fromScale, a.toScale],\n        u_fade: a.t,\n        u_units_to_pixels: [1 / n.pixelsToGLUnits[0], 1 / n.pixelsToGLUnits[1]]\n      };\n    },\n        ii = function ii(t, i, o, a, r, n) {\n      var s = t.lineAtlas,\n          l = oi(i, t.transform),\n          c = \"round\" === o.layout.get(\"line-cap\"),\n          h = s.getDash(a.from, c),\n          u = s.getDash(a.to, c),\n          d = h.width * r.fromScale,\n          _ = u.width * r.toScale;\n\n      return e.extend(Qt(t, i, o, n), {\n        u_patternscale_a: [l / d, -h.height / 2],\n        u_patternscale_b: [l / _, -u.height / 2],\n        u_sdfgamma: s.width / (256 * Math.min(d, _) * e.browser.devicePixelRatio) / 2,\n        u_image: 0,\n        u_tex_y_a: h.y,\n        u_tex_y_b: u.y,\n        u_mix: r.t\n      });\n    };\n\n    function oi(e, t) {\n      return 1 / v(e, 1, t.tileZoom);\n    }\n\n    function ai(e, t, i, o) {\n      return e.translatePosMatrix(o || t.tileID.posMatrix, t, i.paint.get(\"line-translate\"), i.paint.get(\"line-translate-anchor\"));\n    }\n\n    var ri = function ri(e, t, i, o, a) {\n      return {\n        u_matrix: e,\n        u_tl_parent: t,\n        u_scale_parent: i,\n        u_buffer_scale: 1,\n        u_fade_t: o.mix,\n        u_opacity: o.opacity * a.paint.get(\"raster-opacity\"),\n        u_image0: 0,\n        u_image1: 1,\n        u_brightness_low: a.paint.get(\"raster-brightness-min\"),\n        u_brightness_high: a.paint.get(\"raster-brightness-max\"),\n        u_saturation_factor: (n = a.paint.get(\"raster-saturation\"), n > 0 ? 1 - 1 / (1.001 - n) : -n),\n        u_contrast_factor: (r = a.paint.get(\"raster-contrast\"), r > 0 ? 1 / (1 - r) : 1 + r),\n        u_spin_weights: ni(a.paint.get(\"raster-hue-rotate\"))\n      };\n      var r, n;\n    };\n\n    function ni(e) {\n      e *= Math.PI / 180;\n      var t = Math.sin(e),\n          i = Math.cos(e);\n      return [(2 * i + 1) / 3, (-Math.sqrt(3) * t - i + 1) / 3, (Math.sqrt(3) * t - i + 1) / 3];\n    }\n\n    var si = function si(e, t, i, o, a, r, n, s, l, c) {\n      var h = a.transform;\n      return {\n        u_is_size_zoom_constant: +(\"constant\" === e || \"source\" === e),\n        u_is_size_feature_constant: +(\"constant\" === e || \"camera\" === e),\n        u_size_t: t ? t.uSizeT : 0,\n        u_size: t ? t.uSize : 0,\n        u_camera_to_center_distance: h.cameraToCenterDistance,\n        u_pitch: h.pitch / 360 * 2 * Math.PI,\n        u_rotate_symbol: +i,\n        u_aspect_ratio: h.width / h.height,\n        u_fade_change: a.options.fadeDuration ? a.symbolFadeChange : 1,\n        u_matrix: r,\n        u_label_plane_matrix: n,\n        u_coord_matrix: s,\n        u_is_text: +l,\n        u_pitch_with_map: +o,\n        u_texsize: c,\n        u_texture: 0\n      };\n    },\n        li = function li(t, i, o, a, r, n, s, l, c, h, u) {\n      var _r$transform = r.transform,\n          d = _r$transform.cameraToCenterDistance,\n          _ = _r$transform._pitch;\n      return e.extend(si(t, i, o, a, r, n, s, l, c, h), {\n        u_gamma_scale: a ? d * Math.cos(r.terrain ? 0 : _) : 1,\n        u_device_pixel_ratio: e.browser.devicePixelRatio,\n        u_is_halo: +u\n      });\n    },\n        ci = function ci(t, i, o, a, r, n, s, l, c, h) {\n      return e.extend(li(t, i, o, a, r, n, s, l, !0, c, !0), {\n        u_texsize_icon: h,\n        u_texture_icon: 1\n      });\n    },\n        hi = function hi(e, t, i) {\n      return {\n        u_matrix: e,\n        u_opacity: t,\n        u_color: i\n      };\n    },\n        ui = function ui(t, i, o, a, r, n) {\n      return e.extend(function (e, t, i, o) {\n        var a = i.imageManager.getPattern(e.from.toString()),\n            r = i.imageManager.getPattern(e.to.toString()),\n            _i$imageManager$getPi = i.imageManager.getPixelSize(),\n            n = _i$imageManager$getPi.width,\n            s = _i$imageManager$getPi.height,\n            l = Math.pow(2, o.tileID.overscaledZ),\n            c = o.tileSize * Math.pow(2, i.transform.tileZoom) / l,\n            h = c * (o.tileID.canonical.x + o.tileID.wrap * l),\n            u = c * o.tileID.canonical.y;\n\n        return {\n          u_image: 0,\n          u_pattern_tl_a: a.tl,\n          u_pattern_br_a: a.br,\n          u_pattern_tl_b: r.tl,\n          u_pattern_br_b: r.br,\n          u_texsize: [n, s],\n          u_mix: t.t,\n          u_pattern_size_a: a.displaySize,\n          u_pattern_size_b: r.displaySize,\n          u_scale_a: t.fromScale,\n          u_scale_b: t.toScale,\n          u_tile_units_to_pixels: 1 / v(o, 1, i.transform.tileZoom),\n          u_pixel_coord_upper: [h >> 16, u >> 16],\n          u_pixel_coord_lower: [65535 & h, 65535 & u]\n        };\n      }(a, n, o, r), {\n        u_matrix: t,\n        u_opacity: i\n      });\n    },\n        di = {\n      fillExtrusion: function fillExtrusion(t, i) {\n        return {\n          u_matrix: new e.UniformMatrix4f(t, i.u_matrix),\n          u_lightpos: new e.Uniform3f(t, i.u_lightpos),\n          u_lightintensity: new e.Uniform1f(t, i.u_lightintensity),\n          u_lightcolor: new e.Uniform3f(t, i.u_lightcolor),\n          u_vertical_gradient: new e.Uniform1f(t, i.u_vertical_gradient),\n          u_opacity: new e.Uniform1f(t, i.u_opacity)\n        };\n      },\n      fillExtrusionPattern: function fillExtrusionPattern(t, i) {\n        return {\n          u_matrix: new e.UniformMatrix4f(t, i.u_matrix),\n          u_lightpos: new e.Uniform3f(t, i.u_lightpos),\n          u_lightintensity: new e.Uniform1f(t, i.u_lightintensity),\n          u_lightcolor: new e.Uniform3f(t, i.u_lightcolor),\n          u_vertical_gradient: new e.Uniform1f(t, i.u_vertical_gradient),\n          u_height_factor: new e.Uniform1f(t, i.u_height_factor),\n          u_image: new e.Uniform1i(t, i.u_image),\n          u_texsize: new e.Uniform2f(t, i.u_texsize),\n          u_pixel_coord_upper: new e.Uniform2f(t, i.u_pixel_coord_upper),\n          u_pixel_coord_lower: new e.Uniform2f(t, i.u_pixel_coord_lower),\n          u_scale: new e.Uniform3f(t, i.u_scale),\n          u_fade: new e.Uniform1f(t, i.u_fade),\n          u_opacity: new e.Uniform1f(t, i.u_opacity)\n        };\n      },\n      fill: function fill(t, i) {\n        return {\n          u_matrix: new e.UniformMatrix4f(t, i.u_matrix)\n        };\n      },\n      fillPattern: function fillPattern(t, i) {\n        return {\n          u_matrix: new e.UniformMatrix4f(t, i.u_matrix),\n          u_image: new e.Uniform1i(t, i.u_image),\n          u_texsize: new e.Uniform2f(t, i.u_texsize),\n          u_pixel_coord_upper: new e.Uniform2f(t, i.u_pixel_coord_upper),\n          u_pixel_coord_lower: new e.Uniform2f(t, i.u_pixel_coord_lower),\n          u_scale: new e.Uniform3f(t, i.u_scale),\n          u_fade: new e.Uniform1f(t, i.u_fade)\n        };\n      },\n      fillOutline: function fillOutline(t, i) {\n        return {\n          u_matrix: new e.UniformMatrix4f(t, i.u_matrix),\n          u_world: new e.Uniform2f(t, i.u_world)\n        };\n      },\n      fillOutlinePattern: function fillOutlinePattern(t, i) {\n        return {\n          u_matrix: new e.UniformMatrix4f(t, i.u_matrix),\n          u_world: new e.Uniform2f(t, i.u_world),\n          u_image: new e.Uniform1i(t, i.u_image),\n          u_texsize: new e.Uniform2f(t, i.u_texsize),\n          u_pixel_coord_upper: new e.Uniform2f(t, i.u_pixel_coord_upper),\n          u_pixel_coord_lower: new e.Uniform2f(t, i.u_pixel_coord_lower),\n          u_scale: new e.Uniform3f(t, i.u_scale),\n          u_fade: new e.Uniform1f(t, i.u_fade)\n        };\n      },\n      circle: function circle(t, i) {\n        return {\n          u_camera_to_center_distance: new e.Uniform1f(t, i.u_camera_to_center_distance),\n          u_extrude_scale: new e.Uniform2f(t, i.u_extrude_scale),\n          u_device_pixel_ratio: new e.Uniform1f(t, i.u_device_pixel_ratio),\n          u_matrix: new e.UniformMatrix4f(t, i.u_matrix)\n        };\n      },\n      collisionBox: function collisionBox(t, i) {\n        return {\n          u_matrix: new e.UniformMatrix4f(t, i.u_matrix),\n          u_camera_to_center_distance: new e.Uniform1f(t, i.u_camera_to_center_distance),\n          u_extrude_scale: new e.Uniform2f(t, i.u_extrude_scale)\n        };\n      },\n      collisionCircle: function collisionCircle(t, i) {\n        return {\n          u_matrix: new e.UniformMatrix4f(t, i.u_matrix),\n          u_inv_matrix: new e.UniformMatrix4f(t, i.u_inv_matrix),\n          u_camera_to_center_distance: new e.Uniform1f(t, i.u_camera_to_center_distance),\n          u_viewport_size: new e.Uniform2f(t, i.u_viewport_size)\n        };\n      },\n      debug: function debug(t, i) {\n        return {\n          u_color: new e.UniformColor(t, i.u_color),\n          u_matrix: new e.UniformMatrix4f(t, i.u_matrix),\n          u_overlay: new e.Uniform1i(t, i.u_overlay),\n          u_overlay_scale: new e.Uniform1f(t, i.u_overlay_scale)\n        };\n      },\n      clippingMask: function clippingMask(t, i) {\n        return {\n          u_matrix: new e.UniformMatrix4f(t, i.u_matrix)\n        };\n      },\n      heatmap: function heatmap(t, i) {\n        return {\n          u_extrude_scale: new e.Uniform1f(t, i.u_extrude_scale),\n          u_intensity: new e.Uniform1f(t, i.u_intensity),\n          u_matrix: new e.UniformMatrix4f(t, i.u_matrix)\n        };\n      },\n      heatmapTexture: function heatmapTexture(t, i) {\n        return {\n          u_matrix: new e.UniformMatrix4f(t, i.u_matrix),\n          u_world: new e.Uniform2f(t, i.u_world),\n          u_image: new e.Uniform1i(t, i.u_image),\n          u_color_ramp: new e.Uniform1i(t, i.u_color_ramp),\n          u_opacity: new e.Uniform1f(t, i.u_opacity)\n        };\n      },\n      hillshade: function hillshade(t, i) {\n        return {\n          u_matrix: new e.UniformMatrix4f(t, i.u_matrix),\n          u_image: new e.Uniform1i(t, i.u_image),\n          u_latrange: new e.Uniform2f(t, i.u_latrange),\n          u_light: new e.Uniform2f(t, i.u_light),\n          u_shadow: new e.UniformColor(t, i.u_shadow),\n          u_highlight: new e.UniformColor(t, i.u_highlight),\n          u_accent: new e.UniformColor(t, i.u_accent)\n        };\n      },\n      hillshadePrepare: function hillshadePrepare(t, i) {\n        return {\n          u_matrix: new e.UniformMatrix4f(t, i.u_matrix),\n          u_image: new e.Uniform1i(t, i.u_image),\n          u_dimension: new e.Uniform2f(t, i.u_dimension),\n          u_zoom: new e.Uniform1f(t, i.u_zoom),\n          u_unpack: new e.Uniform4f(t, i.u_unpack)\n        };\n      },\n      line: function line(t, i) {\n        return {\n          u_matrix: new e.UniformMatrix4f(t, i.u_matrix),\n          u_ratio: new e.Uniform1f(t, i.u_ratio),\n          u_device_pixel_ratio: new e.Uniform1f(t, i.u_device_pixel_ratio),\n          u_units_to_pixels: new e.Uniform2f(t, i.u_units_to_pixels)\n        };\n      },\n      lineGradient: function lineGradient(t, i) {\n        return {\n          u_matrix: new e.UniformMatrix4f(t, i.u_matrix),\n          u_ratio: new e.Uniform1f(t, i.u_ratio),\n          u_device_pixel_ratio: new e.Uniform1f(t, i.u_device_pixel_ratio),\n          u_units_to_pixels: new e.Uniform2f(t, i.u_units_to_pixels),\n          u_image: new e.Uniform1i(t, i.u_image),\n          u_image_height: new e.Uniform1f(t, i.u_image_height)\n        };\n      },\n      linePattern: function linePattern(t, i) {\n        return {\n          u_matrix: new e.UniformMatrix4f(t, i.u_matrix),\n          u_texsize: new e.Uniform2f(t, i.u_texsize),\n          u_ratio: new e.Uniform1f(t, i.u_ratio),\n          u_device_pixel_ratio: new e.Uniform1f(t, i.u_device_pixel_ratio),\n          u_image: new e.Uniform1i(t, i.u_image),\n          u_units_to_pixels: new e.Uniform2f(t, i.u_units_to_pixels),\n          u_scale: new e.Uniform3f(t, i.u_scale),\n          u_fade: new e.Uniform1f(t, i.u_fade)\n        };\n      },\n      lineSDF: function lineSDF(t, i) {\n        return {\n          u_matrix: new e.UniformMatrix4f(t, i.u_matrix),\n          u_ratio: new e.Uniform1f(t, i.u_ratio),\n          u_device_pixel_ratio: new e.Uniform1f(t, i.u_device_pixel_ratio),\n          u_units_to_pixels: new e.Uniform2f(t, i.u_units_to_pixels),\n          u_patternscale_a: new e.Uniform2f(t, i.u_patternscale_a),\n          u_patternscale_b: new e.Uniform2f(t, i.u_patternscale_b),\n          u_sdfgamma: new e.Uniform1f(t, i.u_sdfgamma),\n          u_image: new e.Uniform1i(t, i.u_image),\n          u_tex_y_a: new e.Uniform1f(t, i.u_tex_y_a),\n          u_tex_y_b: new e.Uniform1f(t, i.u_tex_y_b),\n          u_mix: new e.Uniform1f(t, i.u_mix)\n        };\n      },\n      raster: function raster(t, i) {\n        return {\n          u_matrix: new e.UniformMatrix4f(t, i.u_matrix),\n          u_tl_parent: new e.Uniform2f(t, i.u_tl_parent),\n          u_scale_parent: new e.Uniform1f(t, i.u_scale_parent),\n          u_buffer_scale: new e.Uniform1f(t, i.u_buffer_scale),\n          u_fade_t: new e.Uniform1f(t, i.u_fade_t),\n          u_opacity: new e.Uniform1f(t, i.u_opacity),\n          u_image0: new e.Uniform1i(t, i.u_image0),\n          u_image1: new e.Uniform1i(t, i.u_image1),\n          u_brightness_low: new e.Uniform1f(t, i.u_brightness_low),\n          u_brightness_high: new e.Uniform1f(t, i.u_brightness_high),\n          u_saturation_factor: new e.Uniform1f(t, i.u_saturation_factor),\n          u_contrast_factor: new e.Uniform1f(t, i.u_contrast_factor),\n          u_spin_weights: new e.Uniform3f(t, i.u_spin_weights)\n        };\n      },\n      symbolIcon: function symbolIcon(t, i) {\n        return {\n          u_is_size_zoom_constant: new e.Uniform1i(t, i.u_is_size_zoom_constant),\n          u_is_size_feature_constant: new e.Uniform1i(t, i.u_is_size_feature_constant),\n          u_size_t: new e.Uniform1f(t, i.u_size_t),\n          u_size: new e.Uniform1f(t, i.u_size),\n          u_camera_to_center_distance: new e.Uniform1f(t, i.u_camera_to_center_distance),\n          u_pitch: new e.Uniform1f(t, i.u_pitch),\n          u_rotate_symbol: new e.Uniform1i(t, i.u_rotate_symbol),\n          u_aspect_ratio: new e.Uniform1f(t, i.u_aspect_ratio),\n          u_fade_change: new e.Uniform1f(t, i.u_fade_change),\n          u_matrix: new e.UniformMatrix4f(t, i.u_matrix),\n          u_label_plane_matrix: new e.UniformMatrix4f(t, i.u_label_plane_matrix),\n          u_coord_matrix: new e.UniformMatrix4f(t, i.u_coord_matrix),\n          u_is_text: new e.Uniform1i(t, i.u_is_text),\n          u_pitch_with_map: new e.Uniform1i(t, i.u_pitch_with_map),\n          u_texsize: new e.Uniform2f(t, i.u_texsize),\n          u_texture: new e.Uniform1i(t, i.u_texture)\n        };\n      },\n      symbolSDF: function symbolSDF(t, i) {\n        return {\n          u_is_size_zoom_constant: new e.Uniform1i(t, i.u_is_size_zoom_constant),\n          u_is_size_feature_constant: new e.Uniform1i(t, i.u_is_size_feature_constant),\n          u_size_t: new e.Uniform1f(t, i.u_size_t),\n          u_size: new e.Uniform1f(t, i.u_size),\n          u_camera_to_center_distance: new e.Uniform1f(t, i.u_camera_to_center_distance),\n          u_pitch: new e.Uniform1f(t, i.u_pitch),\n          u_rotate_symbol: new e.Uniform1i(t, i.u_rotate_symbol),\n          u_aspect_ratio: new e.Uniform1f(t, i.u_aspect_ratio),\n          u_fade_change: new e.Uniform1f(t, i.u_fade_change),\n          u_matrix: new e.UniformMatrix4f(t, i.u_matrix),\n          u_label_plane_matrix: new e.UniformMatrix4f(t, i.u_label_plane_matrix),\n          u_coord_matrix: new e.UniformMatrix4f(t, i.u_coord_matrix),\n          u_is_text: new e.Uniform1i(t, i.u_is_text),\n          u_pitch_with_map: new e.Uniform1i(t, i.u_pitch_with_map),\n          u_texsize: new e.Uniform2f(t, i.u_texsize),\n          u_texture: new e.Uniform1i(t, i.u_texture),\n          u_gamma_scale: new e.Uniform1f(t, i.u_gamma_scale),\n          u_device_pixel_ratio: new e.Uniform1f(t, i.u_device_pixel_ratio),\n          u_is_halo: new e.Uniform1i(t, i.u_is_halo)\n        };\n      },\n      symbolTextAndIcon: function symbolTextAndIcon(t, i) {\n        return {\n          u_is_size_zoom_constant: new e.Uniform1i(t, i.u_is_size_zoom_constant),\n          u_is_size_feature_constant: new e.Uniform1i(t, i.u_is_size_feature_constant),\n          u_size_t: new e.Uniform1f(t, i.u_size_t),\n          u_size: new e.Uniform1f(t, i.u_size),\n          u_camera_to_center_distance: new e.Uniform1f(t, i.u_camera_to_center_distance),\n          u_pitch: new e.Uniform1f(t, i.u_pitch),\n          u_rotate_symbol: new e.Uniform1i(t, i.u_rotate_symbol),\n          u_aspect_ratio: new e.Uniform1f(t, i.u_aspect_ratio),\n          u_fade_change: new e.Uniform1f(t, i.u_fade_change),\n          u_matrix: new e.UniformMatrix4f(t, i.u_matrix),\n          u_label_plane_matrix: new e.UniformMatrix4f(t, i.u_label_plane_matrix),\n          u_coord_matrix: new e.UniformMatrix4f(t, i.u_coord_matrix),\n          u_is_text: new e.Uniform1i(t, i.u_is_text),\n          u_pitch_with_map: new e.Uniform1i(t, i.u_pitch_with_map),\n          u_texsize: new e.Uniform2f(t, i.u_texsize),\n          u_texsize_icon: new e.Uniform2f(t, i.u_texsize_icon),\n          u_texture: new e.Uniform1i(t, i.u_texture),\n          u_texture_icon: new e.Uniform1i(t, i.u_texture_icon),\n          u_gamma_scale: new e.Uniform1f(t, i.u_gamma_scale),\n          u_device_pixel_ratio: new e.Uniform1f(t, i.u_device_pixel_ratio),\n          u_is_halo: new e.Uniform1i(t, i.u_is_halo)\n        };\n      },\n      background: function background(t, i) {\n        return {\n          u_matrix: new e.UniformMatrix4f(t, i.u_matrix),\n          u_opacity: new e.Uniform1f(t, i.u_opacity),\n          u_color: new e.UniformColor(t, i.u_color)\n        };\n      },\n      backgroundPattern: function backgroundPattern(t, i) {\n        return {\n          u_matrix: new e.UniformMatrix4f(t, i.u_matrix),\n          u_opacity: new e.Uniform1f(t, i.u_opacity),\n          u_image: new e.Uniform1i(t, i.u_image),\n          u_pattern_tl_a: new e.Uniform2f(t, i.u_pattern_tl_a),\n          u_pattern_br_a: new e.Uniform2f(t, i.u_pattern_br_a),\n          u_pattern_tl_b: new e.Uniform2f(t, i.u_pattern_tl_b),\n          u_pattern_br_b: new e.Uniform2f(t, i.u_pattern_br_b),\n          u_texsize: new e.Uniform2f(t, i.u_texsize),\n          u_mix: new e.Uniform1f(t, i.u_mix),\n          u_pattern_size_a: new e.Uniform2f(t, i.u_pattern_size_a),\n          u_pattern_size_b: new e.Uniform2f(t, i.u_pattern_size_b),\n          u_scale_a: new e.Uniform1f(t, i.u_scale_a),\n          u_scale_b: new e.Uniform1f(t, i.u_scale_b),\n          u_pixel_coord_upper: new e.Uniform2f(t, i.u_pixel_coord_upper),\n          u_pixel_coord_lower: new e.Uniform2f(t, i.u_pixel_coord_lower),\n          u_tile_units_to_pixels: new e.Uniform1f(t, i.u_tile_units_to_pixels)\n        };\n      },\n      terrainRaster: Pt,\n      terrainDepth: Pt,\n      skybox: function skybox(t, i) {\n        return {\n          u_matrix: new e.UniformMatrix4f(t, i.u_matrix),\n          u_sun_direction: new e.Uniform3f(t, i.u_sun_direction),\n          u_cubemap: new e.Uniform1i(t, i.u_cubemap),\n          u_opacity: new e.Uniform1f(t, i.u_opacity),\n          u_temporal_offset: new e.Uniform1f(t, i.u_temporal_offset)\n        };\n      },\n      skyboxGradient: function skyboxGradient(t, i) {\n        return {\n          u_matrix: new e.UniformMatrix4f(t, i.u_matrix),\n          u_color_ramp: new e.Uniform1i(t, i.u_color_ramp),\n          u_center_direction: new e.Uniform3f(t, i.u_center_direction),\n          u_radius: new e.Uniform1f(t, i.u_radius),\n          u_opacity: new e.Uniform1f(t, i.u_opacity),\n          u_temporal_offset: new e.Uniform1f(t, i.u_temporal_offset)\n        };\n      },\n      skyboxCapture: function skyboxCapture(t, i) {\n        return {\n          u_matrix_3f: new e.UniformMatrix3f(t, i.u_matrix_3f),\n          u_sun_direction: new e.Uniform3f(t, i.u_sun_direction),\n          u_sun_intensity: new e.Uniform1f(t, i.u_sun_intensity),\n          u_color_tint_r: new e.Uniform4f(t, i.u_color_tint_r),\n          u_color_tint_m: new e.Uniform4f(t, i.u_color_tint_m),\n          u_luminance: new e.Uniform1f(t, i.u_luminance)\n        };\n      }\n    };\n\n    var _i;\n\n    function mi(t, i, o, a, r, n, s) {\n      var l = t.context,\n          c = l.gl,\n          h = t.useProgram(\"collisionBox\"),\n          u = [];\n      var d = 0,\n          _ = 0;\n\n      for (var _m16 = 0; _m16 < a.length; _m16++) {\n        var _p18 = a[_m16],\n            _f15 = i.getTile(_p18),\n            _g15 = _f15.getBucket(o);\n\n        if (!_g15) continue;\n        var _v13 = _p18.posMatrix;\n        0 === r[0] && 0 === r[1] || (_v13 = t.translatePosMatrix(_p18.posMatrix, _f15, r, n));\n\n        var _x11 = s ? _g15.textCollisionBox : _g15.iconCollisionBox,\n            _y13 = _g15.collisionCircleArray;\n\n        if (_y13.length > 0) {\n          var _i232 = e.create(),\n              _o96 = _v13;\n\n          e.mul(_i232, _g15.placementInvProjMatrix, t.transform.glCoordMatrix), e.mul(_i232, _i232, _g15.placementViewportMatrix), u.push({\n            circleArray: _y13,\n            circleOffset: _,\n            transform: _o96,\n            invTransform: _i232\n          }), d += _y13.length / 4, _ = d;\n        }\n\n        _x11 && (t.terrain && t.terrain.setupElevationDraw(_f15, h), h.draw(l, c.LINES, e.DepthMode.disabled, e.StencilMode.disabled, t.colorModeForRenderPass(), e.CullFaceMode.disabled, Kt(_v13, t.transform, _f15), o.id, _x11.layoutVertexBuffer, _x11.indexBuffer, _x11.segments, null, t.transform.zoom, null, _x11.collisionVertexBuffer, _x11.collisionVertexBufferExt));\n      }\n\n      if (!s || !u.length) return;\n      var m = t.useProgram(\"collisionCircle\"),\n          p = new e.StructArrayLayout2f1f2i16();\n      p.resize(4 * d), p._trim();\n      var f = 0;\n\n      for (var _i233 = 0, _u40 = u; _i233 < _u40.length; _i233++) {\n        var _e343 = _u40[_i233];\n\n        for (var _t322 = 0; _t322 < _e343.circleArray.length / 4; _t322++) {\n          var _i234 = 4 * _t322,\n              _o97 = _e343.circleArray[_i234 + 0],\n              _a129 = _e343.circleArray[_i234 + 1],\n              _r234 = _e343.circleArray[_i234 + 2],\n              _n151 = _e343.circleArray[_i234 + 3];\n\n          p.emplace(f++, _o97, _a129, _r234, _n151, 0), p.emplace(f++, _o97, _a129, _r234, _n151, 1), p.emplace(f++, _o97, _a129, _r234, _n151, 2), p.emplace(f++, _o97, _a129, _r234, _n151, 3);\n        }\n      }\n\n      (!_i || _i.length < 2 * d) && (_i = function (t) {\n        var i = 2 * t,\n            o = new e.StructArrayLayout3ui6();\n        o.resize(i), o._trim();\n\n        for (var _e344 = 0; _e344 < i; _e344++) {\n          var _t323 = 6 * _e344;\n\n          o.uint16[_t323 + 0] = 4 * _e344 + 0, o.uint16[_t323 + 1] = 4 * _e344 + 1, o.uint16[_t323 + 2] = 4 * _e344 + 2, o.uint16[_t323 + 3] = 4 * _e344 + 2, o.uint16[_t323 + 4] = 4 * _e344 + 3, o.uint16[_t323 + 5] = 4 * _e344 + 0;\n        }\n\n        return o;\n      }(d));\n      var g = l.createIndexBuffer(_i, !0),\n          v = l.createVertexBuffer(p, e.collisionCircleLayout.members, !0);\n\n      for (var _i235 = 0, _u41 = u; _i235 < _u41.length; _i235++) {\n        var _i236 = _u41[_i235];\n        var _a130 = {\n          u_matrix: _i236.transform,\n          u_inv_matrix: _i236.invTransform,\n          u_camera_to_center_distance: (x = t.transform).cameraToCenterDistance,\n          u_viewport_size: [x.width, x.height]\n        };\n        m.draw(l, c.TRIANGLES, e.DepthMode.disabled, e.StencilMode.disabled, t.colorModeForRenderPass(), e.CullFaceMode.disabled, _a130, o.id, v, g, e.SegmentVector.simpleSegment(0, 2 * _i236.circleOffset, _i236.circleArray.length, _i236.circleArray.length / 2), null, t.transform.zoom, null, null, null);\n      }\n\n      var x;\n      v.destroy(), g.destroy();\n    }\n\n    var pi = e.identity(new Float32Array(16));\n\n    function fi(t, i, o, a, r, n) {\n      var _e$getAnchorAlignment2 = e.getAnchorAlignment(t),\n          s = _e$getAnchorAlignment2.horizontalAlign,\n          l = _e$getAnchorAlignment2.verticalAlign,\n          c = -(s - .5) * i,\n          h = -(l - .5) * o,\n          u = e.evaluateVariableOffset(t, a);\n\n      return new e.Point((c / r + u[0]) * n, (h / r + u[1]) * n);\n    }\n\n    function gi(t, i, o, a, r, n, s, l, c, h, u, d) {\n      var _ = t.text.placedSymbolArray,\n          m = t.text.dynamicLayoutVertexArray,\n          p = t.icon.dynamicLayoutVertexArray,\n          f = {};\n      m.clear();\n\n      for (var _p19 = 0; _p19 < _.length; _p19++) {\n        var _g16 = _.get(_p19),\n            _v14 = t.allowVerticalPlacement && !_g16.placedOrientation,\n            _x12 = _g16.hidden || !_g16.crossTileID || _v14 ? null : a[_g16.crossTileID];\n\n        if (_x12) {\n          var _a131 = new e.Point(_g16.anchorX, _g16.anchorY),\n              _13 = d(_a131),\n              _p20 = Y(_a131, o ? l : s, _13),\n              _v15 = J(n.cameraToCenterDistance, _p20.signedDistanceFromCamera);\n\n          var _y14 = r.evaluateSizeForFeature(t.textSizeData, h, _g16) * _v15 / e.ONE_EM;\n\n          o && (_y14 *= t.tilePixelRatio / c);\n\n          var _b12 = _x12.width,\n              _w10 = _x12.height,\n              _T6 = _x12.anchor,\n              _E4 = _x12.textOffset,\n              _C4 = _x12.textBoxScale,\n              _S6 = fi(_T6, _b12, _w10, _E4, _C4, _y14),\n              _I4 = o ? Y(_a131.add(_S6), s, _13).point : _p20.point.add(i ? _S6.rotate(-n.angle) : _S6),\n              _P2 = t.allowVerticalPlacement && _g16.placedOrientation === e.WritingMode.vertical ? Math.PI / 2 : 0;\n\n          for (var _t324 = 0; _t324 < _g16.numGlyphs; _t324++) {\n            e.addDynamicAttributes(m, _I4, _P2);\n          }\n\n          u && _g16.associatedIconIndex >= 0 && (f[_g16.associatedIconIndex] = {\n            shiftedAnchor: _I4,\n            angle: _P2\n          });\n        } else se(_g16.numGlyphs, m);\n      }\n\n      if (u) {\n        p.clear();\n        var _i237 = t.icon.placedSymbolArray;\n\n        for (var _t325 = 0; _t325 < _i237.length; _t325++) {\n          var _o98 = _i237.get(_t325);\n\n          if (_o98.hidden) se(_o98.numGlyphs, p);else {\n            var _i238 = f[_t325];\n            if (_i238) for (var _t326 = 0; _t326 < _o98.numGlyphs; _t326++) {\n              e.addDynamicAttributes(p, _i238.shiftedAnchor, _i238.angle);\n            } else se(_o98.numGlyphs, p);\n          }\n        }\n\n        t.icon.dynamicLayoutVertexBuffer.updateData(p);\n      }\n\n      t.text.dynamicLayoutVertexBuffer.updateData(m);\n    }\n\n    function vi(e, t, i) {\n      return i.iconsInText && t ? \"symbolTextAndIcon\" : e ? \"symbolSDF\" : \"symbolIcon\";\n    }\n\n    function xi(t, i, o, a, r, n, s, l, c, h, u, d) {\n      var _ = t.context,\n          m = _.gl,\n          p = t.transform,\n          f = \"map\" === l,\n          g = \"map\" === c,\n          x = f && \"point\" !== o.layout.get(\"symbol-placement\"),\n          y = f && !g && !x,\n          b = void 0 !== o.layout.get(\"symbol-sort-key\").constantOr(1);\n      var w = !1;\n      var T = t.depthModeForSublayer(0, e.DepthMode.ReadOnly),\n          E = o.layout.get(\"text-variable-anchor\"),\n          C = [],\n          S = t.terrain && g ? [\"PITCH_WITH_MAP_TERRAIN\"] : null;\n\n      var _iterator210 = _createForOfIteratorHelper(a),\n          _step210;\n\n      try {\n        var _loop11 = function _loop11() {\n          var l = _step210.value;\n          var a = i.getTile(l),\n              c = a.getBucket(o);\n          if (!c) return \"continue\";\n          var u = r ? c.text : c.icon;\n          if (!u || !u.segments.get().length) return \"continue\";\n\n          var d = u.programConfigurations.get(o.id),\n              _ = r || c.sdfIcons,\n              T = r ? c.textSizeData : c.iconSizeData,\n              I = g || 0 !== p.pitch,\n              P = t.useProgram(vi(_, r, c), d, S),\n              M = e.evaluateSizeForZoom(T, p.zoom);\n\n          var z = void 0,\n              A = void 0,\n              D = void 0,\n              L = void 0,\n              R = [0, 0],\n              k = null;\n\n          if (r) {\n            if (A = a.glyphAtlasTexture, D = m.LINEAR, z = a.glyphAtlasTexture.size, c.iconsInText) {\n              R = a.imageAtlasTexture.size, k = a.imageAtlasTexture;\n\n              var _e346 = \"composite\" === T.kind || \"camera\" === T.kind;\n\n              L = I || t.options.rotating || t.options.zooming || _e346 ? m.LINEAR : m.NEAREST;\n            }\n          } else {\n            var _e347 = 1 !== o.layout.get(\"icon-size\").constantOr(0) || c.iconsNeedLinear;\n\n            A = a.imageAtlasTexture, D = _ || t.options.rotating || t.options.zooming || _e347 || I ? m.LINEAR : m.NEAREST, z = a.imageAtlasTexture.size;\n          }\n\n          var B = v(a, 1, t.transform.zoom),\n              F = H(l.posMatrix, g, f, t.transform, B),\n              O = t.terrain && g && x ? e.invert(new Float32Array(16), F) : pi,\n              U = K(l.posMatrix, g, f, t.transform, B),\n              N = E && c.hasTextData(),\n              Z = \"none\" !== o.layout.get(\"icon-text-fit\") && N && c.hasIconData();\n\n          if (x) {\n            var _e348 = p.elevation;\n            ee(c, l.posMatrix, t, r, F, U, g, h, _e348 ? function (t) {\n              return _e348.getAtTileOffset(l, t.x, t.y);\n            } : null);\n          }\n\n          var G = t.translatePosMatrix(l.posMatrix, a, n, s),\n              V = x || r && E || Z ? pi : F,\n              q = t.translatePosMatrix(U, a, n, s, !0),\n              j = _ && 0 !== o.paint.get(r ? \"text-halo-width\" : \"icon-halo-width\").constantOr(1);\n\n          var $ = void 0;\n          $ = _ ? c.iconsInText ? ci(T.kind, M, y, g, t, G, V, q, z, R) : li(T.kind, M, y, g, t, G, V, q, r, z, !0) : si(T.kind, M, y, g, t, G, V, q, r, z);\n          var X = {\n            program: P,\n            buffers: u,\n            uniformValues: $,\n            atlasTexture: A,\n            atlasTextureIcon: k,\n            atlasInterpolation: D,\n            atlasInterpolationIcon: L,\n            isSDF: _,\n            hasHalo: j,\n            tile: a,\n            labelPlaneMatrixInv: O\n          };\n\n          if (b && c.canOverlap) {\n            w = !0;\n\n            var _t327 = u.segments.get();\n\n            var _iterator211 = _createForOfIteratorHelper(_t327),\n                _step211;\n\n            try {\n              for (_iterator211.s(); !(_step211 = _iterator211.n()).done;) {\n                var _i241 = _step211.value;\n                C.push({\n                  segments: new e.SegmentVector([_i241]),\n                  sortKey: _i241.sortKey,\n                  state: X\n                });\n              }\n            } catch (err) {\n              _iterator211.e(err);\n            } finally {\n              _iterator211.f();\n            }\n          } else C.push({\n            segments: u.segments,\n            sortKey: 0,\n            state: X\n          });\n        };\n\n        for (_iterator210.s(); !(_step210 = _iterator210.n()).done;) {\n          var _ret5 = _loop11();\n\n          if (_ret5 === \"continue\") continue;\n        }\n      } catch (err) {\n        _iterator210.e(err);\n      } finally {\n        _iterator210.f();\n      }\n\n      w && C.sort(function (e, t) {\n        return e.sortKey - t.sortKey;\n      });\n\n      for (var _i239 = 0, _C5 = C; _i239 < _C5.length; _i239++) {\n        var _e345 = _C5[_i239];\n        var _i240 = _e345.state;\n\n        if (t.terrain && t.terrain.setupElevationDraw(_i240.tile, _i240.program, {\n          useDepthForOcclusion: !0,\n          labelPlaneMatrixInv: _i240.labelPlaneMatrixInv\n        }), _.activeTexture.set(m.TEXTURE0), _i240.atlasTexture.bind(_i240.atlasInterpolation, m.CLAMP_TO_EDGE), _i240.atlasTextureIcon && (_.activeTexture.set(m.TEXTURE1), _i240.atlasTextureIcon && _i240.atlasTextureIcon.bind(_i240.atlasInterpolationIcon, m.CLAMP_TO_EDGE)), _i240.isSDF) {\n          var _a132 = _i240.uniformValues;\n          _i240.hasHalo && (_a132.u_is_halo = 1, yi(_i240.buffers, _e345.segments, o, t, _i240.program, T, u, d, _a132)), _a132.u_is_halo = 0;\n        }\n\n        yi(_i240.buffers, _e345.segments, o, t, _i240.program, T, u, d, _i240.uniformValues);\n      }\n    }\n\n    function yi(t, i, o, a, r, n, s, l, c) {\n      var h = a.context;\n      r.draw(h, h.gl.TRIANGLES, n, s, l, e.CullFaceMode.disabled, c, o.id, t.layoutVertexBuffer, t.indexBuffer, i, o.paint, a.transform.zoom, t.programConfigurations.get(o.id), t.dynamicLayoutVertexBuffer, t.opacityVertexBuffer);\n    }\n\n    function bi(t, i, o, a, r, n, s) {\n      var l = t.context.gl,\n          c = o.paint.get(\"fill-pattern\"),\n          h = c && c.constantOr(1),\n          u = o.getCrossfadeParameters();\n\n      var d, _, m, p, f;\n\n      s ? (_ = h && !o.getPaintProperty(\"fill-outline-color\") ? \"fillOutlinePattern\" : \"fillOutline\", d = l.LINES) : (_ = h ? \"fillPattern\" : \"fill\", d = l.TRIANGLES);\n\n      var _iterator212 = _createForOfIteratorHelper(a),\n          _step212;\n\n      try {\n        for (_iterator212.s(); !(_step212 = _iterator212.n()).done;) {\n          var _g17 = _step212.value;\n\n          var _a133 = i.getTile(_g17);\n\n          if (h && !_a133.patternsLoaded()) continue;\n\n          var _v16 = _a133.getBucket(o);\n\n          if (!_v16) continue;\n          t.prepareDrawTile(_g17);\n\n          var _x13 = _v16.programConfigurations.get(o.id),\n              _y15 = t.useProgram(_, _x13);\n\n          h && (t.context.activeTexture.set(l.TEXTURE0), _a133.imageAtlasTexture.bind(l.LINEAR, l.CLAMP_TO_EDGE), _x13.updatePaintBuffers(u));\n\n          var _b13 = c.constantOr(null);\n\n          if (_b13 && _a133.imageAtlas) {\n            var _e349 = _a133.imageAtlas,\n                _t328 = _e349.patternPositions[_b13.to.toString()],\n                _i242 = _e349.patternPositions[_b13.from.toString()];\n\n            _t328 && _i242 && _x13.setConstantPatternPositions(_t328, _i242);\n          }\n\n          var _w11 = t.translatePosMatrix(_g17.posMatrix, _a133, o.paint.get(\"fill-translate\"), o.paint.get(\"fill-translate-anchor\"));\n\n          if (s) {\n            p = _v16.indexBuffer2, f = _v16.segments2;\n\n            var _e350 = t.terrain && t.terrain.renderingToTexture ? t.terrain.drapeBufferSize : [l.drawingBufferWidth, l.drawingBufferHeight];\n\n            m = \"fillOutlinePattern\" === _ && h ? Xt(_w11, t, u, _a133, _e350) : $t(_w11, _e350);\n          } else p = _v16.indexBuffer, f = _v16.segments, m = h ? jt(_w11, t, u, _a133) : qt(_w11);\n\n          _y15.draw(t.context, d, r, t.stencilModeForClipping(_g17), n, e.CullFaceMode.disabled, m, o.id, _v16.layoutVertexBuffer, p, f, o.paint, t.transform.zoom, _x13);\n        }\n      } catch (err) {\n        _iterator212.e(err);\n      } finally {\n        _iterator212.f();\n      }\n    }\n\n    function wi(t, i, o, a, r, n, s) {\n      var l = t.context,\n          c = l.gl,\n          h = o.paint.get(\"fill-extrusion-pattern\"),\n          u = h.constantOr(1),\n          d = o.getCrossfadeParameters(),\n          _ = o.paint.get(\"fill-extrusion-opacity\");\n\n      var _iterator213 = _createForOfIteratorHelper(a),\n          _step213;\n\n      try {\n        for (_iterator213.s(); !(_step213 = _iterator213.n()).done;) {\n          var _m17 = _step213.value;\n\n          var _a134 = i.getTile(_m17),\n              _p21 = _a134.getBucket(o);\n\n          if (!_p21) continue;\n\n          var _f16 = _p21.programConfigurations.get(o.id),\n              _g18 = t.useProgram(u ? \"fillExtrusionPattern\" : \"fillExtrusion\", _f16);\n\n          if (t.terrain) {\n            var _e351 = t.terrain;\n            if (!_p21.enableTerrain) continue;\n\n            if (_e351.setupElevationDraw(_a134, _g18, {\n              useMeterToDem: !0\n            }), Ti(l, i, _m17, _p21, o, _e351), !_p21.centroidVertexBuffer) {\n              var _e352 = _g18.attributes.a_centroid_pos;\n              void 0 !== _e352 && c.vertexAttrib2f(_e352, 0, 0);\n            }\n          }\n\n          u && (t.context.activeTexture.set(c.TEXTURE0), _a134.imageAtlasTexture.bind(c.LINEAR, c.CLAMP_TO_EDGE), _f16.updatePaintBuffers(d));\n\n          var _v17 = h.constantOr(null);\n\n          if (_v17 && _a134.imageAtlas) {\n            var _e353 = _a134.imageAtlas,\n                _t329 = _e353.patternPositions[_v17.to.toString()],\n                _i243 = _e353.patternPositions[_v17.from.toString()];\n\n            _t329 && _i243 && _f16.setConstantPatternPositions(_t329, _i243);\n          }\n\n          var _x14 = t.translatePosMatrix(_m17.posMatrix, _a134, o.paint.get(\"fill-extrusion-translate\"), o.paint.get(\"fill-extrusion-translate-anchor\")),\n              _y16 = o.paint.get(\"fill-extrusion-vertical-gradient\"),\n              _b14 = u ? Vt(_x14, t, _y16, _, _m17, d, _a134) : Gt(_x14, t, _y16, _);\n\n          _g18.draw(l, l.gl.TRIANGLES, r, n, s, e.CullFaceMode.backCCW, _b14, o.id, _p21.layoutVertexBuffer, _p21.indexBuffer, _p21.segments, o.paint, t.transform.zoom, _f16, t.terrain ? _p21.centroidVertexBuffer : null);\n        }\n      } catch (err) {\n        _iterator213.e(err);\n      } finally {\n        _iterator213.f();\n      }\n    }\n\n    function Ti(t, i, o, a, r, n) {\n      var s = [function (t) {\n        var i = t.canonical.x - 1,\n            o = t.wrap;\n        return i < 0 && (i = (1 << t.canonical.z) - 1, o--), new e.OverscaledTileID(t.overscaledZ, o, t.canonical.z, i, t.canonical.y);\n      }, function (t) {\n        var i = t.canonical.x + 1,\n            o = t.wrap;\n        return i === 1 << t.canonical.z && (i = 0, o++), new e.OverscaledTileID(t.overscaledZ, o, t.canonical.z, i, t.canonical.y);\n      }, function (t) {\n        return new e.OverscaledTileID(t.overscaledZ, t.wrap, t.canonical.z, t.canonical.x, (0 === t.canonical.y ? 1 << t.canonical.z : t.canonical.y) - 1);\n      }, function (t) {\n        return new e.OverscaledTileID(t.overscaledZ, t.wrap, t.canonical.z, t.canonical.x, t.canonical.y === (1 << t.canonical.z) - 1 ? 0 : t.canonical.y + 1);\n      }],\n          l = function l(e) {\n        var t = i.getSource().maxzoom;\n\n        for (var _i244 = 0, _arr3 = [0, -1, 1]; _i244 < _arr3.length; _i244++) {\n          var _o99 = _arr3[_i244];\n          if (e.overscaledZ + _o99 < t) continue;\n          if (_o99 > 0 && e.overscaledZ < t) continue;\n\n          var _a135 = i.getTileByID(e.calculateScaledKey(e.overscaledZ + _o99));\n\n          if (_a135 && _a135.hasData()) {\n            var _e354 = _a135.getBucket(r);\n\n            if (_e354) return _e354;\n          }\n        }\n      },\n          c = [0, 0, 0],\n          h = function h(t, i) {\n        return c[0] = Math.min(t.min.y, i.min.y), c[1] = Math.max(t.max.y, i.max.y), c[2] = e.EXTENT - i.min.x > t.max.x ? i.min.x - e.EXTENT : t.max.x, c;\n      },\n          u = function u(t, i) {\n        return c[0] = Math.min(t.min.x, i.min.x), c[1] = Math.max(t.max.x, i.max.x), c[2] = e.EXTENT - i.min.y > t.max.y ? i.min.y - e.EXTENT : t.max.y, c;\n      },\n          d = [function (e, t) {\n        return h(e, t);\n      }, function (e, t) {\n        return h(t, e);\n      }, function (e, t) {\n        return u(e, t);\n      }, function (e, t) {\n        return u(t, e);\n      }],\n          _ = new e.Point(0, 0);\n\n      var m, p, f;\n\n      var g = function g(t, i, a, r, s) {\n        var l = [[r ? a : t, r ? t : a, 0], [r ? a : i, r ? i : a, 0]],\n            c = s < 0 ? e.EXTENT + s : s,\n            h = [r ? c : (t + i) / 2, r ? (t + i) / 2 : c, 0];\n        return 0 === a && s < 0 || 0 !== a && s > 0 ? n.getForTilePoints(f, [h], !0, p) : l.push(h), n.getForTilePoints(o, l, !0, m), Math.max(l[0][2], l[1][2], h[2]) / n.exaggeration();\n      };\n\n      for (var _t330 = 0; _t330 < 4; _t330++) {\n        var _i245 = a.borders[_t330];\n        if (0 === _i245.length && (a.borderDone[_t330] = !0), a.borderDone[_t330]) continue;\n\n        var _r235 = f = s[_t330](o),\n            _c35 = l(_r235);\n\n        if (!_c35 || !_c35.enableTerrain) continue;\n        if (p = n.findDEMTileFor(_r235), !p || !p.dem) continue;\n\n        if (!m) {\n          var _e355 = n.findDEMTileFor(o);\n\n          if (!_e355 || !_e355.dem) return;\n          m = _e355;\n        }\n\n        var _h26 = (_t330 < 2 ? 1 : 5) - _t330,\n            _u42 = _c35.borders[_h26];\n\n        var _v18 = 0;\n\n        for (var _o100 = 0; _o100 < _i245.length; _o100++) {\n          var _r236 = a.featuresOnBorder[_i245[_o100]],\n              _n152 = _r236.borders[_t330];\n\n          var _s115 = void 0;\n\n          for (; _v18 < _u42.length && (_s115 = _c35.featuresOnBorder[_u42[_v18]], !(_s115.borders[_h26][1] > _n152[0] + 3));) {\n            _c35.borderDone[_h26] || _c35.encodeCentroid(void 0, _s115, !1), _v18++;\n          }\n\n          if (_s115 && _v18 < _u42.length) {\n            var _i246 = _v18;\n            var _o101 = 0;\n\n            for (; !(_s115.borders[_h26][0] > _n152[1] - 3) && (_o101++, ++_v18 !== _u42.length);) {\n              _s115 = _c35.featuresOnBorder[_u42[_v18]];\n            }\n\n            if (_s115 = _c35.featuresOnBorder[_u42[_i246]], _r236.intersectsCount() > 1 || _s115.intersectsCount() > 1 || 1 !== _o101) {\n              1 !== _o101 && (_v18 = _i246), a.encodeCentroid(void 0, _r236, !1), _c35.borderDone[_h26] || _c35.encodeCentroid(void 0, _s115, !1);\n              continue;\n            }\n\n            var _l48 = d[_t330](_r236, _s115),\n                _m18 = _t330 % 2 ? e.EXTENT - 1 : 0;\n\n            _.x = g(_l48[0], Math.min(e.EXTENT - 1, _l48[1]), _m18, _t330 < 2, _l48[2]), _.y = 0, a.encodeCentroid(_, _r236, !1), _c35.borderDone[_h26] || _c35.encodeCentroid(_, _s115, !1);\n          } else a.encodeCentroid(void 0, _r236, !1);\n        }\n\n        a.borderDone[_t330] = a.needsCentroidUpdate = !0, _c35.borderDone[_h26] || (_c35.borderDone[_h26] = _c35.needsCentroidUpdate = !0);\n      }\n\n      (a.needsCentroidUpdate || !a.centroidVertexBuffer && 0 !== a.centroidVertexArray.length) && a.uploadCentroid(t);\n    }\n\n    var Ei = new e.Color(1, 0, 0, 1),\n        Ci = new e.Color(0, 1, 0, 1),\n        Si = new e.Color(0, 0, 1, 1),\n        Ii = new e.Color(1, 0, 1, 1),\n        Pi = new e.Color(0, 1, 1, 1);\n\n    function Mi(e, t, i, o) {\n      Ai(e, 0, t + i / 2, e.transform.width, i, o);\n    }\n\n    function zi(e, t, i, o) {\n      Ai(e, t - i / 2, 0, i, e.transform.height, o);\n    }\n\n    function Ai(t, i, o, a, r, n) {\n      var s = t.context,\n          l = s.gl;\n      l.enable(l.SCISSOR_TEST), l.scissor(i * e.browser.devicePixelRatio, o * e.browser.devicePixelRatio, a * e.browser.devicePixelRatio, r * e.browser.devicePixelRatio), s.clear({\n        color: n\n      }), l.disable(l.SCISSOR_TEST);\n    }\n\n    function Di(t, i, o) {\n      var a = t.context,\n          r = a.gl,\n          n = o.posMatrix,\n          s = t.useProgram(\"debug\"),\n          l = i.getTileByID(o.key);\n      t.terrain && t.terrain.setupElevationDraw(l, s);\n      var c = e.DepthMode.disabled,\n          h = e.StencilMode.disabled,\n          u = t.colorModeForRenderPass();\n      a.activeTexture.set(r.TEXTURE0), t.emptyTexture.bind(r.LINEAR, r.CLAMP_TO_EDGE), s.draw(a, r.LINE_STRIP, c, h, u, e.CullFaceMode.disabled, Yt(n, e.Color.red), \"$debug\", t.debugBuffer, t.tileBorderIndexBuffer, t.debugSegments);\n\n      var d = l.latestRawTileData,\n          _ = Math.floor((d && d.byteLength || 0) / 1024),\n          m = i.getTile(o).tileSize,\n          p = 512 / Math.min(m, 512) * (o.overscaledZ / t.transform.zoom) * .5;\n\n      var f = o.canonical.toString();\n      o.overscaledZ !== o.canonical.z && (f += \" => \".concat(o.overscaledZ)), function (e, t) {\n        e.initDebugOverlayCanvas();\n        var i = e.debugOverlayCanvas,\n            o = e.context.gl,\n            a = e.debugOverlayCanvas.getContext(\"2d\");\n        a.clearRect(0, 0, i.width, i.height), a.shadowColor = \"white\", a.shadowBlur = 2, a.lineWidth = 1.5, a.strokeStyle = \"white\", a.textBaseline = \"top\", a.font = \"bold 36px Open Sans, sans-serif\", a.fillText(t, 5, 5), a.strokeText(t, 5, 5), e.debugOverlayTexture.update(i), e.debugOverlayTexture.bind(o.LINEAR, o.CLAMP_TO_EDGE);\n      }(t, \"\".concat(f, \" \").concat(_, \"kb\")), s.draw(a, r.TRIANGLES, c, h, e.ColorMode.alphaBlended, e.CullFaceMode.disabled, Yt(n, e.Color.transparent, p), \"$debug\", t.debugBuffer, t.quadTriangleIndexBuffer, t.debugSegments);\n    }\n\n    var Li = e.createLayout([{\n      name: \"a_pos_3f\",\n      components: 3,\n      type: \"Float32\"\n    }]),\n        Ri = Li.members;\n\n    function ki(e, t, i, o) {\n      e.emplaceBack(t, i, o);\n    }\n\n    var Bi = function Bi(t) {\n      _classCallCheck(this, Bi);\n\n      this.vertexArray = new e.StructArrayLayout3f12(), this.indices = new e.StructArrayLayout3ui6(), ki(this.vertexArray, -1, -1, 1), ki(this.vertexArray, 1, -1, 1), ki(this.vertexArray, -1, 1, 1), ki(this.vertexArray, 1, 1, 1), ki(this.vertexArray, -1, -1, -1), ki(this.vertexArray, 1, -1, -1), ki(this.vertexArray, -1, 1, -1), ki(this.vertexArray, 1, 1, -1), this.indices.emplaceBack(5, 1, 3), this.indices.emplaceBack(3, 7, 5), this.indices.emplaceBack(6, 2, 0), this.indices.emplaceBack(0, 4, 6), this.indices.emplaceBack(2, 6, 7), this.indices.emplaceBack(7, 3, 2), this.indices.emplaceBack(5, 4, 0), this.indices.emplaceBack(0, 1, 5), this.indices.emplaceBack(0, 2, 3), this.indices.emplaceBack(3, 1, 0), this.indices.emplaceBack(7, 6, 4), this.indices.emplaceBack(4, 5, 7), this.vertexBuffer = t.createVertexBuffer(this.vertexArray, Ri), this.indexBuffer = t.createIndexBuffer(this.indices), this.segment = e.SegmentVector.simpleSegment(0, 0, 36, 12);\n    };\n\n    function Fi(t, i, o, a, r, n) {\n      var s = t.gl,\n          l = i.paint.get(\"sky-atmosphere-color\"),\n          c = i.paint.get(\"sky-atmosphere-halo-color\"),\n          h = i.paint.get(\"sky-atmosphere-sun-intensity\"),\n          u = function (e, t, i, o, a) {\n        return {\n          u_matrix_3f: e,\n          u_sun_direction: t,\n          u_sun_intensity: i,\n          u_color_tint_r: [o.r, o.g, o.b, o.a],\n          u_color_tint_m: [a.r, a.g, a.b, a.a],\n          u_luminance: 5e-5\n        };\n      }(e.fromMat4([], a), r, h, l, c);\n\n      s.framebufferTexture2D(s.FRAMEBUFFER, s.COLOR_ATTACHMENT0, s.TEXTURE_CUBE_MAP_POSITIVE_X + n, i.skyboxTexture, 0), o.draw(t, s.TRIANGLES, e.DepthMode.disabled, e.StencilMode.disabled, e.ColorMode.unblended, e.CullFaceMode.frontCW, u, \"skyboxCapture\", i.skyboxGeometry.vertexBuffer, i.skyboxGeometry.indexBuffer, i.skyboxGeometry.segment);\n    }\n\n    var Oi = {\n      symbol: function symbol(t, i, o, a, r) {\n        if (\"translucent\" !== t.renderPass) return;\n        var n = e.StencilMode.disabled,\n            s = t.colorModeForRenderPass();\n        o.layout.get(\"text-variable-anchor\") && function (t, i, o, a, r, n, s) {\n          var l = i.transform,\n              c = \"map\" === r,\n              h = \"map\" === n;\n\n          var _iterator214 = _createForOfIteratorHelper(t),\n              _step214;\n\n          try {\n            var _loop12 = function _loop12() {\n              var r = _step214.value;\n              var t = a.getTile(r),\n                  n = t.getBucket(o);\n              if (!n || !n.text || !n.text.segments.get().length) return \"continue\";\n\n              var u = e.evaluateSizeForZoom(n.textSizeData, l.zoom),\n                  d = v(t, 1, i.transform.zoom),\n                  _ = H(r.posMatrix, h, c, i.transform, d),\n                  m = \"none\" !== o.layout.get(\"icon-text-fit\") && n.hasIconData();\n\n              if (u) {\n                var _i247 = Math.pow(2, l.zoom - t.tileID.overscaledZ),\n                    _o102 = l.elevation;\n\n                gi(n, c, h, s, e.symbolSize, l, _, r.posMatrix, _i247, u, m, _o102 ? function (e) {\n                  return _o102.getAtTileOffset(r, e.x, e.y);\n                } : function (e) {\n                  return 0;\n                });\n              }\n            };\n\n            for (_iterator214.s(); !(_step214 = _iterator214.n()).done;) {\n              var _ret6 = _loop12();\n\n              if (_ret6 === \"continue\") continue;\n            }\n          } catch (err) {\n            _iterator214.e(err);\n          } finally {\n            _iterator214.f();\n          }\n        }(a, t, o, i, o.layout.get(\"text-rotation-alignment\"), o.layout.get(\"text-pitch-alignment\"), r), 0 !== o.paint.get(\"icon-opacity\").constantOr(1) && xi(t, i, o, a, !1, o.paint.get(\"icon-translate\"), o.paint.get(\"icon-translate-anchor\"), o.layout.get(\"icon-rotation-alignment\"), o.layout.get(\"icon-pitch-alignment\"), o.layout.get(\"icon-keep-upright\"), n, s), 0 !== o.paint.get(\"text-opacity\").constantOr(1) && xi(t, i, o, a, !0, o.paint.get(\"text-translate\"), o.paint.get(\"text-translate-anchor\"), o.layout.get(\"text-rotation-alignment\"), o.layout.get(\"text-pitch-alignment\"), o.layout.get(\"text-keep-upright\"), n, s), i.map.showCollisionBoxes && (mi(t, i, o, a, o.paint.get(\"text-translate\"), o.paint.get(\"text-translate-anchor\"), !0), mi(t, i, o, a, o.paint.get(\"icon-translate\"), o.paint.get(\"icon-translate-anchor\"), !1));\n      },\n      circle: function circle(t, i, o, a) {\n        if (\"translucent\" !== t.renderPass) return;\n        var r = o.paint.get(\"circle-opacity\"),\n            n = o.paint.get(\"circle-stroke-width\"),\n            s = o.paint.get(\"circle-stroke-opacity\"),\n            l = void 0 !== o.layout.get(\"circle-sort-key\").constantOr(1);\n        if (0 === r.constantOr(1) && (0 === n.constantOr(1) || 0 === s.constantOr(1))) return;\n\n        var c = t.context,\n            h = c.gl,\n            u = t.depthModeForSublayer(0, e.DepthMode.ReadOnly),\n            d = e.StencilMode.disabled,\n            _ = t.colorModeForRenderPass(),\n            m = [];\n\n        for (var _r237 = 0; _r237 < a.length; _r237++) {\n          var _n153 = a[_r237],\n              _s116 = i.getTile(_n153),\n              _c36 = _s116.getBucket(o);\n\n          if (!_c36) continue;\n\n          var _h27 = _c36.programConfigurations.get(o.id),\n              _u43 = Ht(o),\n              _d19 = {\n            programConfiguration: _h27,\n            program: t.useProgram(\"circle\", _h27, _u43),\n            layoutVertexBuffer: _c36.layoutVertexBuffer,\n            indexBuffer: _c36.indexBuffer,\n            uniformValues: Wt(t, _n153, _s116, o),\n            tile: _s116\n          };\n\n          if (l) {\n            var _t331 = _c36.segments.get();\n\n            var _iterator215 = _createForOfIteratorHelper(_t331),\n                _step215;\n\n            try {\n              for (_iterator215.s(); !(_step215 = _iterator215.n()).done;) {\n                var _i248 = _step215.value;\n                m.push({\n                  segments: new e.SegmentVector([_i248]),\n                  sortKey: _i248.sortKey,\n                  state: _d19\n                });\n              }\n            } catch (err) {\n              _iterator215.e(err);\n            } finally {\n              _iterator215.f();\n            }\n          } else m.push({\n            segments: _c36.segments,\n            sortKey: 0,\n            state: _d19\n          });\n        }\n\n        l && m.sort(function (e, t) {\n          return e.sortKey - t.sortKey;\n        });\n\n        for (var _i249 = 0, _m19 = m; _i249 < _m19.length; _i249++) {\n          var _i250 = _m19[_i249];\n          var _i250$state = _i250.state,\n              _a136 = _i250$state.programConfiguration,\n              _r238 = _i250$state.program,\n              _n154 = _i250$state.layoutVertexBuffer,\n              _s117 = _i250$state.indexBuffer,\n              _l49 = _i250$state.uniformValues,\n              _m20 = _i250$state.tile,\n              _p22 = _i250.segments;\n          t.terrain && t.terrain.setupElevationDraw(_m20, _r238, {\n            useDepthForOcclusion: !0\n          }), _r238.draw(c, h.TRIANGLES, u, d, _, e.CullFaceMode.disabled, _l49, o.id, _n154, _s117, _p22, o.paint, t.transform.zoom, _a136);\n        }\n      },\n      heatmap: function heatmap(t, i, o, a) {\n        if (0 !== o.paint.get(\"heatmap-opacity\")) if (\"offscreen\" === t.renderPass) {\n          var _r239 = t.context,\n              _n155 = _r239.gl,\n              _s118 = e.StencilMode.disabled,\n              _l50 = new e.ColorMode([_n155.ONE, _n155.ONE], e.Color.transparent, [!0, !0, !0, !0]);\n\n          !function (e, t, i) {\n            var o = e.gl;\n            e.activeTexture.set(o.TEXTURE1), e.viewport.set([0, 0, t.width / 4, t.height / 4]);\n            var a = i.heatmapFbo;\n            if (a) o.bindTexture(o.TEXTURE_2D, a.colorAttachment.get()), e.bindFramebuffer.set(a.framebuffer);else {\n              var _r240 = o.createTexture();\n\n              o.bindTexture(o.TEXTURE_2D, _r240), o.texParameteri(o.TEXTURE_2D, o.TEXTURE_WRAP_S, o.CLAMP_TO_EDGE), o.texParameteri(o.TEXTURE_2D, o.TEXTURE_WRAP_T, o.CLAMP_TO_EDGE), o.texParameteri(o.TEXTURE_2D, o.TEXTURE_MIN_FILTER, o.LINEAR), o.texParameteri(o.TEXTURE_2D, o.TEXTURE_MAG_FILTER, o.LINEAR), a = i.heatmapFbo = e.createFramebuffer(t.width / 4, t.height / 4, !1), function (e, t, i, o) {\n                var a = e.gl;\n                a.texImage2D(a.TEXTURE_2D, 0, a.RGBA, t.width / 4, t.height / 4, 0, a.RGBA, e.extRenderToTextureHalfFloat ? e.extTextureHalfFloat.HALF_FLOAT_OES : a.UNSIGNED_BYTE, null), o.colorAttachment.set(i);\n              }(e, t, _r240, a);\n            }\n          }(_r239, t, o), _r239.clear({\n            color: e.Color.transparent\n          });\n\n          for (var _c37 = 0; _c37 < a.length; _c37++) {\n            var _h28 = a[_c37];\n            if (i.hasRenderableParent(_h28)) continue;\n\n            var _u44 = i.getTile(_h28),\n                _d20 = _u44.getBucket(o);\n\n            if (!_d20) continue;\n\n            var _14 = _d20.programConfigurations.get(o.id),\n                _m21 = t.useProgram(\"heatmap\", _14),\n                _p23 = t.transform.zoom;\n\n            t.terrain && t.terrain.setupElevationDraw(_u44, _m21), _m21.draw(_r239, _n155.TRIANGLES, e.DepthMode.disabled, _s118, _l50, e.CullFaceMode.disabled, Jt(_h28.posMatrix, _u44, _p23, o.paint.get(\"heatmap-intensity\")), o.id, _d20.layoutVertexBuffer, _d20.indexBuffer, _d20.segments, o.paint, t.transform.zoom, _14);\n          }\n\n          _r239.viewport.set([0, 0, t.width, t.height]);\n        } else \"translucent\" === t.renderPass && (t.context.setColorMode(t.colorModeForRenderPass()), function (t, i) {\n          var o = t.context,\n              a = o.gl,\n              r = i.heatmapFbo;\n          if (!r) return;\n          o.activeTexture.set(a.TEXTURE0), a.bindTexture(a.TEXTURE_2D, r.colorAttachment.get()), o.activeTexture.set(a.TEXTURE1);\n          var n = i.colorRampTexture;\n          n || (n = i.colorRampTexture = new e.Texture(o, i.colorRamp, a.RGBA)), n.bind(a.LINEAR, a.CLAMP_TO_EDGE), t.useProgram(\"heatmapTexture\").draw(o, a.TRIANGLES, e.DepthMode.disabled, e.StencilMode.disabled, t.colorModeForRenderPass(), e.CullFaceMode.disabled, function (t, i, o, a) {\n            var r = e.create();\n            e.ortho(r, 0, t.width, t.height, 0, 0, 1);\n            var n = t.context.gl;\n            return {\n              u_matrix: r,\n              u_world: [n.drawingBufferWidth, n.drawingBufferHeight],\n              u_image: 0,\n              u_color_ramp: 1,\n              u_opacity: i.paint.get(\"heatmap-opacity\")\n            };\n          }(t, i), i.id, t.viewportBuffer, t.quadTriangleIndexBuffer, t.viewportSegments, i.paint, t.transform.zoom);\n        }(t, o));\n      },\n      line: function line(t, i, o, a) {\n        if (\"translucent\" !== t.renderPass) return;\n        var r = o.paint.get(\"line-opacity\"),\n            n = o.paint.get(\"line-width\");\n        if (0 === r.constantOr(1) || 0 === n.constantOr(1)) return;\n\n        var s = t.depthModeForSublayer(0, e.DepthMode.ReadOnly),\n            l = t.colorModeForRenderPass(),\n            c = o.paint.get(\"line-dasharray\"),\n            h = o.paint.get(\"line-pattern\"),\n            u = h.constantOr(1),\n            d = o.paint.get(\"line-gradient\"),\n            _ = o.getCrossfadeParameters(),\n            m = u ? \"linePattern\" : c ? \"lineSDF\" : d ? \"lineGradient\" : \"line\",\n            p = t.context,\n            f = p.gl;\n\n        var g = !0;\n\n        var _iterator216 = _createForOfIteratorHelper(a),\n            _step216;\n\n        try {\n          for (_iterator216.s(); !(_step216 = _iterator216.n()).done;) {\n            var _r241 = _step216.value;\n\n            var _a137 = i.getTile(_r241);\n\n            if (u && !_a137.patternsLoaded()) continue;\n\n            var _n156 = _a137.getBucket(o);\n\n            if (!_n156) continue;\n            t.prepareDrawTile(_r241);\n\n            var _v19 = _n156.programConfigurations.get(o.id),\n                _x15 = t.context.program.get(),\n                _y17 = t.useProgram(m, _v19),\n                _b15 = g || _y17.program !== _x15,\n                _w12 = h.constantOr(null);\n\n            if (_w12 && _a137.imageAtlas) {\n              var _e356 = _a137.imageAtlas,\n                  _t332 = _e356.patternPositions[_w12.to.toString()],\n                  _i251 = _e356.patternPositions[_w12.from.toString()];\n\n              _t332 && _i251 && _v19.setConstantPatternPositions(_t332, _i251);\n            }\n\n            var _T7 = t.terrain ? _r241.posMatrix : null,\n                _E5 = u ? ti(t, _a137, o, _, _T7) : c ? ii(t, _a137, o, c, _, _T7) : d ? ei(t, _a137, o, _T7, _n156.lineClipsArray.length) : Qt(t, _a137, o, _T7);\n\n            if (u) p.activeTexture.set(f.TEXTURE0), _a137.imageAtlasTexture.bind(f.LINEAR, f.CLAMP_TO_EDGE), _v19.updatePaintBuffers(_);else if (c && (_b15 || t.lineAtlas.dirty)) p.activeTexture.set(f.TEXTURE0), t.lineAtlas.bind(p);else if (d) {\n              var _a138 = _n156.gradients[o.id];\n              var _s119 = _a138.texture;\n\n              if (o.gradientVersion !== _a138.version) {\n                var _l51 = 256;\n\n                if (o.stepInterpolant) {\n                  var _o103 = i.getSource().maxzoom,\n                      _a139 = _r241.canonical.z === _o103 ? Math.ceil(1 << t.transform.maxZoom - _r241.canonical.z) : 1;\n\n                  _l51 = e.clamp(e.nextPowerOfTwo(_n156.maxLineLength / e.EXTENT * 1024 * _a139), 256, p.maxTextureSize);\n                }\n\n                _a138.gradient = e.renderColorRamp({\n                  expression: o.gradientExpression(),\n                  evaluationKey: \"lineProgress\",\n                  resolution: _l51,\n                  image: _a138.gradient || void 0,\n                  clips: _n156.lineClipsArray\n                }), _a138.texture ? _a138.texture.update(_a138.gradient) : _a138.texture = new e.Texture(p, _a138.gradient, f.RGBA), _a138.version = o.gradientVersion, _s119 = _a138.texture;\n              }\n\n              p.activeTexture.set(f.TEXTURE0), _s119.bind(o.stepInterpolant ? f.NEAREST : f.LINEAR, f.CLAMP_TO_EDGE);\n            }\n            _y17.draw(p, f.TRIANGLES, s, t.stencilModeForClipping(_r241), l, e.CullFaceMode.disabled, _E5, o.id, _n156.layoutVertexBuffer, _n156.indexBuffer, _n156.segments, o.paint, t.transform.zoom, _v19, _n156.layoutVertexBuffer2), g = !1;\n          }\n        } catch (err) {\n          _iterator216.e(err);\n        } finally {\n          _iterator216.f();\n        }\n      },\n      fill: function fill(t, i, o, a) {\n        var r = o.paint.get(\"fill-color\"),\n            n = o.paint.get(\"fill-opacity\");\n        if (0 === n.constantOr(1)) return;\n        var s = t.colorModeForRenderPass(),\n            l = o.paint.get(\"fill-pattern\"),\n            c = t.opaquePassEnabledForLayer() && !l.constantOr(1) && 1 === r.constantOr(e.Color.transparent).a && 1 === n.constantOr(0) ? \"opaque\" : \"translucent\";\n\n        if (t.renderPass === c) {\n          var _r242 = t.depthModeForSublayer(1, \"opaque\" === t.renderPass ? e.DepthMode.ReadWrite : e.DepthMode.ReadOnly);\n\n          bi(t, i, o, a, _r242, s, !1);\n        }\n\n        if (\"translucent\" === t.renderPass && o.paint.get(\"fill-antialias\")) {\n          var _r243 = t.depthModeForSublayer(o.getPaintProperty(\"fill-outline-color\") ? 2 : 0, e.DepthMode.ReadOnly);\n\n          bi(t, i, o, a, _r243, s, !0);\n        }\n      },\n      \"fill-extrusion\": function fillExtrusion(t, i, o, a) {\n        var r = o.paint.get(\"fill-extrusion-opacity\");\n\n        if (0 !== r && \"translucent\" === t.renderPass) {\n          var _n157 = new e.DepthMode(t.context.gl.LEQUAL, e.DepthMode.ReadWrite, t.depthRangeFor3D);\n\n          if (1 !== r || o.paint.get(\"fill-extrusion-pattern\").constantOr(1)) wi(t, i, o, a, _n157, e.StencilMode.disabled, e.ColorMode.disabled), wi(t, i, o, a, _n157, t.stencilModeFor3D(), t.colorModeForRenderPass());else {\n            var _r244 = t.colorModeForRenderPass();\n\n            wi(t, i, o, a, _n157, e.StencilMode.disabled, _r244);\n          }\n        }\n      },\n      hillshade: function hillshade(t, i, o, a) {\n        if (\"offscreen\" !== t.renderPass && \"translucent\" !== t.renderPass) return;\n\n        var r = t.context,\n            n = t.depthModeForSublayer(0, e.DepthMode.ReadOnly),\n            s = t.colorModeForRenderPass(),\n            l = t.terrain && t.terrain.renderingToTexture,\n            _ref170 = \"translucent\" !== t.renderPass || l ? [{}, a] : t.stencilConfigForOverlap(a),\n            _ref171 = _slicedToArray(_ref170, 2),\n            c = _ref171[0],\n            h = _ref171[1];\n\n        var _iterator217 = _createForOfIteratorHelper(h),\n            _step217;\n\n        try {\n          for (_iterator217.s(); !(_step217 = _iterator217.n()).done;) {\n            var _a140 = _step217.value;\n\n            var _r245 = i.getTile(_a140);\n\n            if (_r245.needsHillshadePrepare && \"offscreen\" === t.renderPass) It(t, _r245, o, n, e.StencilMode.disabled, s);else if (\"translucent\" === t.renderPass) {\n              var _e357 = l && t.terrain ? t.terrain.stencilModeForRTTOverlap(_a140) : c[_a140.overscaledZ];\n\n              Ct(t, _a140, _r245, o, n, _e357, s);\n            }\n          }\n        } catch (err) {\n          _iterator217.e(err);\n        } finally {\n          _iterator217.f();\n        }\n\n        r.viewport.set([0, 0, t.width, t.height]);\n      },\n      raster: function raster(t, i, o, a, r, n) {\n        if (\"translucent\" !== t.renderPass) return;\n        if (0 === o.paint.get(\"raster-opacity\")) return;\n        if (!a.length) return;\n\n        var s = t.context,\n            l = s.gl,\n            c = i.getSource(),\n            h = t.useProgram(\"raster\"),\n            u = t.colorModeForRenderPass(),\n            d = t.terrain && t.terrain.renderingToTexture,\n            _ref172 = c instanceof C || d ? [{}, a] : t.stencilConfigForOverlap(a),\n            _ref173 = _slicedToArray(_ref172, 2),\n            _ = _ref173[0],\n            m = _ref173[1],\n            p = m[m.length - 1].overscaledZ,\n            f = !t.options.moving;\n\n        var _iterator218 = _createForOfIteratorHelper(m),\n            _step218;\n\n        try {\n          for (_iterator218.s(); !(_step218 = _iterator218.n()).done;) {\n            var _a141 = _step218.value;\n\n            var _r246 = d ? e.DepthMode.disabled : t.depthModeForSublayer(_a141.overscaledZ - p, 1 === o.paint.get(\"raster-opacity\") ? e.DepthMode.ReadWrite : e.DepthMode.ReadOnly, l.LESS),\n                _m22 = i.getTile(_a141);\n\n            if (d && (!_m22 || !_m22.hasData())) continue;\n\n            var _g19 = d ? _a141.posMatrix : t.transform.calculatePosMatrix(_a141.toUnwrapped(), f),\n                _v20 = t.terrain && d ? t.terrain.stencilModeForRTTOverlap(_a141) : _[_a141.overscaledZ],\n                _x16 = n ? 0 : o.paint.get(\"raster-fade-duration\");\n\n            _m22.registerFadeDuration(_x16);\n\n            var _y18 = i.findLoadedParent(_a141, 0),\n                _b16 = kt(_m22, _y18, i, t.transform, _x16);\n\n            var _w13 = void 0,\n                _T8 = void 0;\n\n            t.terrain && t.terrain.prepareDrawTile(_a141);\n\n            var _E6 = \"nearest\" === o.paint.get(\"raster-resampling\") ? l.NEAREST : l.LINEAR;\n\n            s.activeTexture.set(l.TEXTURE0), _m22.texture.bind(_E6, l.CLAMP_TO_EDGE, l.LINEAR_MIPMAP_NEAREST), s.activeTexture.set(l.TEXTURE1), _y18 ? (_y18.texture.bind(_E6, l.CLAMP_TO_EDGE, l.LINEAR_MIPMAP_NEAREST), _w13 = Math.pow(2, _y18.tileID.overscaledZ - _m22.tileID.overscaledZ), _T8 = [_m22.tileID.canonical.x * _w13 % 1, _m22.tileID.canonical.y * _w13 % 1]) : _m22.texture.bind(_E6, l.CLAMP_TO_EDGE, l.LINEAR_MIPMAP_NEAREST);\n\n            var _S7 = ri(_g19, _T8 || [0, 0], _w13 || 1, _b16, o);\n\n            c instanceof C ? h.draw(s, l.TRIANGLES, _r246, e.StencilMode.disabled, u, e.CullFaceMode.disabled, _S7, o.id, c.boundsBuffer, t.quadTriangleIndexBuffer, c.boundsSegments) : h.draw(s, l.TRIANGLES, _r246, _v20, u, e.CullFaceMode.disabled, _S7, o.id, t.rasterBoundsBuffer, t.quadTriangleIndexBuffer, t.rasterBoundsSegments);\n          }\n        } catch (err) {\n          _iterator218.e(err);\n        } finally {\n          _iterator218.f();\n        }\n      },\n      background: function background(t, i, o, a) {\n        var r = o.paint.get(\"background-color\"),\n            n = o.paint.get(\"background-opacity\");\n        if (0 === n) return;\n        var s = t.context,\n            l = s.gl,\n            c = t.transform,\n            h = c.tileSize,\n            u = o.paint.get(\"background-pattern\");\n        if (t.isPatternMissing(u)) return;\n        var d = !u && 1 === r.a && 1 === n && t.opaquePassEnabledForLayer() ? \"opaque\" : \"translucent\";\n        if (t.renderPass !== d) return;\n        var _ = e.StencilMode.disabled,\n            m = t.depthModeForSublayer(0, \"opaque\" === d ? e.DepthMode.ReadWrite : e.DepthMode.ReadOnly),\n            p = t.colorModeForRenderPass(),\n            f = t.useProgram(u ? \"backgroundPattern\" : \"background\"),\n            g = a || c.coveringTiles({\n          tileSize: h\n        });\n        u && (s.activeTexture.set(l.TEXTURE0), t.imageManager.bind(t.context));\n        var v = o.getCrossfadeParameters();\n\n        var _iterator219 = _createForOfIteratorHelper(g),\n            _step219;\n\n        try {\n          for (_iterator219.s(); !(_step219 = _iterator219.n()).done;) {\n            var _i252 = _step219.value;\n\n            var _c38 = a ? _i252.posMatrix : t.transform.calculatePosMatrix(_i252.toUnwrapped());\n\n            t.prepareDrawTile(_i252);\n\n            var _d21 = u ? ui(_c38, n, t, u, {\n              tileID: _i252,\n              tileSize: h\n            }, v) : hi(_c38, n, r);\n\n            f.draw(s, l.TRIANGLES, m, _, p, e.CullFaceMode.disabled, _d21, o.id, t.tileExtentBuffer, t.quadTriangleIndexBuffer, t.tileExtentSegments);\n          }\n        } catch (err) {\n          _iterator219.e(err);\n        } finally {\n          _iterator219.f();\n        }\n      },\n      sky: function sky(t, i, o) {\n        var a = o.paint.get(\"sky-opacity\");\n        if (0 === a) return;\n        var r = t.context,\n            n = o.paint.get(\"sky-type\"),\n            s = new e.DepthMode(r.gl.LEQUAL, e.DepthMode.ReadOnly, [0, 1]),\n            l = t.frameCounter / 1e3 % 1;\n        \"atmosphere\" === n ? \"offscreen\" === t.renderPass ? o.needsSkyboxCapture(t) && (function (t, i, o, a) {\n          var r = t.context,\n              n = r.gl;\n          var s = i.skyboxFbo;\n\n          if (!s) {\n            s = i.skyboxFbo = r.createFramebuffer(32, 32, !1), i.skyboxGeometry = new Bi(r), i.skyboxTexture = r.gl.createTexture(), n.bindTexture(n.TEXTURE_CUBE_MAP, i.skyboxTexture), n.texParameteri(n.TEXTURE_CUBE_MAP, n.TEXTURE_WRAP_S, n.CLAMP_TO_EDGE), n.texParameteri(n.TEXTURE_CUBE_MAP, n.TEXTURE_WRAP_T, n.CLAMP_TO_EDGE), n.texParameteri(n.TEXTURE_CUBE_MAP, n.TEXTURE_MIN_FILTER, n.LINEAR), n.texParameteri(n.TEXTURE_CUBE_MAP, n.TEXTURE_MAG_FILTER, n.LINEAR);\n\n            for (var _e358 = 0; _e358 < 6; ++_e358) {\n              n.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X + _e358, 0, n.RGBA, 32, 32, 0, n.RGBA, n.UNSIGNED_BYTE, null);\n            }\n          }\n\n          r.bindFramebuffer.set(s.framebuffer), r.viewport.set([0, 0, 32, 32]);\n          var l = i.getCenter(t, !0),\n              c = t.useProgram(\"skyboxCapture\"),\n              h = new Float64Array(16);\n          e.identity(h), e.rotateY(h, h, .5 * -Math.PI), Fi(r, i, c, h, l, 0), e.identity(h), e.rotateY(h, h, .5 * Math.PI), Fi(r, i, c, h, l, 1), e.identity(h), e.rotateX(h, h, .5 * -Math.PI), Fi(r, i, c, h, l, 2), e.identity(h), e.rotateX(h, h, .5 * Math.PI), Fi(r, i, c, h, l, 3), e.identity(h), Fi(r, i, c, h, l, 4), e.identity(h), e.rotateY(h, h, Math.PI), Fi(r, i, c, h, l, 5), r.viewport.set([0, 0, t.width, t.height]);\n        }(t, o), o.markSkyboxValid(t)) : \"sky\" === t.renderPass && function (t, i, o, a, r) {\n          var n = t.context,\n              s = n.gl,\n              l = t.transform,\n              c = t.useProgram(\"skybox\");\n          n.activeTexture.set(s.TEXTURE0), s.bindTexture(s.TEXTURE_CUBE_MAP, i.skyboxTexture);\n\n          var h = function (e, t, i, o, a) {\n            return {\n              u_matrix: e,\n              u_sun_direction: t,\n              u_cubemap: 0,\n              u_opacity: o,\n              u_temporal_offset: a\n            };\n          }(l.skyboxMatrix, i.getCenter(t, !1), 0, a, r);\n\n          c.draw(n, s.TRIANGLES, o, e.StencilMode.disabled, t.colorModeForRenderPass(), e.CullFaceMode.backCW, h, \"skybox\", i.skyboxGeometry.vertexBuffer, i.skyboxGeometry.indexBuffer, i.skyboxGeometry.segment);\n        }(t, o, s, a, l) : \"gradient\" === n && \"sky\" === t.renderPass && function (t, i, o, a, r) {\n          var n = t.context,\n              s = n.gl,\n              l = t.transform,\n              c = t.useProgram(\"skyboxGradient\");\n          i.skyboxGeometry || (i.skyboxGeometry = new Bi(n)), n.activeTexture.set(s.TEXTURE0);\n          var h = i.colorRampTexture;\n          h || (h = i.colorRampTexture = new e.Texture(n, i.colorRamp, s.RGBA)), h.bind(s.LINEAR, s.CLAMP_TO_EDGE);\n\n          var u = function (t, i, o, a, r) {\n            return {\n              u_matrix: t,\n              u_color_ramp: 0,\n              u_center_direction: i,\n              u_radius: e.degToRad(o),\n              u_opacity: a,\n              u_temporal_offset: r\n            };\n          }(l.skyboxMatrix, i.getCenter(t, !1), i.paint.get(\"sky-gradient-radius\"), a, r);\n\n          c.draw(n, s.TRIANGLES, o, e.StencilMode.disabled, t.colorModeForRenderPass(), e.CullFaceMode.backCW, u, \"skyboxGradient\", i.skyboxGeometry.vertexBuffer, i.skyboxGeometry.indexBuffer, i.skyboxGeometry.segment);\n        }(t, o, s, a, l);\n      },\n      debug: function debug(e, t, i) {\n        for (var _o104 = 0; _o104 < i.length; _o104++) {\n          Di(e, t, i[_o104]);\n        }\n      },\n      custom: function custom(t, i, o) {\n        var a = t.context,\n            r = o.implementation;\n\n        if (\"offscreen\" === t.renderPass) {\n          var _e359 = r.prerender;\n          _e359 && (t.setCustomLayerDefaults(), a.setColorMode(t.colorModeForRenderPass()), _e359.call(r, a.gl, t.transform.customLayerMatrix()), a.setDirty(), t.setBaseState());\n        } else if (\"translucent\" === t.renderPass) {\n          t.setCustomLayerDefaults(), a.setColorMode(t.colorModeForRenderPass()), a.setStencilMode(e.StencilMode.disabled);\n\n          var _i253 = \"3d\" === r.renderingMode ? new e.DepthMode(t.context.gl.LEQUAL, e.DepthMode.ReadWrite, t.depthRangeFor3D) : t.depthModeForSublayer(0, e.DepthMode.ReadOnly);\n\n          a.setDepthMode(_i253), r.render(a.gl, t.transform.customLayerMatrix()), a.setDirty(), t.setBaseState(), a.bindFramebuffer.set(null);\n        }\n      }\n    };\n\n    var Ui = /*#__PURE__*/function () {\n      function Ui(t, i) {\n        _classCallCheck(this, Ui);\n\n        this.context = new e.Context(t), this.transform = i, this._tileTextures = {}, this.frameCopies = [], this.loadTimeStamps = [], this.setup(), this.numSublayers = e.SourceCache.maxUnderzooming + e.SourceCache.maxOverzooming + 1, this.depthEpsilon = 1 / Math.pow(2, 16), this.crossTileSymbolIndex = new ke(), this.gpuTimers = {}, this.frameCounter = 0;\n      }\n\n      _createClass(Ui, [{\n        key: \"updateTerrain\",\n        value: function updateTerrain(e, t) {\n          var i = !!e && !!e.terrain;\n          if (!(i || this._terrain && this._terrain.enabled)) return;\n          this._terrain || (this._terrain = new Ot(this, e));\n          var o = this._terrain;\n          this.transform.elevation = i ? o : null, o.update(e, this.transform, t);\n        }\n      }, {\n        key: \"terrain\",\n        get: function get() {\n          return this._terrain && this._terrain.enabled ? this._terrain : null;\n        }\n      }, {\n        key: \"resize\",\n        value: function resize(t, i) {\n          if (this.width = t * e.browser.devicePixelRatio, this.height = i * e.browser.devicePixelRatio, this.context.viewport.set([0, 0, this.width, this.height]), this.style) {\n            var _iterator220 = _createForOfIteratorHelper(this.style.order),\n                _step220;\n\n            try {\n              for (_iterator220.s(); !(_step220 = _iterator220.n()).done;) {\n                var _e360 = _step220.value;\n\n                this.style._layers[_e360].resize();\n              }\n            } catch (err) {\n              _iterator220.e(err);\n            } finally {\n              _iterator220.f();\n            }\n          }\n        }\n      }, {\n        key: \"setup\",\n        value: function setup() {\n          var t = this.context,\n              i = new e.StructArrayLayout2i4();\n          i.emplaceBack(0, 0), i.emplaceBack(e.EXTENT, 0), i.emplaceBack(0, e.EXTENT), i.emplaceBack(e.EXTENT, e.EXTENT), this.tileExtentBuffer = t.createVertexBuffer(i, e.posAttributes.members), this.tileExtentSegments = e.SegmentVector.simpleSegment(0, 0, 4, 2);\n          var o = new e.StructArrayLayout2i4();\n          o.emplaceBack(0, 0), o.emplaceBack(e.EXTENT, 0), o.emplaceBack(0, e.EXTENT), o.emplaceBack(e.EXTENT, e.EXTENT), this.debugBuffer = t.createVertexBuffer(o, e.posAttributes.members), this.debugSegments = e.SegmentVector.simpleSegment(0, 0, 4, 5);\n          var a = new e.StructArrayLayout4i8();\n          a.emplaceBack(0, 0, 0, 0), a.emplaceBack(e.EXTENT, 0, e.EXTENT, 0), a.emplaceBack(0, e.EXTENT, 0, e.EXTENT), a.emplaceBack(e.EXTENT, e.EXTENT, e.EXTENT, e.EXTENT), this.rasterBoundsBuffer = t.createVertexBuffer(a, E.members), this.rasterBoundsSegments = e.SegmentVector.simpleSegment(0, 0, 4, 2);\n          var r = new e.StructArrayLayout2i4();\n          r.emplaceBack(0, 0), r.emplaceBack(1, 0), r.emplaceBack(0, 1), r.emplaceBack(1, 1), this.viewportBuffer = t.createVertexBuffer(r, e.posAttributes.members), this.viewportSegments = e.SegmentVector.simpleSegment(0, 0, 4, 2);\n          var n = new e.StructArrayLayout1ui2();\n          n.emplaceBack(0), n.emplaceBack(1), n.emplaceBack(3), n.emplaceBack(2), n.emplaceBack(0), this.tileBorderIndexBuffer = t.createIndexBuffer(n);\n          var s = new e.StructArrayLayout3ui6();\n          s.emplaceBack(0, 1, 2), s.emplaceBack(2, 1, 3), this.quadTriangleIndexBuffer = t.createIndexBuffer(s), this.emptyTexture = new e.Texture(t, {\n            width: 1,\n            height: 1,\n            data: new Uint8Array([0, 0, 0, 0])\n          }, t.gl.RGBA);\n          var l = this.context.gl;\n          this.stencilClearMode = new e.StencilMode({\n            func: l.ALWAYS,\n            mask: 0\n          }, 0, 255, l.ZERO, l.ZERO, l.ZERO), this.loadTimeStamps.push(e.window.performance.now());\n        }\n      }, {\n        key: \"clearStencil\",\n        value: function clearStencil() {\n          var t = this.context,\n              i = t.gl;\n          this.nextStencilID = 1, this.currentStencilSource = void 0;\n          var o = e.create();\n          e.ortho(o, 0, this.width, this.height, 0, 0, 1), e.scale(o, o, [i.drawingBufferWidth, i.drawingBufferHeight, 0]), this.useProgram(\"clippingMask\").draw(t, i.TRIANGLES, e.DepthMode.disabled, this.stencilClearMode, e.ColorMode.disabled, e.CullFaceMode.disabled, Rt(o), \"$clipping\", this.viewportBuffer, this.quadTriangleIndexBuffer, this.viewportSegments);\n        }\n      }, {\n        key: \"_renderTileClippingMasks\",\n        value: function _renderTileClippingMasks(t, i, o) {\n          if (!(i && this.currentStencilSource !== i.id && t.isTileClipped() && o && o.length)) return;\n          this.currentStencilSource = i.id;\n          var a = this.context,\n              r = a.gl;\n          this.nextStencilID + o.length > 256 && this.clearStencil(), a.setColorMode(e.ColorMode.disabled), a.setDepthMode(e.DepthMode.disabled);\n          var n = this.useProgram(\"clippingMask\");\n          this._tileClippingMaskIDs = {};\n\n          var _iterator221 = _createForOfIteratorHelper(o),\n              _step221;\n\n          try {\n            for (_iterator221.s(); !(_step221 = _iterator221.n()).done;) {\n              var _t333 = _step221.value;\n\n              var _i254 = this._tileClippingMaskIDs[_t333.key] = this.nextStencilID++;\n\n              n.draw(a, r.TRIANGLES, e.DepthMode.disabled, new e.StencilMode({\n                func: r.ALWAYS,\n                mask: 0\n              }, _i254, 255, r.KEEP, r.KEEP, r.REPLACE), e.ColorMode.disabled, e.CullFaceMode.disabled, Rt(_t333.posMatrix), \"$clipping\", this.tileExtentBuffer, this.quadTriangleIndexBuffer, this.tileExtentSegments);\n            }\n          } catch (err) {\n            _iterator221.e(err);\n          } finally {\n            _iterator221.f();\n          }\n        }\n      }, {\n        key: \"stencilModeFor3D\",\n        value: function stencilModeFor3D() {\n          this.currentStencilSource = void 0, this.nextStencilID + 1 > 256 && this.clearStencil();\n          var t = this.nextStencilID++,\n              i = this.context.gl;\n          return new e.StencilMode({\n            func: i.NOTEQUAL,\n            mask: 255\n          }, t, 255, i.KEEP, i.KEEP, i.REPLACE);\n        }\n      }, {\n        key: \"stencilModeForClipping\",\n        value: function stencilModeForClipping(t) {\n          if (this.terrain) return this.terrain.stencilModeForRTTOverlap(t);\n          var i = this.context.gl;\n          return new e.StencilMode({\n            func: i.EQUAL,\n            mask: 255\n          }, this._tileClippingMaskIDs[t.key], 0, i.KEEP, i.KEEP, i.REPLACE);\n        }\n      }, {\n        key: \"stencilConfigForOverlap\",\n        value: function stencilConfigForOverlap(t) {\n          var i = this.context.gl,\n              o = t.sort(function (e, t) {\n            return t.overscaledZ - e.overscaledZ;\n          }),\n              a = o[o.length - 1].overscaledZ,\n              r = o[0].overscaledZ - a + 1;\n\n          if (r > 1) {\n            this.currentStencilSource = void 0, this.nextStencilID + r > 256 && this.clearStencil();\n            var _t334 = {};\n\n            for (var _o105 = 0; _o105 < r; _o105++) {\n              _t334[_o105 + a] = new e.StencilMode({\n                func: i.GEQUAL,\n                mask: 255\n              }, _o105 + this.nextStencilID, 255, i.KEEP, i.KEEP, i.REPLACE);\n            }\n\n            return this.nextStencilID += r, [_t334, o];\n          }\n\n          return [_defineProperty({}, a, e.StencilMode.disabled), o];\n        }\n      }, {\n        key: \"colorModeForRenderPass\",\n        value: function colorModeForRenderPass() {\n          var t = this.context.gl;\n\n          if (this._showOverdrawInspector) {\n            var _i255 = 1 / 8;\n\n            return new e.ColorMode([t.CONSTANT_COLOR, t.ONE], new e.Color(_i255, _i255, _i255, 0), [!0, !0, !0, !0]);\n          }\n\n          return \"opaque\" === this.renderPass ? e.ColorMode.unblended : e.ColorMode.alphaBlended;\n        }\n      }, {\n        key: \"depthModeForSublayer\",\n        value: function depthModeForSublayer(t, i, o) {\n          if (!this.opaquePassEnabledForLayer()) return e.DepthMode.disabled;\n          var a = 1 - ((1 + this.currentLayer) * this.numSublayers + t) * this.depthEpsilon;\n          return new e.DepthMode(o || this.context.gl.LEQUAL, i, [a, a]);\n        }\n      }, {\n        key: \"opaquePassEnabledForLayer\",\n        value: function opaquePassEnabledForLayer() {\n          return this.currentLayer < this.opaquePassCutoff;\n        }\n      }, {\n        key: \"render\",\n        value: function render(t, i) {\n          var _this107 = this;\n\n          this.style = t, this.options = i, this.lineAtlas = t.lineAtlas, this.imageManager = t.imageManager, this.glyphManager = t.glyphManager, this.symbolFadeChange = t.placement.symbolFadeChange(e.browser.now()), this.imageManager.beginFrame();\n          var o = this.style.order,\n              a = this.style._sourceCaches;\n\n          for (var _e361 in a) {\n            var _t335 = a[_e361];\n            _t335.used && _t335.prepare(this.context);\n          }\n\n          var r = {},\n              n = {},\n              s = {};\n\n          for (var _e362 in a) {\n            var _t336 = a[_e362];\n            r[_e362] = _t336.getVisibleCoordinates(), n[_e362] = r[_e362].slice().reverse(), s[_e362] = _t336.getVisibleCoordinates(!0).reverse();\n          }\n\n          this.opaquePassCutoff = 1 / 0;\n\n          for (var _e363 = 0; _e363 < o.length; _e363++) {\n            if (this.style._layers[o[_e363]].is3D()) {\n              this.opaquePassCutoff = _e363;\n              break;\n            }\n          }\n\n          this.terrain && (this.terrain.updateTileBinding(s), this.opaquePassCutoff = 0), this.renderPass = \"offscreen\";\n\n          var _iterator222 = _createForOfIteratorHelper(o),\n              _step222;\n\n          try {\n            for (_iterator222.s(); !(_step222 = _iterator222.n()).done;) {\n              var _e367 = _step222.value;\n\n              var _i260 = this.style._layers[_e367],\n                  _o106 = t._getLayerSourceCache(_i260);\n\n              if (!_i260.hasOffscreenPass() || _i260.isHidden(this.transform.zoom)) continue;\n\n              var _a144 = _o106 ? n[_o106.id] : void 0;\n\n              (\"custom\" === _i260.type || _i260.isSky() || _a144 && _a144.length) && this.renderLayer(this, _o106, _i260, _a144);\n            }\n          } catch (err) {\n            _iterator222.e(err);\n          } finally {\n            _iterator222.f();\n          }\n\n          if (this.depthRangeFor3D = [0, 1 - (t.order.length + 2) * this.numSublayers * this.depthEpsilon], this.terrain && (this.style.hasSymbolLayers() || this.style.hasCircleLayers()) && this.terrain.drawDepth(), this.context.bindFramebuffer.set(null), this.context.viewport.set([0, 0, this.width, this.height]), this.context.clear({\n            color: i.showOverdrawInspector ? e.Color.black : e.Color.transparent,\n            depth: 1\n          }), this.clearStencil(), this._showOverdrawInspector = i.showOverdrawInspector, this.renderPass = \"opaque\", !this.terrain) for (this.currentLayer = o.length - 1; this.currentLayer >= 0; this.currentLayer--) {\n            var _e364 = this.style._layers[o[this.currentLayer]],\n                _i256 = t._getLayerSourceCache(_e364);\n\n            if (_e364.isSky()) continue;\n\n            var _a142 = _i256 ? n[_i256.id] : void 0;\n\n            this._renderTileClippingMasks(_e364, _i256, _a142), this.renderLayer(this, _i256, _e364, _a142);\n          }\n          if (this.renderPass = \"sky\", this.transform.isHorizonVisible()) for (this.currentLayer = 0; this.currentLayer < o.length; this.currentLayer++) {\n            var _e365 = this.style._layers[o[this.currentLayer]],\n                _i257 = t._getLayerSourceCache(_e365);\n\n            _e365.isSky() && this.renderLayer(this, _i257, _e365, _i257 ? n[_i257.id] : void 0);\n          }\n\n          for (this.renderPass = \"translucent\", this.currentLayer = 0; this.currentLayer < o.length;) {\n            var _e366 = this.style._layers[o[this.currentLayer]],\n                _i258 = t._getLayerSourceCache(_e366);\n\n            if (_e366.isSky()) {\n              ++this.currentLayer;\n              continue;\n            }\n\n            if (this.terrain && this.style.isLayerDraped(_e366)) {\n              if (_e366.isHidden(this.transform.zoom)) {\n                ++this.currentLayer;\n                continue;\n              }\n\n              this.currentLayer = this.terrain.renderBatch(this.currentLayer);\n              continue;\n            }\n\n            var _a143 = _i258 ? (\"symbol\" === _e366.type ? s : n)[_i258.id] : void 0;\n\n            this._renderTileClippingMasks(_e366, _i258, _i258 ? r[_i258.id] : void 0), this.renderLayer(this, _i258, _e366, _a143), ++this.currentLayer;\n          }\n\n          if (this.terrain && this.terrain.postRender(), this.options.showTileBoundaries || this.options.showQueryGeometry) {\n            var _i259 = null;\n            e.values(this.style._layers).forEach(function (e) {\n              var o = t._getLayerSourceCache(e);\n\n              o && !e.isHidden(_this107.transform.zoom) && (!_i259 || _i259.getSource().maxzoom < o.getSource().maxzoom) && (_i259 = o);\n            }), _i259 && this.options.showTileBoundaries && Oi.debug(this, _i259, _i259.getVisibleCoordinates());\n          }\n\n          this.options.showPadding && function (e) {\n            var t = e.transform.padding;\n            Mi(e, e.transform.height - (t.top || 0), 3, Ei), Mi(e, t.bottom || 0, 3, Ci), zi(e, t.left || 0, 3, Si), zi(e, e.transform.width - (t.right || 0), 3, Ii);\n            var i = e.transform.centerPoint;\n            !function (e, t, i, o) {\n              Ai(e, t - 1, i - 10, 2, 20, o), Ai(e, t - 10, i - 1, 20, 2, o);\n            }(e, i.x, e.transform.height - i.y, Pi);\n          }(this), this.context.setDefault(), this.frameCounter = (this.frameCounter + 1) % e.MAX_SAFE_INTEGER, this.tileLoaded && this.options.speedIndexTiming && (this.loadTimeStamps.push(e.window.performance.now()), this.saveCanvasCopy());\n        }\n      }, {\n        key: \"renderLayer\",\n        value: function renderLayer(e, t, i, o) {\n          i.isHidden(this.transform.zoom) || (\"background\" === i.type || \"sky\" === i.type || \"custom\" === i.type || o && o.length) && (this.id = i.id, this.gpuTimingStart(i), Oi[i.type](e, t, i, o, this.style.placement.variableOffsets, this.options.isInitialLoad), this.gpuTimingEnd());\n        }\n      }, {\n        key: \"gpuTimingStart\",\n        value: function gpuTimingStart(e) {\n          if (!this.options.gpuTiming) return;\n          var t = this.context.extTimerQuery;\n          var i = this.gpuTimers[e.id];\n          i || (i = this.gpuTimers[e.id] = {\n            calls: 0,\n            cpuTime: 0,\n            query: t.createQueryEXT()\n          }), i.calls++, t.beginQueryEXT(t.TIME_ELAPSED_EXT, i.query);\n        }\n      }, {\n        key: \"gpuTimingEnd\",\n        value: function gpuTimingEnd() {\n          if (!this.options.gpuTiming) return;\n          var e = this.context.extTimerQuery;\n          e.endQueryEXT(e.TIME_ELAPSED_EXT);\n        }\n      }, {\n        key: \"collectGpuTimers\",\n        value: function collectGpuTimers() {\n          var e = this.gpuTimers;\n          return this.gpuTimers = {}, e;\n        }\n      }, {\n        key: \"queryGpuTimers\",\n        value: function queryGpuTimers(e) {\n          var t = {};\n\n          for (var _i261 in e) {\n            var _o107 = e[_i261],\n                _a145 = this.context.extTimerQuery,\n                _r247 = _a145.getQueryObjectEXT(_o107.query, _a145.QUERY_RESULT_EXT) / 1e6;\n\n            _a145.deleteQueryEXT(_o107.query), t[_i261] = _r247;\n          }\n\n          return t;\n        }\n      }, {\n        key: \"translatePosMatrix\",\n        value: function translatePosMatrix(t, i, o, a, r) {\n          if (!o[0] && !o[1]) return t;\n          var n = r ? \"map\" === a ? this.transform.angle : 0 : \"viewport\" === a ? -this.transform.angle : 0;\n\n          if (n) {\n            var _e368 = Math.sin(n),\n                _t337 = Math.cos(n);\n\n            o = [o[0] * _t337 - o[1] * _e368, o[0] * _e368 + o[1] * _t337];\n          }\n\n          var s = [r ? o[0] : v(i, o[0], this.transform.zoom), r ? o[1] : v(i, o[1], this.transform.zoom), 0],\n              l = new Float32Array(16);\n          return e.translate(l, t, s), l;\n        }\n      }, {\n        key: \"saveTileTexture\",\n        value: function saveTileTexture(e) {\n          var t = this._tileTextures[e.size[0]];\n          t ? t.push(e) : this._tileTextures[e.size[0]] = [e];\n        }\n      }, {\n        key: \"getTileTexture\",\n        value: function getTileTexture(e) {\n          var t = this._tileTextures[e];\n          return t && t.length > 0 ? t.pop() : null;\n        }\n      }, {\n        key: \"isPatternMissing\",\n        value: function isPatternMissing(e) {\n          if (!e) return !1;\n          if (!e.from || !e.to) return !0;\n          var t = this.imageManager.getPattern(e.from.toString()),\n              i = this.imageManager.getPattern(e.to.toString());\n          return !t || !i;\n        }\n      }, {\n        key: \"currentGlobalDefines\",\n        value: function currentGlobalDefines() {\n          var e = this.terrain && this.terrain.renderingToTexture,\n              t = [];\n          return this.terrain && !this.terrain.renderingToTexture && t.push(\"TERRAIN\"), e && t.push(\"RENDER_TO_TEXTURE\"), this._showOverdrawInspector && t.push(\"OVERDRAW_INSPECTOR\"), t;\n        }\n      }, {\n        key: \"useProgram\",\n        value: function useProgram(e, t, i) {\n          this.cache = this.cache || {};\n          var o = i || [],\n              a = this.currentGlobalDefines().concat(o),\n              r = Nt.cacheKey(e, a, t);\n          return this.cache[r] || (this.cache[r] = new Nt(this.context, e, wt[e], t, di[e], a)), this.cache[r];\n        }\n      }, {\n        key: \"setCustomLayerDefaults\",\n        value: function setCustomLayerDefaults() {\n          this.context.unbindVAO(), this.context.cullFace.setDefault(), this.context.activeTexture.setDefault(), this.context.pixelStoreUnpack.setDefault(), this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(), this.context.pixelStoreUnpackFlipY.setDefault();\n        }\n      }, {\n        key: \"setBaseState\",\n        value: function setBaseState() {\n          var e = this.context.gl;\n          this.context.cullFace.set(!1), this.context.viewport.set([0, 0, this.width, this.height]), this.context.blendEquation.set(e.FUNC_ADD);\n        }\n      }, {\n        key: \"initDebugOverlayCanvas\",\n        value: function initDebugOverlayCanvas() {\n          null == this.debugOverlayCanvas && (this.debugOverlayCanvas = e.window.document.createElement(\"canvas\"), this.debugOverlayCanvas.width = 512, this.debugOverlayCanvas.height = 512, this.debugOverlayTexture = new e.Texture(this.context, this.debugOverlayCanvas, this.context.gl.RGBA));\n        }\n      }, {\n        key: \"destroy\",\n        value: function destroy() {\n          this._terrain && this._terrain.destroy(), this.emptyTexture.destroy(), this.debugOverlayTexture && this.debugOverlayTexture.destroy();\n        }\n      }, {\n        key: \"prepareDrawTile\",\n        value: function prepareDrawTile(e) {\n          this.terrain && this.terrain.prepareDrawTile(e);\n        }\n      }, {\n        key: \"setTileLoadedFlag\",\n        value: function setTileLoadedFlag(e) {\n          this.tileLoaded = e;\n        }\n      }, {\n        key: \"saveCanvasCopy\",\n        value: function saveCanvasCopy() {\n          this.frameCopies.push(this.canvasCopy()), this.tileLoaded = !1;\n        }\n      }, {\n        key: \"canvasCopy\",\n        value: function canvasCopy() {\n          var e = this.context.gl,\n              t = e.createTexture();\n          return e.bindTexture(e.TEXTURE_2D, t), e.copyTexImage2D(e.TEXTURE_2D, 0, e.RGBA, 0, 0, e.drawingBufferWidth, e.drawingBufferHeight, 0), t;\n        }\n      }, {\n        key: \"getCanvasCopiesAndTimestamps\",\n        value: function getCanvasCopiesAndTimestamps() {\n          return {\n            canvasCopies: this.frameCopies,\n            timeStamps: this.loadTimeStamps\n          };\n        }\n      }]);\n\n      return Ui;\n    }();\n\n    var Ni = /*#__PURE__*/function () {\n      function Ni() {\n        var e = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n        var t = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n        var i = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0;\n        var o = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : 0;\n\n        _classCallCheck(this, Ni);\n\n        if (isNaN(e) || e < 0 || isNaN(t) || t < 0 || isNaN(i) || i < 0 || isNaN(o) || o < 0) throw new Error(\"Invalid value for edge-insets, top, bottom, left and right must all be numbers\");\n        this.top = e, this.bottom = t, this.left = i, this.right = o;\n      }\n\n      _createClass(Ni, [{\n        key: \"interpolate\",\n        value: function interpolate(t, i, o) {\n          return null != i.top && null != t.top && (this.top = e.number(t.top, i.top, o)), null != i.bottom && null != t.bottom && (this.bottom = e.number(t.bottom, i.bottom, o)), null != i.left && null != t.left && (this.left = e.number(t.left, i.left, o)), null != i.right && null != t.right && (this.right = e.number(t.right, i.right, o)), this;\n        }\n      }, {\n        key: \"getCenter\",\n        value: function getCenter(t, i) {\n          var o = e.clamp((this.left + t - this.right) / 2, 0, t),\n              a = e.clamp((this.top + i - this.bottom) / 2, 0, i);\n          return new e.Point(o, a);\n        }\n      }, {\n        key: \"equals\",\n        value: function equals(e) {\n          return this.top === e.top && this.bottom === e.bottom && this.left === e.left && this.right === e.right;\n        }\n      }, {\n        key: \"clone\",\n        value: function clone() {\n          return new Ni(this.top, this.bottom, this.left, this.right);\n        }\n      }, {\n        key: \"toJSON\",\n        value: function toJSON() {\n          return {\n            top: this.top,\n            bottom: this.bottom,\n            left: this.left,\n            right: this.right\n          };\n        }\n      }]);\n\n      return Ni;\n    }();\n\n    function Zi(e, t) {\n      return [e[4 * t], e[4 * t + 1], e[4 * t + 2], e[4 * t + 3]];\n    }\n\n    function Gi(e, t, i) {\n      e[4 * t + 0] = i[0], e[4 * t + 1] = i[1], e[4 * t + 2] = i[2], e[4 * t + 3] = i[3];\n    }\n\n    function Vi(t, i) {\n      var o = Zi(t, 3);\n      e.fromQuat(t, i), Gi(t, 3, o);\n    }\n\n    function qi(e, t) {\n      Gi(e, 3, [t[0], t[1], t[2], 1]);\n    }\n\n    function ji(t, i) {\n      var o = e.identity$1([]);\n      return e.rotateZ$1(o, o, -i), e.rotateX$1(o, o, -t), o;\n    }\n\n    function $i(t, i) {\n      var o = [t[0], t[1], 0],\n          a = [i[0], i[1], 0];\n\n      if (e.length(o) >= 1e-15) {\n        var _t338 = e.normalize([], o);\n\n        e.scale$2(a, _t338, e.dot(a, _t338)), i[0] = a[0], i[1] = a[1];\n      }\n\n      var r = e.cross([], i, t);\n      if (e.len(r) < 1e-15) return null;\n      var n = Math.atan2(-r[1], r[0]);\n      return ji(Math.atan2(Math.sqrt(t[0] * t[0] + t[1] * t[1]), -t[2]), n);\n    }\n\n    var Xi = /*#__PURE__*/function () {\n      function Xi(e, t) {\n        _classCallCheck(this, Xi);\n\n        this.position = e, this.orientation = t;\n      }\n\n      _createClass(Xi, [{\n        key: \"position\",\n        get: function get() {\n          return this._position;\n        },\n        set: function set(t) {\n          this._position = this._renderWorldCopies ? function (t) {\n            if (!t) return;\n            var i = Array.isArray(t) ? new e.MercatorCoordinate(t[0], t[1], t[2]) : t;\n            return i.x = e.wrap(i.x, 0, 1), i;\n          }(t) : t;\n        }\n      }, {\n        key: \"lookAtPoint\",\n        value: function lookAtPoint(t, i) {\n          if (this.orientation = null, !this.position) return;\n          var o = this._elevation ? this._elevation.getAtPoint(e.MercatorCoordinate.fromLngLat(t)) : 0,\n              a = this.position,\n              r = e.MercatorCoordinate.fromLngLat(t, o),\n              n = [r.x - a.x, r.y - a.y, r.z - a.z];\n          i || (i = [0, 0, 1]), i[2] = Math.abs(i[2]), this.orientation = $i(n, i);\n        }\n      }, {\n        key: \"setPitchBearing\",\n        value: function setPitchBearing(t, i) {\n          this.orientation = ji(e.degToRad(t), e.degToRad(-i));\n        }\n      }]);\n\n      return Xi;\n    }();\n\n    var Wi = /*#__PURE__*/function () {\n      function Wi(t, i) {\n        _classCallCheck(this, Wi);\n\n        this._transform = e.identity([]), this._orientation = e.identity$1([]), i && (this._orientation = i, Vi(this._transform, this._orientation)), t && qi(this._transform, t);\n      }\n\n      _createClass(Wi, [{\n        key: \"mercatorPosition\",\n        get: function get() {\n          var t = this.position;\n          return new e.MercatorCoordinate(t[0], t[1], t[2]);\n        }\n      }, {\n        key: \"position\",\n        get: function get() {\n          var e = Zi(this._transform, 3);\n          return [e[0], e[1], e[2]];\n        },\n        set: function set(e) {\n          qi(this._transform, e);\n        }\n      }, {\n        key: \"orientation\",\n        get: function get() {\n          return this._orientation;\n        },\n        set: function set(e) {\n          this._orientation = e, Vi(this._transform, this._orientation);\n        }\n      }, {\n        key: \"getPitchBearing\",\n        value: function getPitchBearing() {\n          var e = this.forward(),\n              t = this.right();\n          return {\n            bearing: Math.atan2(-t[1], t[0]),\n            pitch: Math.atan2(Math.sqrt(e[0] * e[0] + e[1] * e[1]), -e[2])\n          };\n        }\n      }, {\n        key: \"setPitchBearing\",\n        value: function setPitchBearing(e, t) {\n          this._orientation = ji(e, t), Vi(this._transform, this._orientation);\n        }\n      }, {\n        key: \"forward\",\n        value: function forward() {\n          var e = Zi(this._transform, 2);\n          return [-e[0], -e[1], -e[2]];\n        }\n      }, {\n        key: \"up\",\n        value: function up() {\n          var e = Zi(this._transform, 1);\n          return [-e[0], -e[1], -e[2]];\n        }\n      }, {\n        key: \"right\",\n        value: function right() {\n          var e = Zi(this._transform, 0);\n          return [e[0], e[1], e[2]];\n        }\n      }, {\n        key: \"getCameraToWorld\",\n        value: function getCameraToWorld(t, i) {\n          var o = new Float64Array(16);\n          return e.invert(o, this.getWorldToCamera(t, i)), o;\n        }\n      }, {\n        key: \"getWorldToCamera\",\n        value: function getWorldToCamera(t, i) {\n          var o = new Float64Array(16),\n              a = new Float64Array(4),\n              r = this.position;\n          return e.conjugate(a, this._orientation), e.scale$2(r, r, -t), e.fromQuat(o, a), e.translate(o, o, r), o[1] *= -1, o[5] *= -1, o[9] *= -1, o[13] *= -1, o[8] *= i, o[9] *= i, o[10] *= i, o[11] *= i, o;\n        }\n      }, {\n        key: \"getCameraToClipPerspective\",\n        value: function getCameraToClipPerspective(t, i, o, a) {\n          var r = new Float64Array(16);\n          return e.perspective(r, t, i, o, a), r;\n        }\n      }, {\n        key: \"clone\",\n        value: function clone() {\n          return new Wi(_toConsumableArray(this.position), _toConsumableArray(this.orientation));\n        }\n      }]);\n\n      return Wi;\n    }();\n\n    var Hi = /*#__PURE__*/function () {\n      function Hi(t, i, o, a, r) {\n        _classCallCheck(this, Hi);\n\n        this.tileSize = 512, this.maxValidLatitude = 85.051129, this._renderWorldCopies = void 0 === r || r, this._minZoom = t || 0, this._maxZoom = i || 22, this._minPitch = null == o ? 0 : o, this._maxPitch = null == a ? 60 : a, this.setMaxBounds(), this.width = 0, this.height = 0, this._center = new e.LngLat(0, 0), this.zoom = 0, this.angle = 0, this._fov = .6435011087932844, this._pitch = 0, this._unmodified = !0, this._edgeInsets = new Ni(), this._posMatrixCache = {}, this._alignedPosMatrixCache = {}, this._camera = new Wi(), this._centerAltitude = 0, this.cameraElevationReference = \"ground\", this._horizonShift = .1;\n      }\n\n      _createClass(Hi, [{\n        key: \"clone\",\n        value: function clone() {\n          var e = new Hi(this._minZoom, this._maxZoom, this._minPitch, this.maxPitch, this._renderWorldCopies);\n          return e._elevation = this._elevation, e._centerAltitude = this._centerAltitude, e.tileSize = this.tileSize, e.latRange = this.latRange, e.width = this.width, e.height = this.height, e.cameraElevationReference = this.cameraElevationReference, e._center = this._center, e._setZoom(this.zoom), e._cameraZoom = this._cameraZoom, e.angle = this.angle, e._fov = this._fov, e._pitch = this._pitch, e._unmodified = this._unmodified, e._edgeInsets = this._edgeInsets.clone(), e._camera = this._camera.clone(), e._calcMatrices(), e.freezeTileCoverage = this.freezeTileCoverage, e;\n        }\n      }, {\n        key: \"elevation\",\n        get: function get() {\n          return this._elevation;\n        },\n        set: function set(e) {\n          this._elevation !== e && (this._elevation = e, e ? this._updateCenterElevation() && this._updateCameraOnTerrain() : (this._cameraZoom = null, this._centerAltitude = 0), this._calcMatrices());\n        }\n      }, {\n        key: \"updateElevation\",\n        value: function updateElevation(e) {\n          this._terrainEnabled() && null == this._cameraZoom && this._updateCenterElevation() && this._updateCameraOnTerrain(), e && this._constrainCameraAltitude(), this._calcMatrices();\n        }\n      }, {\n        key: \"minZoom\",\n        get: function get() {\n          return this._minZoom;\n        },\n        set: function set(e) {\n          this._minZoom !== e && (this._minZoom = e, this.zoom = Math.max(this.zoom, e));\n        }\n      }, {\n        key: \"maxZoom\",\n        get: function get() {\n          return this._maxZoom;\n        },\n        set: function set(e) {\n          this._maxZoom !== e && (this._maxZoom = e, this.zoom = Math.min(this.zoom, e));\n        }\n      }, {\n        key: \"minPitch\",\n        get: function get() {\n          return this._minPitch;\n        },\n        set: function set(e) {\n          this._minPitch !== e && (this._minPitch = e, this.pitch = Math.max(this.pitch, e));\n        }\n      }, {\n        key: \"maxPitch\",\n        get: function get() {\n          return this._maxPitch;\n        },\n        set: function set(e) {\n          this._maxPitch !== e && (this._maxPitch = e, this.pitch = Math.min(this.pitch, e));\n        }\n      }, {\n        key: \"renderWorldCopies\",\n        get: function get() {\n          return this._renderWorldCopies;\n        },\n        set: function set(e) {\n          void 0 === e ? e = !0 : null === e && (e = !1), this._renderWorldCopies = e;\n        }\n      }, {\n        key: \"worldSize\",\n        get: function get() {\n          return this.tileSize * this.scale;\n        }\n      }, {\n        key: \"centerOffset\",\n        get: function get() {\n          return this.centerPoint._sub(this.size._div(2));\n        }\n      }, {\n        key: \"size\",\n        get: function get() {\n          return new e.Point(this.width, this.height);\n        }\n      }, {\n        key: \"bearing\",\n        get: function get() {\n          return -this.angle / Math.PI * 180;\n        },\n        set: function set(t) {\n          var i = -e.wrap(t, -180, 180) * Math.PI / 180;\n          this.angle !== i && (this._unmodified = !1, this.angle = i, this._calcMatrices(), this.rotationMatrix = e.create$2(), e.rotate(this.rotationMatrix, this.rotationMatrix, this.angle));\n        }\n      }, {\n        key: \"pitch\",\n        get: function get() {\n          return this._pitch / Math.PI * 180;\n        },\n        set: function set(t) {\n          var i = e.clamp(t, this.minPitch, this.maxPitch) / 180 * Math.PI;\n          this._pitch !== i && (this._unmodified = !1, this._pitch = i, this._calcMatrices());\n        }\n      }, {\n        key: \"fov\",\n        get: function get() {\n          return this._fov / Math.PI * 180;\n        },\n        set: function set(e) {\n          e = Math.max(.01, Math.min(60, e)), this._fov !== e && (this._unmodified = !1, this._fov = e / 180 * Math.PI, this._calcMatrices());\n        }\n      }, {\n        key: \"zoom\",\n        get: function get() {\n          return this._zoom;\n        },\n        set: function set(e) {\n          var t = Math.min(Math.max(e, this.minZoom), this.maxZoom);\n          this._zoom !== t && (this._unmodified = !1, this._setZoom(t), this._terrainEnabled() && this._updateCameraOnTerrain(), this._constrain(), this._calcMatrices());\n        }\n      }, {\n        key: \"_setZoom\",\n        value: function _setZoom(e) {\n          this._zoom = e, this.scale = this.zoomScale(e), this.tileZoom = Math.floor(e), this.zoomFraction = e - this.tileZoom;\n        }\n      }, {\n        key: \"_updateCenterElevation\",\n        value: function _updateCenterElevation() {\n          if (!this._elevation) return !1;\n\n          var t = this._elevation.getAtPoint(e.MercatorCoordinate.fromLngLat(this.center), -1);\n\n          return -1 === t ? (this._cameraZoom = null, !1) : (this._centerAltitude = t, !0);\n        }\n      }, {\n        key: \"_updateCameraOnTerrain\",\n        value: function _updateCameraOnTerrain() {\n          var t = this.cameraToCenterDistance / this.worldSize,\n              i = e.mercatorZfromAltitude(this._centerAltitude, this.center.lat);\n          this._cameraZoom = this._zoomFromMercatorZ(i + t);\n        }\n      }, {\n        key: \"center\",\n        get: function get() {\n          return this._center;\n        },\n        set: function set(e) {\n          e.lat === this._center.lat && e.lng === this._center.lng || (this._unmodified = !1, this._center = e, this._terrainEnabled() && (\"ground\" === this.cameraElevationReference ? this._updateCenterElevation() ? this._updateCameraOnTerrain() : this._cameraZoom = null : this._updateZoomFromElevation()), this._constrain(), this._calcMatrices());\n        }\n      }, {\n        key: \"_updateZoomFromElevation\",\n        value: function _updateZoomFromElevation() {\n          if (null == this._cameraZoom || !this._elevation) return;\n\n          var t = this._cameraZoom,\n              i = this._elevation.getAtPoint(e.MercatorCoordinate.fromLngLat(this.center)),\n              o = e.mercatorZfromAltitude(i, this.center.lat),\n              a = this._mercatorZfromZoom(t),\n              r = this._mercatorZfromZoom(this._maxZoom),\n              n = Math.max(a - o, r);\n\n          this._setZoom(this._zoomFromMercatorZ(n));\n        }\n      }, {\n        key: \"padding\",\n        get: function get() {\n          return this._edgeInsets.toJSON();\n        },\n        set: function set(e) {\n          this._edgeInsets.equals(e) || (this._unmodified = !1, this._edgeInsets.interpolate(this._edgeInsets, e, 1), this._calcMatrices());\n        }\n      }, {\n        key: \"computeZoomRelativeTo\",\n        value: function computeZoomRelativeTo(t) {\n          var i = this.rayIntersectionCoordinate(this.pointRayIntersection(this.centerPoint, t.toAltitude()));\n          var o;\n          o = t.z < this._camera.position[2] ? [i.x, i.y, i.z] : [t.x, t.y, t.z];\n          var a = e.length(e.sub([], this._camera.position, o));\n          return e.clamp(this._zoomFromMercatorZ(a), this._minZoom, this._maxZoom);\n        }\n      }, {\n        key: \"setFreeCameraOptions\",\n        value: function setFreeCameraOptions(t) {\n          if (!this.height) return;\n          if (!t.position && !t.orientation) return;\n\n          this._updateCameraState();\n\n          var i = !1;\n\n          if (t.orientation && !e.exactEquals(t.orientation, this._camera.orientation) && (i = this._setCameraOrientation(t.orientation)), t.position) {\n            var _o108 = [t.position.x, t.position.y, t.position.z];\n            e.exactEquals$1(_o108, this._camera.position) || (this._setCameraPosition(_o108), i = !0);\n          }\n\n          i && (this._updateStateFromCamera(), this.recenterOnTerrain());\n        }\n      }, {\n        key: \"getFreeCameraOptions\",\n        value: function getFreeCameraOptions() {\n          this._updateCameraState();\n\n          var t = this._camera.position,\n              i = new Xi();\n          return i.position = new e.MercatorCoordinate(t[0], t[1], t[2]), i.orientation = this._camera.orientation, i._elevation = this.elevation, i._renderWorldCopies = this._renderWorldCopies, i;\n        }\n      }, {\n        key: \"_setCameraOrientation\",\n        value: function _setCameraOrientation(t) {\n          if (!e.length$1(t)) return !1;\n          e.normalize$1(t, t);\n          var i = e.transformQuat([], [0, 0, -1], t),\n              o = e.transformQuat([], [0, -1, 0], t);\n          if (o[2] < 0) return !1;\n          var a = $i(i, o);\n          return !!a && (this._camera.orientation = a, !0);\n        }\n      }, {\n        key: \"_setCameraPosition\",\n        value: function _setCameraPosition(t) {\n          var i = this.zoomScale(this.minZoom) * this.tileSize,\n              o = this.zoomScale(this.maxZoom) * this.tileSize,\n              a = this.cameraToCenterDistance;\n          t[2] = e.clamp(t[2], a / o, a / i), this._camera.position = t;\n        }\n      }, {\n        key: \"centerPoint\",\n        get: function get() {\n          return this._edgeInsets.getCenter(this.width, this.height);\n        }\n      }, {\n        key: \"fovAboveCenter\",\n        get: function get() {\n          return this._fov * (.5 + this.centerOffset.y / this.height);\n        }\n      }, {\n        key: \"isPaddingEqual\",\n        value: function isPaddingEqual(e) {\n          return this._edgeInsets.equals(e);\n        }\n      }, {\n        key: \"interpolatePadding\",\n        value: function interpolatePadding(e, t, i) {\n          this._unmodified = !1, this._edgeInsets.interpolate(e, t, i), this._constrain(), this._calcMatrices();\n        }\n      }, {\n        key: \"coveringZoomLevel\",\n        value: function coveringZoomLevel(e) {\n          var t = (e.roundZoom ? Math.round : Math.floor)(this.zoom + this.scaleZoom(this.tileSize / e.tileSize));\n          return Math.max(0, t);\n        }\n      }, {\n        key: \"getVisibleUnwrappedCoordinates\",\n        value: function getVisibleUnwrappedCoordinates(t) {\n          var i = [new e.UnwrappedTileID(0, t)];\n\n          if (this._renderWorldCopies) {\n            var _o109 = this.pointCoordinate(new e.Point(0, 0)),\n                _a146 = this.pointCoordinate(new e.Point(this.width, 0)),\n                _r248 = this.pointCoordinate(new e.Point(this.width, this.height)),\n                _n158 = this.pointCoordinate(new e.Point(0, this.height)),\n                _s120 = Math.floor(Math.min(_o109.x, _a146.x, _r248.x, _n158.x)),\n                _l52 = Math.floor(Math.max(_o109.x, _a146.x, _r248.x, _n158.x)),\n                _c39 = 1;\n\n            for (var _o110 = _s120 - _c39; _o110 <= _l52 + _c39; _o110++) {\n              0 !== _o110 && i.push(new e.UnwrappedTileID(_o110, t));\n            }\n          }\n\n          return i;\n        }\n      }, {\n        key: \"coveringTiles\",\n        value: function coveringTiles(t) {\n          var _this108 = this;\n\n          var i = this.coveringZoomLevel(t);\n          var o = i,\n              a = !!t.useElevationData;\n          if (void 0 !== t.minzoom && i < t.minzoom) return [];\n          void 0 !== t.maxzoom && i > t.maxzoom && (i = t.maxzoom);\n\n          var r = e.MercatorCoordinate.fromLngLat(this.center),\n              n = 1 << i,\n              s = [n * r.x, n * r.y, 0],\n              l = e.Frustum.fromInvProjectionMatrix(this.invProjMatrix, this.worldSize, i),\n              c = this.pointCoordinate(this.getCameraPoint()),\n              h = n * e.mercatorZfromAltitude(1, this.center.lat),\n              u = this._camera.position[2] / e.mercatorZfromAltitude(1, this.center.lat),\n              d = [n * c.x, n * c.y, u],\n              _ = this.cameraToCenterDistance / t.tileSize * (t.roundZoom ? 1 : .502),\n              m = this.pitch <= 60 && this._edgeInsets.top <= this._edgeInsets.bottom && !this._elevation ? i : 0,\n              p = this.elevation ? 1e4 * this.elevation.exaggeration() : 0,\n              f = function f(t) {\n            return {\n              aabb: new e.Aabb([t * n, 0, -p], [(t + 1) * n, n, p]),\n              zoom: 0,\n              x: 0,\n              y: 0,\n              wrap: t,\n              fullyVisible: !1\n            };\n          },\n              g = [],\n              v = [],\n              x = i,\n              y = t.reparseOverscaled ? o : i,\n              b = function b(e, t) {\n            if (!_this108._elevation) return;\n\n            var i = _this108._elevation.getMinMaxForTile(t);\n\n            i && (e.min[2] = i.min, e.max[2] = i.max, e.center[2] = (e.min[2] + e.max[2]) / 2);\n          },\n              w = function w(e) {\n            return e * e;\n          },\n              T = w((u - this._centerAltitude) * h),\n              E = function E(e, t) {\n            if (t * w(.707) < e) return 1;\n            var i = Math.sqrt(t / e);\n            return i / (1 / .707 + (Math.pow(1.1, i - 1 / .707 + 1) - 1) / (1.1 - 1) - 1);\n          };\n\n          if (this._renderWorldCopies) for (var _e369 = 1; _e369 <= 3; _e369++) {\n            g.push(f(-_e369)), g.push(f(_e369));\n          }\n\n          for (g.push(f(0)); g.length > 0;) {\n            var _o111 = g.pop(),\n                _r249 = _o111.x,\n                _n159 = _o111.y;\n\n            var _c40 = _o111.fullyVisible;\n\n            if (!_c40) {\n              var _e370 = _o111.aabb.intersects(l);\n\n              if (0 === _e370) continue;\n              _c40 = 2 === _e370;\n            }\n\n            var _u45 = !0;\n\n            if (m <= _o111.zoom && _o111.zoom < x) {\n              var _e371 = _o111.aabb.distanceX(d),\n                  _t339 = _o111.aabb.distanceY(d);\n\n              var _i262 = T;\n              a && (_i262 = w(_o111.aabb.distanceZ(d) * h));\n\n              var _r250 = _e371 * _e371 + _t339 * _t339 + _i262;\n\n              _u45 = _r250 < w((1 << x - _o111.zoom) * _ * E(Math.max(_i262, T), _r250));\n            }\n\n            if (_o111.zoom !== x && _u45) for (var _t340 = 0; _t340 < 4; _t340++) {\n              var _i263 = (_r249 << 1) + _t340 % 2,\n                  _s121 = (_n159 << 1) + (_t340 >> 1),\n                  _l53 = _o111.aabb.quadrant(_t340);\n\n              var _h29 = null;\n              a && _o111.zoom > x - 6 && (_h29 = new e.OverscaledTileID(_o111.zoom + 1 === x ? y : _o111.zoom + 1, _o111.wrap, _o111.zoom + 1, _i263, _s121), b(_l53, _h29)), g.push({\n                aabb: _l53,\n                zoom: _o111.zoom + 1,\n                x: _i263,\n                y: _s121,\n                wrap: _o111.wrap,\n                fullyVisible: _c40,\n                tileID: _h29\n              });\n            } else {\n              var _a147 = _o111.zoom === x ? y : _o111.zoom;\n\n              if (t.minzoom && t.minzoom > _a147) continue;\n\n              var _l54 = s[0] - (.5 + _r249 + (_o111.wrap << _o111.zoom)) * (1 << i - _o111.zoom),\n                  _c41 = s[1] - .5 - _n159,\n                  _h30 = _o111.tileID ? _o111.tileID : new e.OverscaledTileID(_a147, _o111.wrap, _o111.zoom, _r249, _n159);\n\n              v.push({\n                tileID: _h30,\n                distanceSq: _l54 * _l54 + _c41 * _c41\n              });\n            }\n          }\n\n          return v.sort(function (e, t) {\n            return e.distanceSq - t.distanceSq;\n          }).map(function (e) {\n            return e.tileID;\n          });\n        }\n      }, {\n        key: \"resize\",\n        value: function resize(e, t) {\n          this.width = e, this.height = t, this.pixelsToGLUnits = [2 / e, -2 / t], this._constrain(), this._calcMatrices();\n        }\n      }, {\n        key: \"unmodified\",\n        get: function get() {\n          return this._unmodified;\n        }\n      }, {\n        key: \"zoomScale\",\n        value: function zoomScale(e) {\n          return Math.pow(2, e);\n        }\n      }, {\n        key: \"scaleZoom\",\n        value: function scaleZoom(e) {\n          return Math.log(e) / Math.LN2;\n        }\n      }, {\n        key: \"project\",\n        value: function project(t) {\n          var i = e.clamp(t.lat, -this.maxValidLatitude, this.maxValidLatitude);\n          return new e.Point(e.mercatorXfromLng(t.lng) * this.worldSize, e.mercatorYfromLat(i) * this.worldSize);\n        }\n      }, {\n        key: \"unproject\",\n        value: function unproject(t) {\n          return new e.MercatorCoordinate(t.x / this.worldSize, t.y / this.worldSize).toLngLat();\n        }\n      }, {\n        key: \"point\",\n        get: function get() {\n          return this.project(this.center);\n        }\n      }, {\n        key: \"setLocationAtPoint\",\n        value: function setLocationAtPoint(t, i) {\n          var o = this.pointCoordinate(i),\n              a = this.pointCoordinate(this.centerPoint),\n              r = this.locationCoordinate(t),\n              n = new e.MercatorCoordinate(r.x - (o.x - a.x), r.y - (o.y - a.y));\n          this.center = this.coordinateLocation(n), this._renderWorldCopies && (this.center = this.center.wrap());\n        }\n      }, {\n        key: \"setLocation\",\n        value: function setLocation(e) {\n          this.center = this.coordinateLocation(e), this._renderWorldCopies && (this.center = this.center.wrap());\n        }\n      }, {\n        key: \"locationPoint\",\n        value: function locationPoint(e) {\n          return this._coordinatePoint(this.locationCoordinate(e), !1);\n        }\n      }, {\n        key: \"locationPoint3D\",\n        value: function locationPoint3D(e) {\n          return this._coordinatePoint(this.locationCoordinate(e), !0);\n        }\n      }, {\n        key: \"pointLocation\",\n        value: function pointLocation(e) {\n          return this.coordinateLocation(this.pointCoordinate(e));\n        }\n      }, {\n        key: \"pointLocation3D\",\n        value: function pointLocation3D(e) {\n          return this.coordinateLocation(this.pointCoordinate3D(e));\n        }\n      }, {\n        key: \"locationCoordinate\",\n        value: function locationCoordinate(t) {\n          return e.MercatorCoordinate.fromLngLat(t);\n        }\n      }, {\n        key: \"coordinateLocation\",\n        value: function coordinateLocation(e) {\n          return e.toLngLat();\n        }\n      }, {\n        key: \"pointRayIntersection\",\n        value: function pointRayIntersection(t, i) {\n          var o = null != i ? i : this._centerAltitude,\n              a = [t.x, t.y, 0, 1],\n              r = [t.x, t.y, 1, 1];\n          e.transformMat4(a, a, this.pixelMatrixInverse), e.transformMat4(r, r, this.pixelMatrixInverse);\n          var n = r[3];\n          e.scale$1(a, a, 1 / a[3]), e.scale$1(r, r, 1 / n);\n          var s = a[2],\n              l = r[2];\n          return {\n            p0: a,\n            p1: r,\n            t: s === l ? 0 : (o - s) / (l - s)\n          };\n        }\n      }, {\n        key: \"screenPointToMercatorRay\",\n        value: function screenPointToMercatorRay(t) {\n          var i = [t.x, t.y, 0, 1],\n              o = [t.x, t.y, 1, 1];\n          return e.transformMat4(i, i, this.pixelMatrixInverse), e.transformMat4(o, o, this.pixelMatrixInverse), e.scale$1(i, i, 1 / i[3]), e.scale$1(o, o, 1 / o[3]), i[2] = e.mercatorZfromAltitude(i[2], this._center.lat) * this.worldSize, o[2] = e.mercatorZfromAltitude(o[2], this._center.lat) * this.worldSize, e.scale$1(i, i, 1 / this.worldSize), e.scale$1(o, o, 1 / this.worldSize), new e.Ray([i[0], i[1], i[2]], e.normalize([], e.sub([], o, i)));\n        }\n      }, {\n        key: \"rayIntersectionCoordinate\",\n        value: function rayIntersectionCoordinate(t) {\n          var i = t.p0,\n              o = t.p1,\n              a = t.t,\n              r = e.mercatorZfromAltitude(i[2], this._center.lat),\n              n = e.mercatorZfromAltitude(o[2], this._center.lat);\n          return new e.MercatorCoordinate(e.number(i[0], o[0], a) / this.worldSize, e.number(i[1], o[1], a) / this.worldSize, e.number(r, n, a));\n        }\n      }, {\n        key: \"pointCoordinate\",\n        value: function pointCoordinate(t) {\n          var i = this.horizonLineFromTop(!1),\n              o = new e.Point(t.x, Math.max(i, t.y));\n          return this.rayIntersectionCoordinate(this.pointRayIntersection(o));\n        }\n      }, {\n        key: \"pointCoordinate3D\",\n        value: function pointCoordinate3D(t) {\n          if (!this.elevation) return this.pointCoordinate(t);\n          var i = this.elevation;\n          var o = this.elevation.pointCoordinate(t);\n          if (o) return new e.MercatorCoordinate(o[0], o[1], o[2]);\n          var a = 0,\n              r = this.horizonLineFromTop();\n          if (t.y > r) return this.pointCoordinate(t);\n          var n = .02 * r,\n              s = t.clone();\n\n          for (var _t341 = 0; _t341 < 10 && r - a > n; _t341++) {\n            s.y = e.number(a, r, .66);\n\n            var _t342 = i.pointCoordinate(s);\n\n            _t342 ? (r = s.y, o = _t342) : a = s.y;\n          }\n\n          return o ? new e.MercatorCoordinate(o[0], o[1], o[2]) : this.pointCoordinate(t);\n        }\n      }, {\n        key: \"isPointAboveHorizon\",\n        value: function isPointAboveHorizon(e) {\n          if (this.elevation) return !this.elevation.pointCoordinate(e);\n          {\n            var _t343 = this.horizonLineFromTop();\n\n            return e.y < _t343;\n          }\n        }\n      }, {\n        key: \"_coordinatePoint\",\n        value: function _coordinatePoint(t, i) {\n          var o = i && this.elevation ? this.elevation.getAtPoint(t, this._centerAltitude) : this._centerAltitude,\n              a = [t.x * this.worldSize, t.y * this.worldSize, o + t.toAltitude(), 1];\n          return e.transformMat4(a, a, this.pixelMatrix), a[3] > 0 ? new e.Point(a[0] / a[3], a[1] / a[3]) : new e.Point(Number.MAX_VALUE, Number.MAX_VALUE);\n        }\n      }, {\n        key: \"getBounds\",\n        value: function getBounds() {\n          return this._terrainEnabled() ? this._getBounds3D() : new e.LngLatBounds().extend(this.pointLocation(new e.Point(0, 0))).extend(this.pointLocation(new e.Point(this.width, 0))).extend(this.pointLocation(new e.Point(this.width, this.height))).extend(this.pointLocation(new e.Point(0, this.height)));\n        }\n      }, {\n        key: \"_getBounds3D\",\n        value: function _getBounds3D() {\n          var _this109 = this;\n\n          var t = this.elevation,\n              i = t.visibleDemTiles.reduce(function (e, t) {\n            if (t.dem) {\n              var _i264 = t.dem.tree;\n              e.min = Math.min(e.min, _i264.minimums[0]), e.max = Math.max(e.max, _i264.maximums[0]);\n            }\n\n            return e;\n          }, {\n            min: Number.MAX_VALUE,\n            max: 0\n          });\n          i.min *= t.exaggeration(), i.max *= t.exaggeration();\n          var o = this.horizonLineFromTop();\n          return [new e.Point(0, o), new e.Point(this.width, o), new e.Point(this.width, this.height), new e.Point(0, this.height)].reduce(function (e, t) {\n            return e.extend(_this109.coordinateLocation(_this109.rayIntersectionCoordinate(_this109.pointRayIntersection(t, i.min)))).extend(_this109.coordinateLocation(_this109.rayIntersectionCoordinate(_this109.pointRayIntersection(t, i.max))));\n          }, new e.LngLatBounds());\n        }\n      }, {\n        key: \"horizonLineFromTop\",\n        value: function horizonLineFromTop() {\n          var e = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : !0;\n          var t = this.height / 2 / Math.tan(this._fov / 2) / Math.tan(Math.max(this._pitch, .1)) + this.centerOffset.y,\n              i = this.height / 2 - .97 * t;\n          return e ? Math.max(0, i) : i;\n        }\n      }, {\n        key: \"getMaxBounds\",\n        value: function getMaxBounds() {\n          return this.latRange && 2 === this.latRange.length && this.lngRange && 2 === this.lngRange.length ? new e.LngLatBounds([this.lngRange[0], this.latRange[0]], [this.lngRange[1], this.latRange[1]]) : null;\n        }\n      }, {\n        key: \"setMaxBounds\",\n        value: function setMaxBounds(e) {\n          e ? (this.lngRange = [e.getWest(), e.getEast()], this.latRange = [e.getSouth(), e.getNorth()], this._constrain()) : (this.lngRange = null, this.latRange = [-this.maxValidLatitude, this.maxValidLatitude]);\n        }\n      }, {\n        key: \"calculatePosMatrix\",\n        value: function calculatePosMatrix(t) {\n          var i = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : !1;\n          var o = t.key,\n              a = i ? this._alignedPosMatrixCache : this._posMatrixCache;\n          if (a[o]) return a[o];\n          var r = t.canonical,\n              n = this.worldSize / this.zoomScale(r.z),\n              s = r.x + Math.pow(2, r.z) * t.wrap,\n              l = e.identity(new Float64Array(16));\n          return e.translate(l, l, [s * n, r.y * n, 0]), e.scale(l, l, [n / e.EXTENT, n / e.EXTENT, 1]), e.multiply(l, i ? this.alignedProjMatrix : this.projMatrix, l), a[o] = new Float32Array(l), a[o];\n        }\n      }, {\n        key: \"customLayerMatrix\",\n        value: function customLayerMatrix() {\n          return this.mercatorMatrix.slice();\n        }\n      }, {\n        key: \"recenterOnTerrain\",\n        value: function recenterOnTerrain() {\n          if (!this._elevation) return;\n          var t = this._elevation;\n\n          this._updateCameraState();\n\n          var i = this._camera.position,\n              o = this._camera.forward();\n\n          if (i.z <= 0 || o[2] >= 0) return;\n          var a = e.mercatorZfromAltitude(1, this._center.lat);\n          i[2] /= a, o[2] /= a, e.normalize(o, o);\n          var r = t.raycast(i, o, t.exaggeration());\n\n          if (r) {\n            var _t344 = e.scaleAndAdd([], i, o, r),\n                _a148 = new e.MercatorCoordinate(_t344[0], _t344[1], e.mercatorZfromAltitude(_t344[2], e.latFromMercatorY(_t344[1]))),\n                _n160 = this._camera.position,\n                _s122 = _a148.z + e.length([_a148.x - _n160[0], _a148.y - _n160[1], _a148.z - _n160[2]]);\n\n            this._cameraZoom = this._zoomFromMercatorZ(_s122), this._centerAltitude = _a148.toAltitude(), this._center = _a148.toLngLat(), this._updateZoomFromElevation(), this._constrain(), this._calcMatrices();\n          }\n        }\n      }, {\n        key: \"_constrainCameraAltitude\",\n        value: function _constrainCameraAltitude() {\n          if (!this._elevation) return;\n          var t = this._elevation;\n\n          this._updateCameraState();\n\n          var i = t.getAtPoint(this._camera.mercatorPosition),\n              o = this._minimumHeightOverTerrain() * Math.cos(e.degToRad(this._maxPitch)),\n              a = e.mercatorZfromAltitude(i, this._center.lat),\n              r = this._camera.position[2] - a;\n\n          if (r < o) {\n            var _t345 = e.MercatorCoordinate.fromLngLat(this._center, this._centerAltitude),\n                _i265 = this._camera.mercatorPosition,\n                _a149 = [_t345.x - _i265.x, _t345.y - _i265.y, _t345.z - _i265.z],\n                _n161 = e.length(_a149);\n\n            _a149[2] -= o - r;\n\n            var _s123 = e.length(_a149);\n\n            if (0 === _s123) return;\n            e.scale$2(_a149, _a149, _n161 / _s123), this._camera.position = [_t345.x - _a149[0], _t345.y - _a149[1], _t345.z - _a149[2]], this._camera.orientation = $i(_a149, this._camera.up()), this._updateStateFromCamera();\n          }\n        }\n      }, {\n        key: \"_constrain\",\n        value: function _constrain() {\n          if (!this.center || !this.width || !this.height || this._constraining) return;\n          this._constraining = !0;\n          var t,\n              i,\n              o,\n              a,\n              r = -90,\n              n = 90,\n              s = -180,\n              l = 180;\n          var c = this.size,\n              h = this._unmodified;\n\n          if (this.latRange) {\n            var _i266 = this.latRange;\n            r = e.mercatorYfromLat(_i266[1]) * this.worldSize, n = e.mercatorYfromLat(_i266[0]) * this.worldSize, t = n - r < c.y ? c.y / (n - r) : 0;\n          }\n\n          if (this.lngRange) {\n            var _t346 = this.lngRange;\n            s = e.mercatorXfromLng(_t346[0]) * this.worldSize, l = e.mercatorXfromLng(_t346[1]) * this.worldSize, i = l - s < c.x ? c.x / (l - s) : 0;\n          }\n\n          var u = this.point,\n              d = Math.max(i || 0, t || 0);\n          if (d) return this.center = this.unproject(new e.Point(i ? (l + s) / 2 : u.x, t ? (n + r) / 2 : u.y)), this.zoom += this.scaleZoom(d), this._unmodified = h, void (this._constraining = !1);\n\n          if (this.latRange) {\n            var _e372 = u.y,\n                _t347 = c.y / 2;\n\n            _e372 - _t347 < r && (a = r + _t347), _e372 + _t347 > n && (a = n - _t347);\n          }\n\n          if (this.lngRange) {\n            var _e373 = u.x,\n                _t348 = c.x / 2;\n\n            _e373 - _t348 < s && (o = s + _t348), _e373 + _t348 > l && (o = l - _t348);\n          }\n\n          void 0 === o && void 0 === a || (this.center = this.unproject(new e.Point(void 0 !== o ? o : u.x, void 0 !== a ? a : u.y))), this._constrainCameraAltitude(), this._unmodified = h, this._constraining = !1;\n        }\n      }, {\n        key: \"_minZoomForBounds\",\n        value: function _minZoomForBounds() {\n          var _this110 = this;\n\n          var t = function t(e, _t349) {\n            return Math.log2(e / (_this110.tileSize * Math.abs(_t349[1] - _t349[0])));\n          };\n\n          var i = 0;\n\n          if (this.latRange) {\n            var _o112 = this.latRange;\n            i = t(this.height, [e.mercatorYfromLat(_o112[0]), e.mercatorYfromLat(_o112[1])]);\n          }\n\n          var o = 0;\n\n          if (this.lngRange) {\n            var _i267 = this.lngRange;\n            o = t(this.width, [e.mercatorXfromLng(_i267[0]), e.mercatorXfromLng(_i267[1])]);\n          }\n\n          return Math.max(i, o);\n        }\n      }, {\n        key: \"_maxCameraBoundsDistance\",\n        value: function _maxCameraBoundsDistance() {\n          return this._mercatorZfromZoom(this._minZoomForBounds());\n        }\n      }, {\n        key: \"_calcMatrices\",\n        value: function _calcMatrices() {\n          if (!this.height) return;\n          var t = this.centerOffset;\n          this.cameraToCenterDistance = .5 / Math.tan(this._fov / 2) * this.height;\n          var i = e.mercatorZfromAltitude(1, this.center.lat) * this.worldSize;\n\n          this._updateCameraState();\n\n          var o = Math.PI / 2 + this._pitch,\n              a = this.fovAboveCenter,\n              r = this._camera.position[2] * this.worldSize / Math.cos(this._pitch),\n              n = Math.sin(a) * r / Math.sin(e.clamp(Math.PI - o - a, .01, Math.PI - .01)),\n              s = this.point,\n              l = s.x,\n              c = s.y,\n              h = Math.cos(Math.PI / 2 - this._pitch) * n + r,\n              u = Math.min(1.01 * h, r * (1 / this._horizonShift)),\n              d = this.height / 50,\n              _ = this._camera.getWorldToCamera(this.worldSize, i),\n              m = this._camera.getCameraToClipPerspective(this._fov, this.width / this.height, d, u);\n\n          m[8] = 2 * -t.x / this.width, m[9] = 2 * t.y / this.height;\n          var p = e.mul([], m, _);\n          this.mercatorMatrix = e.scale([], p, [this.worldSize, this.worldSize, this.worldSize / i]), this.projMatrix = p, this.invProjMatrix = e.invert(new Float64Array(16), this.projMatrix);\n          var f = new Float32Array(16);\n          e.identity(f), e.scale(f, f, [1, -1, 1]), e.rotateX(f, f, this._pitch), e.rotateZ(f, f, this.angle);\n          var g = e.perspective(new Float32Array(16), this._fov, this.width / this.height, d, u),\n              v = (Math.PI / 2 - this._pitch) * (this.height / this._fov) * this._horizonShift;\n          g[8] = 2 * -t.x / this.width, g[9] = 2 * (t.y + v) / this.height, this.skyboxMatrix = e.multiply(f, g, f);\n          var x = this.width % 2 / 2,\n              y = this.height % 2 / 2,\n              b = Math.cos(this.angle),\n              w = Math.sin(this.angle),\n              T = l - Math.round(l) + b * x + w * y,\n              E = c - Math.round(c) + b * y + w * x,\n              C = new Float64Array(p);\n          if (e.translate(C, C, [T > .5 ? T - 1 : T, E > .5 ? E - 1 : E, 0]), this.alignedProjMatrix = C, p = e.create(), e.scale(p, p, [this.width / 2, -this.height / 2, 1]), e.translate(p, p, [1, -1, 0]), this.labelPlaneMatrix = p, p = e.create(), e.scale(p, p, [1, -1, 1]), e.translate(p, p, [-1, -1, 0]), e.scale(p, p, [2 / this.width, 2 / this.height, 1]), this.glCoordMatrix = p, this.pixelMatrix = e.multiply(new Float64Array(16), this.labelPlaneMatrix, this.projMatrix), p = e.invert(new Float64Array(16), this.pixelMatrix), !p) throw new Error(\"failed to invert matrix\");\n          this.pixelMatrixInverse = p, this._posMatrixCache = {}, this._alignedPosMatrixCache = {};\n        }\n      }, {\n        key: \"_updateCameraState\",\n        value: function _updateCameraState() {\n          if (!this.height) return;\n\n          this._camera.setPitchBearing(this._pitch, this.angle);\n\n          var t = this._camera.forward(),\n              i = this.cameraToCenterDistance,\n              o = this.point,\n              a = this._mercatorZfromZoom(this._cameraZoom ? this._cameraZoom : this._zoom) - e.mercatorZfromAltitude(this._centerAltitude, this.center.lat),\n              r = this.cameraToCenterDistance / a;\n\n          this._camera.position = [o.x / this.worldSize - t[0] * i / r, o.y / this.worldSize - t[1] * i / r, e.mercatorZfromAltitude(this._centerAltitude, this._center.lat) + -t[2] * i / r];\n        }\n      }, {\n        key: \"_translateCameraConstrained\",\n        value: function _translateCameraConstrained(t) {\n          var i = this._maxCameraBoundsDistance() * Math.cos(this._pitch),\n              o = t[2];\n          var a = 1;\n          o > 0 && (a = Math.min((i - this._camera.position[2]) / o, 1)), this._camera.position = e.scaleAndAdd([], this._camera.position, t, a), this._updateStateFromCamera();\n        }\n      }, {\n        key: \"_updateStateFromCamera\",\n        value: function _updateStateFromCamera() {\n          var t = this._camera.position,\n              i = this._camera.forward(),\n              _this$_camera$getPitc = this._camera.getPitchBearing(),\n              o = _this$_camera$getPitc.pitch,\n              a = _this$_camera$getPitc.bearing,\n              r = e.mercatorZfromAltitude(this._centerAltitude, this.center.lat),\n              n = this._mercatorZfromZoom(this._maxZoom) * Math.cos(e.degToRad(this._maxPitch)),\n              s = Math.max((t[2] - r) / Math.cos(o), n),\n              l = this._zoomFromMercatorZ(s);\n\n          e.scaleAndAdd(t, t, i, s), this._pitch = e.clamp(o, e.degToRad(this.minPitch), e.degToRad(this.maxPitch)), this.angle = e.wrap(a, -Math.PI, Math.PI), this._setZoom(e.clamp(l, this._minZoom, this._maxZoom)), this._terrainEnabled() && this._updateCameraOnTerrain(), this._center = new e.MercatorCoordinate(t[0], t[1], t[2]).toLngLat(), this._unmodified = !1, this._constrain(), this._calcMatrices();\n        }\n      }, {\n        key: \"_worldSizeFromZoom\",\n        value: function _worldSizeFromZoom(e) {\n          return Math.pow(2, e) * this.tileSize;\n        }\n      }, {\n        key: \"_mercatorZfromZoom\",\n        value: function _mercatorZfromZoom(e) {\n          return this.cameraToCenterDistance / this._worldSizeFromZoom(e);\n        }\n      }, {\n        key: \"_minimumHeightOverTerrain\",\n        value: function _minimumHeightOverTerrain() {\n          var e = Math.min((null != this._cameraZoom ? this._cameraZoom : this._zoom) + 2, this._maxZoom);\n          return this._mercatorZfromZoom(e);\n        }\n      }, {\n        key: \"_zoomFromMercatorZ\",\n        value: function _zoomFromMercatorZ(e) {\n          return this.scaleZoom(this.cameraToCenterDistance / (e * this.tileSize));\n        }\n      }, {\n        key: \"_terrainEnabled\",\n        value: function _terrainEnabled() {\n          return !!this._elevation;\n        }\n      }, {\n        key: \"isHorizonVisibleForPoints\",\n        value: function isHorizonVisibleForPoints(t, i) {\n          var o = Math.min(t.x, i.x),\n              a = Math.max(t.x, i.x),\n              r = Math.min(t.y, i.y),\n              n = Math.max(t.y, i.y),\n              s = [new e.Point(o, r), new e.Point(a, n), new e.Point(o, n), new e.Point(a, r)],\n              l = this._renderWorldCopies ? -3 : 0,\n              c = this._renderWorldCopies ? 4 : 1;\n\n          for (var _i268 = 0, _s124 = s; _i268 < _s124.length; _i268++) {\n            var _e374 = _s124[_i268];\n\n            var _t350 = this.pointRayIntersection(_e374);\n\n            if (_t350.t < 0) return !0;\n\n            var _i269 = this.rayIntersectionCoordinate(_t350);\n\n            if (_i269.x < l || _i269.y < 0 || _i269.x > c || _i269.y > 1) return !0;\n          }\n\n          return !1;\n        }\n      }, {\n        key: \"isHorizonVisible\",\n        value: function isHorizonVisible() {\n          return this.pitch + e.radToDeg(this.fovAboveCenter) > 88 || this.isHorizonVisibleForPoints(new e.Point(0, 0), new e.Point(this.width, this.height));\n        }\n      }, {\n        key: \"zoomDeltaToMovement\",\n        value: function zoomDeltaToMovement(t, i) {\n          var o = e.length(e.sub([], this._camera.position, t)),\n              a = this._zoomFromMercatorZ(o) + i;\n          return o - this._mercatorZfromZoom(a);\n        }\n      }, {\n        key: \"getCameraPoint\",\n        value: function getCameraPoint() {\n          var t = Math.tan(this._pitch) * (this.cameraToCenterDistance || 1);\n          return this.centerPoint.add(new e.Point(0, t));\n        }\n      }]);\n\n      return Hi;\n    }();\n\n    var Ki = /*#__PURE__*/function () {\n      function Ki(t) {\n        _classCallCheck(this, Ki);\n\n        this._hashName = t && encodeURIComponent(t), e.bindAll([\"_getCurrentHash\", \"_onHashChange\", \"_updateHash\"], this), this._updateHash = function (e, t) {\n          var i = !1,\n              o = null;\n\n          var a = function a() {\n            o = null, i && (e(), o = setTimeout(a, 300), i = !1);\n          };\n\n          return function () {\n            return i = !0, o || a(), o;\n          };\n        }(this._updateHashUnthrottled.bind(this));\n      }\n\n      _createClass(Ki, [{\n        key: \"addTo\",\n        value: function addTo(t) {\n          return this._map = t, e.window.addEventListener(\"hashchange\", this._onHashChange, !1), this._map.on(\"moveend\", this._updateHash), this;\n        }\n      }, {\n        key: \"remove\",\n        value: function remove() {\n          return e.window.removeEventListener(\"hashchange\", this._onHashChange, !1), this._map.off(\"moveend\", this._updateHash), clearTimeout(this._updateHash()), delete this._map, this;\n        }\n      }, {\n        key: \"getHashString\",\n        value: function getHashString(t) {\n          var i = this._map.getCenter(),\n              o = Math.round(100 * this._map.getZoom()) / 100,\n              a = Math.ceil((o * Math.LN2 + Math.log(512 / 360 / .5)) / Math.LN10),\n              r = Math.pow(10, a),\n              n = Math.round(i.lng * r) / r,\n              s = Math.round(i.lat * r) / r,\n              l = this._map.getBearing(),\n              c = this._map.getPitch();\n\n          var h = \"\";\n\n          if (h += t ? \"/\".concat(n, \"/\").concat(s, \"/\").concat(o) : \"\".concat(o, \"/\").concat(s, \"/\").concat(n), (l || c) && (h += \"/\".concat(Math.round(10 * l) / 10)), c && (h += \"/\".concat(Math.round(c))), this._hashName) {\n            var _t351 = this._hashName;\n\n            var _i270 = !1;\n\n            var _o113 = e.window.location.hash.slice(1).split(\"&\").map(function (e) {\n              var o = e.split(\"=\")[0];\n              return o === _t351 ? (_i270 = !0, \"\".concat(o, \"=\").concat(h)) : e;\n            }).filter(function (e) {\n              return e;\n            });\n\n            return _i270 || _o113.push(\"\".concat(_t351, \"=\").concat(h)), \"#\".concat(_o113.join(\"&\"));\n          }\n\n          return \"#\".concat(h);\n        }\n      }, {\n        key: \"_getCurrentHash\",\n        value: function _getCurrentHash() {\n          var _this111 = this;\n\n          var t = e.window.location.hash.replace(\"#\", \"\");\n\n          if (this._hashName) {\n            var _e375;\n\n            return t.split(\"&\").map(function (e) {\n              return e.split(\"=\");\n            }).forEach(function (t) {\n              t[0] === _this111._hashName && (_e375 = t);\n            }), (_e375 && _e375[1] || \"\").split(\"/\");\n          }\n\n          return t.split(\"/\");\n        }\n      }, {\n        key: \"_onHashChange\",\n        value: function _onHashChange() {\n          var e = this._getCurrentHash();\n\n          if (e.length >= 3 && !e.some(function (e) {\n            return isNaN(e);\n          })) {\n            var _t352 = this._map.dragRotate.isEnabled() && this._map.touchZoomRotate.isEnabled() ? +(e[3] || 0) : this._map.getBearing();\n\n            return this._map.jumpTo({\n              center: [+e[2], +e[1]],\n              zoom: +e[0],\n              bearing: _t352,\n              pitch: +(e[4] || 0)\n            }), !0;\n          }\n\n          return !1;\n        }\n      }, {\n        key: \"_updateHashUnthrottled\",\n        value: function _updateHashUnthrottled() {\n          var t = e.window.location.href.replace(/(#.+)?$/, this.getHashString());\n          e.window.history.replaceState(e.window.history.state, null, t);\n        }\n      }]);\n\n      return Ki;\n    }();\n\n    var Yi = {\n      linearity: .3,\n      easing: e.bezier(0, 0, .3, 1)\n    },\n        Ji = e.extend({\n      deceleration: 2500,\n      maxSpeed: 1400\n    }, Yi),\n        Qi = e.extend({\n      deceleration: 20,\n      maxSpeed: 1400\n    }, Yi),\n        eo = e.extend({\n      deceleration: 1e3,\n      maxSpeed: 360\n    }, Yi),\n        to = e.extend({\n      deceleration: 1e3,\n      maxSpeed: 90\n    }, Yi);\n\n    var io = /*#__PURE__*/function () {\n      function io(e) {\n        _classCallCheck(this, io);\n\n        this._map = e, this.clear();\n      }\n\n      _createClass(io, [{\n        key: \"clear\",\n        value: function clear() {\n          this._inertiaBuffer = [];\n        }\n      }, {\n        key: \"record\",\n        value: function record(t) {\n          this._drainInertiaBuffer(), this._inertiaBuffer.push({\n            time: e.browser.now(),\n            settings: t\n          });\n        }\n      }, {\n        key: \"_drainInertiaBuffer\",\n        value: function _drainInertiaBuffer() {\n          var t = this._inertiaBuffer,\n              i = e.browser.now();\n\n          for (; t.length > 0 && i - t[0].time > 160;) {\n            t.shift();\n          }\n        }\n      }, {\n        key: \"_onMoveEnd\",\n        value: function _onMoveEnd(t) {\n          if (this._drainInertiaBuffer(), this._inertiaBuffer.length < 2) return;\n          var i = {\n            zoom: 0,\n            bearing: 0,\n            pitch: 0,\n            pan: new e.Point(0, 0),\n            pinchAround: void 0,\n            around: void 0\n          };\n\n          var _iterator223 = _createForOfIteratorHelper(this._inertiaBuffer),\n              _step223;\n\n          try {\n            for (_iterator223.s(); !(_step223 = _iterator223.n()).done;) {\n              var _ref176 = _step223.value;\n              var _e379 = _ref176.settings;\n              i.zoom += _e379.zoomDelta || 0, i.bearing += _e379.bearingDelta || 0, i.pitch += _e379.pitchDelta || 0, _e379.panDelta && i.pan._add(_e379.panDelta), _e379.around && (i.around = _e379.around), _e379.pinchAround && (i.pinchAround = _e379.pinchAround);\n            }\n          } catch (err) {\n            _iterator223.e(err);\n          } finally {\n            _iterator223.f();\n          }\n\n          var o = this._inertiaBuffer[this._inertiaBuffer.length - 1].time - this._inertiaBuffer[0].time,\n              a = {};\n\n          if (i.pan.mag()) {\n            var _r251 = ao(i.pan.mag(), o, e.extend({}, Ji, t || {}));\n\n            a.offset = i.pan.mult(_r251.amount / i.pan.mag()), a.center = this._map.transform.center, oo(a, _r251);\n          }\n\n          if (i.zoom) {\n            var _e376 = ao(i.zoom, o, Qi);\n\n            a.zoom = this._map.transform.zoom + _e376.amount, oo(a, _e376);\n          }\n\n          if (i.bearing) {\n            var _t353 = ao(i.bearing, o, eo);\n\n            a.bearing = this._map.transform.bearing + e.clamp(_t353.amount, -179, 179), oo(a, _t353);\n          }\n\n          if (i.pitch) {\n            var _e377 = ao(i.pitch, o, to);\n\n            a.pitch = this._map.transform.pitch + _e377.amount, oo(a, _e377);\n          }\n\n          if (a.zoom || a.bearing) {\n            var _e378 = void 0 === i.pinchAround ? i.around : i.pinchAround;\n\n            a.around = _e378 ? this._map.unproject(_e378) : this._map.getCenter();\n          }\n\n          return this.clear(), e.extend(a, {\n            noMoveStart: !0\n          });\n        }\n      }]);\n\n      return io;\n    }();\n\n    function oo(e, t) {\n      (!e.duration || e.duration < t.duration) && (e.duration = t.duration, e.easing = t.easing);\n    }\n\n    function ao(t, i, o) {\n      var a = o.maxSpeed,\n          r = o.linearity,\n          n = o.deceleration,\n          s = e.clamp(t * r / (i / 1e3), -a, a),\n          l = Math.abs(s) / (n * r);\n      return {\n        easing: o.easing,\n        duration: 1e3 * l,\n        amount: s * (l / 2)\n      };\n    }\n\n    var ro = /*#__PURE__*/function (_e$Event) {\n      _inherits(ro, _e$Event);\n\n      var _super116 = _createSuper(ro);\n\n      function ro(t, i, o) {\n        var _this112;\n\n        var r = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};\n\n        _classCallCheck(this, ro);\n\n        var n = a.mousePos(i.getCanvasContainer(), o),\n            s = i.unproject(n);\n        _this112 = _super116.call(this, t, e.extend({\n          point: n,\n          lngLat: s,\n          originalEvent: o\n        }, r)), _this112._defaultPrevented = !1, _this112.target = i;\n        return _this112;\n      }\n\n      _createClass(ro, [{\n        key: \"preventDefault\",\n        value: function preventDefault() {\n          this._defaultPrevented = !0;\n        }\n      }, {\n        key: \"defaultPrevented\",\n        get: function get() {\n          return this._defaultPrevented;\n        }\n      }]);\n\n      return ro;\n    }(e.Event);\n\n    var no = /*#__PURE__*/function (_e$Event2) {\n      _inherits(no, _e$Event2);\n\n      var _super117 = _createSuper(no);\n\n      function no(t, i, o) {\n        var _this113;\n\n        _classCallCheck(this, no);\n\n        var r = \"touchend\" === t ? o.changedTouches : o.touches,\n            n = a.touchPos(i.getCanvasContainer(), r),\n            s = n.map(function (e) {\n          return i.unproject(e);\n        }),\n            l = n.reduce(function (e, t, i, o) {\n          return e.add(t.div(o.length));\n        }, new e.Point(0, 0));\n        _this113 = _super117.call(this, t, {\n          points: n,\n          point: l,\n          lngLats: s,\n          lngLat: i.unproject(l),\n          originalEvent: o\n        }), _this113._defaultPrevented = !1;\n        return _this113;\n      }\n\n      _createClass(no, [{\n        key: \"preventDefault\",\n        value: function preventDefault() {\n          this._defaultPrevented = !0;\n        }\n      }, {\n        key: \"defaultPrevented\",\n        get: function get() {\n          return this._defaultPrevented;\n        }\n      }]);\n\n      return no;\n    }(e.Event);\n\n    var so = /*#__PURE__*/function (_e$Event3) {\n      _inherits(so, _e$Event3);\n\n      var _super118 = _createSuper(so);\n\n      function so(e, t, i) {\n        var _this114;\n\n        _classCallCheck(this, so);\n\n        _this114 = _super118.call(this, e, {\n          originalEvent: i\n        }), _this114._defaultPrevented = !1;\n        return _this114;\n      }\n\n      _createClass(so, [{\n        key: \"preventDefault\",\n        value: function preventDefault() {\n          this._defaultPrevented = !0;\n        }\n      }, {\n        key: \"defaultPrevented\",\n        get: function get() {\n          return this._defaultPrevented;\n        }\n      }]);\n\n      return so;\n    }(e.Event);\n\n    var lo = /*#__PURE__*/function () {\n      function lo(e, t) {\n        _classCallCheck(this, lo);\n\n        this._map = e, this._clickTolerance = t.clickTolerance;\n      }\n\n      _createClass(lo, [{\n        key: \"reset\",\n        value: function reset() {\n          delete this._mousedownPos;\n        }\n      }, {\n        key: \"wheel\",\n        value: function wheel(e) {\n          return this._firePreventable(new so(e.type, this._map, e));\n        }\n      }, {\n        key: \"mousedown\",\n        value: function mousedown(e, t) {\n          return this._mousedownPos = t, this._firePreventable(new ro(e.type, this._map, e));\n        }\n      }, {\n        key: \"mouseup\",\n        value: function mouseup(e) {\n          this._map.fire(new ro(e.type, this._map, e));\n        }\n      }, {\n        key: \"click\",\n        value: function click(e, t) {\n          this._mousedownPos && this._mousedownPos.dist(t) >= this._clickTolerance || this._map.fire(new ro(e.type, this._map, e));\n        }\n      }, {\n        key: \"dblclick\",\n        value: function dblclick(e) {\n          return this._firePreventable(new ro(e.type, this._map, e));\n        }\n      }, {\n        key: \"mouseover\",\n        value: function mouseover(e) {\n          this._map.fire(new ro(e.type, this._map, e));\n        }\n      }, {\n        key: \"mouseout\",\n        value: function mouseout(e) {\n          this._map.fire(new ro(e.type, this._map, e));\n        }\n      }, {\n        key: \"touchstart\",\n        value: function touchstart(e) {\n          return this._firePreventable(new no(e.type, this._map, e));\n        }\n      }, {\n        key: \"touchmove\",\n        value: function touchmove(e) {\n          this._map.fire(new no(e.type, this._map, e));\n        }\n      }, {\n        key: \"touchend\",\n        value: function touchend(e) {\n          this._map.fire(new no(e.type, this._map, e));\n        }\n      }, {\n        key: \"touchcancel\",\n        value: function touchcancel(e) {\n          this._map.fire(new no(e.type, this._map, e));\n        }\n      }, {\n        key: \"_firePreventable\",\n        value: function _firePreventable(e) {\n          if (this._map.fire(e), e.defaultPrevented) return {};\n        }\n      }, {\n        key: \"isEnabled\",\n        value: function isEnabled() {\n          return !0;\n        }\n      }, {\n        key: \"isActive\",\n        value: function isActive() {\n          return !1;\n        }\n      }, {\n        key: \"enable\",\n        value: function enable() {}\n      }, {\n        key: \"disable\",\n        value: function disable() {}\n      }]);\n\n      return lo;\n    }();\n\n    var co = /*#__PURE__*/function () {\n      function co(e) {\n        _classCallCheck(this, co);\n\n        this._map = e;\n      }\n\n      _createClass(co, [{\n        key: \"reset\",\n        value: function reset() {\n          this._delayContextMenu = !1, delete this._contextMenuEvent;\n        }\n      }, {\n        key: \"mousemove\",\n        value: function mousemove(e) {\n          this._map.fire(new ro(e.type, this._map, e));\n        }\n      }, {\n        key: \"mousedown\",\n        value: function mousedown() {\n          this._delayContextMenu = !0;\n        }\n      }, {\n        key: \"mouseup\",\n        value: function mouseup() {\n          this._delayContextMenu = !1, this._contextMenuEvent && (this._map.fire(new ro(\"contextmenu\", this._map, this._contextMenuEvent)), delete this._contextMenuEvent);\n        }\n      }, {\n        key: \"contextmenu\",\n        value: function contextmenu(e) {\n          this._delayContextMenu ? this._contextMenuEvent = e : this._map.fire(new ro(e.type, this._map, e)), this._map.listens(\"contextmenu\") && e.preventDefault();\n        }\n      }, {\n        key: \"isEnabled\",\n        value: function isEnabled() {\n          return !0;\n        }\n      }, {\n        key: \"isActive\",\n        value: function isActive() {\n          return !1;\n        }\n      }, {\n        key: \"enable\",\n        value: function enable() {}\n      }, {\n        key: \"disable\",\n        value: function disable() {}\n      }]);\n\n      return co;\n    }();\n\n    var ho = /*#__PURE__*/function () {\n      function ho(e, t) {\n        _classCallCheck(this, ho);\n\n        this._map = e, this._el = e.getCanvasContainer(), this._container = e.getContainer(), this._clickTolerance = t.clickTolerance || 1;\n      }\n\n      _createClass(ho, [{\n        key: \"isEnabled\",\n        value: function isEnabled() {\n          return !!this._enabled;\n        }\n      }, {\n        key: \"isActive\",\n        value: function isActive() {\n          return !!this._active;\n        }\n      }, {\n        key: \"enable\",\n        value: function enable() {\n          this.isEnabled() || (this._enabled = !0);\n        }\n      }, {\n        key: \"disable\",\n        value: function disable() {\n          this.isEnabled() && (this._enabled = !1);\n        }\n      }, {\n        key: \"mousedown\",\n        value: function mousedown(e, t) {\n          this.isEnabled() && e.shiftKey && 0 === e.button && (a.disableDrag(), this._startPos = this._lastPos = t, this._active = !0);\n        }\n      }, {\n        key: \"mousemoveWindow\",\n        value: function mousemoveWindow(e, t) {\n          if (!this._active) return;\n          var i = t;\n          if (this._lastPos.equals(i) || !this._box && i.dist(this._startPos) < this._clickTolerance) return;\n          var o = this._startPos;\n          this._lastPos = i, this._box || (this._box = a.create(\"div\", \"mapboxgl-boxzoom\", this._container), this._container.classList.add(\"mapboxgl-crosshair\"), this._fireEvent(\"boxzoomstart\", e));\n          var r = Math.min(o.x, i.x),\n              n = Math.max(o.x, i.x),\n              s = Math.min(o.y, i.y),\n              l = Math.max(o.y, i.y);\n          a.setTransform(this._box, \"translate(\".concat(r, \"px,\").concat(s, \"px)\")), this._box.style.width = \"\".concat(n - r, \"px\"), this._box.style.height = \"\".concat(l - s, \"px\");\n        }\n      }, {\n        key: \"mouseupWindow\",\n        value: function mouseupWindow(t, i) {\n          var _this115 = this;\n\n          if (!this._active) return;\n          if (0 !== t.button) return;\n          var o = this._startPos,\n              r = i;\n          if (this.reset(), a.suppressClick(), o.x !== r.x || o.y !== r.y) return this._map.fire(new e.Event(\"boxzoomend\", {\n            originalEvent: t\n          })), {\n            cameraAnimation: function cameraAnimation(e) {\n              return e.fitScreenCoordinates(o, r, _this115._map.getBearing(), {\n                linear: !1\n              });\n            }\n          };\n\n          this._fireEvent(\"boxzoomcancel\", t);\n        }\n      }, {\n        key: \"keydown\",\n        value: function keydown(e) {\n          this._active && 27 === e.keyCode && (this.reset(), this._fireEvent(\"boxzoomcancel\", e));\n        }\n      }, {\n        key: \"reset\",\n        value: function reset() {\n          this._active = !1, this._container.classList.remove(\"mapboxgl-crosshair\"), this._box && (a.remove(this._box), this._box = null), a.enableDrag(), delete this._startPos, delete this._lastPos;\n        }\n      }, {\n        key: \"_fireEvent\",\n        value: function _fireEvent(t, i) {\n          return this._map.fire(new e.Event(t, {\n            originalEvent: i\n          }));\n        }\n      }]);\n\n      return ho;\n    }();\n\n    function uo(e, t) {\n      var i = {};\n\n      for (var _o114 = 0; _o114 < e.length; _o114++) {\n        i[e[_o114].identifier] = t[_o114];\n      }\n\n      return i;\n    }\n\n    var _o = /*#__PURE__*/function () {\n      function _o(e) {\n        _classCallCheck(this, _o);\n\n        this.reset(), this.numTouches = e.numTouches;\n      }\n\n      _createClass(_o, [{\n        key: \"reset\",\n        value: function reset() {\n          delete this.centroid, delete this.startTime, delete this.touches, this.aborted = !1;\n        }\n      }, {\n        key: \"touchstart\",\n        value: function touchstart(t, i, o) {\n          (this.centroid || o.length > this.numTouches) && (this.aborted = !0), this.aborted || (void 0 === this.startTime && (this.startTime = t.timeStamp), o.length === this.numTouches && (this.centroid = function (t) {\n            var i = new e.Point(0, 0);\n\n            var _iterator224 = _createForOfIteratorHelper(t),\n                _step224;\n\n            try {\n              for (_iterator224.s(); !(_step224 = _iterator224.n()).done;) {\n                var _e380 = _step224.value;\n\n                i._add(_e380);\n              }\n            } catch (err) {\n              _iterator224.e(err);\n            } finally {\n              _iterator224.f();\n            }\n\n            return i.div(t.length);\n          }(i), this.touches = uo(o, i)));\n        }\n      }, {\n        key: \"touchmove\",\n        value: function touchmove(e, t, i) {\n          if (this.aborted || !this.centroid) return;\n          var o = uo(i, t);\n\n          for (var _e381 in this.touches) {\n            var _t354 = this.touches[_e381],\n                _i271 = o[_e381];\n            (!_i271 || _i271.dist(_t354) > 30) && (this.aborted = !0);\n          }\n        }\n      }, {\n        key: \"touchend\",\n        value: function touchend(e, t, i) {\n          if ((!this.centroid || e.timeStamp - this.startTime > 500) && (this.aborted = !0), 0 === i.length) {\n            var _e382 = !this.aborted && this.centroid;\n\n            if (this.reset(), _e382) return _e382;\n          }\n        }\n      }]);\n\n      return _o;\n    }();\n\n    var mo = /*#__PURE__*/function () {\n      function mo(e) {\n        _classCallCheck(this, mo);\n\n        this.singleTap = new _o(e), this.numTaps = e.numTaps, this.reset();\n      }\n\n      _createClass(mo, [{\n        key: \"reset\",\n        value: function reset() {\n          this.lastTime = 1 / 0, delete this.lastTap, this.count = 0, this.singleTap.reset();\n        }\n      }, {\n        key: \"touchstart\",\n        value: function touchstart(e, t, i) {\n          this.singleTap.touchstart(e, t, i);\n        }\n      }, {\n        key: \"touchmove\",\n        value: function touchmove(e, t, i) {\n          this.singleTap.touchmove(e, t, i);\n        }\n      }, {\n        key: \"touchend\",\n        value: function touchend(e, t, i) {\n          var o = this.singleTap.touchend(e, t, i);\n\n          if (o) {\n            var _t355 = e.timeStamp - this.lastTime < 500,\n                _i272 = !this.lastTap || this.lastTap.dist(o) < 30;\n\n            if (_t355 && _i272 || this.reset(), this.count++, this.lastTime = e.timeStamp, this.lastTap = o, this.count === this.numTaps) return this.reset(), o;\n          }\n        }\n      }]);\n\n      return mo;\n    }();\n\n    var po = /*#__PURE__*/function () {\n      function po() {\n        _classCallCheck(this, po);\n\n        this._zoomIn = new mo({\n          numTouches: 1,\n          numTaps: 2\n        }), this._zoomOut = new mo({\n          numTouches: 2,\n          numTaps: 1\n        }), this.reset();\n      }\n\n      _createClass(po, [{\n        key: \"reset\",\n        value: function reset() {\n          this._active = !1, this._zoomIn.reset(), this._zoomOut.reset();\n        }\n      }, {\n        key: \"touchstart\",\n        value: function touchstart(e, t, i) {\n          this._zoomIn.touchstart(e, t, i), this._zoomOut.touchstart(e, t, i);\n        }\n      }, {\n        key: \"touchmove\",\n        value: function touchmove(e, t, i) {\n          this._zoomIn.touchmove(e, t, i), this._zoomOut.touchmove(e, t, i);\n        }\n      }, {\n        key: \"touchend\",\n        value: function touchend(e, t, i) {\n          var _this116 = this;\n\n          var o = this._zoomIn.touchend(e, t, i),\n              a = this._zoomOut.touchend(e, t, i);\n\n          return o ? (this._active = !0, e.preventDefault(), setTimeout(function () {\n            return _this116.reset();\n          }, 0), {\n            cameraAnimation: function cameraAnimation(t) {\n              return t.easeTo({\n                duration: 300,\n                zoom: t.getZoom() + 1,\n                around: t.unproject(o)\n              }, {\n                originalEvent: e\n              });\n            }\n          }) : a ? (this._active = !0, e.preventDefault(), setTimeout(function () {\n            return _this116.reset();\n          }, 0), {\n            cameraAnimation: function cameraAnimation(t) {\n              return t.easeTo({\n                duration: 300,\n                zoom: t.getZoom() - 1,\n                around: t.unproject(a)\n              }, {\n                originalEvent: e\n              });\n            }\n          }) : void 0;\n        }\n      }, {\n        key: \"touchcancel\",\n        value: function touchcancel() {\n          this.reset();\n        }\n      }, {\n        key: \"enable\",\n        value: function enable() {\n          this._enabled = !0;\n        }\n      }, {\n        key: \"disable\",\n        value: function disable() {\n          this._enabled = !1, this.reset();\n        }\n      }, {\n        key: \"isEnabled\",\n        value: function isEnabled() {\n          return this._enabled;\n        }\n      }, {\n        key: \"isActive\",\n        value: function isActive() {\n          return this._active;\n        }\n      }]);\n\n      return po;\n    }();\n\n    var fo = {\n      0: 1,\n      2: 2\n    };\n\n    var go = /*#__PURE__*/function () {\n      function go(e) {\n        _classCallCheck(this, go);\n\n        this.reset(), this._clickTolerance = e.clickTolerance || 1;\n      }\n\n      _createClass(go, [{\n        key: \"reset\",\n        value: function reset() {\n          this._active = !1, this._moved = !1, delete this._lastPoint, delete this._eventButton;\n        }\n      }, {\n        key: \"_correctButton\",\n        value: function _correctButton(e, t) {\n          return !1;\n        }\n      }, {\n        key: \"_move\",\n        value: function _move(e, t) {\n          return {};\n        }\n      }, {\n        key: \"mousedown\",\n        value: function mousedown(e, t) {\n          if (this._lastPoint) return;\n          var i = a.mouseButton(e);\n          this._correctButton(e, i) && (this._lastPoint = t, this._eventButton = i);\n        }\n      }, {\n        key: \"mousemoveWindow\",\n        value: function mousemoveWindow(e, t) {\n          var i = this._lastPoint;\n          if (i) if (e.preventDefault(), function (e, t) {\n            var i = fo[t];\n            return void 0 === e.buttons || (e.buttons & i) !== i;\n          }(e, this._eventButton)) this.reset();else if (this._moved || !(t.dist(i) < this._clickTolerance)) return this._moved = !0, this._lastPoint = t, this._move(i, t);\n        }\n      }, {\n        key: \"mouseupWindow\",\n        value: function mouseupWindow(e) {\n          this._lastPoint && a.mouseButton(e) === this._eventButton && (this._moved && a.suppressClick(), this.reset());\n        }\n      }, {\n        key: \"enable\",\n        value: function enable() {\n          this._enabled = !0;\n        }\n      }, {\n        key: \"disable\",\n        value: function disable() {\n          this._enabled = !1, this.reset();\n        }\n      }, {\n        key: \"isEnabled\",\n        value: function isEnabled() {\n          return this._enabled;\n        }\n      }, {\n        key: \"isActive\",\n        value: function isActive() {\n          return this._active;\n        }\n      }]);\n\n      return go;\n    }();\n\n    var vo = /*#__PURE__*/function (_go) {\n      _inherits(vo, _go);\n\n      var _super119 = _createSuper(vo);\n\n      function vo() {\n        _classCallCheck(this, vo);\n\n        return _super119.apply(this, arguments);\n      }\n\n      _createClass(vo, [{\n        key: \"mousedown\",\n        value: function mousedown(e, t) {\n          _get(_getPrototypeOf(vo.prototype), \"mousedown\", this).call(this, e, t), this._lastPoint && (this._active = !0);\n        }\n      }, {\n        key: \"_correctButton\",\n        value: function _correctButton(e, t) {\n          return 0 === t && !e.ctrlKey;\n        }\n      }, {\n        key: \"_move\",\n        value: function _move(e, t) {\n          return {\n            around: t,\n            panDelta: t.sub(e)\n          };\n        }\n      }]);\n\n      return vo;\n    }(go);\n\n    var xo = /*#__PURE__*/function (_go2) {\n      _inherits(xo, _go2);\n\n      var _super120 = _createSuper(xo);\n\n      function xo() {\n        _classCallCheck(this, xo);\n\n        return _super120.apply(this, arguments);\n      }\n\n      _createClass(xo, [{\n        key: \"_correctButton\",\n        value: function _correctButton(e, t) {\n          return 0 === t && e.ctrlKey || 2 === t;\n        }\n      }, {\n        key: \"_move\",\n        value: function _move(e, t) {\n          var i = .8 * (t.x - e.x);\n          if (i) return this._active = !0, {\n            bearingDelta: i\n          };\n        }\n      }, {\n        key: \"contextmenu\",\n        value: function contextmenu(e) {\n          e.preventDefault();\n        }\n      }]);\n\n      return xo;\n    }(go);\n\n    var yo = /*#__PURE__*/function (_go3) {\n      _inherits(yo, _go3);\n\n      var _super121 = _createSuper(yo);\n\n      function yo() {\n        _classCallCheck(this, yo);\n\n        return _super121.apply(this, arguments);\n      }\n\n      _createClass(yo, [{\n        key: \"_correctButton\",\n        value: function _correctButton(e, t) {\n          return 0 === t && e.ctrlKey || 2 === t;\n        }\n      }, {\n        key: \"_move\",\n        value: function _move(e, t) {\n          var i = -.5 * (t.y - e.y);\n          if (i) return this._active = !0, {\n            pitchDelta: i\n          };\n        }\n      }, {\n        key: \"contextmenu\",\n        value: function contextmenu(e) {\n          e.preventDefault();\n        }\n      }]);\n\n      return yo;\n    }(go);\n\n    var bo = /*#__PURE__*/function () {\n      function bo(e) {\n        _classCallCheck(this, bo);\n\n        this._minTouches = 1, this._clickTolerance = e.clickTolerance || 1, this.reset();\n      }\n\n      _createClass(bo, [{\n        key: \"reset\",\n        value: function reset() {\n          this._active = !1, this._touches = {}, this._sum = new e.Point(0, 0);\n        }\n      }, {\n        key: \"touchstart\",\n        value: function touchstart(e, t, i) {\n          return this._calculateTransform(e, t, i);\n        }\n      }, {\n        key: \"touchmove\",\n        value: function touchmove(e, t, i) {\n          if (this._active && !(i.length < this._minTouches)) return e.preventDefault(), this._calculateTransform(e, t, i);\n        }\n      }, {\n        key: \"touchend\",\n        value: function touchend(e, t, i) {\n          this._calculateTransform(e, t, i), this._active && i.length < this._minTouches && this.reset();\n        }\n      }, {\n        key: \"touchcancel\",\n        value: function touchcancel() {\n          this.reset();\n        }\n      }, {\n        key: \"_calculateTransform\",\n        value: function _calculateTransform(t, i, o) {\n          o.length > 0 && (this._active = !0);\n          var a = uo(o, i),\n              r = new e.Point(0, 0),\n              n = new e.Point(0, 0);\n          var s = 0;\n\n          for (var _e383 in a) {\n            var _t356 = a[_e383],\n                _i273 = this._touches[_e383];\n            _i273 && (r._add(_t356), n._add(_t356.sub(_i273)), s++, a[_e383] = _t356);\n          }\n\n          if (this._touches = a, s < this._minTouches || !n.mag()) return;\n          var l = n.div(s);\n          return this._sum._add(l), this._sum.mag() < this._clickTolerance ? void 0 : {\n            around: r.div(s),\n            panDelta: l\n          };\n        }\n      }, {\n        key: \"enable\",\n        value: function enable() {\n          this._enabled = !0;\n        }\n      }, {\n        key: \"disable\",\n        value: function disable() {\n          this._enabled = !1, this.reset();\n        }\n      }, {\n        key: \"isEnabled\",\n        value: function isEnabled() {\n          return this._enabled;\n        }\n      }, {\n        key: \"isActive\",\n        value: function isActive() {\n          return this._active;\n        }\n      }]);\n\n      return bo;\n    }();\n\n    var wo = /*#__PURE__*/function () {\n      function wo() {\n        _classCallCheck(this, wo);\n\n        this.reset();\n      }\n\n      _createClass(wo, [{\n        key: \"reset\",\n        value: function reset() {\n          this._active = !1, delete this._firstTwoTouches;\n        }\n      }, {\n        key: \"_start\",\n        value: function _start(e) {}\n      }, {\n        key: \"_move\",\n        value: function _move(e, t, i) {\n          return {};\n        }\n      }, {\n        key: \"touchstart\",\n        value: function touchstart(e, t, i) {\n          this._firstTwoTouches || i.length < 2 || (this._firstTwoTouches = [i[0].identifier, i[1].identifier], this._start([t[0], t[1]]));\n        }\n      }, {\n        key: \"touchmove\",\n        value: function touchmove(e, t, i) {\n          if (!this._firstTwoTouches) return;\n          e.preventDefault();\n\n          var _this$_firstTwoTouche = _slicedToArray(this._firstTwoTouches, 2),\n              o = _this$_firstTwoTouche[0],\n              a = _this$_firstTwoTouche[1],\n              r = To(i, t, o),\n              n = To(i, t, a);\n\n          if (!r || !n) return;\n          var s = this._aroundCenter ? null : r.add(n).div(2);\n          return this._move([r, n], s, e);\n        }\n      }, {\n        key: \"touchend\",\n        value: function touchend(e, t, i) {\n          if (!this._firstTwoTouches) return;\n\n          var _this$_firstTwoTouche2 = _slicedToArray(this._firstTwoTouches, 2),\n              o = _this$_firstTwoTouche2[0],\n              r = _this$_firstTwoTouche2[1],\n              n = To(i, t, o),\n              s = To(i, t, r);\n\n          n && s || (this._active && a.suppressClick(), this.reset());\n        }\n      }, {\n        key: \"touchcancel\",\n        value: function touchcancel() {\n          this.reset();\n        }\n      }, {\n        key: \"enable\",\n        value: function enable(e) {\n          this._enabled = !0, this._aroundCenter = !!e && \"center\" === e.around;\n        }\n      }, {\n        key: \"disable\",\n        value: function disable() {\n          this._enabled = !1, this.reset();\n        }\n      }, {\n        key: \"isEnabled\",\n        value: function isEnabled() {\n          return this._enabled;\n        }\n      }, {\n        key: \"isActive\",\n        value: function isActive() {\n          return this._active;\n        }\n      }]);\n\n      return wo;\n    }();\n\n    function To(e, t, i) {\n      for (var _o115 = 0; _o115 < e.length; _o115++) {\n        if (e[_o115].identifier === i) return t[_o115];\n      }\n    }\n\n    function Eo(e, t) {\n      return Math.log(e / t) / Math.LN2;\n    }\n\n    var Co = /*#__PURE__*/function (_wo) {\n      _inherits(Co, _wo);\n\n      var _super122 = _createSuper(Co);\n\n      function Co() {\n        _classCallCheck(this, Co);\n\n        return _super122.apply(this, arguments);\n      }\n\n      _createClass(Co, [{\n        key: \"reset\",\n        value: function reset() {\n          _get(_getPrototypeOf(Co.prototype), \"reset\", this).call(this), delete this._distance, delete this._startDistance;\n        }\n      }, {\n        key: \"_start\",\n        value: function _start(e) {\n          this._startDistance = this._distance = e[0].dist(e[1]);\n        }\n      }, {\n        key: \"_move\",\n        value: function _move(e, t) {\n          var i = this._distance;\n          if (this._distance = e[0].dist(e[1]), this._active || !(Math.abs(Eo(this._distance, this._startDistance)) < .1)) return this._active = !0, {\n            zoomDelta: Eo(this._distance, i),\n            pinchAround: t\n          };\n        }\n      }]);\n\n      return Co;\n    }(wo);\n\n    function So(e, t) {\n      return 180 * e.angleWith(t) / Math.PI;\n    }\n\n    var Io = /*#__PURE__*/function (_wo2) {\n      _inherits(Io, _wo2);\n\n      var _super123 = _createSuper(Io);\n\n      function Io() {\n        _classCallCheck(this, Io);\n\n        return _super123.apply(this, arguments);\n      }\n\n      _createClass(Io, [{\n        key: \"reset\",\n        value: function reset() {\n          _get(_getPrototypeOf(Io.prototype), \"reset\", this).call(this), delete this._minDiameter, delete this._startVector, delete this._vector;\n        }\n      }, {\n        key: \"_start\",\n        value: function _start(e) {\n          this._startVector = this._vector = e[0].sub(e[1]), this._minDiameter = e[0].dist(e[1]);\n        }\n      }, {\n        key: \"_move\",\n        value: function _move(e, t) {\n          var i = this._vector;\n          if (this._vector = e[0].sub(e[1]), this._active || !this._isBelowThreshold(this._vector)) return this._active = !0, {\n            bearingDelta: So(this._vector, i),\n            pinchAround: t\n          };\n        }\n      }, {\n        key: \"_isBelowThreshold\",\n        value: function _isBelowThreshold(e) {\n          this._minDiameter = Math.min(this._minDiameter, e.mag());\n          var t = 25 / (Math.PI * this._minDiameter) * 360,\n              i = So(e, this._startVector);\n          return Math.abs(i) < t;\n        }\n      }]);\n\n      return Io;\n    }(wo);\n\n    function Po(e) {\n      return Math.abs(e.y) > Math.abs(e.x);\n    }\n\n    var Mo = /*#__PURE__*/function (_wo3) {\n      _inherits(Mo, _wo3);\n\n      var _super124 = _createSuper(Mo);\n\n      function Mo() {\n        _classCallCheck(this, Mo);\n\n        return _super124.apply(this, arguments);\n      }\n\n      _createClass(Mo, [{\n        key: \"reset\",\n        value: function reset() {\n          _get(_getPrototypeOf(Mo.prototype), \"reset\", this).call(this), this._valid = void 0, delete this._firstMove, delete this._lastPoints;\n        }\n      }, {\n        key: \"_start\",\n        value: function _start(e) {\n          this._lastPoints = e, Po(e[0].sub(e[1])) && (this._valid = !1);\n        }\n      }, {\n        key: \"_move\",\n        value: function _move(e, t, i) {\n          var o = e[0].sub(this._lastPoints[0]),\n              a = e[1].sub(this._lastPoints[1]);\n          if (this._valid = this.gestureBeginsVertically(o, a, i.timeStamp), this._valid) return this._lastPoints = e, this._active = !0, {\n            pitchDelta: (o.y + a.y) / 2 * -.5\n          };\n        }\n      }, {\n        key: \"gestureBeginsVertically\",\n        value: function gestureBeginsVertically(e, t, i) {\n          if (void 0 !== this._valid) return this._valid;\n          var o = e.mag() >= 2,\n              a = t.mag() >= 2;\n          if (!o && !a) return;\n          if (!o || !a) return void 0 === this._firstMove && (this._firstMove = i), i - this._firstMove < 100 && void 0;\n          var r = e.y > 0 == t.y > 0;\n          return Po(e) && Po(t) && r;\n        }\n      }]);\n\n      return Mo;\n    }(wo);\n\n    var zo = {\n      panStep: 100,\n      bearingStep: 15,\n      pitchStep: 10\n    };\n\n    var Ao = /*#__PURE__*/function () {\n      function Ao() {\n        _classCallCheck(this, Ao);\n\n        var e = zo;\n        this._panStep = e.panStep, this._bearingStep = e.bearingStep, this._pitchStep = e.pitchStep, this._rotationDisabled = !1;\n      }\n\n      _createClass(Ao, [{\n        key: \"reset\",\n        value: function reset() {\n          this._active = !1;\n        }\n      }, {\n        key: \"keydown\",\n        value: function keydown(e) {\n          var _this117 = this;\n\n          if (e.altKey || e.ctrlKey || e.metaKey) return;\n          var t = 0,\n              i = 0,\n              o = 0,\n              a = 0,\n              r = 0;\n\n          switch (e.keyCode) {\n            case 61:\n            case 107:\n            case 171:\n            case 187:\n              t = 1;\n              break;\n\n            case 189:\n            case 109:\n            case 173:\n              t = -1;\n              break;\n\n            case 37:\n              e.shiftKey ? i = -1 : (e.preventDefault(), a = -1);\n              break;\n\n            case 39:\n              e.shiftKey ? i = 1 : (e.preventDefault(), a = 1);\n              break;\n\n            case 38:\n              e.shiftKey ? o = 1 : (e.preventDefault(), r = -1);\n              break;\n\n            case 40:\n              e.shiftKey ? o = -1 : (e.preventDefault(), r = 1);\n              break;\n\n            default:\n              return;\n          }\n\n          return this._rotationDisabled && (i = 0, o = 0), {\n            cameraAnimation: function cameraAnimation(n) {\n              var s = n.getZoom();\n              n.easeTo({\n                duration: 300,\n                easeId: \"keyboardHandler\",\n                easing: Do,\n                zoom: t ? Math.round(s) + t * (e.shiftKey ? 2 : 1) : s,\n                bearing: n.getBearing() + i * _this117._bearingStep,\n                pitch: n.getPitch() + o * _this117._pitchStep,\n                offset: [-a * _this117._panStep, -r * _this117._panStep],\n                center: n.getCenter()\n              }, {\n                originalEvent: e\n              });\n            }\n          };\n        }\n      }, {\n        key: \"enable\",\n        value: function enable() {\n          this._enabled = !0;\n        }\n      }, {\n        key: \"disable\",\n        value: function disable() {\n          this._enabled = !1, this.reset();\n        }\n      }, {\n        key: \"isEnabled\",\n        value: function isEnabled() {\n          return this._enabled;\n        }\n      }, {\n        key: \"isActive\",\n        value: function isActive() {\n          return this._active;\n        }\n      }, {\n        key: \"disableRotation\",\n        value: function disableRotation() {\n          this._rotationDisabled = !0;\n        }\n      }, {\n        key: \"enableRotation\",\n        value: function enableRotation() {\n          this._rotationDisabled = !1;\n        }\n      }]);\n\n      return Ao;\n    }();\n\n    function Do(e) {\n      return e * (2 - e);\n    }\n\n    var Lo = /*#__PURE__*/function () {\n      function Lo(t, i) {\n        _classCallCheck(this, Lo);\n\n        this._map = t, this._el = t.getCanvasContainer(), this._handler = i, this._delta = 0, this._defaultZoomRate = .01, this._wheelZoomRate = 1 / 450, e.bindAll([\"_onTimeout\"], this);\n      }\n\n      _createClass(Lo, [{\n        key: \"setZoomRate\",\n        value: function setZoomRate(e) {\n          this._defaultZoomRate = e;\n        }\n      }, {\n        key: \"setWheelZoomRate\",\n        value: function setWheelZoomRate(e) {\n          this._wheelZoomRate = e;\n        }\n      }, {\n        key: \"isEnabled\",\n        value: function isEnabled() {\n          return !!this._enabled;\n        }\n      }, {\n        key: \"isActive\",\n        value: function isActive() {\n          return !!this._active || void 0 !== this._finishTimeout;\n        }\n      }, {\n        key: \"isZooming\",\n        value: function isZooming() {\n          return !!this._zooming;\n        }\n      }, {\n        key: \"enable\",\n        value: function enable(e) {\n          this.isEnabled() || (this._enabled = !0, this._aroundCenter = e && \"center\" === e.around);\n        }\n      }, {\n        key: \"disable\",\n        value: function disable() {\n          this.isEnabled() && (this._enabled = !1);\n        }\n      }, {\n        key: \"wheel\",\n        value: function wheel(t) {\n          if (!this.isEnabled()) return;\n          var i = t.deltaMode === e.window.WheelEvent.DOM_DELTA_LINE ? 40 * t.deltaY : t.deltaY;\n          var o = e.browser.now(),\n              a = o - (this._lastWheelEventTime || 0);\n          this._lastWheelEventTime = o, 0 !== i && i % 4.000244140625 == 0 ? this._type = \"wheel\" : 0 !== i && Math.abs(i) < 4 ? this._type = \"trackpad\" : a > 400 ? (this._type = null, this._lastValue = i, this._timeout = setTimeout(this._onTimeout, 40, t)) : this._type || (this._type = Math.abs(a * i) < 200 ? \"trackpad\" : \"wheel\", this._timeout && (clearTimeout(this._timeout), this._timeout = null, i += this._lastValue)), t.shiftKey && i && (i /= 4), this._type && (this._lastWheelEvent = t, this._delta -= i, this._active || this._start(t)), t.preventDefault();\n        }\n      }, {\n        key: \"_onTimeout\",\n        value: function _onTimeout(e) {\n          this._type = \"wheel\", this._delta -= this._lastValue, this._active || this._start(e);\n        }\n      }, {\n        key: \"_start\",\n        value: function _start(e) {\n          if (!this._delta) return;\n          this._frameId && (this._frameId = null), this._active = !0, this.isZooming() || (this._zooming = !0), this._finishTimeout && (clearTimeout(this._finishTimeout), delete this._finishTimeout);\n          var t = a.mousePos(this._el, e);\n          this._aroundPoint = this._aroundCenter ? this._map.transform.centerPoint : t, this._aroundCoord = this._map.transform.pointCoordinate3D(this._aroundPoint), this._targetZoom = void 0, this._frameId || (this._frameId = !0, this._handler._triggerRenderFrame());\n        }\n      }, {\n        key: \"renderFrame\",\n        value: function renderFrame() {\n          var _this118 = this;\n\n          if (!this._frameId) return;\n          if (this._frameId = null, !this.isActive()) return;\n\n          var t = this._map.transform,\n              i = function i() {\n            return t._terrainEnabled() ? t.computeZoomRelativeTo(_this118._aroundCoord) : t.zoom;\n          };\n\n          if (0 !== this._delta) {\n            var _e384 = \"wheel\" === this._type && Math.abs(this._delta) > 4.000244140625 ? this._wheelZoomRate : this._defaultZoomRate;\n\n            var _o116 = 2 / (1 + Math.exp(-Math.abs(this._delta * _e384)));\n\n            this._delta < 0 && 0 !== _o116 && (_o116 = 1 / _o116);\n\n            var _a150 = i(),\n                _r252 = Math.pow(2, _a150),\n                _n162 = \"number\" == typeof this._targetZoom ? t.zoomScale(this._targetZoom) : _r252;\n\n            this._targetZoom = Math.min(t.maxZoom, Math.max(t.minZoom, t.scaleZoom(_n162 * _o116))), \"wheel\" === this._type && (this._startZoom = i(), this._easing = this._smoothOutEasing(200)), this._delta = 0;\n          }\n\n          var o = \"number\" == typeof this._targetZoom ? this._targetZoom : i(),\n              a = this._startZoom,\n              r = this._easing;\n          var n,\n              s = !1;\n\n          if (\"wheel\" === this._type && a && r) {\n            var _t357 = Math.min((e.browser.now() - this._lastWheelEventTime) / 200, 1),\n                _i274 = r(_t357);\n\n            n = e.number(a, o, _i274), _t357 < 1 ? this._frameId || (this._frameId = !0) : s = !0;\n          } else n = o, s = !0;\n\n          return this._active = !0, s && (this._active = !1, this._finishTimeout = setTimeout(function () {\n            _this118._zooming = !1, _this118._handler._triggerRenderFrame(), delete _this118._targetZoom, delete _this118._finishTimeout;\n          }, 200)), {\n            noInertia: !0,\n            needsRenderFrame: !s,\n            zoomDelta: n - i(),\n            around: this._aroundPoint,\n            aroundCoord: this._aroundCoord,\n            originalEvent: this._lastWheelEvent\n          };\n        }\n      }, {\n        key: \"_smoothOutEasing\",\n        value: function _smoothOutEasing(t) {\n          var i = e.ease;\n\n          if (this._prevEase) {\n            var _t358 = this._prevEase,\n                _o117 = (e.browser.now() - _t358.start) / _t358.duration,\n                _a151 = _t358.easing(_o117 + .01) - _t358.easing(_o117),\n                _r253 = .27 / Math.sqrt(_a151 * _a151 + 1e-4) * .01,\n                _n163 = Math.sqrt(.0729 - _r253 * _r253);\n\n            i = e.bezier(_r253, _n163, .25, 1);\n          }\n\n          return this._prevEase = {\n            start: e.browser.now(),\n            duration: t,\n            easing: i\n          }, i;\n        }\n      }, {\n        key: \"reset\",\n        value: function reset() {\n          this._active = !1;\n        }\n      }]);\n\n      return Lo;\n    }();\n\n    var Ro = /*#__PURE__*/function () {\n      function Ro(e, t) {\n        _classCallCheck(this, Ro);\n\n        this._clickZoom = e, this._tapZoom = t;\n      }\n\n      _createClass(Ro, [{\n        key: \"enable\",\n        value: function enable() {\n          this._clickZoom.enable(), this._tapZoom.enable();\n        }\n      }, {\n        key: \"disable\",\n        value: function disable() {\n          this._clickZoom.disable(), this._tapZoom.disable();\n        }\n      }, {\n        key: \"isEnabled\",\n        value: function isEnabled() {\n          return this._clickZoom.isEnabled() && this._tapZoom.isEnabled();\n        }\n      }, {\n        key: \"isActive\",\n        value: function isActive() {\n          return this._clickZoom.isActive() || this._tapZoom.isActive();\n        }\n      }]);\n\n      return Ro;\n    }();\n\n    var ko = /*#__PURE__*/function () {\n      function ko() {\n        _classCallCheck(this, ko);\n\n        this.reset();\n      }\n\n      _createClass(ko, [{\n        key: \"reset\",\n        value: function reset() {\n          this._active = !1;\n        }\n      }, {\n        key: \"dblclick\",\n        value: function dblclick(e, t) {\n          return e.preventDefault(), {\n            cameraAnimation: function cameraAnimation(i) {\n              i.easeTo({\n                duration: 300,\n                zoom: i.getZoom() + (e.shiftKey ? -1 : 1),\n                around: i.unproject(t)\n              }, {\n                originalEvent: e\n              });\n            }\n          };\n        }\n      }, {\n        key: \"enable\",\n        value: function enable() {\n          this._enabled = !0;\n        }\n      }, {\n        key: \"disable\",\n        value: function disable() {\n          this._enabled = !1, this.reset();\n        }\n      }, {\n        key: \"isEnabled\",\n        value: function isEnabled() {\n          return this._enabled;\n        }\n      }, {\n        key: \"isActive\",\n        value: function isActive() {\n          return this._active;\n        }\n      }]);\n\n      return ko;\n    }();\n\n    var Bo = /*#__PURE__*/function () {\n      function Bo() {\n        _classCallCheck(this, Bo);\n\n        this._tap = new mo({\n          numTouches: 1,\n          numTaps: 1\n        }), this.reset();\n      }\n\n      _createClass(Bo, [{\n        key: \"reset\",\n        value: function reset() {\n          this._active = !1, delete this._swipePoint, delete this._swipeTouch, delete this._tapTime, this._tap.reset();\n        }\n      }, {\n        key: \"touchstart\",\n        value: function touchstart(e, t, i) {\n          this._swipePoint || (this._tapTime && e.timeStamp - this._tapTime > 500 && this.reset(), this._tapTime ? i.length > 0 && (this._swipePoint = t[0], this._swipeTouch = i[0].identifier) : this._tap.touchstart(e, t, i));\n        }\n      }, {\n        key: \"touchmove\",\n        value: function touchmove(e, t, i) {\n          if (this._tapTime) {\n            if (this._swipePoint) {\n              if (i[0].identifier !== this._swipeTouch) return;\n\n              var _o118 = t[0],\n                  _a152 = _o118.y - this._swipePoint.y;\n\n              return this._swipePoint = _o118, e.preventDefault(), this._active = !0, {\n                zoomDelta: _a152 / 128\n              };\n            }\n          } else this._tap.touchmove(e, t, i);\n        }\n      }, {\n        key: \"touchend\",\n        value: function touchend(e, t, i) {\n          this._tapTime ? this._swipePoint && 0 === i.length && this.reset() : this._tap.touchend(e, t, i) && (this._tapTime = e.timeStamp);\n        }\n      }, {\n        key: \"touchcancel\",\n        value: function touchcancel() {\n          this.reset();\n        }\n      }, {\n        key: \"enable\",\n        value: function enable() {\n          this._enabled = !0;\n        }\n      }, {\n        key: \"disable\",\n        value: function disable() {\n          this._enabled = !1, this.reset();\n        }\n      }, {\n        key: \"isEnabled\",\n        value: function isEnabled() {\n          return this._enabled;\n        }\n      }, {\n        key: \"isActive\",\n        value: function isActive() {\n          return this._active;\n        }\n      }]);\n\n      return Bo;\n    }();\n\n    var Fo = /*#__PURE__*/function () {\n      function Fo(e, t, i) {\n        _classCallCheck(this, Fo);\n\n        this._el = e, this._mousePan = t, this._touchPan = i;\n      }\n\n      _createClass(Fo, [{\n        key: \"enable\",\n        value: function enable(e) {\n          this._inertiaOptions = e || {}, this._mousePan.enable(), this._touchPan.enable(), this._el.classList.add(\"mapboxgl-touch-drag-pan\");\n        }\n      }, {\n        key: \"disable\",\n        value: function disable() {\n          this._mousePan.disable(), this._touchPan.disable(), this._el.classList.remove(\"mapboxgl-touch-drag-pan\");\n        }\n      }, {\n        key: \"isEnabled\",\n        value: function isEnabled() {\n          return this._mousePan.isEnabled() && this._touchPan.isEnabled();\n        }\n      }, {\n        key: \"isActive\",\n        value: function isActive() {\n          return this._mousePan.isActive() || this._touchPan.isActive();\n        }\n      }]);\n\n      return Fo;\n    }();\n\n    var Oo = /*#__PURE__*/function () {\n      function Oo(e, t, i) {\n        _classCallCheck(this, Oo);\n\n        this._pitchWithRotate = e.pitchWithRotate, this._mouseRotate = t, this._mousePitch = i;\n      }\n\n      _createClass(Oo, [{\n        key: \"enable\",\n        value: function enable() {\n          this._mouseRotate.enable(), this._pitchWithRotate && this._mousePitch.enable();\n        }\n      }, {\n        key: \"disable\",\n        value: function disable() {\n          this._mouseRotate.disable(), this._mousePitch.disable();\n        }\n      }, {\n        key: \"isEnabled\",\n        value: function isEnabled() {\n          return this._mouseRotate.isEnabled() && (!this._pitchWithRotate || this._mousePitch.isEnabled());\n        }\n      }, {\n        key: \"isActive\",\n        value: function isActive() {\n          return this._mouseRotate.isActive() || this._mousePitch.isActive();\n        }\n      }]);\n\n      return Oo;\n    }();\n\n    var Uo = /*#__PURE__*/function () {\n      function Uo(e, t, i, o) {\n        _classCallCheck(this, Uo);\n\n        this._el = e, this._touchZoom = t, this._touchRotate = i, this._tapDragZoom = o, this._rotationDisabled = !1, this._enabled = !0;\n      }\n\n      _createClass(Uo, [{\n        key: \"enable\",\n        value: function enable(e) {\n          this._touchZoom.enable(e), this._rotationDisabled || this._touchRotate.enable(e), this._tapDragZoom.enable(), this._el.classList.add(\"mapboxgl-touch-zoom-rotate\");\n        }\n      }, {\n        key: \"disable\",\n        value: function disable() {\n          this._touchZoom.disable(), this._touchRotate.disable(), this._tapDragZoom.disable(), this._el.classList.remove(\"mapboxgl-touch-zoom-rotate\");\n        }\n      }, {\n        key: \"isEnabled\",\n        value: function isEnabled() {\n          return this._touchZoom.isEnabled() && (this._rotationDisabled || this._touchRotate.isEnabled()) && this._tapDragZoom.isEnabled();\n        }\n      }, {\n        key: \"isActive\",\n        value: function isActive() {\n          return this._touchZoom.isActive() || this._touchRotate.isActive() || this._tapDragZoom.isActive();\n        }\n      }, {\n        key: \"disableRotation\",\n        value: function disableRotation() {\n          this._rotationDisabled = !0, this._touchRotate.disable();\n        }\n      }, {\n        key: \"enableRotation\",\n        value: function enableRotation() {\n          this._rotationDisabled = !1, this._touchZoom.isEnabled() && this._touchRotate.enable();\n        }\n      }]);\n\n      return Uo;\n    }();\n\n    var No = function No(e) {\n      return e.zoom || e.drag || e.pitch || e.rotate;\n    };\n\n    var Zo = /*#__PURE__*/function (_e$Event4) {\n      _inherits(Zo, _e$Event4);\n\n      var _super125 = _createSuper(Zo);\n\n      function Zo() {\n        _classCallCheck(this, Zo);\n\n        return _super125.apply(this, arguments);\n      }\n\n      return Zo;\n    }(e.Event);\n\n    var Go = /*#__PURE__*/function () {\n      function Go() {\n        _classCallCheck(this, Go);\n\n        this.constants = [1, 1, .01], this.radius = 0;\n      }\n\n      _createClass(Go, [{\n        key: \"setup\",\n        value: function setup(t, i) {\n          var o = e.sub([], i, t);\n          this.radius = e.length(o[2] < 0 ? e.div([], o, this.constants) : [o[0], o[1], 0]);\n        }\n      }, {\n        key: \"projectRay\",\n        value: function projectRay(t) {\n          e.div(t, t, this.constants), e.normalize(t, t), e.mul$1(t, t, this.constants);\n          var i = e.scale$2([], t, this.radius);\n\n          if (i[2] > 0) {\n            var _t359 = e.scale$2([], [0, 0, 1], e.dot(i, [0, 0, 1])),\n                _o119 = e.scale$2([], e.normalize([], [i[0], i[1], 0]), this.radius),\n                _a153 = e.add([], i, e.scale$2([], e.sub([], e.add([], _o119, _t359), i), 2));\n\n            i[0] = _a153[0], i[1] = _a153[1];\n          }\n\n          return i;\n        }\n      }]);\n\n      return Go;\n    }();\n\n    function Vo(e) {\n      return e.panDelta && e.panDelta.mag() || e.zoomDelta || e.bearingDelta || e.pitchDelta;\n    }\n\n    var qo = /*#__PURE__*/function () {\n      function qo(t, i) {\n        _classCallCheck(this, qo);\n\n        this._map = t, this._el = this._map.getCanvasContainer(), this._handlers = [], this._handlersById = {}, this._changes = [], this._inertia = new io(t), this._bearingSnap = i.bearingSnap, this._previousActiveHandlers = {}, this._trackingEllipsoid = new Go(), this._dragOrigin = null, this._eventsInProgress = {}, this._addDefaultHandlers(i), e.bindAll([\"handleEvent\", \"handleWindowEvent\"], this);\n        var o = this._el;\n        this._listeners = [[o, \"touchstart\", {\n          passive: !0\n        }], [o, \"touchmove\", {\n          passive: !1\n        }], [o, \"touchend\", void 0], [o, \"touchcancel\", void 0], [o, \"mousedown\", void 0], [o, \"mousemove\", void 0], [o, \"mouseup\", void 0], [e.window.document, \"mousemove\", {\n          capture: !0\n        }], [e.window.document, \"mouseup\", void 0], [o, \"mouseover\", void 0], [o, \"mouseout\", void 0], [o, \"dblclick\", void 0], [o, \"click\", void 0], [o, \"keydown\", {\n          capture: !1\n        }], [o, \"keyup\", void 0], [o, \"wheel\", {\n          passive: !1\n        }], [o, \"contextmenu\", void 0], [e.window, \"blur\", void 0]];\n\n        var _iterator225 = _createForOfIteratorHelper(this._listeners),\n            _step225;\n\n        try {\n          for (_iterator225.s(); !(_step225 = _iterator225.n()).done;) {\n            var _ref179 = _step225.value;\n\n            var _ref178 = _slicedToArray(_ref179, 3);\n\n            var _t360 = _ref178[0];\n            var _i275 = _ref178[1];\n            var _o120 = _ref178[2];\n            a.addEventListener(_t360, _i275, _t360 === e.window.document ? this.handleWindowEvent : this.handleEvent, _o120);\n          }\n        } catch (err) {\n          _iterator225.e(err);\n        } finally {\n          _iterator225.f();\n        }\n      }\n\n      _createClass(qo, [{\n        key: \"destroy\",\n        value: function destroy() {\n          var _iterator226 = _createForOfIteratorHelper(this._listeners),\n              _step226;\n\n          try {\n            for (_iterator226.s(); !(_step226 = _iterator226.n()).done;) {\n              var _ref182 = _step226.value;\n\n              var _ref181 = _slicedToArray(_ref182, 3);\n\n              var _t361 = _ref181[0];\n              var _i276 = _ref181[1];\n              var _o121 = _ref181[2];\n              a.removeEventListener(_t361, _i276, _t361 === e.window.document ? this.handleWindowEvent : this.handleEvent, _o121);\n            }\n          } catch (err) {\n            _iterator226.e(err);\n          } finally {\n            _iterator226.f();\n          }\n        }\n      }, {\n        key: \"_addDefaultHandlers\",\n        value: function _addDefaultHandlers(e) {\n          var t = this._map,\n              i = t.getCanvasContainer();\n\n          this._add(\"mapEvent\", new lo(t, e));\n\n          var o = t.boxZoom = new ho(t, e);\n\n          this._add(\"boxZoom\", o);\n\n          var a = new po(),\n              r = new ko();\n          t.doubleClickZoom = new Ro(r, a), this._add(\"tapZoom\", a), this._add(\"clickZoom\", r);\n          var n = new Bo();\n\n          this._add(\"tapDragZoom\", n);\n\n          var s = t.touchPitch = new Mo();\n\n          this._add(\"touchPitch\", s);\n\n          var l = new xo(e),\n              c = new yo(e);\n          t.dragRotate = new Oo(e, l, c), this._add(\"mouseRotate\", l, [\"mousePitch\"]), this._add(\"mousePitch\", c, [\"mouseRotate\"]);\n          var h = new vo(e),\n              u = new bo(e);\n          t.dragPan = new Fo(i, h, u), this._add(\"mousePan\", h), this._add(\"touchPan\", u, [\"touchZoom\", \"touchRotate\"]);\n\n          var d = new Io(),\n              _ = new Co();\n\n          t.touchZoomRotate = new Uo(i, _, d, n), this._add(\"touchRotate\", d, [\"touchPan\", \"touchZoom\"]), this._add(\"touchZoom\", _, [\"touchPan\", \"touchRotate\"]), this._add(\"blockableMapEvent\", new co(t));\n          var m = t.scrollZoom = new Lo(t, this);\n\n          this._add(\"scrollZoom\", m, [\"mousePan\"]);\n\n          var p = t.keyboard = new Ao();\n\n          this._add(\"keyboard\", p);\n\n          for (var _i277 = 0, _arr4 = [\"boxZoom\", \"doubleClickZoom\", \"tapDragZoom\", \"touchPitch\", \"dragRotate\", \"dragPan\", \"touchZoomRotate\", \"scrollZoom\", \"keyboard\"]; _i277 < _arr4.length; _i277++) {\n            var _i278 = _arr4[_i277];\n            e.interactive && e[_i278] && t[_i278].enable(e[_i278]);\n          }\n        }\n      }, {\n        key: \"_add\",\n        value: function _add(e, t, i) {\n          this._handlers.push({\n            handlerName: e,\n            handler: t,\n            allowed: i\n          }), this._handlersById[e] = t;\n        }\n      }, {\n        key: \"stop\",\n        value: function stop(e) {\n          if (!this._updatingCamera) {\n            var _iterator227 = _createForOfIteratorHelper(this._handlers),\n                _step227;\n\n            try {\n              for (_iterator227.s(); !(_step227 = _iterator227.n()).done;) {\n                var _ref184 = _step227.value;\n                var _e385 = _ref184.handler;\n\n                _e385.reset();\n              }\n            } catch (err) {\n              _iterator227.e(err);\n            } finally {\n              _iterator227.f();\n            }\n\n            this._inertia.clear(), this._fireEvents({}, {}, e), this._changes = [];\n          }\n        }\n      }, {\n        key: \"isActive\",\n        value: function isActive() {\n          var _iterator228 = _createForOfIteratorHelper(this._handlers),\n              _step228;\n\n          try {\n            for (_iterator228.s(); !(_step228 = _iterator228.n()).done;) {\n              var _ref186 = _step228.value;\n              var _e386 = _ref186.handler;\n              if (_e386.isActive()) return !0;\n            }\n          } catch (err) {\n            _iterator228.e(err);\n          } finally {\n            _iterator228.f();\n          }\n\n          return !1;\n        }\n      }, {\n        key: \"isZooming\",\n        value: function isZooming() {\n          return !!this._eventsInProgress.zoom || this._map.scrollZoom.isZooming();\n        }\n      }, {\n        key: \"isRotating\",\n        value: function isRotating() {\n          return !!this._eventsInProgress.rotate;\n        }\n      }, {\n        key: \"isMoving\",\n        value: function isMoving() {\n          return Boolean(No(this._eventsInProgress)) || this.isZooming();\n        }\n      }, {\n        key: \"_blockedByActive\",\n        value: function _blockedByActive(e, t, i) {\n          for (var _o122 in e) {\n            if (_o122 !== i && (!t || t.indexOf(_o122) < 0)) return !0;\n          }\n\n          return !1;\n        }\n      }, {\n        key: \"handleWindowEvent\",\n        value: function handleWindowEvent(e) {\n          this.handleEvent(e, \"\".concat(e.type, \"Window\"));\n        }\n      }, {\n        key: \"_getMapTouches\",\n        value: function _getMapTouches(e) {\n          var t = [];\n\n          var _iterator229 = _createForOfIteratorHelper(e),\n              _step229;\n\n          try {\n            for (_iterator229.s(); !(_step229 = _iterator229.n()).done;) {\n              var _i279 = _step229.value;\n              this._el.contains(_i279.target) && t.push(_i279);\n            }\n          } catch (err) {\n            _iterator229.e(err);\n          } finally {\n            _iterator229.f();\n          }\n\n          return t;\n        }\n      }, {\n        key: \"handleEvent\",\n        value: function handleEvent(e, t) {\n          if (\"blur\" === e.type) return void this.stop(!0);\n          this._updatingCamera = !0;\n          var i = \"renderFrame\" === e.type ? void 0 : e,\n              o = {\n            needsRenderFrame: !1\n          },\n              r = {},\n              n = {},\n              s = e.touches ? this._getMapTouches(e.touches) : void 0,\n              l = s ? a.touchPos(this._el, s) : a.mousePos(this._el, e);\n\n          var _iterator230 = _createForOfIteratorHelper(this._handlers),\n              _step230;\n\n          try {\n            for (_iterator230.s(); !(_step230 = _iterator230.n()).done;) {\n              var _ref188 = _step230.value;\n              var _a154 = _ref188.handlerName;\n              var _c42 = _ref188.handler;\n              var _h31 = _ref188.allowed;\n              if (!_c42.isEnabled()) continue;\n\n              var _u46 = void 0;\n\n              this._blockedByActive(n, _h31, _a154) ? _c42.reset() : _c42[t || e.type] && (_u46 = _c42[t || e.type](e, l, s), this.mergeHandlerResult(o, r, _u46, _a154, i), _u46 && _u46.needsRenderFrame && this._triggerRenderFrame()), (_u46 || _c42.isActive()) && (n[_a154] = _c42);\n            }\n          } catch (err) {\n            _iterator230.e(err);\n          } finally {\n            _iterator230.f();\n          }\n\n          var c = {};\n\n          for (var _e387 in this._previousActiveHandlers) {\n            n[_e387] || (c[_e387] = i);\n          }\n\n          this._previousActiveHandlers = n, (Object.keys(c).length || Vo(o)) && (this._changes.push([o, r, c]), this._triggerRenderFrame()), (Object.keys(n).length || Vo(o)) && this._map._stop(!0), this._updatingCamera = !1;\n          var h = o.cameraAnimation;\n          h && (this._inertia.clear(), this._fireEvents({}, {}, !0), this._changes = [], h(this._map));\n        }\n      }, {\n        key: \"mergeHandlerResult\",\n        value: function mergeHandlerResult(t, i, o, a, r) {\n          if (!o) return;\n          e.extend(t, o);\n          var n = {\n            handlerName: a,\n            originalEvent: o.originalEvent || r\n          };\n          void 0 !== o.zoomDelta && (i.zoom = n), void 0 !== o.panDelta && (i.drag = n), void 0 !== o.pitchDelta && (i.pitch = n), void 0 !== o.bearingDelta && (i.rotate = n);\n        }\n      }, {\n        key: \"_applyChanges\",\n        value: function _applyChanges() {\n          var t = {},\n              i = {},\n              o = {};\n\n          var _iterator231 = _createForOfIteratorHelper(this._changes),\n              _step231;\n\n          try {\n            for (_iterator231.s(); !(_step231 = _iterator231.n()).done;) {\n              var _ref191 = _step231.value;\n\n              var _ref190 = _slicedToArray(_ref191, 3);\n\n              var _a155 = _ref190[0];\n              var _r254 = _ref190[1];\n              var _n164 = _ref190[2];\n              _a155.panDelta && (t.panDelta = (t.panDelta || new e.Point(0, 0))._add(_a155.panDelta)), _a155.zoomDelta && (t.zoomDelta = (t.zoomDelta || 0) + _a155.zoomDelta), _a155.bearingDelta && (t.bearingDelta = (t.bearingDelta || 0) + _a155.bearingDelta), _a155.pitchDelta && (t.pitchDelta = (t.pitchDelta || 0) + _a155.pitchDelta), void 0 !== _a155.around && (t.around = _a155.around), void 0 !== _a155.aroundCoord && (t.aroundCoord = _a155.aroundCoord), void 0 !== _a155.pinchAround && (t.pinchAround = _a155.pinchAround), _a155.noInertia && (t.noInertia = _a155.noInertia), e.extend(i, _r254), e.extend(o, _n164);\n            }\n          } catch (err) {\n            _iterator231.e(err);\n          } finally {\n            _iterator231.f();\n          }\n\n          this._updateMapTransform(t, i, o), this._changes = [];\n        }\n      }, {\n        key: \"_updateMapTransform\",\n        value: function _updateMapTransform(t, i, o) {\n          var _this119 = this;\n\n          var a = this._map,\n              r = a.transform,\n              n = function n(e) {\n            return [e.x, e.y, e.z];\n          };\n\n          if (function (e) {\n            var t = _this119._eventsInProgress.drag;\n            return t && !_this119._handlersById[t.handlerName].isActive();\n          }() && !Vo(t)) {\n            var _e388 = r.zoom;\n            r.cameraElevationReference = \"sea\", r.recenterOnTerrain(), r.cameraElevationReference = \"ground\", _e388 !== r.zoom && this._map._update(!0);\n          }\n\n          if (!Vo(t)) return this._fireEvents(i, o, !0);\n          var s = t.panDelta,\n              l = t.zoomDelta,\n              c = t.bearingDelta,\n              h = t.pitchDelta,\n              u = t.around,\n              d = t.aroundCoord,\n              _ = t.pinchAround;\n          void 0 !== _ && (u = _), function (e) {\n            return i.drag && !_this119._eventsInProgress.drag;\n          }() && u && (this._dragOrigin = n(r.pointCoordinate3D(u)), this._trackingEllipsoid.setup(r._camera.position, this._dragOrigin)), r.cameraElevationReference = \"sea\", a._stop(!0), u = u || a.transform.centerPoint, c && (r.bearing += c), h && (r.pitch += h), r._updateCameraState();\n          var m = [0, 0, 0];\n\n          if (s) {\n            var _e389 = r.screenPointToMercatorRay(u),\n                _t362 = r.screenPointToMercatorRay(u.sub(s)),\n                _i280 = this._trackingEllipsoid.projectRay(_e389.dir),\n                _o123 = this._trackingEllipsoid.projectRay(_t362.dir);\n\n            m[0] = _o123[0] - _i280[0], m[1] = _o123[1] - _i280[1];\n          }\n\n          var p = r.zoom,\n              f = [0, 0, 0];\n\n          if (l) {\n            var _t363 = n(d || r.pointCoordinate3D(u)),\n                _i281 = {\n              dir: e.normalize([], e.sub([], _t363, r._camera.position))\n            },\n                _o124 = r.screenPointToMercatorRay(r.centerPoint);\n\n            if (_i281.dir[2] < 0) {\n              var _a156 = e.altitudeFromMercatorZ(_t363[2], _t363[1]),\n                  _s125 = r.rayIntersectionCoordinate(r.pointRayIntersection(r.centerPoint, _a156)),\n                  _c43 = r.zoomDeltaToMovement(n(_s125), l) * (_o124.dir[2] / _i281.dir[2]);\n\n              e.scale$2(f, _i281.dir, _c43);\n            } else if (r._terrainEnabled()) {\n              var _o125 = r.zoomDeltaToMovement(_t363, l);\n\n              e.scale$2(f, _i281.dir, _o125);\n            }\n          }\n\n          var g = e.add(m, m, f);\n          r._translateCameraConstrained(g), l && Math.abs(r.zoom - p) > 1e-4 && r.recenterOnTerrain(), r.cameraElevationReference = \"ground\", this._map._update(), t.noInertia || this._inertia.record(t), this._fireEvents(i, o, !0);\n        }\n      }, {\n        key: \"_fireEvents\",\n        value: function _fireEvents(t, i, o) {\n          var _this120 = this;\n\n          var a = No(this._eventsInProgress),\n              r = No(t),\n              n = {};\n\n          for (var _e390 in t) {\n            var _i282 = t[_e390].originalEvent;\n            this._eventsInProgress[_e390] || (n[\"\".concat(_e390, \"start\")] = _i282), this._eventsInProgress[_e390] = t[_e390];\n          }\n\n          !a && r && this._fireEvent(\"movestart\", r.originalEvent);\n\n          for (var _e391 in n) {\n            this._fireEvent(_e391, n[_e391]);\n          }\n\n          r && this._fireEvent(\"move\", r.originalEvent);\n\n          for (var _e392 in t) {\n            var _i283 = t[_e392].originalEvent;\n\n            this._fireEvent(_e392, _i283);\n          }\n\n          var s = {};\n          var l;\n\n          for (var _e393 in this._eventsInProgress) {\n            var _this$_eventsInProgre = this._eventsInProgress[_e393],\n                _t364 = _this$_eventsInProgre.handlerName,\n                _o126 = _this$_eventsInProgre.originalEvent;\n            this._handlersById[_t364].isActive() || (delete this._eventsInProgress[_e393], l = i[_t364] || _o126, s[\"\".concat(_e393, \"end\")] = l);\n          }\n\n          for (var _e394 in s) {\n            this._fireEvent(_e394, s[_e394]);\n          }\n\n          var c = No(this._eventsInProgress);\n\n          if (o && (a || r) && !c) {\n            this._updatingCamera = !0;\n\n            var _t365 = this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),\n                _i284 = function _i284(e) {\n              return 0 !== e && -_this120._bearingSnap < e && e < _this120._bearingSnap;\n            };\n\n            _t365 ? (_i284(_t365.bearing || this._map.getBearing()) && (_t365.bearing = 0), this._map.easeTo(_t365, {\n              originalEvent: l\n            })) : (this._map.fire(new e.Event(\"moveend\", {\n              originalEvent: l\n            })), _i284(this._map.getBearing()) && this._map.resetNorth()), this._updatingCamera = !1;\n          }\n        }\n      }, {\n        key: \"_fireEvent\",\n        value: function _fireEvent(t, i) {\n          this._map.fire(new e.Event(t, i ? {\n            originalEvent: i\n          } : {}));\n        }\n      }, {\n        key: \"_requestFrame\",\n        value: function _requestFrame() {\n          var _this121 = this;\n\n          return this._map.triggerRepaint(), this._map._renderTaskQueue.add(function (e) {\n            delete _this121._frameId, _this121.handleEvent(new Zo(\"renderFrame\", {\n              timeStamp: e\n            })), _this121._applyChanges();\n          });\n        }\n      }, {\n        key: \"_triggerRenderFrame\",\n        value: function _triggerRenderFrame() {\n          void 0 === this._frameId && (this._frameId = this._requestFrame());\n        }\n      }]);\n\n      return qo;\n    }();\n\n    var jo = /*#__PURE__*/function (_e$Evented9) {\n      _inherits(jo, _e$Evented9);\n\n      var _super126 = _createSuper(jo);\n\n      function jo(t, i) {\n        var _this122;\n\n        _classCallCheck(this, jo);\n\n        _this122 = _super126.call(this), _this122._moving = !1, _this122._zooming = !1, _this122.transform = t, _this122._bearingSnap = i.bearingSnap, e.bindAll([\"_renderFrameCallback\"], _assertThisInitialized(_this122));\n        return _this122;\n      }\n\n      _createClass(jo, [{\n        key: \"getCenter\",\n        value: function getCenter() {\n          return new e.LngLat(this.transform.center.lng, this.transform.center.lat);\n        }\n      }, {\n        key: \"setCenter\",\n        value: function setCenter(e, t) {\n          return this.jumpTo({\n            center: e\n          }, t);\n        }\n      }, {\n        key: \"panBy\",\n        value: function panBy(t, i, o) {\n          return t = e.Point.convert(t).mult(-1), this.panTo(this.transform.center, e.extend({\n            offset: t\n          }, i), o);\n        }\n      }, {\n        key: \"panTo\",\n        value: function panTo(t, i, o) {\n          return this.easeTo(e.extend({\n            center: t\n          }, i), o);\n        }\n      }, {\n        key: \"getZoom\",\n        value: function getZoom() {\n          return this.transform.zoom;\n        }\n      }, {\n        key: \"setZoom\",\n        value: function setZoom(e, t) {\n          return this.jumpTo({\n            zoom: e\n          }, t), this;\n        }\n      }, {\n        key: \"zoomTo\",\n        value: function zoomTo(t, i, o) {\n          return this.easeTo(e.extend({\n            zoom: t\n          }, i), o);\n        }\n      }, {\n        key: \"zoomIn\",\n        value: function zoomIn(e, t) {\n          return this.zoomTo(this.getZoom() + 1, e, t), this;\n        }\n      }, {\n        key: \"zoomOut\",\n        value: function zoomOut(e, t) {\n          return this.zoomTo(this.getZoom() - 1, e, t), this;\n        }\n      }, {\n        key: \"getBearing\",\n        value: function getBearing() {\n          return this.transform.bearing;\n        }\n      }, {\n        key: \"setBearing\",\n        value: function setBearing(e, t) {\n          return this.jumpTo({\n            bearing: e\n          }, t), this;\n        }\n      }, {\n        key: \"getPadding\",\n        value: function getPadding() {\n          return this.transform.padding;\n        }\n      }, {\n        key: \"setPadding\",\n        value: function setPadding(e, t) {\n          return this.jumpTo({\n            padding: e\n          }, t), this;\n        }\n      }, {\n        key: \"rotateTo\",\n        value: function rotateTo(t, i, o) {\n          return this.easeTo(e.extend({\n            bearing: t\n          }, i), o);\n        }\n      }, {\n        key: \"resetNorth\",\n        value: function resetNorth(t, i) {\n          return this.rotateTo(0, e.extend({\n            duration: 1e3\n          }, t), i), this;\n        }\n      }, {\n        key: \"resetNorthPitch\",\n        value: function resetNorthPitch(t, i) {\n          return this.easeTo(e.extend({\n            bearing: 0,\n            pitch: 0,\n            duration: 1e3\n          }, t), i), this;\n        }\n      }, {\n        key: \"snapToNorth\",\n        value: function snapToNorth(e, t) {\n          return Math.abs(this.getBearing()) < this._bearingSnap ? this.resetNorth(e, t) : this;\n        }\n      }, {\n        key: \"getPitch\",\n        value: function getPitch() {\n          return this.transform.pitch;\n        }\n      }, {\n        key: \"setPitch\",\n        value: function setPitch(e, t) {\n          return this.jumpTo({\n            pitch: e\n          }, t), this;\n        }\n      }, {\n        key: \"cameraForBounds\",\n        value: function cameraForBounds(t, i) {\n          t = e.LngLatBounds.convert(t);\n          var o = i && i.bearing || 0;\n          return this._cameraForBoxAndBearing(t.getNorthWest(), t.getSouthEast(), o, i);\n        }\n      }, {\n        key: \"_extendCameraOptions\",\n        value: function _extendCameraOptions(t) {\n          var i = {\n            top: 0,\n            bottom: 0,\n            right: 0,\n            left: 0\n          };\n\n          if (\"number\" == typeof (t = e.extend({\n            padding: i,\n            offset: [0, 0],\n            maxZoom: this.transform.maxZoom\n          }, t)).padding) {\n            var _e395 = t.padding;\n            t.padding = {\n              top: _e395,\n              bottom: _e395,\n              right: _e395,\n              left: _e395\n            };\n          }\n\n          return t.padding = e.extend(i, t.padding), t;\n        }\n      }, {\n        key: \"_cameraForBoxAndBearing\",\n        value: function _cameraForBoxAndBearing(t, i, o, a) {\n          var r = this._extendCameraOptions(a),\n              n = this.transform,\n              s = n.padding,\n              l = n.project(e.LngLat.convert(t)),\n              c = n.project(e.LngLat.convert(i)),\n              h = l.rotate(-e.degToRad(o)),\n              u = c.rotate(-e.degToRad(o)),\n              d = new e.Point(Math.max(h.x, u.x), Math.max(h.y, u.y)),\n              _ = new e.Point(Math.min(h.x, u.x), Math.min(h.y, u.y)),\n              m = d.sub(_),\n              p = (n.width - (s.left + s.right + r.padding.left + r.padding.right)) / m.x,\n              f = (n.height - (s.top + s.bottom + r.padding.top + r.padding.bottom)) / m.y;\n\n          if (f < 0 || p < 0) return void e.warnOnce(\"Map cannot fit within canvas with the given bounds, padding, and/or offset.\");\n          var g = Math.min(n.scaleZoom(n.scale * Math.min(p, f)), r.maxZoom),\n              v = \"number\" == typeof r.offset.x ? new e.Point(r.offset.x, r.offset.y) : e.Point.convert(r.offset),\n              x = new e.Point((r.padding.left - r.padding.right) / 2, (r.padding.top - r.padding.bottom) / 2).rotate(o * Math.PI / 180),\n              y = v.add(x).mult(n.scale / n.zoomScale(g));\n          return {\n            center: n.unproject(l.add(c).div(2).sub(y)),\n            zoom: g,\n            bearing: o\n          };\n        }\n      }, {\n        key: \"_cameraForBox\",\n        value: function _cameraForBox(t, i, o, a, r) {\n          var n = this._extendCameraOptions(r);\n\n          o = o || 0, a = a || 0, t = e.LngLat.convert(t), i = e.LngLat.convert(i);\n          var s = this.transform.clone();\n          s.padding = n.padding;\n          var l = this.getFreeCameraOptions(),\n              c = new e.LngLat(.5 * (t.lng + i.lng), .5 * (t.lat + i.lat)),\n              h = .5 * (o + a);\n          if (s._camera.position[2] < e.mercatorZfromAltitude(h, c.lat)) return void e.warnOnce(\"Map cannot fit within canvas with the given bounds, padding, and/or offset.\");\n          l.lookAtPoint(c), s.setFreeCameraOptions(l);\n\n          var u = e.MercatorCoordinate.fromLngLat(t),\n              d = e.MercatorCoordinate.fromLngLat(i),\n              _ = s.pointRayIntersection(s.centerPoint, h),\n              m = [(p = s.rayIntersectionCoordinate(_)).x, p.y, p.z];\n\n          var p;\n          var f = s.screenPointToMercatorRay(s.centerPoint);\n          var g,\n              v = 0;\n\n          do {\n            var _t366 = Math.floor(s.zoom),\n                _i285 = 1 << _t366,\n                _r255 = Math.min(_i285 * u.x, _i285 * d.x),\n                _n165 = Math.min(_i285 * u.y, _i285 * d.y),\n                _l55 = Math.max(_i285 * u.x, _i285 * d.x),\n                _c44 = Math.max(_i285 * u.y, _i285 * d.y),\n                _h32 = new e.Aabb([_r255, _n165, o], [_l55, _c44, a]),\n                _15 = e.Frustum.fromInvProjectionMatrix(s.invProjMatrix, s.worldSize, _t366);\n\n            if (2 !== _h32.intersects(_15)) {\n              g && (s._camera.position = e.scaleAndAdd([], s._camera.position, f.dir, -g), s._updateStateFromCamera());\n              break;\n            }\n\n            var _p24 = e.sub([], s._camera.position, m);\n\n            g = .5 * e.length(_p24), s._camera.position = e.scaleAndAdd([], s._camera.position, f.dir, g);\n\n            try {\n              s._updateStateFromCamera();\n            } catch (t) {\n              return void e.warnOnce(\"Map cannot fit within canvas with the given bounds, padding, and/or offset.\");\n            }\n          } while (++v < 10);\n\n          return {\n            center: s.center,\n            zoom: s.zoom,\n            bearing: s.bearing,\n            pitch: s.pitch\n          };\n        }\n      }, {\n        key: \"fitBounds\",\n        value: function fitBounds(e, t, i) {\n          return this._fitInternal(this.cameraForBounds(e, t), t, i);\n        }\n      }, {\n        key: \"_raycastElevationBox\",\n        value: function _raycastElevationBox(t, i) {\n          var o = this.transform.elevation;\n          if (!o) return;\n          var a = new e.Point(t.x, i.y),\n              r = new e.Point(i.x, t.y),\n              n = o.pointCoordinate(t);\n          if (!n) return;\n          var s = o.pointCoordinate(i);\n          if (!s) return;\n          var l = o.pointCoordinate(a);\n          if (!l) return;\n          var c = o.pointCoordinate(r);\n          if (!c) return;\n\n          var h = new e.MercatorCoordinate(n[0], n[1]).toLngLat(),\n              u = new e.MercatorCoordinate(s[0], s[1]).toLngLat(),\n              d = new e.MercatorCoordinate(l[0], l[1]).toLngLat(),\n              _ = new e.MercatorCoordinate(c[0], c[1]).toLngLat(),\n              m = Math.min(h.lng, Math.min(u.lng, Math.min(d.lng, _.lng))),\n              p = Math.min(h.lat, Math.min(u.lat, Math.min(d.lat, _.lat))),\n              f = Math.max(h.lng, Math.max(u.lng, Math.max(d.lng, _.lng))),\n              g = Math.max(h.lat, Math.max(u.lat, Math.max(d.lat, _.lat))),\n              v = Math.min(n[3], Math.min(s[3], Math.min(l[3], c[3]))),\n              x = Math.max(n[3], Math.max(s[3], Math.max(l[3], c[3])));\n\n          return {\n            minLngLat: new e.LngLat(m, p),\n            maxLngLat: new e.LngLat(f, g),\n            minAltitude: v,\n            maxAltitude: x\n          };\n        }\n      }, {\n        key: \"fitScreenCoordinates\",\n        value: function fitScreenCoordinates(t, i, o, a, r) {\n          var n, s, l, c;\n\n          var h = e.Point.convert(t),\n              u = e.Point.convert(i),\n              d = this._raycastElevationBox(h, u);\n\n          if (d) n = d.minLngLat, s = d.maxLngLat, l = d.minAltitude, c = d.maxAltitude;else {\n            if (this.transform.isHorizonVisibleForPoints(h, u)) return this;\n            n = this.transform.pointLocation(h), s = this.transform.pointLocation(u);\n          }\n          return this._fitInternal(0 === this.transform.pitch ? this._cameraForBoxAndBearing(this.transform.pointLocation(e.Point.convert(t)), this.transform.pointLocation(e.Point.convert(i)), o, a) : this._cameraForBox(n, s, l, c, a), a, r);\n        }\n      }, {\n        key: \"_fitInternal\",\n        value: function _fitInternal(t, i, o) {\n          return t ? (delete (i = e.extend(t, i)).padding, i.linear ? this.easeTo(i, o) : this.flyTo(i, o)) : this;\n        }\n      }, {\n        key: \"jumpTo\",\n        value: function jumpTo(t, i) {\n          this.stop();\n          var o = this.transform;\n          var a = !1,\n              r = !1,\n              n = !1;\n          return \"zoom\" in t && o.zoom !== +t.zoom && (a = !0, o.zoom = +t.zoom), void 0 !== t.center && (o.center = e.LngLat.convert(t.center)), \"bearing\" in t && o.bearing !== +t.bearing && (r = !0, o.bearing = +t.bearing), \"pitch\" in t && o.pitch !== +t.pitch && (n = !0, o.pitch = +t.pitch), null == t.padding || o.isPaddingEqual(t.padding) || (o.padding = t.padding), this.fire(new e.Event(\"movestart\", i)).fire(new e.Event(\"move\", i)), a && this.fire(new e.Event(\"zoomstart\", i)).fire(new e.Event(\"zoom\", i)).fire(new e.Event(\"zoomend\", i)), r && this.fire(new e.Event(\"rotatestart\", i)).fire(new e.Event(\"rotate\", i)).fire(new e.Event(\"rotateend\", i)), n && this.fire(new e.Event(\"pitchstart\", i)).fire(new e.Event(\"pitch\", i)).fire(new e.Event(\"pitchend\", i)), this.fire(new e.Event(\"moveend\", i));\n        }\n      }, {\n        key: \"getFreeCameraOptions\",\n        value: function getFreeCameraOptions() {\n          return this.transform.getFreeCameraOptions();\n        }\n      }, {\n        key: \"setFreeCameraOptions\",\n        value: function setFreeCameraOptions(t, i) {\n          this.stop();\n          var o = this.transform,\n              a = o.zoom,\n              r = o.pitch,\n              n = o.bearing;\n          o.setFreeCameraOptions(t);\n          var s = a !== o.zoom,\n              l = r !== o.pitch,\n              c = n !== o.bearing;\n          return this.fire(new e.Event(\"movestart\", i)).fire(new e.Event(\"move\", i)), s && this.fire(new e.Event(\"zoomstart\", i)).fire(new e.Event(\"zoom\", i)).fire(new e.Event(\"zoomend\", i)), c && this.fire(new e.Event(\"rotatestart\", i)).fire(new e.Event(\"rotate\", i)).fire(new e.Event(\"rotateend\", i)), l && this.fire(new e.Event(\"pitchstart\", i)).fire(new e.Event(\"pitch\", i)).fire(new e.Event(\"pitchend\", i)), this.fire(new e.Event(\"moveend\", i)), this;\n        }\n      }, {\n        key: \"easeTo\",\n        value: function easeTo(t, i) {\n          var _this123 = this;\n\n          this._stop(!1, t.easeId), (!1 === (t = e.extend({\n            offset: [0, 0],\n            duration: 500,\n            easing: e.ease\n          }, t)).animate || !t.essential && e.browser.prefersReducedMotion) && (t.duration = 0);\n          var o = this.transform,\n              a = this.getZoom(),\n              r = this.getBearing(),\n              n = this.getPitch(),\n              s = this.getPadding(),\n              l = \"zoom\" in t ? +t.zoom : a,\n              c = \"bearing\" in t ? this._normalizeBearing(t.bearing, r) : r,\n              h = \"pitch\" in t ? +t.pitch : n,\n              u = \"padding\" in t ? t.padding : o.padding,\n              d = e.Point.convert(t.offset);\n\n          var _ = o.centerPoint.add(d);\n\n          var m = o.pointLocation(_),\n              p = e.LngLat.convert(t.center || m);\n\n          this._normalizeCenter(p);\n\n          var f = o.project(m),\n              g = o.project(p).sub(f),\n              v = o.zoomScale(l - a);\n          var x, y;\n          t.around && (x = e.LngLat.convert(t.around), y = o.locationPoint(x));\n          var b = {\n            moving: this._moving,\n            zooming: this._zooming,\n            rotating: this._rotating,\n            pitching: this._pitching\n          };\n          return this._zooming = this._zooming || l !== a, this._rotating = this._rotating || r !== c, this._pitching = this._pitching || h !== n, this._padding = !o.isPaddingEqual(u), this._easeId = t.easeId, this._prepareEase(i, t.noMoveStart, b), this._ease(function (t) {\n            if (_this123._zooming && (o.zoom = e.number(a, l, t)), _this123._rotating && (o.bearing = e.number(r, c, t)), _this123._pitching && (o.pitch = e.number(n, h, t)), _this123._padding && (o.interpolatePadding(s, u, t), _ = o.centerPoint.add(d)), x) o.setLocationAtPoint(x, y);else {\n              var _e396 = o.zoomScale(o.zoom - a),\n                  _i286 = l > a ? Math.min(2, v) : Math.max(.5, v),\n                  _r256 = Math.pow(_i286, 1 - t),\n                  _n166 = o.unproject(f.add(g.mult(t * _r256)).mult(_e396));\n\n              o.setLocationAtPoint(o.renderWorldCopies ? _n166.wrap() : _n166, _);\n            }\n\n            _this123._fireMoveEvents(i);\n          }, function (e) {\n            o.recenterOnTerrain(), _this123._afterEase(i, e);\n          }, t), this;\n        }\n      }, {\n        key: \"_prepareEase\",\n        value: function _prepareEase(t, i) {\n          var o = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n          this._moving = !0, this.transform.cameraElevationReference = \"sea\", i || o.moving || this.fire(new e.Event(\"movestart\", t)), this._zooming && !o.zooming && this.fire(new e.Event(\"zoomstart\", t)), this._rotating && !o.rotating && this.fire(new e.Event(\"rotatestart\", t)), this._pitching && !o.pitching && this.fire(new e.Event(\"pitchstart\", t));\n        }\n      }, {\n        key: \"_fireMoveEvents\",\n        value: function _fireMoveEvents(t) {\n          this.fire(new e.Event(\"move\", t)), this._zooming && this.fire(new e.Event(\"zoom\", t)), this._rotating && this.fire(new e.Event(\"rotate\", t)), this._pitching && this.fire(new e.Event(\"pitch\", t));\n        }\n      }, {\n        key: \"_afterEase\",\n        value: function _afterEase(t, i) {\n          if (this._easeId && i && this._easeId === i) return;\n          delete this._easeId, this.transform.cameraElevationReference = \"ground\";\n          var o = this._zooming,\n              a = this._rotating,\n              r = this._pitching;\n          this._moving = !1, this._zooming = !1, this._rotating = !1, this._pitching = !1, this._padding = !1, o && this.fire(new e.Event(\"zoomend\", t)), a && this.fire(new e.Event(\"rotateend\", t)), r && this.fire(new e.Event(\"pitchend\", t)), this.fire(new e.Event(\"moveend\", t));\n        }\n      }, {\n        key: \"flyTo\",\n        value: function flyTo(t, i) {\n          var _this124 = this;\n\n          if (!t.essential && e.browser.prefersReducedMotion) {\n            var _o127 = e.pick(t, [\"center\", \"zoom\", \"bearing\", \"pitch\", \"around\"]);\n\n            return this.jumpTo(_o127, i);\n          }\n\n          this.stop(), t = e.extend({\n            offset: [0, 0],\n            speed: 1.2,\n            curve: 1.42,\n            easing: e.ease\n          }, t);\n\n          var o = this.transform,\n              a = this.getZoom(),\n              r = this.getBearing(),\n              n = this.getPitch(),\n              s = this.getPadding(),\n              l = \"zoom\" in t ? e.clamp(+t.zoom, o.minZoom, o.maxZoom) : a,\n              c = \"bearing\" in t ? this._normalizeBearing(t.bearing, r) : r,\n              h = \"pitch\" in t ? +t.pitch : n,\n              u = \"padding\" in t ? t.padding : o.padding,\n              d = o.zoomScale(l - a),\n              _ = e.Point.convert(t.offset);\n\n          var m = o.centerPoint.add(_);\n          var p = o.pointLocation(m),\n              f = e.LngLat.convert(t.center || p);\n\n          this._normalizeCenter(f);\n\n          var g = o.project(p),\n              v = o.project(f).sub(g);\n          var x = t.curve;\n          var y = Math.max(o.width, o.height),\n              b = y / d,\n              w = v.mag();\n\n          if (\"minZoom\" in t) {\n            var _i287 = e.clamp(Math.min(t.minZoom, a, l), o.minZoom, o.maxZoom),\n                _r257 = y / o.zoomScale(_i287 - a);\n\n            x = Math.sqrt(_r257 / w * 2);\n          }\n\n          var T = x * x;\n\n          function E(e) {\n            var t = (b * b - y * y + (e ? -1 : 1) * T * T * w * w) / (2 * (e ? b : y) * T * w);\n            return Math.log(Math.sqrt(t * t + 1) - t);\n          }\n\n          function C(e) {\n            return (Math.exp(e) - Math.exp(-e)) / 2;\n          }\n\n          function S(e) {\n            return (Math.exp(e) + Math.exp(-e)) / 2;\n          }\n\n          var I = E(0);\n\n          var P = function P(e) {\n            return S(I) / S(I + x * e);\n          },\n              M = function M(e) {\n            return y * ((S(I) * (C(t = I + x * e) / S(t)) - C(I)) / T) / w;\n            var t;\n          },\n              z = (E(1) - I) / x;\n\n          if (Math.abs(w) < 1e-6 || !isFinite(z)) {\n            if (Math.abs(y - b) < 1e-6) return this.easeTo(t, i);\n\n            var _e397 = b < y ? -1 : 1;\n\n            z = Math.abs(Math.log(b / y)) / x, M = function M() {\n              return 0;\n            }, P = function P(t) {\n              return Math.exp(_e397 * x * t);\n            };\n          }\n\n          return t.duration = \"duration\" in t ? +t.duration : 1e3 * z / (\"screenSpeed\" in t ? +t.screenSpeed / x : +t.speed), t.maxDuration && t.duration > t.maxDuration && (t.duration = 0), this._zooming = !0, this._rotating = r !== c, this._pitching = h !== n, this._padding = !o.isPaddingEqual(u), this._prepareEase(i, !1), this._ease(function (t) {\n            var d = t * z,\n                p = 1 / P(d);\n            o.zoom = 1 === t ? l : a + o.scaleZoom(p), _this124._rotating && (o.bearing = e.number(r, c, t)), _this124._pitching && (o.pitch = e.number(n, h, t)), _this124._padding && (o.interpolatePadding(s, u, t), m = o.centerPoint.add(_));\n            var x = 1 === t ? f : o.unproject(g.add(v.mult(M(d))).mult(p));\n            o.setLocationAtPoint(o.renderWorldCopies ? x.wrap() : x, m), o._updateCenterElevation(), _this124._fireMoveEvents(i);\n          }, function () {\n            return _this124._afterEase(i);\n          }, t), this;\n        }\n      }, {\n        key: \"isEasing\",\n        value: function isEasing() {\n          return !!this._easeFrameId;\n        }\n      }, {\n        key: \"stop\",\n        value: function stop() {\n          return this._stop();\n        }\n      }, {\n        key: \"_stop\",\n        value: function _stop(e, t) {\n          if (this._easeFrameId && (this._cancelRenderFrame(this._easeFrameId), delete this._easeFrameId, delete this._onEaseFrame), this._onEaseEnd) {\n            var _e398 = this._onEaseEnd;\n            delete this._onEaseEnd, _e398.call(this, t);\n          }\n\n          if (!e) {\n            var _e399 = this.handlers;\n            _e399 && _e399.stop(!1);\n          }\n\n          return this;\n        }\n      }, {\n        key: \"_ease\",\n        value: function _ease(t, i, o) {\n          !1 === o.animate || 0 === o.duration ? (t(1), i()) : (this._easeStart = e.browser.now(), this._easeOptions = o, this._onEaseFrame = t, this._onEaseEnd = i, this._easeFrameId = this._requestRenderFrame(this._renderFrameCallback));\n        }\n      }, {\n        key: \"_renderFrameCallback\",\n        value: function _renderFrameCallback() {\n          var t = Math.min((e.browser.now() - this._easeStart) / this._easeOptions.duration, 1);\n          this._onEaseFrame(this._easeOptions.easing(t)), t < 1 ? this._easeFrameId = this._requestRenderFrame(this._renderFrameCallback) : this.stop();\n        }\n      }, {\n        key: \"_normalizeBearing\",\n        value: function _normalizeBearing(t, i) {\n          t = e.wrap(t, -180, 180);\n          var o = Math.abs(t - i);\n          return Math.abs(t - 360 - i) < o && (t -= 360), Math.abs(t + 360 - i) < o && (t += 360), t;\n        }\n      }, {\n        key: \"_normalizeCenter\",\n        value: function _normalizeCenter(e) {\n          var t = this.transform;\n          if (!t.renderWorldCopies || t.lngRange) return;\n          var i = e.lng - t.center.lng;\n          e.lng += i > 180 ? -360 : i < -180 ? 360 : 0;\n        }\n      }]);\n\n      return jo;\n    }(e.Evented);\n\n    var $o = /*#__PURE__*/function () {\n      function $o() {\n        var t = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n        _classCallCheck(this, $o);\n\n        this.options = t, e.bindAll([\"_toggleAttribution\", \"_updateEditLink\", \"_updateData\", \"_updateCompact\"], this);\n      }\n\n      _createClass($o, [{\n        key: \"getDefaultPosition\",\n        value: function getDefaultPosition() {\n          return \"bottom-right\";\n        }\n      }, {\n        key: \"onAdd\",\n        value: function onAdd(e) {\n          var t = this.options && this.options.compact;\n          return this._map = e, this._container = a.create(\"div\", \"mapboxgl-ctrl mapboxgl-ctrl-attrib\"), this._compactButton = a.create(\"button\", \"mapboxgl-ctrl-attrib-button\", this._container), this._compactButton.addEventListener(\"click\", this._toggleAttribution), this._setElementTitle(this._compactButton, \"ToggleAttribution\"), this._innerContainer = a.create(\"div\", \"mapboxgl-ctrl-attrib-inner\", this._container), this._innerContainer.setAttribute(\"role\", \"list\"), t && this._container.classList.add(\"mapboxgl-compact\"), this._updateAttributions(), this._updateEditLink(), this._map.on(\"styledata\", this._updateData), this._map.on(\"sourcedata\", this._updateData), this._map.on(\"moveend\", this._updateEditLink), void 0 === t && (this._map.on(\"resize\", this._updateCompact), this._updateCompact()), this._container;\n        }\n      }, {\n        key: \"onRemove\",\n        value: function onRemove() {\n          a.remove(this._container), this._map.off(\"styledata\", this._updateData), this._map.off(\"sourcedata\", this._updateData), this._map.off(\"moveend\", this._updateEditLink), this._map.off(\"resize\", this._updateCompact), this._map = void 0, this._attribHTML = void 0;\n        }\n      }, {\n        key: \"_setElementTitle\",\n        value: function _setElementTitle(e, t) {\n          var i = this._map._getUIString(\"AttributionControl.\".concat(t));\n\n          e.title = i, e.setAttribute(\"aria-label\", i);\n        }\n      }, {\n        key: \"_toggleAttribution\",\n        value: function _toggleAttribution() {\n          this._container.classList.contains(\"mapboxgl-compact-show\") ? (this._container.classList.remove(\"mapboxgl-compact-show\"), this._compactButton.setAttribute(\"aria-pressed\", \"false\")) : (this._container.classList.add(\"mapboxgl-compact-show\"), this._compactButton.setAttribute(\"aria-pressed\", \"true\"));\n        }\n      }, {\n        key: \"_updateEditLink\",\n        value: function _updateEditLink() {\n          var t = this._editLink;\n          t || (t = this._editLink = this._container.querySelector(\".mapbox-improve-map\"));\n          var i = [{\n            key: \"owner\",\n            value: this.styleOwner\n          }, {\n            key: \"id\",\n            value: this.styleId\n          }, {\n            key: \"access_token\",\n            value: this._map._requestManager._customAccessToken || e.config.ACCESS_TOKEN\n          }];\n\n          if (t) {\n            var _o128 = i.reduce(function (e, t, o) {\n              return t.value && (e += \"\".concat(t.key, \"=\").concat(t.value).concat(o < i.length - 1 ? \"&\" : \"\")), e;\n            }, \"?\");\n\n            t.href = \"\".concat(e.config.FEEDBACK_URL, \"/\").concat(_o128).concat(this._map._hash ? this._map._hash.getHashString(!0) : \"\"), t.rel = \"noopener nofollow\", this._setElementTitle(t, \"MapFeedback\");\n          }\n        }\n      }, {\n        key: \"_updateData\",\n        value: function _updateData(e) {\n          !e || \"metadata\" !== e.sourceDataType && \"visibility\" !== e.sourceDataType && \"style\" !== e.dataType || (this._updateAttributions(), this._updateEditLink());\n        }\n      }, {\n        key: \"_updateAttributions\",\n        value: function _updateAttributions() {\n          if (!this._map.style) return;\n          var e = [];\n\n          if (this.options.customAttribution && (Array.isArray(this.options.customAttribution) ? e = e.concat(this.options.customAttribution.map(function (e) {\n            return \"string\" != typeof e ? \"\" : e;\n          })) : \"string\" == typeof this.options.customAttribution && e.push(this.options.customAttribution)), this._map.style.stylesheet) {\n            var _e400 = this._map.style.stylesheet;\n            this.styleOwner = _e400.owner, this.styleId = _e400.id;\n          }\n\n          var t = this._map.style._sourceCaches;\n\n          for (var _i288 in t) {\n            var _o129 = t[_i288];\n\n            if (_o129.used) {\n              var _t367 = _o129.getSource();\n\n              _t367.attribution && e.indexOf(_t367.attribution) < 0 && e.push(_t367.attribution);\n            }\n          }\n\n          e.sort(function (e, t) {\n            return e.length - t.length;\n          }), e = e.filter(function (t, i) {\n            for (var _o130 = i + 1; _o130 < e.length; _o130++) {\n              if (e[_o130].indexOf(t) >= 0) return !1;\n            }\n\n            return !0;\n          });\n          var i = e.join(\" | \");\n          i !== this._attribHTML && (this._attribHTML = i, e.length ? (this._innerContainer.innerHTML = i, this._container.classList.remove(\"mapboxgl-attrib-empty\")) : this._container.classList.add(\"mapboxgl-attrib-empty\"), this._editLink = null);\n        }\n      }, {\n        key: \"_updateCompact\",\n        value: function _updateCompact() {\n          this._map.getCanvasContainer().offsetWidth <= 640 ? this._container.classList.add(\"mapboxgl-compact\") : this._container.classList.remove(\"mapboxgl-compact\", \"mapboxgl-compact-show\");\n        }\n      }]);\n\n      return $o;\n    }();\n\n    var Xo = /*#__PURE__*/function () {\n      function Xo() {\n        _classCallCheck(this, Xo);\n\n        e.bindAll([\"_updateLogo\"], this), e.bindAll([\"_updateCompact\"], this);\n      }\n\n      _createClass(Xo, [{\n        key: \"onAdd\",\n        value: function onAdd(e) {\n          this._map = e, this._container = a.create(\"div\", \"mapboxgl-ctrl\");\n          var t = a.create(\"a\", \"mapboxgl-ctrl-logo\");\n          return t.target = \"_blank\", t.rel = \"noopener nofollow\", t.href = \"https://www.mapbox.com/\", t.setAttribute(\"aria-label\", this._map._getUIString(\"LogoControl.Title\")), t.setAttribute(\"rel\", \"noopener nofollow\"), this._container.appendChild(t), this._container.style.display = \"none\", this._map.on(\"sourcedata\", this._updateLogo), this._updateLogo(), this._map.on(\"resize\", this._updateCompact), this._updateCompact(), this._container;\n        }\n      }, {\n        key: \"onRemove\",\n        value: function onRemove() {\n          a.remove(this._container), this._map.off(\"sourcedata\", this._updateLogo), this._map.off(\"resize\", this._updateCompact);\n        }\n      }, {\n        key: \"getDefaultPosition\",\n        value: function getDefaultPosition() {\n          return \"bottom-left\";\n        }\n      }, {\n        key: \"_updateLogo\",\n        value: function _updateLogo(e) {\n          e && \"metadata\" !== e.sourceDataType || (this._container.style.display = this._logoRequired() ? \"block\" : \"none\");\n        }\n      }, {\n        key: \"_logoRequired\",\n        value: function _logoRequired() {\n          if (!this._map.style) return;\n          var e = this._map.style._sourceCaches;\n          if (0 === Object.entries(e).length) return !0;\n\n          for (var _t368 in e) {\n            var _i289 = e[_t368].getSource();\n\n            if (_i289.hasOwnProperty(\"mapbox_logo\") && !_i289.mapbox_logo) return !1;\n          }\n\n          return !0;\n        }\n      }, {\n        key: \"_updateCompact\",\n        value: function _updateCompact() {\n          var e = this._container.children;\n\n          if (e.length) {\n            var _t369 = e[0];\n            this._map.getCanvasContainer().offsetWidth < 250 ? _t369.classList.add(\"mapboxgl-compact\") : _t369.classList.remove(\"mapboxgl-compact\");\n          }\n        }\n      }]);\n\n      return Xo;\n    }();\n\n    var Wo = /*#__PURE__*/function () {\n      function Wo() {\n        _classCallCheck(this, Wo);\n\n        this._queue = [], this._id = 0, this._cleared = !1, this._currentlyRunning = !1;\n      }\n\n      _createClass(Wo, [{\n        key: \"add\",\n        value: function add(e) {\n          var t = ++this._id;\n          return this._queue.push({\n            callback: e,\n            id: t,\n            cancelled: !1\n          }), t;\n        }\n      }, {\n        key: \"remove\",\n        value: function remove(e) {\n          var t = this._currentlyRunning,\n              i = t ? this._queue.concat(t) : this._queue;\n\n          var _iterator232 = _createForOfIteratorHelper(i),\n              _step232;\n\n          try {\n            for (_iterator232.s(); !(_step232 = _iterator232.n()).done;) {\n              var _t370 = _step232.value;\n              if (_t370.id === e) return void (_t370.cancelled = !0);\n            }\n          } catch (err) {\n            _iterator232.e(err);\n          } finally {\n            _iterator232.f();\n          }\n        }\n      }, {\n        key: \"run\",\n        value: function run() {\n          var e = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n          var t = this._currentlyRunning = this._queue;\n          this._queue = [];\n\n          var _iterator233 = _createForOfIteratorHelper(t),\n              _step233;\n\n          try {\n            for (_iterator233.s(); !(_step233 = _iterator233.n()).done;) {\n              var _i290 = _step233.value;\n              if (!_i290.cancelled && (_i290.callback(e), this._cleared)) break;\n            }\n          } catch (err) {\n            _iterator233.e(err);\n          } finally {\n            _iterator233.f();\n          }\n\n          this._cleared = !1, this._currentlyRunning = !1;\n        }\n      }, {\n        key: \"clear\",\n        value: function clear() {\n          this._currentlyRunning && (this._cleared = !0), this._queue = [];\n        }\n      }]);\n\n      return Wo;\n    }();\n\n    var Ho = {\n      \"AttributionControl.ToggleAttribution\": \"Toggle attribution\",\n      \"AttributionControl.MapFeedback\": \"Map feedback\",\n      \"FullscreenControl.Enter\": \"Enter fullscreen\",\n      \"FullscreenControl.Exit\": \"Exit fullscreen\",\n      \"GeolocateControl.FindMyLocation\": \"Find my location\",\n      \"GeolocateControl.LocationNotAvailable\": \"Location not available\",\n      \"LogoControl.Title\": \"Mapbox logo\",\n      \"NavigationControl.ResetBearing\": \"Reset bearing to north\",\n      \"NavigationControl.ZoomIn\": \"Zoom in\",\n      \"NavigationControl.ZoomOut\": \"Zoom out\",\n      \"ScaleControl.Feet\": \"ft\",\n      \"ScaleControl.Meters\": \"m\",\n      \"ScaleControl.Kilometers\": \"km\",\n      \"ScaleControl.Miles\": \"mi\",\n      \"ScaleControl.NauticalMiles\": \"nm\"\n    },\n        _e$window = e.window,\n        Ko = _e$window.HTMLImageElement,\n        Yo = _e$window.HTMLElement,\n        Jo = _e$window.ImageBitmap,\n        Qo = {\n      center: [0, 0],\n      zoom: 0,\n      bearing: 0,\n      pitch: 0,\n      minZoom: -2,\n      maxZoom: 22,\n      minPitch: 0,\n      maxPitch: 85,\n      interactive: !0,\n      scrollZoom: !0,\n      boxZoom: !0,\n      dragRotate: !0,\n      dragPan: !0,\n      keyboard: !0,\n      doubleClickZoom: !0,\n      touchZoomRotate: !0,\n      touchPitch: !0,\n      bearingSnap: 7,\n      clickTolerance: 3,\n      pitchWithRotate: !0,\n      hash: !1,\n      attributionControl: !0,\n      failIfMajorPerformanceCaveat: !1,\n      preserveDrawingBuffer: !1,\n      trackResize: !0,\n      optimizeForTerrain: !0,\n      renderWorldCopies: !0,\n      refreshExpiredTiles: !0,\n      maxTileCacheSize: null,\n      localIdeographFontFamily: \"sans-serif\",\n      localFontFamily: null,\n      transformRequest: null,\n      accessToken: null,\n      fadeDuration: 300,\n      crossSourceCollisions: !0\n    };\n\n    function ea(e) {\n      e.parentNode && e.parentNode.removeChild(e);\n    }\n\n    var ta = {\n      showCompass: !0,\n      showZoom: !0,\n      visualizePitch: !1\n    };\n\n    var ia = /*#__PURE__*/function () {\n      function ia(t, i) {\n        var o = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : !1;\n\n        _classCallCheck(this, ia);\n\n        this._clickTolerance = 10, this.element = i, this.mouseRotate = new xo({\n          clickTolerance: t.dragRotate._mouseRotate._clickTolerance\n        }), this.map = t, o && (this.mousePitch = new yo({\n          clickTolerance: t.dragRotate._mousePitch._clickTolerance\n        })), e.bindAll([\"mousedown\", \"mousemove\", \"mouseup\", \"touchstart\", \"touchmove\", \"touchend\", \"reset\"], this), a.addEventListener(i, \"mousedown\", this.mousedown), a.addEventListener(i, \"touchstart\", this.touchstart, {\n          passive: !1\n        }), a.addEventListener(i, \"touchmove\", this.touchmove), a.addEventListener(i, \"touchend\", this.touchend), a.addEventListener(i, \"touchcancel\", this.reset);\n      }\n\n      _createClass(ia, [{\n        key: \"down\",\n        value: function down(e, t) {\n          this.mouseRotate.mousedown(e, t), this.mousePitch && this.mousePitch.mousedown(e, t), a.disableDrag();\n        }\n      }, {\n        key: \"move\",\n        value: function move(e, t) {\n          var i = this.map,\n              o = this.mouseRotate.mousemoveWindow(e, t);\n\n          if (o && o.bearingDelta && i.setBearing(i.getBearing() + o.bearingDelta), this.mousePitch) {\n            var _o131 = this.mousePitch.mousemoveWindow(e, t);\n\n            _o131 && _o131.pitchDelta && i.setPitch(i.getPitch() + _o131.pitchDelta);\n          }\n        }\n      }, {\n        key: \"off\",\n        value: function off() {\n          var e = this.element;\n          a.removeEventListener(e, \"mousedown\", this.mousedown), a.removeEventListener(e, \"touchstart\", this.touchstart, {\n            passive: !1\n          }), a.removeEventListener(e, \"touchmove\", this.touchmove), a.removeEventListener(e, \"touchend\", this.touchend), a.removeEventListener(e, \"touchcancel\", this.reset), this.offTemp();\n        }\n      }, {\n        key: \"offTemp\",\n        value: function offTemp() {\n          a.enableDrag(), a.removeEventListener(e.window, \"mousemove\", this.mousemove), a.removeEventListener(e.window, \"mouseup\", this.mouseup);\n        }\n      }, {\n        key: \"mousedown\",\n        value: function mousedown(t) {\n          this.down(e.extend({}, t, {\n            ctrlKey: !0,\n            preventDefault: function preventDefault() {\n              return t.preventDefault();\n            }\n          }), a.mousePos(this.element, t)), a.addEventListener(e.window, \"mousemove\", this.mousemove), a.addEventListener(e.window, \"mouseup\", this.mouseup);\n        }\n      }, {\n        key: \"mousemove\",\n        value: function mousemove(e) {\n          this.move(e, a.mousePos(this.element, e));\n        }\n      }, {\n        key: \"mouseup\",\n        value: function mouseup(e) {\n          this.mouseRotate.mouseupWindow(e), this.mousePitch && this.mousePitch.mouseupWindow(e), this.offTemp();\n        }\n      }, {\n        key: \"touchstart\",\n        value: function touchstart(e) {\n          1 !== e.targetTouches.length ? this.reset() : (this._startPos = this._lastPos = a.touchPos(this.element, e.targetTouches)[0], this.down({\n            type: \"mousedown\",\n            button: 0,\n            ctrlKey: !0,\n            preventDefault: function preventDefault() {\n              return e.preventDefault();\n            }\n          }, this._startPos));\n        }\n      }, {\n        key: \"touchmove\",\n        value: function touchmove(e) {\n          1 !== e.targetTouches.length ? this.reset() : (this._lastPos = a.touchPos(this.element, e.targetTouches)[0], this.move({\n            preventDefault: function preventDefault() {\n              return e.preventDefault();\n            }\n          }, this._lastPos));\n        }\n      }, {\n        key: \"touchend\",\n        value: function touchend(e) {\n          0 === e.targetTouches.length && this._startPos && this._lastPos && this._startPos.dist(this._lastPos) < this._clickTolerance && this.element.click(), this.reset();\n        }\n      }, {\n        key: \"reset\",\n        value: function reset() {\n          this.mouseRotate.reset(), this.mousePitch && this.mousePitch.reset(), delete this._startPos, delete this._lastPos, this.offTemp();\n        }\n      }]);\n\n      return ia;\n    }();\n\n    function oa(t, i, o) {\n      if (t = new e.LngLat(t.lng, t.lat), i) {\n        var _a157 = new e.LngLat(t.lng - 360, t.lat),\n            _r258 = new e.LngLat(t.lng + 360, t.lat),\n            _n167 = 360 * Math.ceil(Math.abs(t.lng - o.center.lng) / 360),\n            _s126 = o.locationPoint(t).distSqr(i),\n            _l56 = i.x < 0 || i.y < 0 || i.x > o.width || i.y > o.height;\n\n        o.locationPoint(_a157).distSqr(i) < _s126 && (_l56 || Math.abs(_a157.lng - o.center.lng) < _n167) ? t = _a157 : o.locationPoint(_r258).distSqr(i) < _s126 && (_l56 || Math.abs(_r258.lng - o.center.lng) < _n167) && (t = _r258);\n      }\n\n      for (; Math.abs(t.lng - o.center.lng) > 180;) {\n        var _e401 = o.locationPoint(t);\n\n        if (_e401.x >= 0 && _e401.y >= 0 && _e401.x <= o.width && _e401.y <= o.height) break;\n        t.lng > o.center.lng ? t.lng -= 360 : t.lng += 360;\n      }\n\n      return t;\n    }\n\n    var aa = {\n      center: \"translate(-50%,-50%)\",\n      top: \"translate(-50%,0)\",\n      \"top-left\": \"translate(0,0)\",\n      \"top-right\": \"translate(-100%,0)\",\n      bottom: \"translate(-50%,-100%)\",\n      \"bottom-left\": \"translate(0,-100%)\",\n      \"bottom-right\": \"translate(-100%,-100%)\",\n      left: \"translate(0,-50%)\",\n      right: \"translate(-100%,-50%)\"\n    };\n\n    function ra(e, t, i) {\n      var o = e.classList;\n\n      for (var _e402 in aa) {\n        o.remove(\"mapboxgl-\".concat(i, \"-anchor-\").concat(_e402));\n      }\n\n      o.add(\"mapboxgl-\".concat(i, \"-anchor-\").concat(t));\n    }\n\n    var na = /*#__PURE__*/function (_e$Evented10) {\n      _inherits(na, _e$Evented10);\n\n      var _super127 = _createSuper(na);\n\n      function na(t, i) {\n        var _this125;\n\n        _classCallCheck(this, na);\n\n        if (_this125 = _super127.call(this), (t instanceof e.window.HTMLElement || i) && (t = e.extend({\n          element: t\n        }, i)), e.bindAll([\"_update\", \"_onMove\", \"_onUp\", \"_addDragHandler\", \"_onMapClick\", \"_onKeyPress\"], _assertThisInitialized(_this125)), _this125._anchor = t && t.anchor || \"center\", _this125._color = t && t.color || \"#3FB1CE\", _this125._scale = t && t.scale || 1, _this125._draggable = t && t.draggable || !1, _this125._clickTolerance = t && t.clickTolerance || 0, _this125._isDragging = !1, _this125._state = \"inactive\", _this125._rotation = t && t.rotation || 0, _this125._rotationAlignment = t && t.rotationAlignment || \"auto\", _this125._pitchAlignment = t && t.pitchAlignment && \"auto\" !== t.pitchAlignment ? t.pitchAlignment : _this125._rotationAlignment, t && t.element) _this125._element = t.element, _this125._offset = e.Point.convert(t && t.offset || [0, 0]);else {\n          _this125._defaultMarker = !0, _this125._element = a.create(\"div\"), _this125._element.setAttribute(\"aria-label\", \"Map marker\");\n\n          var _i291 = a.createNS(\"http://www.w3.org/2000/svg\", \"svg\"),\n              _o132 = 41,\n              _r259 = 27;\n\n          _i291.setAttributeNS(null, \"display\", \"block\"), _i291.setAttributeNS(null, \"height\", \"\".concat(_o132, \"px\")), _i291.setAttributeNS(null, \"width\", \"\".concat(_r259, \"px\")), _i291.setAttributeNS(null, \"viewBox\", \"0 0 \".concat(_r259, \" \").concat(_o132));\n\n          var _n168 = a.createNS(\"http://www.w3.org/2000/svg\", \"g\");\n\n          _n168.setAttributeNS(null, \"stroke\", \"none\"), _n168.setAttributeNS(null, \"stroke-width\", \"1\"), _n168.setAttributeNS(null, \"fill\", \"none\"), _n168.setAttributeNS(null, \"fill-rule\", \"evenodd\");\n\n          var _s127 = a.createNS(\"http://www.w3.org/2000/svg\", \"g\");\n\n          _s127.setAttributeNS(null, \"fill-rule\", \"nonzero\");\n\n          var _l57 = a.createNS(\"http://www.w3.org/2000/svg\", \"g\");\n\n          _l57.setAttributeNS(null, \"transform\", \"translate(3.0, 29.0)\"), _l57.setAttributeNS(null, \"fill\", \"#000000\");\n          var _c45 = [{\n            rx: \"10.5\",\n            ry: \"5.25002273\"\n          }, {\n            rx: \"10.5\",\n            ry: \"5.25002273\"\n          }, {\n            rx: \"9.5\",\n            ry: \"4.77275007\"\n          }, {\n            rx: \"8.5\",\n            ry: \"4.29549936\"\n          }, {\n            rx: \"7.5\",\n            ry: \"3.81822308\"\n          }, {\n            rx: \"6.5\",\n            ry: \"3.34094679\"\n          }, {\n            rx: \"5.5\",\n            ry: \"2.86367051\"\n          }, {\n            rx: \"4.5\",\n            ry: \"2.38636864\"\n          }];\n\n          for (var _i292 = 0, _c46 = _c45; _i292 < _c46.length; _i292++) {\n            var _e403 = _c46[_i292];\n\n            var _t371 = a.createNS(\"http://www.w3.org/2000/svg\", \"ellipse\");\n\n            _t371.setAttributeNS(null, \"opacity\", \"0.04\"), _t371.setAttributeNS(null, \"cx\", \"10.5\"), _t371.setAttributeNS(null, \"cy\", \"5.80029008\"), _t371.setAttributeNS(null, \"rx\", _e403.rx), _t371.setAttributeNS(null, \"ry\", _e403.ry), _l57.appendChild(_t371);\n          }\n\n          var _h33 = a.createNS(\"http://www.w3.org/2000/svg\", \"g\");\n\n          _h33.setAttributeNS(null, \"fill\", _this125._color);\n\n          var _u47 = a.createNS(\"http://www.w3.org/2000/svg\", \"path\");\n\n          _u47.setAttributeNS(null, \"d\", \"M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z\"), _h33.appendChild(_u47);\n\n          var _d22 = a.createNS(\"http://www.w3.org/2000/svg\", \"g\");\n\n          _d22.setAttributeNS(null, \"opacity\", \"0.25\"), _d22.setAttributeNS(null, \"fill\", \"#000000\");\n\n          var _16 = a.createNS(\"http://www.w3.org/2000/svg\", \"path\");\n\n          _16.setAttributeNS(null, \"d\", \"M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z\"), _d22.appendChild(_16);\n\n          var _m23 = a.createNS(\"http://www.w3.org/2000/svg\", \"g\");\n\n          _m23.setAttributeNS(null, \"transform\", \"translate(6.0, 7.0)\"), _m23.setAttributeNS(null, \"fill\", \"#FFFFFF\");\n\n          var _p25 = a.createNS(\"http://www.w3.org/2000/svg\", \"g\");\n\n          _p25.setAttributeNS(null, \"transform\", \"translate(8.0, 8.0)\");\n\n          var _f17 = a.createNS(\"http://www.w3.org/2000/svg\", \"circle\");\n\n          _f17.setAttributeNS(null, \"fill\", \"#000000\"), _f17.setAttributeNS(null, \"opacity\", \"0.25\"), _f17.setAttributeNS(null, \"cx\", \"5.5\"), _f17.setAttributeNS(null, \"cy\", \"5.5\"), _f17.setAttributeNS(null, \"r\", \"5.4999962\");\n\n          var _g20 = a.createNS(\"http://www.w3.org/2000/svg\", \"circle\");\n\n          _g20.setAttributeNS(null, \"fill\", \"#FFFFFF\"), _g20.setAttributeNS(null, \"cx\", \"5.5\"), _g20.setAttributeNS(null, \"cy\", \"5.5\"), _g20.setAttributeNS(null, \"r\", \"5.4999962\"), _p25.appendChild(_f17), _p25.appendChild(_g20), _s127.appendChild(_l57), _s127.appendChild(_h33), _s127.appendChild(_d22), _s127.appendChild(_m23), _s127.appendChild(_p25), _i291.appendChild(_s127), _i291.setAttributeNS(null, \"height\", \"\".concat(_o132 * _this125._scale, \"px\")), _i291.setAttributeNS(null, \"width\", \"\".concat(_r259 * _this125._scale, \"px\")), _this125._element.appendChild(_i291), _this125._offset = e.Point.convert(t && t.offset || [0, -14]);\n        }\n        _this125._element.classList.add(\"mapboxgl-marker\"), _this125._element.addEventListener(\"dragstart\", function (e) {\n          e.preventDefault();\n        }), _this125._element.addEventListener(\"mousedown\", function (e) {\n          e.preventDefault();\n        }), ra(_this125._element, _this125._anchor, \"marker\"), _this125._popup = null;\n        return _possibleConstructorReturn(_this125);\n      }\n\n      _createClass(na, [{\n        key: \"addTo\",\n        value: function addTo(e) {\n          return this.remove(), this._map = e, e.getCanvasContainer().appendChild(this._element), e.on(\"move\", this._update), e.on(\"moveend\", this._update), this.setDraggable(this._draggable), this._update(), this._map.on(\"click\", this._onMapClick), this;\n        }\n      }, {\n        key: \"remove\",\n        value: function remove() {\n          return this._map && (this._map.off(\"click\", this._onMapClick), this._map.off(\"move\", this._update), this._map.off(\"moveend\", this._update), this._map.off(\"mousedown\", this._addDragHandler), this._map.off(\"touchstart\", this._addDragHandler), this._map.off(\"mouseup\", this._onUp), this._map.off(\"touchend\", this._onUp), this._map.off(\"mousemove\", this._onMove), this._map.off(\"touchmove\", this._onMove), delete this._map), a.remove(this._element), this._popup && this._popup.remove(), this;\n        }\n      }, {\n        key: \"getLngLat\",\n        value: function getLngLat() {\n          return this._lngLat;\n        }\n      }, {\n        key: \"setLngLat\",\n        value: function setLngLat(t) {\n          return this._lngLat = e.LngLat.convert(t), this._pos = null, this._popup && this._popup.setLngLat(this._lngLat), this._update(), this;\n        }\n      }, {\n        key: \"getElement\",\n        value: function getElement() {\n          return this._element;\n        }\n      }, {\n        key: \"setPopup\",\n        value: function setPopup(e) {\n          if (this._popup && (this._popup.remove(), this._popup = null, this._element.removeEventListener(\"keypress\", this._onKeyPress), this._originalTabIndex || this._element.removeAttribute(\"tabindex\")), e) {\n            if (!(\"offset\" in e.options)) {\n              var _t372 = 38.1,\n                  _i293 = 13.5,\n                  _o133 = Math.sqrt(Math.pow(_i293, 2) / 2);\n\n              e.options.offset = this._defaultMarker ? {\n                top: [0, 0],\n                \"top-left\": [0, 0],\n                \"top-right\": [0, 0],\n                bottom: [0, -_t372],\n                \"bottom-left\": [_o133, -1 * (_t372 - _i293 + _o133)],\n                \"bottom-right\": [-_o133, -1 * (_t372 - _i293 + _o133)],\n                left: [_i293, -1 * (_t372 - _i293)],\n                right: [-_i293, -1 * (_t372 - _i293)]\n              } : this._offset;\n            }\n\n            this._popup = e, this._lngLat && this._popup.setLngLat(this._lngLat), this._originalTabIndex = this._element.getAttribute(\"tabindex\"), this._originalTabIndex || this._element.setAttribute(\"tabindex\", \"0\"), this._element.addEventListener(\"keypress\", this._onKeyPress);\n          }\n\n          return this;\n        }\n      }, {\n        key: \"_onKeyPress\",\n        value: function _onKeyPress(e) {\n          var t = e.code,\n              i = e.charCode || e.keyCode;\n          \"Space\" !== t && \"Enter\" !== t && 32 !== i && 13 !== i || this.togglePopup();\n        }\n      }, {\n        key: \"_onMapClick\",\n        value: function _onMapClick(e) {\n          var t = e.originalEvent.target,\n              i = this._element;\n          this._popup && (t === i || i.contains(t)) && this.togglePopup();\n        }\n      }, {\n        key: \"getPopup\",\n        value: function getPopup() {\n          return this._popup;\n        }\n      }, {\n        key: \"togglePopup\",\n        value: function togglePopup() {\n          var e = this._popup;\n          return e ? (e.isOpen() ? e.remove() : e.addTo(this._map), this) : this;\n        }\n      }, {\n        key: \"_updateOcclusion\",\n        value: function _updateOcclusion() {\n          this._occlusionTimer || (this._occlusionTimer = setTimeout(this._onOcclusionTimer.bind(this), 60));\n        }\n      }, {\n        key: \"_onOcclusionTimer\",\n        value: function _onOcclusionTimer() {\n          var e = this._map.transform,\n              t = this._pos ? this._pos.sub(this._transformedOffset()) : null;\n\n          if (t && t.x >= 0 && t.x < e.width && t.y >= 0 && t.y < e.height) {\n            var _e404 = this._map.unproject(t),\n                _i294 = this._map.getFreeCameraOptions();\n\n            if (_i294.position) {\n              var _t373 = _i294.position.toLngLat(),\n                  _o134 = _t373.distanceTo(_e404),\n                  _a158 = _t373.distanceTo(this._lngLat);\n\n              this._element.classList.toggle(\"mapboxgl-marker-occluded\", _o134 < .9 * _a158);\n            }\n          }\n\n          this._occlusionTimer = null;\n        }\n      }, {\n        key: \"_update\",\n        value: function _update(e) {\n          if (!this._map) return;\n          this._map.transform.renderWorldCopies && (this._lngLat = oa(this._lngLat, this._pos, this._map.transform)), this._pos = this._map.project(this._lngLat)._add(this._transformedOffset()), this._map.transform.elevation && this._updateOcclusion();\n          var t = \"\";\n          \"viewport\" === this._rotationAlignment || \"auto\" === this._rotationAlignment ? t = \"rotateZ(\".concat(this._rotation, \"deg)\") : \"map\" === this._rotationAlignment && (t = \"rotateZ(\".concat(this._rotation - this._map.getBearing(), \"deg)\"));\n          var i = \"\";\n          \"viewport\" === this._pitchAlignment || \"auto\" === this._pitchAlignment ? i = \"rotateX(0deg)\" : \"map\" === this._pitchAlignment && (i = \"rotateX(\".concat(this._map.getPitch(), \"deg)\")), e && \"moveend\" !== e.type || (this._pos = this._pos.round()), a.setTransform(this._element, \"\".concat(aa[this._anchor], \" translate(\").concat(this._pos.x, \"px, \").concat(this._pos.y, \"px) \").concat(i, \" \").concat(t));\n        }\n      }, {\n        key: \"_transformedOffset\",\n        value: function _transformedOffset() {\n          if (!this._defaultMarker) return this._offset;\n\n          var e = this._map.transform,\n              t = this._offset.mult(this._scale);\n\n          return \"map\" === this._rotationAlignment && t._rotate(e.angle), \"map\" === this._pitchAlignment && (t.y *= Math.cos(e._pitch)), t;\n        }\n      }, {\n        key: \"getOffset\",\n        value: function getOffset() {\n          return this._offset;\n        }\n      }, {\n        key: \"setOffset\",\n        value: function setOffset(t) {\n          return this._offset = e.Point.convert(t), this._update(), this;\n        }\n      }, {\n        key: \"_onMove\",\n        value: function _onMove(t) {\n          if (!this._isDragging) {\n            var _e405 = this._clickTolerance || this._map._clickTolerance;\n\n            this._isDragging = t.point.dist(this._pointerdownPos) >= _e405;\n          }\n\n          this._isDragging && (this._pos = t.point.sub(this._positionDelta), this._lngLat = this._map.unproject(this._pos), this.setLngLat(this._lngLat), this._element.style.pointerEvents = \"none\", \"pending\" === this._state && (this._state = \"active\", this.fire(new e.Event(\"dragstart\"))), this.fire(new e.Event(\"drag\")));\n        }\n      }, {\n        key: \"_onUp\",\n        value: function _onUp() {\n          this._element.style.pointerEvents = \"auto\", this._positionDelta = null, this._pointerdownPos = null, this._isDragging = !1, this._map.off(\"mousemove\", this._onMove), this._map.off(\"touchmove\", this._onMove), \"active\" === this._state && this.fire(new e.Event(\"dragend\")), this._state = \"inactive\";\n        }\n      }, {\n        key: \"_addDragHandler\",\n        value: function _addDragHandler(e) {\n          this._element.contains(e.originalEvent.target) && (e.preventDefault(), this._positionDelta = e.point.sub(this._pos).add(this._transformedOffset()), this._pointerdownPos = e.point, this._state = \"pending\", this._map.on(\"mousemove\", this._onMove), this._map.on(\"touchmove\", this._onMove), this._map.once(\"mouseup\", this._onUp), this._map.once(\"touchend\", this._onUp));\n        }\n      }, {\n        key: \"setDraggable\",\n        value: function setDraggable(e) {\n          return this._draggable = !!e, this._map && (e ? (this._map.on(\"mousedown\", this._addDragHandler), this._map.on(\"touchstart\", this._addDragHandler)) : (this._map.off(\"mousedown\", this._addDragHandler), this._map.off(\"touchstart\", this._addDragHandler))), this;\n        }\n      }, {\n        key: \"isDraggable\",\n        value: function isDraggable() {\n          return this._draggable;\n        }\n      }, {\n        key: \"setRotation\",\n        value: function setRotation(e) {\n          return this._rotation = e || 0, this._update(), this;\n        }\n      }, {\n        key: \"getRotation\",\n        value: function getRotation() {\n          return this._rotation;\n        }\n      }, {\n        key: \"setRotationAlignment\",\n        value: function setRotationAlignment(e) {\n          return this._rotationAlignment = e || \"auto\", this._update(), this;\n        }\n      }, {\n        key: \"getRotationAlignment\",\n        value: function getRotationAlignment() {\n          return this._rotationAlignment;\n        }\n      }, {\n        key: \"setPitchAlignment\",\n        value: function setPitchAlignment(e) {\n          return this._pitchAlignment = e && \"auto\" !== e ? e : this._rotationAlignment, this._update(), this;\n        }\n      }, {\n        key: \"getPitchAlignment\",\n        value: function getPitchAlignment() {\n          return this._pitchAlignment;\n        }\n      }]);\n\n      return na;\n    }(e.Evented);\n\n    var sa = {\n      positionOptions: {\n        enableHighAccuracy: !1,\n        maximumAge: 0,\n        timeout: 6e3\n      },\n      fitBoundsOptions: {\n        maxZoom: 15\n      },\n      trackUserLocation: !1,\n      showAccuracyCircle: !0,\n      showUserLocation: !0\n    };\n    var la,\n        ca = 0,\n        ha = !1;\n    var ua = {\n      maxWidth: 100,\n      unit: \"metric\"\n    };\n\n    function da(e, t, i) {\n      var o = i && i.maxWidth || 100,\n          a = e._container.clientHeight / 2,\n          r = e.unproject([0, a]),\n          n = e.unproject([o, a]),\n          s = r.distanceTo(n);\n\n      if (i && \"imperial\" === i.unit) {\n        var _i295 = 3.2808 * s;\n\n        _i295 > 5280 ? _a(t, o, _i295 / 5280, e._getUIString(\"ScaleControl.Miles\")) : _a(t, o, _i295, e._getUIString(\"ScaleControl.Feet\"));\n      } else i && \"nautical\" === i.unit ? _a(t, o, s / 1852, e._getUIString(\"ScaleControl.NauticalMiles\")) : s >= 1e3 ? _a(t, o, s / 1e3, e._getUIString(\"ScaleControl.Kilometers\")) : _a(t, o, s, e._getUIString(\"ScaleControl.Meters\"));\n    }\n\n    function _a(e, t, i, o) {\n      var a = function (e) {\n        var t = Math.pow(10, \"\".concat(Math.floor(e)).length - 1);\n        var i = e / t;\n        return i = i >= 10 ? 10 : i >= 5 ? 5 : i >= 3 ? 3 : i >= 2 ? 2 : i >= 1 ? 1 : function (e) {\n          var t = Math.pow(10, Math.ceil(-Math.log(e) / Math.LN10));\n          return Math.round(e * t) / t;\n        }(i), t * i;\n      }(i);\n\n      e.style.width = \"\".concat(t * (a / i), \"px\"), e.innerHTML = \"\".concat(a, \"&nbsp;\").concat(o);\n    }\n\n    var ma = {\n      closeButton: !0,\n      closeOnClick: !0,\n      focusAfterOpen: !0,\n      className: \"\",\n      maxWidth: \"240px\"\n    },\n        pa = [\"a[href]\", \"[tabindex]:not([tabindex='-1'])\", \"[contenteditable]:not([contenteditable='false'])\", \"button:not([disabled])\", \"input:not([disabled])\", \"select:not([disabled])\", \"textarea:not([disabled])\"].join(\", \"),\n        fa = {\n      version: e.version,\n      supported: t,\n      setRTLTextPlugin: e.setRTLTextPlugin,\n      getRTLTextPluginStatus: e.getRTLTextPluginStatus,\n      Map: /*#__PURE__*/function (_jo) {\n        _inherits(Map, _jo);\n\n        var _super128 = _createSuper(Map);\n\n        function Map(t) {\n          var _this126;\n\n          _classCallCheck(this, Map);\n\n          if (null != (t = e.extend({}, Qo, t)).minZoom && null != t.maxZoom && t.minZoom > t.maxZoom) throw new Error(\"maxZoom must be greater than or equal to minZoom\");\n          if (null != t.minPitch && null != t.maxPitch && t.minPitch > t.maxPitch) throw new Error(\"maxPitch must be greater than or equal to minPitch\");\n          if (null != t.minPitch && t.minPitch < 0) throw new Error(\"minPitch must be greater than or equal to 0\");\n          if (null != t.maxPitch && t.maxPitch > 85) throw new Error(\"maxPitch must be less than or equal to 85\");\n\n          if (_this126 = _super128.call(this, new Hi(t.minZoom, t.maxZoom, t.minPitch, t.maxPitch, t.renderWorldCopies), t), _this126._interactive = t.interactive, _this126._maxTileCacheSize = t.maxTileCacheSize, _this126._failIfMajorPerformanceCaveat = t.failIfMajorPerformanceCaveat, _this126._preserveDrawingBuffer = t.preserveDrawingBuffer, _this126._antialias = t.antialias, _this126._trackResize = t.trackResize, _this126._bearingSnap = t.bearingSnap, _this126._refreshExpiredTiles = t.refreshExpiredTiles, _this126._fadeDuration = t.fadeDuration, _this126._isInitialLoad = !0, _this126._crossSourceCollisions = t.crossSourceCollisions, _this126._crossFadingFactor = 1, _this126._collectResourceTiming = t.collectResourceTiming, _this126._optimizeForTerrain = t.optimizeForTerrain, _this126._renderTaskQueue = new Wo(), _this126._controls = [], _this126._mapId = e.uniqueId(), _this126._locale = e.extend({}, Ho, t.locale), _this126._clickTolerance = t.clickTolerance, _this126._requestManager = new e.RequestManager(t.transformRequest, t.accessToken), \"string\" == typeof t.container) {\n            if (_this126._container = e.window.document.getElementById(t.container), !_this126._container) throw new Error(\"Container '\".concat(t.container, \"' not found.\"));\n          } else {\n            if (!(t.container instanceof Yo)) throw new Error(\"Invalid type: 'container' must be a String or HTMLElement.\");\n            _this126._container = t.container;\n          }\n\n          if (t.maxBounds && _this126.setMaxBounds(t.maxBounds), e.bindAll([\"_onWindowOnline\", \"_onWindowResize\", \"_onMapScroll\", \"_contextLost\", \"_contextRestored\"], _assertThisInitialized(_this126)), _this126._setupContainer(), _this126._setupPainter(), void 0 === _this126.painter) throw new Error(\"Failed to initialize WebGL.\");\n          _this126.on(\"move\", function () {\n            return _this126._update(!1);\n          }), _this126.on(\"moveend\", function () {\n            return _this126._update(!1);\n          }), _this126.on(\"zoom\", function () {\n            return _this126._update(!0);\n          }), void 0 !== e.window && (e.window.addEventListener(\"online\", _this126._onWindowOnline, !1), e.window.addEventListener(\"resize\", _this126._onWindowResize, !1), e.window.addEventListener(\"orientationchange\", _this126._onWindowResize, !1)), _this126.handlers = new qo(_assertThisInitialized(_this126), t), _this126._hash = t.hash && new Ki(\"string\" == typeof t.hash && t.hash || void 0).addTo(_assertThisInitialized(_this126)), _this126._hash && _this126._hash._onHashChange() || (_this126.jumpTo({\n            center: t.center,\n            zoom: t.zoom,\n            bearing: t.bearing,\n            pitch: t.pitch\n          }), t.bounds && (_this126.resize(), _this126.fitBounds(t.bounds, e.extend({}, t.fitBoundsOptions, {\n            duration: 0\n          })))), _this126.resize(), _this126._localFontFamily = t.localFontFamily, _this126._localIdeographFontFamily = t.localIdeographFontFamily, t.style && _this126.setStyle(t.style, {\n            localFontFamily: _this126._localFontFamily,\n            localIdeographFontFamily: _this126._localIdeographFontFamily\n          }), t.attributionControl && _this126.addControl(new $o({\n            customAttribution: t.customAttribution\n          })), _this126._logoControl = new Xo(), _this126.addControl(_this126._logoControl, t.logoPosition), _this126.on(\"style.load\", function () {\n            _this126.transform.unmodified && _this126.jumpTo(_this126.style.stylesheet);\n          }), _this126.on(\"data\", function (t) {\n            _this126._update(\"style\" === t.dataType), _this126.fire(new e.Event(\"\".concat(t.dataType, \"data\"), t));\n          }), _this126.on(\"dataloading\", function (t) {\n            _this126.fire(new e.Event(\"\".concat(t.dataType, \"dataloading\"), t));\n          });\n          return _possibleConstructorReturn(_this126);\n        }\n\n        _createClass(Map, [{\n          key: \"_getMapId\",\n          value: function _getMapId() {\n            return this._mapId;\n          }\n        }, {\n          key: \"addControl\",\n          value: function addControl(t, i) {\n            if (void 0 === i && (i = t.getDefaultPosition ? t.getDefaultPosition() : \"top-right\"), !t || !t.onAdd) return this.fire(new e.ErrorEvent(new Error(\"Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.\")));\n            var o = t.onAdd(this);\n\n            this._controls.push(t);\n\n            var a = this._controlPositions[i];\n            return -1 !== i.indexOf(\"bottom\") ? a.insertBefore(o, a.firstChild) : a.appendChild(o), this;\n          }\n        }, {\n          key: \"removeControl\",\n          value: function removeControl(t) {\n            if (!t || !t.onRemove) return this.fire(new e.ErrorEvent(new Error(\"Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.\")));\n\n            var i = this._controls.indexOf(t);\n\n            return i > -1 && this._controls.splice(i, 1), t.onRemove(this), this;\n          }\n        }, {\n          key: \"hasControl\",\n          value: function hasControl(e) {\n            return this._controls.indexOf(e) > -1;\n          }\n        }, {\n          key: \"resize\",\n          value: function resize(t) {\n            var i = this._containerDimensions(),\n                o = i[0],\n                a = i[1];\n\n            this._resizeCanvas(o, a), this.transform.resize(o, a), this.painter.resize(o, a);\n            var r = !this._moving;\n            return r && (this.stop(), this.fire(new e.Event(\"movestart\", t)).fire(new e.Event(\"move\", t))), this.fire(new e.Event(\"resize\", t)), r && this.fire(new e.Event(\"moveend\", t)), this;\n          }\n        }, {\n          key: \"getBounds\",\n          value: function getBounds() {\n            return this.transform.getBounds();\n          }\n        }, {\n          key: \"getMaxBounds\",\n          value: function getMaxBounds() {\n            return this.transform.getMaxBounds();\n          }\n        }, {\n          key: \"setMaxBounds\",\n          value: function setMaxBounds(t) {\n            return this.transform.setMaxBounds(e.LngLatBounds.convert(t)), this._update();\n          }\n        }, {\n          key: \"setMinZoom\",\n          value: function setMinZoom(e) {\n            if ((e = null == e ? -2 : e) >= -2 && e <= this.transform.maxZoom) return this.transform.minZoom = e, this._update(), this.getZoom() < e && this.setZoom(e), this;\n            throw new Error(\"minZoom must be between -2 and the current maxZoom, inclusive\");\n          }\n        }, {\n          key: \"getMinZoom\",\n          value: function getMinZoom() {\n            return this.transform.minZoom;\n          }\n        }, {\n          key: \"setMaxZoom\",\n          value: function setMaxZoom(e) {\n            if ((e = null == e ? 22 : e) >= this.transform.minZoom) return this.transform.maxZoom = e, this._update(), this.getZoom() > e && this.setZoom(e), this;\n            throw new Error(\"maxZoom must be greater than the current minZoom\");\n          }\n        }, {\n          key: \"getMaxZoom\",\n          value: function getMaxZoom() {\n            return this.transform.maxZoom;\n          }\n        }, {\n          key: \"setMinPitch\",\n          value: function setMinPitch(e) {\n            if ((e = null == e ? 0 : e) < 0) throw new Error(\"minPitch must be greater than or equal to 0\");\n            if (e >= 0 && e <= this.transform.maxPitch) return this.transform.minPitch = e, this._update(), this.getPitch() < e && this.setPitch(e), this;\n            throw new Error(\"minPitch must be between 0 and the current maxPitch, inclusive\");\n          }\n        }, {\n          key: \"getMinPitch\",\n          value: function getMinPitch() {\n            return this.transform.minPitch;\n          }\n        }, {\n          key: \"setMaxPitch\",\n          value: function setMaxPitch(e) {\n            if ((e = null == e ? 85 : e) > 85) throw new Error(\"maxPitch must be less than or equal to 85\");\n            if (e >= this.transform.minPitch) return this.transform.maxPitch = e, this._update(), this.getPitch() > e && this.setPitch(e), this;\n            throw new Error(\"maxPitch must be greater than the current minPitch\");\n          }\n        }, {\n          key: \"getMaxPitch\",\n          value: function getMaxPitch() {\n            return this.transform.maxPitch;\n          }\n        }, {\n          key: \"getRenderWorldCopies\",\n          value: function getRenderWorldCopies() {\n            return this.transform.renderWorldCopies;\n          }\n        }, {\n          key: \"setRenderWorldCopies\",\n          value: function setRenderWorldCopies(e) {\n            return this.transform.renderWorldCopies = e, this._update();\n          }\n        }, {\n          key: \"project\",\n          value: function project(t) {\n            return this.transform.locationPoint3D(e.LngLat.convert(t));\n          }\n        }, {\n          key: \"unproject\",\n          value: function unproject(t) {\n            return this.transform.pointLocation3D(e.Point.convert(t));\n          }\n        }, {\n          key: \"isMoving\",\n          value: function isMoving() {\n            return this._moving || this.handlers && this.handlers.isMoving();\n          }\n        }, {\n          key: \"isZooming\",\n          value: function isZooming() {\n            return this._zooming || this.handlers && this.handlers.isZooming();\n          }\n        }, {\n          key: \"isRotating\",\n          value: function isRotating() {\n            return this._rotating || this.handlers && this.handlers.isRotating();\n          }\n        }, {\n          key: \"_createDelegatedListener\",\n          value: function _createDelegatedListener(e, t, i) {\n            var _this127 = this;\n\n            if (\"mouseenter\" === e || \"mouseover\" === e) {\n              var _o135 = !1;\n\n              var _a159 = function _a159(a) {\n                var r = _this127.getLayer(t) ? _this127.queryRenderedFeatures(a.point, {\n                  layers: [t]\n                }) : [];\n                r.length ? _o135 || (_o135 = !0, i.call(_this127, new ro(e, _this127, a.originalEvent, {\n                  features: r\n                }))) : _o135 = !1;\n              };\n\n              return {\n                layer: t,\n                listener: i,\n                delegates: {\n                  mousemove: _a159,\n                  mouseout: function mouseout() {\n                    _o135 = !1;\n                  }\n                }\n              };\n            }\n\n            if (\"mouseleave\" === e || \"mouseout\" === e) {\n              var _o136 = !1;\n\n              var _a160 = function _a160(a) {\n                (_this127.getLayer(t) ? _this127.queryRenderedFeatures(a.point, {\n                  layers: [t]\n                }) : []).length ? _o136 = !0 : _o136 && (_o136 = !1, i.call(_this127, new ro(e, _this127, a.originalEvent)));\n              },\n                  _r260 = function _r260(t) {\n                _o136 && (_o136 = !1, i.call(_this127, new ro(e, _this127, t.originalEvent)));\n              };\n\n              return {\n                layer: t,\n                listener: i,\n                delegates: {\n                  mousemove: _a160,\n                  mouseout: _r260\n                }\n              };\n            }\n\n            {\n              var _o137 = function _o137(e) {\n                var o = _this127.getLayer(t) ? _this127.queryRenderedFeatures(e.point, {\n                  layers: [t]\n                }) : [];\n                o.length && (e.features = o, i.call(_this127, e), delete e.features);\n              };\n\n              return {\n                layer: t,\n                listener: i,\n                delegates: _defineProperty({}, e, _o137)\n              };\n            }\n          }\n        }, {\n          key: \"on\",\n          value: function on(e, t, i) {\n            if (void 0 === i) return _get(_getPrototypeOf(Map.prototype), \"on\", this).call(this, e, t);\n\n            var o = this._createDelegatedListener(e, t, i);\n\n            this._delegatedListeners = this._delegatedListeners || {}, this._delegatedListeners[e] = this._delegatedListeners[e] || [], this._delegatedListeners[e].push(o);\n\n            for (var _e406 in o.delegates) {\n              this.on(_e406, o.delegates[_e406]);\n            }\n\n            return this;\n          }\n        }, {\n          key: \"once\",\n          value: function once(e, t, i) {\n            if (void 0 === i) return _get(_getPrototypeOf(Map.prototype), \"once\", this).call(this, e, t);\n\n            var o = this._createDelegatedListener(e, t, i);\n\n            for (var _e407 in o.delegates) {\n              this.once(_e407, o.delegates[_e407]);\n            }\n\n            return this;\n          }\n        }, {\n          key: \"off\",\n          value: function off(e, t, i) {\n            var _this128 = this;\n\n            return void 0 === i ? _get(_getPrototypeOf(Map.prototype), \"off\", this).call(this, e, t) : (this._delegatedListeners && this._delegatedListeners[e] && function (o) {\n              var a = _this128._delegatedListeners[e];\n\n              for (var _e408 = 0; _e408 < a.length; _e408++) {\n                var _o138 = a[_e408];\n\n                if (_o138.layer === t && _o138.listener === i) {\n                  for (var _e409 in _o138.delegates) {\n                    _this128.off(_e409, _o138.delegates[_e409]);\n                  }\n\n                  return a.splice(_e408, 1), _this128;\n                }\n              }\n            }(), this);\n          }\n        }, {\n          key: \"queryRenderedFeatures\",\n          value: function queryRenderedFeatures(t, i) {\n            return this.style ? (void 0 !== i || void 0 === t || t instanceof e.Point || Array.isArray(t) || (i = t, t = void 0), this.style.queryRenderedFeatures(t = t || [[0, 0], [this.transform.width, this.transform.height]], i = i || {}, this.transform)) : [];\n          }\n        }, {\n          key: \"querySourceFeatures\",\n          value: function querySourceFeatures(e, t) {\n            return this.style.querySourceFeatures(e, t);\n          }\n        }, {\n          key: \"setStyle\",\n          value: function setStyle(t, i) {\n            return !1 !== (i = e.extend({}, {\n              localIdeographFontFamily: this._localIdeographFontFamily,\n              localFontFamily: this._localFontFamily\n            }, i)).diff && i.localIdeographFontFamily === this._localIdeographFontFamily && i.localFontFamily === this._localFontFamily && this.style && t ? (this._diffStyle(t, i), this) : (this._localIdeographFontFamily = i.localIdeographFontFamily, this._localFontFamily = i.localFontFamily, this._updateStyle(t, i));\n          }\n        }, {\n          key: \"_getUIString\",\n          value: function _getUIString(e) {\n            var t = this._locale[e];\n            if (null == t) throw new Error(\"Missing UI string '\".concat(e, \"'\"));\n            return t;\n          }\n        }, {\n          key: \"_updateStyle\",\n          value: function _updateStyle(e, t) {\n            return this.style && (this.style.setEventedParent(null), this.style._remove(), delete this.style), e && (this.style = new Ze(this, t || {}), this.style.setEventedParent(this, {\n              style: this.style\n            }), \"string\" == typeof e ? this.style.loadURL(e) : this.style.loadJSON(e)), this._updateTerrain(), this;\n          }\n        }, {\n          key: \"_lazyInitEmptyStyle\",\n          value: function _lazyInitEmptyStyle() {\n            this.style || (this.style = new Ze(this, {}), this.style.setEventedParent(this, {\n              style: this.style\n            }), this.style.loadEmpty());\n          }\n        }, {\n          key: \"_diffStyle\",\n          value: function _diffStyle(t, i) {\n            var _this129 = this;\n\n            if (\"string\" == typeof t) {\n              var _o139 = this._requestManager.normalizeStyleURL(t),\n                  _a161 = this._requestManager.transformRequest(_o139, e.ResourceType.Style);\n\n              e.getJSON(_a161, function (t, o) {\n                t ? _this129.fire(new e.ErrorEvent(t)) : o && _this129._updateDiff(o, i);\n              });\n            } else \"object\" == _typeof(t) && this._updateDiff(t, i);\n          }\n        }, {\n          key: \"_updateDiff\",\n          value: function _updateDiff(t, i) {\n            try {\n              this.style.setState(t) && this._update(!0);\n            } catch (o) {\n              e.warnOnce(\"Unable to perform style diff: \".concat(o.message || o.error || o, \".  Rebuilding the style from scratch.\")), this._updateStyle(t, i);\n            }\n          }\n        }, {\n          key: \"getStyle\",\n          value: function getStyle() {\n            if (this.style) return this.style.serialize();\n          }\n        }, {\n          key: \"isStyleLoaded\",\n          value: function isStyleLoaded() {\n            return this.style ? this.style.loaded() : e.warnOnce(\"There is no style added to the map.\");\n          }\n        }, {\n          key: \"addSource\",\n          value: function addSource(e, t) {\n            return this._lazyInitEmptyStyle(), this.style.addSource(e, t), this._update(!0);\n          }\n        }, {\n          key: \"isSourceLoaded\",\n          value: function isSourceLoaded(t) {\n            var i = this.style && this.style._getSourceCaches(t);\n\n            if (0 !== i.length) return i.every(function (e) {\n              return e.loaded();\n            });\n            this.fire(new e.ErrorEvent(new Error(\"There is no source with ID '\".concat(t, \"'\"))));\n          }\n        }, {\n          key: \"areTilesLoaded\",\n          value: function areTilesLoaded() {\n            var e = this.style && this.style._sourceCaches;\n\n            for (var _t374 in e) {\n              var _i296 = e[_t374]._tiles;\n\n              for (var _e410 in _i296) {\n                var _t375 = _i296[_e410];\n                if (\"loaded\" !== _t375.state && \"errored\" !== _t375.state) return !1;\n              }\n            }\n\n            return !0;\n          }\n        }, {\n          key: \"addSourceType\",\n          value: function addSourceType(e, t, i) {\n            return this._lazyInitEmptyStyle(), this.style.addSourceType(e, t, i);\n          }\n        }, {\n          key: \"removeSource\",\n          value: function removeSource(e) {\n            return this.style.removeSource(e), this._updateTerrain(), this._update(!0);\n          }\n        }, {\n          key: \"getSource\",\n          value: function getSource(e) {\n            return this.style.getSource(e);\n          }\n        }, {\n          key: \"addImage\",\n          value: function addImage(t, i) {\n            var _ref192 = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {},\n                _ref192$pixelRatio = _ref192.pixelRatio,\n                o = _ref192$pixelRatio === void 0 ? 1 : _ref192$pixelRatio,\n                _ref192$sdf = _ref192.sdf,\n                a = _ref192$sdf === void 0 ? !1 : _ref192$sdf,\n                r = _ref192.stretchX,\n                n = _ref192.stretchY,\n                s = _ref192.content;\n\n            if (this._lazyInitEmptyStyle(), i instanceof Ko || Jo && i instanceof Jo) {\n              var _e$browser$getImageDa = e.browser.getImageData(i),\n                  _l58 = _e$browser$getImageDa.width,\n                  _c47 = _e$browser$getImageDa.height,\n                  _h34 = _e$browser$getImageDa.data;\n\n              this.style.addImage(t, {\n                data: new e.RGBAImage({\n                  width: _l58,\n                  height: _c47\n                }, _h34),\n                pixelRatio: o,\n                stretchX: r,\n                stretchY: n,\n                content: s,\n                sdf: a,\n                version: 0\n              });\n            } else {\n              if (void 0 === i.width || void 0 === i.height) return this.fire(new e.ErrorEvent(new Error(\"Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`\")));\n              {\n                var _l59 = i.width,\n                    _c48 = i.height,\n                    _h35 = i.data,\n                    _u48 = i;\n                this.style.addImage(t, {\n                  data: new e.RGBAImage({\n                    width: _l59,\n                    height: _c48\n                  }, new Uint8Array(_h35)),\n                  pixelRatio: o,\n                  stretchX: r,\n                  stretchY: n,\n                  content: s,\n                  sdf: a,\n                  version: 0,\n                  userImage: _u48\n                }), _u48.onAdd && _u48.onAdd(this, t);\n              }\n            }\n          }\n        }, {\n          key: \"updateImage\",\n          value: function updateImage(t, i) {\n            var o = this.style.getImage(t);\n            if (!o) return this.fire(new e.ErrorEvent(new Error(\"The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.\")));\n            var a = i instanceof Ko || Jo && i instanceof Jo ? e.browser.getImageData(i) : i,\n                r = a.width,\n                n = a.height,\n                s = a.data;\n            return void 0 === r || void 0 === n ? this.fire(new e.ErrorEvent(new Error(\"Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`\"))) : r !== o.data.width || n !== o.data.height ? this.fire(new e.ErrorEvent(new Error(\"The width and height of the updated image must be that same as the previous version of the image\"))) : (o.data.replace(s, !(i instanceof Ko || Jo && i instanceof Jo)), void this.style.updateImage(t, o));\n          }\n        }, {\n          key: \"hasImage\",\n          value: function hasImage(t) {\n            return t ? !!this.style.getImage(t) : (this.fire(new e.ErrorEvent(new Error(\"Missing required image id\"))), !1);\n          }\n        }, {\n          key: \"removeImage\",\n          value: function removeImage(e) {\n            this.style.removeImage(e);\n          }\n        }, {\n          key: \"loadImage\",\n          value: function loadImage(t, i) {\n            e.getImage(this._requestManager.transformRequest(t, e.ResourceType.Image), i);\n          }\n        }, {\n          key: \"listImages\",\n          value: function listImages() {\n            return this.style.listImages();\n          }\n        }, {\n          key: \"addLayer\",\n          value: function addLayer(e, t) {\n            return this._lazyInitEmptyStyle(), this.style.addLayer(e, t), this._update(!0);\n          }\n        }, {\n          key: \"moveLayer\",\n          value: function moveLayer(e, t) {\n            return this.style.moveLayer(e, t), this._update(!0);\n          }\n        }, {\n          key: \"removeLayer\",\n          value: function removeLayer(e) {\n            return this.style.removeLayer(e), this._update(!0);\n          }\n        }, {\n          key: \"getLayer\",\n          value: function getLayer(e) {\n            return this.style.getLayer(e);\n          }\n        }, {\n          key: \"setLayerZoomRange\",\n          value: function setLayerZoomRange(e, t, i) {\n            return this.style.setLayerZoomRange(e, t, i), this._update(!0);\n          }\n        }, {\n          key: \"setFilter\",\n          value: function setFilter(e, t) {\n            var i = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n            return this.style.setFilter(e, t, i), this._update(!0);\n          }\n        }, {\n          key: \"getFilter\",\n          value: function getFilter(e) {\n            return this.style.getFilter(e);\n          }\n        }, {\n          key: \"setPaintProperty\",\n          value: function setPaintProperty(e, t, i) {\n            var o = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};\n            return this.style.setPaintProperty(e, t, i, o), this._update(!0);\n          }\n        }, {\n          key: \"getPaintProperty\",\n          value: function getPaintProperty(e, t) {\n            return this.style.getPaintProperty(e, t);\n          }\n        }, {\n          key: \"setLayoutProperty\",\n          value: function setLayoutProperty(e, t, i) {\n            var o = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};\n            return this.style.setLayoutProperty(e, t, i, o), this._update(!0);\n          }\n        }, {\n          key: \"getLayoutProperty\",\n          value: function getLayoutProperty(e, t) {\n            return this.style.getLayoutProperty(e, t);\n          }\n        }, {\n          key: \"setLight\",\n          value: function setLight(e) {\n            var t = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n            return this._lazyInitEmptyStyle(), this.style.setLight(e, t), this._update(!0);\n          }\n        }, {\n          key: \"getLight\",\n          value: function getLight() {\n            return this.style.getLight();\n          }\n        }, {\n          key: \"setTerrain\",\n          value: function setTerrain(e) {\n            return this._lazyInitEmptyStyle(), this.style.setTerrain(e), this._update(!0);\n          }\n        }, {\n          key: \"setFeatureState\",\n          value: function setFeatureState(e, t) {\n            return this.style.setFeatureState(e, t), this._update();\n          }\n        }, {\n          key: \"removeFeatureState\",\n          value: function removeFeatureState(e, t) {\n            return this.style.removeFeatureState(e, t), this._update();\n          }\n        }, {\n          key: \"getFeatureState\",\n          value: function getFeatureState(e) {\n            return this.style.getFeatureState(e);\n          }\n        }, {\n          key: \"getContainer\",\n          value: function getContainer() {\n            return this._container;\n          }\n        }, {\n          key: \"getCanvasContainer\",\n          value: function getCanvasContainer() {\n            return this._canvasContainer;\n          }\n        }, {\n          key: \"getCanvas\",\n          value: function getCanvas() {\n            return this._canvas;\n          }\n        }, {\n          key: \"_containerDimensions\",\n          value: function _containerDimensions() {\n            var e = 0,\n                t = 0;\n            return this._container && (e = this._container.clientWidth || 400, t = this._container.clientHeight || 300), [e, t];\n          }\n        }, {\n          key: \"_detectMissingCSS\",\n          value: function _detectMissingCSS() {\n            \"rgb(250, 128, 114)\" !== e.window.getComputedStyle(this._missingCSSCanary).getPropertyValue(\"background-color\") && e.warnOnce(\"This page appears to be missing CSS declarations for Mapbox GL JS, which may cause the map to display incorrectly. Please ensure your page includes mapbox-gl.css, as described in https://www.mapbox.com/mapbox-gl-js/api/.\");\n          }\n        }, {\n          key: \"_setupContainer\",\n          value: function _setupContainer() {\n            var e = this._container;\n            e.classList.add(\"mapboxgl-map\"), (this._missingCSSCanary = a.create(\"div\", \"mapboxgl-canary\", e)).style.visibility = \"hidden\", this._detectMissingCSS();\n            var t = this._canvasContainer = a.create(\"div\", \"mapboxgl-canvas-container\", e);\n            this._interactive && t.classList.add(\"mapboxgl-interactive\"), this._canvas = a.create(\"canvas\", \"mapboxgl-canvas\", t), this._canvas.addEventListener(\"webglcontextlost\", this._contextLost, !1), this._canvas.addEventListener(\"webglcontextrestored\", this._contextRestored, !1), this._canvas.setAttribute(\"tabindex\", \"0\"), this._canvas.setAttribute(\"aria-label\", \"Map\"), this._canvas.setAttribute(\"role\", \"region\");\n\n            var i = this._containerDimensions();\n\n            this._resizeCanvas(i[0], i[1]);\n\n            var o = this._controlContainer = a.create(\"div\", \"mapboxgl-control-container\", e),\n                r = this._controlPositions = {};\n            [\"top-left\", \"top-right\", \"bottom-left\", \"bottom-right\"].forEach(function (e) {\n              r[e] = a.create(\"div\", \"mapboxgl-ctrl-\".concat(e), o);\n            }), this._container.addEventListener(\"scroll\", this._onMapScroll, !1);\n          }\n        }, {\n          key: \"_resizeCanvas\",\n          value: function _resizeCanvas(t, i) {\n            var o = e.browser.devicePixelRatio || 1;\n            this._canvas.width = o * t, this._canvas.height = o * i, this._canvas.style.width = \"\".concat(t, \"px\"), this._canvas.style.height = \"\".concat(i, \"px\");\n          }\n        }, {\n          key: \"_setupPainter\",\n          value: function _setupPainter() {\n            var _this130 = this;\n\n            var i = e.extend({}, t.webGLContextAttributes, {\n              failIfMajorPerformanceCaveat: this._failIfMajorPerformanceCaveat,\n              preserveDrawingBuffer: this._preserveDrawingBuffer,\n              antialias: this._antialias || !1\n            }),\n                o = this._canvas.getContext(\"webgl\", i) || this._canvas.getContext(\"experimental-webgl\", i);\n\n            o ? (this.painter = new Ui(o, this.transform), this.on(\"data\", function (e) {\n              \"source\" === e.dataType && _this130.painter.setTileLoadedFlag(!0);\n            }), e.webpSupported.testSupport(o)) : this.fire(new e.ErrorEvent(new Error(\"Failed to initialize WebGL\")));\n          }\n        }, {\n          key: \"_contextLost\",\n          value: function _contextLost(t) {\n            t.preventDefault(), this._frame && (this._frame.cancel(), this._frame = null), this.fire(new e.Event(\"webglcontextlost\", {\n              originalEvent: t\n            }));\n          }\n        }, {\n          key: \"_contextRestored\",\n          value: function _contextRestored(t) {\n            this._setupPainter(), this.resize(), this._update(), this.fire(new e.Event(\"webglcontextrestored\", {\n              originalEvent: t\n            }));\n          }\n        }, {\n          key: \"_onMapScroll\",\n          value: function _onMapScroll(e) {\n            if (e.target === this._container) return this._container.scrollTop = 0, this._container.scrollLeft = 0, !1;\n          }\n        }, {\n          key: \"loaded\",\n          value: function loaded() {\n            return !this._styleDirty && !this._sourcesDirty && !!this.style && this.style.loaded();\n          }\n        }, {\n          key: \"_update\",\n          value: function _update(e) {\n            return this.style ? (this._styleDirty = this._styleDirty || e, this._sourcesDirty = !0, this.triggerRepaint(), this) : this;\n          }\n        }, {\n          key: \"_requestRenderFrame\",\n          value: function _requestRenderFrame(e) {\n            return this._update(), this._renderTaskQueue.add(e);\n          }\n        }, {\n          key: \"_cancelRenderFrame\",\n          value: function _cancelRenderFrame(e) {\n            this._renderTaskQueue.remove(e);\n          }\n        }, {\n          key: \"_render\",\n          value: function _render(t) {\n            var _this131 = this;\n\n            var i,\n                o = 0;\n            var a = this.painter.context.extTimerQuery;\n            if (this.listens(\"gpu-timing-frame\") && (i = a.createQueryEXT(), a.beginQueryEXT(a.TIME_ELAPSED_EXT, i), o = e.browser.now()), this.painter.context.setDirty(), this.painter.setBaseState(), this._renderTaskQueue.run(t), this._removed) return;\n            var r = !1;\n            var n = this._isInitialLoad ? 0 : this._fadeDuration;\n\n            if (this.style && this._styleDirty) {\n              this._styleDirty = !1;\n\n              var _t376 = this.transform.zoom,\n                  _i297 = e.browser.now();\n\n              this.style.zoomHistory.update(_t376, _i297);\n\n              var _o140 = new e.EvaluationParameters(_t376, {\n                now: _i297,\n                fadeDuration: n,\n                zoomHistory: this.style.zoomHistory,\n                transition: this.style.getTransition()\n              }),\n                  _a162 = _o140.crossFadingFactor();\n\n              1 === _a162 && _a162 === this._crossFadingFactor || (r = !0, this._crossFadingFactor = _a162), this.style.update(_o140);\n            }\n\n            if (this.style && this._sourcesDirty && (this._sourcesDirty = !1, this._updateTerrain(), this.style._updateSources(this.transform)), this._placementDirty = this.style && this.style._updatePlacement(this.painter.transform, this.showCollisionBoxes, n, this._crossSourceCollisions), this.painter.render(this.style, {\n              showTileBoundaries: this.showTileBoundaries,\n              showOverdrawInspector: this._showOverdrawInspector,\n              showQueryGeometry: !!this._showQueryGeometry,\n              rotating: this.isRotating(),\n              zooming: this.isZooming(),\n              moving: this.isMoving(),\n              fadeDuration: n,\n              isInitialLoad: this._isInitialLoad,\n              showPadding: this.showPadding,\n              gpuTiming: !!this.listens(\"gpu-timing-layer\"),\n              speedIndexTiming: this.speedIndexTiming\n            }), this.fire(new e.Event(\"render\")), this.loaded() && !this._loaded && (this._loaded = !0, this.fire(new e.Event(\"load\"))), this.style && (this.style.hasTransitions() || r) && (this._styleDirty = !0), this.style && !this._placementDirty && this.style._releaseSymbolFadeTiles(), this.listens(\"gpu-timing-frame\")) {\n              var _t377 = e.browser.now() - o;\n\n              a.endQueryEXT(a.TIME_ELAPSED_EXT, i), setTimeout(function () {\n                var o = a.getQueryObjectEXT(i, a.QUERY_RESULT_EXT) / 1e6;\n                a.deleteQueryEXT(i), _this131.fire(new e.Event(\"gpu-timing-frame\", {\n                  cpuTime: _t377,\n                  gpuTime: o\n                }));\n              }, 50);\n            }\n\n            if (this.listens(\"gpu-timing-layer\")) {\n              var _t378 = this.painter.collectGpuTimers();\n\n              setTimeout(function () {\n                var i = _this131.painter.queryGpuTimers(_t378);\n\n                _this131.fire(new e.Event(\"gpu-timing-layer\", {\n                  layerTimes: i\n                }));\n              }, 50);\n            }\n\n            var s = this._sourcesDirty || this._styleDirty || this._placementDirty;\n            if (s || this._repaint) this.triggerRepaint();else if (this._triggerFrame(!1), !this.isMoving() && this.loaded() && (this.fire(new e.Event(\"idle\")), this._isInitialLoad && this._authenticate(), this._isInitialLoad = !1, this.speedIndexTiming)) {\n              var _t379 = this._calculateSpeedIndex();\n\n              this.fire(new e.Event(\"speedindexcompleted\", {\n                speedIndex: _t379\n              })), this.speedIndexTiming = !1;\n            }\n            return !this._loaded || this._fullyLoaded || s || (this._fullyLoaded = !0), this;\n          }\n        }, {\n          key: \"_authenticate\",\n          value: function _authenticate() {\n            var _this132 = this;\n\n            e.getMapSessionAPI(this._getMapId(), this._requestManager._skuToken, this._requestManager._customAccessToken, function (t) {\n              if (t && (t.message === e.AUTH_ERR_MSG || 401 === t.status)) {\n                console.error(\"Error: A valid Mapbox access token is required to use Mapbox GL JS. To create an account or a new access token, visit https://account.mapbox.com/\"), e.browser.setErrorState();\n                var _t380 = _this132.painter.context.gl;\n                _this132._logoControl instanceof Xo && _this132._logoControl._updateLogo(), _t380 && _t380.clear(_t380.DEPTH_BUFFER_BIT | _t380.COLOR_BUFFER_BIT | _t380.STENCIL_BUFFER_BIT);\n              }\n            }), e.postMapLoadEvent(this._getMapId(), this._requestManager._skuToken, this._requestManager._customAccessToken, function () {});\n          }\n        }, {\n          key: \"_updateTerrain\",\n          value: function _updateTerrain() {\n            this.painter.updateTerrain(this.style, this.isMoving() || this.isRotating() || this.isZooming());\n          }\n        }, {\n          key: \"_calculateSpeedIndex\",\n          value: function _calculateSpeedIndex() {\n            var e = this.painter.canvasCopy(),\n                t = this.painter.getCanvasCopiesAndTimestamps();\n            t.timeStamps.push(performance.now());\n            var i = this.painter.context.gl,\n                o = i.createFramebuffer();\n\n            function a(e) {\n              i.framebufferTexture2D(i.FRAMEBUFFER, i.COLOR_ATTACHMENT0, i.TEXTURE_2D, e, 0);\n              var t = new Uint8Array(i.drawingBufferWidth * i.drawingBufferHeight * 4);\n              return i.readPixels(0, 0, i.drawingBufferWidth, i.drawingBufferHeight, i.RGBA, i.UNSIGNED_BYTE, t), t;\n            }\n\n            return i.bindFramebuffer(i.FRAMEBUFFER, o), this._canvasPixelComparison(a(e), t.canvasCopies.map(a), t.timeStamps);\n          }\n        }, {\n          key: \"_canvasPixelComparison\",\n          value: function _canvasPixelComparison(e, t, i) {\n            var o = i[1] - i[0];\n            var a = e.length / 4;\n\n            for (var _r261 = 0; _r261 < t.length; _r261++) {\n              var _n169 = t[_r261];\n              var _s128 = 0;\n\n              for (var _t381 = 0; _t381 < _n169.length; _t381 += 4) {\n                _n169[_t381] === e[_t381] && _n169[_t381 + 1] === e[_t381 + 1] && _n169[_t381 + 2] === e[_t381 + 2] && _n169[_t381 + 3] === e[_t381 + 3] && (_s128 += 1);\n              }\n\n              o += (i[_r261 + 2] - i[_r261 + 1]) * (1 - _s128 / a);\n            }\n\n            return o;\n          }\n        }, {\n          key: \"remove\",\n          value: function remove() {\n            this._hash && this._hash.remove();\n\n            var _iterator234 = _createForOfIteratorHelper(this._controls),\n                _step234;\n\n            try {\n              for (_iterator234.s(); !(_step234 = _iterator234.n()).done;) {\n                var _e411 = _step234.value;\n\n                _e411.onRemove(this);\n              }\n            } catch (err) {\n              _iterator234.e(err);\n            } finally {\n              _iterator234.f();\n            }\n\n            this._controls = [], this._frame && (this._frame.cancel(), this._frame = null), this._renderTaskQueue.clear(), this.painter.destroy(), this.handlers.destroy(), delete this.handlers, this.setStyle(null), void 0 !== e.window && (e.window.removeEventListener(\"resize\", this._onWindowResize, !1), e.window.removeEventListener(\"orientationchange\", this._onWindowResize, !1), e.window.removeEventListener(\"online\", this._onWindowOnline, !1));\n            var t = this.painter.context.gl.getExtension(\"WEBGL_lose_context\");\n            t && t.loseContext(), ea(this._canvasContainer), ea(this._controlContainer), ea(this._missingCSSCanary), this._container.classList.remove(\"mapboxgl-map\"), this._removed = !0, this.fire(new e.Event(\"remove\"));\n          }\n        }, {\n          key: \"triggerRepaint\",\n          value: function triggerRepaint() {\n            this._triggerFrame(!0);\n          }\n        }, {\n          key: \"_triggerFrame\",\n          value: function _triggerFrame(t) {\n            var _this133 = this;\n\n            this._renderNextFrame = this._renderNextFrame || t, this.style && !this._frame && (this._frame = e.browser.frame(function (e) {\n              var t = !!_this133._renderNextFrame;\n              _this133._frame = null, _this133._renderNextFrame = null, t && _this133._render(e);\n            }));\n          }\n        }, {\n          key: \"_onWindowOnline\",\n          value: function _onWindowOnline() {\n            this._update();\n          }\n        }, {\n          key: \"_onWindowResize\",\n          value: function _onWindowResize(e) {\n            this._trackResize && this.resize({\n              originalEvent: e\n            })._update();\n          }\n        }, {\n          key: \"showTileBoundaries\",\n          get: function get() {\n            return !!this._showTileBoundaries;\n          },\n          set: function set(e) {\n            this._showTileBoundaries !== e && (this._showTileBoundaries = e, this._update());\n          }\n        }, {\n          key: \"speedIndexTiming\",\n          get: function get() {\n            return !!this._speedIndexTiming;\n          },\n          set: function set(e) {\n            this._speedIndexTiming !== e && (this._speedIndexTiming = e, this._update());\n          }\n        }, {\n          key: \"showPadding\",\n          get: function get() {\n            return !!this._showPadding;\n          },\n          set: function set(e) {\n            this._showPadding !== e && (this._showPadding = e, this._update());\n          }\n        }, {\n          key: \"showCollisionBoxes\",\n          get: function get() {\n            return !!this._showCollisionBoxes;\n          },\n          set: function set(e) {\n            this._showCollisionBoxes !== e && (this._showCollisionBoxes = e, e ? this.style._generateCollisionBoxes() : this._update());\n          }\n        }, {\n          key: \"showOverdrawInspector\",\n          get: function get() {\n            return !!this._showOverdrawInspector;\n          },\n          set: function set(e) {\n            this._showOverdrawInspector !== e && (this._showOverdrawInspector = e, this._update());\n          }\n        }, {\n          key: \"repaint\",\n          get: function get() {\n            return !!this._repaint;\n          },\n          set: function set(e) {\n            this._repaint !== e && (this._repaint = e, this.triggerRepaint());\n          }\n        }, {\n          key: \"vertices\",\n          get: function get() {\n            return !!this._vertices;\n          },\n          set: function set(e) {\n            this._vertices = e, this._update();\n          }\n        }, {\n          key: \"_setCacheLimits\",\n          value: function _setCacheLimits(t, i) {\n            e.setCacheLimits(t, i);\n          }\n        }, {\n          key: \"version\",\n          get: function get() {\n            return e.version;\n          }\n        }]);\n\n        return Map;\n      }(jo),\n      NavigationControl: /*#__PURE__*/function () {\n        function NavigationControl(t) {\n          var _this134 = this;\n\n          _classCallCheck(this, NavigationControl);\n\n          this.options = e.extend({}, ta, t), this._container = a.create(\"div\", \"mapboxgl-ctrl mapboxgl-ctrl-group\"), this._container.addEventListener(\"contextmenu\", function (e) {\n            return e.preventDefault();\n          }), this.options.showZoom && (e.bindAll([\"_setButtonTitle\", \"_updateZoomButtons\"], this), this._zoomInButton = this._createButton(\"mapboxgl-ctrl-zoom-in\", function (e) {\n            return _this134._map.zoomIn({}, {\n              originalEvent: e\n            });\n          }), a.create(\"span\", \"mapboxgl-ctrl-icon\", this._zoomInButton).setAttribute(\"aria-hidden\", !0), this._zoomOutButton = this._createButton(\"mapboxgl-ctrl-zoom-out\", function (e) {\n            return _this134._map.zoomOut({}, {\n              originalEvent: e\n            });\n          }), a.create(\"span\", \"mapboxgl-ctrl-icon\", this._zoomOutButton).setAttribute(\"aria-hidden\", !0)), this.options.showCompass && (e.bindAll([\"_rotateCompassArrow\"], this), this._compass = this._createButton(\"mapboxgl-ctrl-compass\", function (e) {\n            _this134.options.visualizePitch ? _this134._map.resetNorthPitch({}, {\n              originalEvent: e\n            }) : _this134._map.resetNorth({}, {\n              originalEvent: e\n            });\n          }), this._compassIcon = a.create(\"span\", \"mapboxgl-ctrl-icon\", this._compass), this._compassIcon.setAttribute(\"aria-hidden\", !0));\n        }\n\n        _createClass(NavigationControl, [{\n          key: \"_updateZoomButtons\",\n          value: function _updateZoomButtons() {\n            var e = this._map.getZoom(),\n                t = e === this._map.getMaxZoom(),\n                i = e === this._map.getMinZoom();\n\n            this._zoomInButton.disabled = t, this._zoomOutButton.disabled = i, this._zoomInButton.setAttribute(\"aria-disabled\", t.toString()), this._zoomOutButton.setAttribute(\"aria-disabled\", i.toString());\n          }\n        }, {\n          key: \"_rotateCompassArrow\",\n          value: function _rotateCompassArrow() {\n            var e = this.options.visualizePitch ? \"scale(\".concat(1 / Math.pow(Math.cos(this._map.transform.pitch * (Math.PI / 180)), .5), \") rotateX(\").concat(this._map.transform.pitch, \"deg) rotateZ(\").concat(this._map.transform.angle * (180 / Math.PI), \"deg)\") : \"rotate(\".concat(this._map.transform.angle * (180 / Math.PI), \"deg)\");\n            this._compassIcon.style.transform = e;\n          }\n        }, {\n          key: \"onAdd\",\n          value: function onAdd(e) {\n            return this._map = e, this.options.showZoom && (this._setButtonTitle(this._zoomInButton, \"ZoomIn\"), this._setButtonTitle(this._zoomOutButton, \"ZoomOut\"), this._map.on(\"zoom\", this._updateZoomButtons), this._updateZoomButtons()), this.options.showCompass && (this._setButtonTitle(this._compass, \"ResetBearing\"), this.options.visualizePitch && this._map.on(\"pitch\", this._rotateCompassArrow), this._map.on(\"rotate\", this._rotateCompassArrow), this._rotateCompassArrow(), this._handler = new ia(this._map, this._compass, this.options.visualizePitch)), this._container;\n          }\n        }, {\n          key: \"onRemove\",\n          value: function onRemove() {\n            a.remove(this._container), this.options.showZoom && this._map.off(\"zoom\", this._updateZoomButtons), this.options.showCompass && (this.options.visualizePitch && this._map.off(\"pitch\", this._rotateCompassArrow), this._map.off(\"rotate\", this._rotateCompassArrow), this._handler.off(), delete this._handler), delete this._map;\n          }\n        }, {\n          key: \"_createButton\",\n          value: function _createButton(e, t) {\n            var i = a.create(\"button\", e, this._container);\n            return i.type = \"button\", i.addEventListener(\"click\", t), i;\n          }\n        }, {\n          key: \"_setButtonTitle\",\n          value: function _setButtonTitle(e, t) {\n            var i = this._map._getUIString(\"NavigationControl.\".concat(t));\n\n            e.title = i, e.setAttribute(\"aria-label\", i);\n          }\n        }]);\n\n        return NavigationControl;\n      }(),\n      GeolocateControl: /*#__PURE__*/function (_e$Evented11) {\n        _inherits(GeolocateControl, _e$Evented11);\n\n        var _super129 = _createSuper(GeolocateControl);\n\n        function GeolocateControl(t) {\n          var _this135;\n\n          _classCallCheck(this, GeolocateControl);\n\n          _this135 = _super129.call(this), _this135.options = e.extend({}, sa, t), e.bindAll([\"_onSuccess\", \"_onError\", \"_onZoom\", \"_finish\", \"_setupUI\", \"_updateCamera\", \"_updateMarker\"], _assertThisInitialized(_this135));\n          return _this135;\n        }\n\n        _createClass(GeolocateControl, [{\n          key: \"onAdd\",\n          value: function onAdd(t) {\n            var i;\n            return this._map = t, this._container = a.create(\"div\", \"mapboxgl-ctrl mapboxgl-ctrl-group\"), i = this._setupUI, void 0 !== la ? i(la) : void 0 !== e.window.navigator.permissions ? e.window.navigator.permissions.query({\n              name: \"geolocation\"\n            }).then(function (e) {\n              la = \"denied\" !== e.state, i(la);\n            }) : (la = !!e.window.navigator.geolocation, i(la)), this._container;\n          }\n        }, {\n          key: \"onRemove\",\n          value: function onRemove() {\n            void 0 !== this._geolocationWatchID && (e.window.navigator.geolocation.clearWatch(this._geolocationWatchID), this._geolocationWatchID = void 0), this.options.showUserLocation && this._userLocationDotMarker && this._userLocationDotMarker.remove(), this.options.showAccuracyCircle && this._accuracyCircleMarker && this._accuracyCircleMarker.remove(), a.remove(this._container), this._map.off(\"zoom\", this._onZoom), this._map = void 0, ca = 0, ha = !1;\n          }\n        }, {\n          key: \"_isOutOfMapMaxBounds\",\n          value: function _isOutOfMapMaxBounds(e) {\n            var t = this._map.getMaxBounds(),\n                i = e.coords;\n\n            return t && (i.longitude < t.getWest() || i.longitude > t.getEast() || i.latitude < t.getSouth() || i.latitude > t.getNorth());\n          }\n        }, {\n          key: \"_setErrorState\",\n          value: function _setErrorState() {\n            switch (this._watchState) {\n              case \"WAITING_ACTIVE\":\n                this._watchState = \"ACTIVE_ERROR\", this._geolocateButton.classList.remove(\"mapboxgl-ctrl-geolocate-active\"), this._geolocateButton.classList.add(\"mapboxgl-ctrl-geolocate-active-error\");\n                break;\n\n              case \"ACTIVE_LOCK\":\n                this._watchState = \"ACTIVE_ERROR\", this._geolocateButton.classList.remove(\"mapboxgl-ctrl-geolocate-active\"), this._geolocateButton.classList.add(\"mapboxgl-ctrl-geolocate-active-error\"), this._geolocateButton.classList.add(\"mapboxgl-ctrl-geolocate-waiting\");\n                break;\n\n              case \"BACKGROUND\":\n                this._watchState = \"BACKGROUND_ERROR\", this._geolocateButton.classList.remove(\"mapboxgl-ctrl-geolocate-background\"), this._geolocateButton.classList.add(\"mapboxgl-ctrl-geolocate-background-error\"), this._geolocateButton.classList.add(\"mapboxgl-ctrl-geolocate-waiting\");\n            }\n          }\n        }, {\n          key: \"_onSuccess\",\n          value: function _onSuccess(t) {\n            if (this._map) {\n              if (this._isOutOfMapMaxBounds(t)) return this._setErrorState(), this.fire(new e.Event(\"outofmaxbounds\", t)), this._updateMarker(), void this._finish();\n              if (this.options.trackUserLocation) switch (this._lastKnownPosition = t, this._watchState) {\n                case \"WAITING_ACTIVE\":\n                case \"ACTIVE_LOCK\":\n                case \"ACTIVE_ERROR\":\n                  this._watchState = \"ACTIVE_LOCK\", this._geolocateButton.classList.remove(\"mapboxgl-ctrl-geolocate-waiting\"), this._geolocateButton.classList.remove(\"mapboxgl-ctrl-geolocate-active-error\"), this._geolocateButton.classList.add(\"mapboxgl-ctrl-geolocate-active\");\n                  break;\n\n                case \"BACKGROUND\":\n                case \"BACKGROUND_ERROR\":\n                  this._watchState = \"BACKGROUND\", this._geolocateButton.classList.remove(\"mapboxgl-ctrl-geolocate-waiting\"), this._geolocateButton.classList.remove(\"mapboxgl-ctrl-geolocate-background-error\"), this._geolocateButton.classList.add(\"mapboxgl-ctrl-geolocate-background\");\n              }\n              this.options.showUserLocation && \"OFF\" !== this._watchState && this._updateMarker(t), this.options.trackUserLocation && \"ACTIVE_LOCK\" !== this._watchState || this._updateCamera(t), this.options.showUserLocation && this._dotElement.classList.remove(\"mapboxgl-user-location-dot-stale\"), this.fire(new e.Event(\"geolocate\", t)), this._finish();\n            }\n          }\n        }, {\n          key: \"_updateCamera\",\n          value: function _updateCamera(t) {\n            var i = new e.LngLat(t.coords.longitude, t.coords.latitude),\n                o = t.coords.accuracy,\n                a = this._map.getBearing(),\n                r = e.extend({\n              bearing: a\n            }, this.options.fitBoundsOptions);\n\n            this._map.fitBounds(i.toBounds(o), r, {\n              geolocateSource: !0\n            });\n          }\n        }, {\n          key: \"_updateMarker\",\n          value: function _updateMarker(t) {\n            if (t) {\n              var _i298 = new e.LngLat(t.coords.longitude, t.coords.latitude);\n\n              this._accuracyCircleMarker.setLngLat(_i298).addTo(this._map), this._userLocationDotMarker.setLngLat(_i298).addTo(this._map), this._accuracy = t.coords.accuracy, this.options.showUserLocation && this.options.showAccuracyCircle && this._updateCircleRadius();\n            } else this._userLocationDotMarker.remove(), this._accuracyCircleMarker.remove();\n          }\n        }, {\n          key: \"_updateCircleRadius\",\n          value: function _updateCircleRadius() {\n            var e = this._map._container.clientHeight / 2,\n                t = this._map.unproject([0, e]),\n                i = this._map.unproject([1, e]),\n                o = t.distanceTo(i),\n                a = Math.ceil(2 * this._accuracy / o);\n\n            this._circleElement.style.width = \"\".concat(a, \"px\"), this._circleElement.style.height = \"\".concat(a, \"px\");\n          }\n        }, {\n          key: \"_onZoom\",\n          value: function _onZoom() {\n            this.options.showUserLocation && this.options.showAccuracyCircle && this._updateCircleRadius();\n          }\n        }, {\n          key: \"_onError\",\n          value: function _onError(t) {\n            if (this._map) {\n              if (this.options.trackUserLocation) if (1 === t.code) {\n                this._watchState = \"OFF\", this._geolocateButton.classList.remove(\"mapboxgl-ctrl-geolocate-waiting\"), this._geolocateButton.classList.remove(\"mapboxgl-ctrl-geolocate-active\"), this._geolocateButton.classList.remove(\"mapboxgl-ctrl-geolocate-active-error\"), this._geolocateButton.classList.remove(\"mapboxgl-ctrl-geolocate-background\"), this._geolocateButton.classList.remove(\"mapboxgl-ctrl-geolocate-background-error\"), this._geolocateButton.disabled = !0;\n\n                var _e412 = this._map._getUIString(\"GeolocateControl.LocationNotAvailable\");\n\n                this._geolocateButton.title = _e412, this._geolocateButton.setAttribute(\"aria-label\", _e412), void 0 !== this._geolocationWatchID && this._clearWatch();\n              } else {\n                if (3 === t.code && ha) return;\n\n                this._setErrorState();\n              }\n              \"OFF\" !== this._watchState && this.options.showUserLocation && this._dotElement.classList.add(\"mapboxgl-user-location-dot-stale\"), this.fire(new e.Event(\"error\", t)), this._finish();\n            }\n          }\n        }, {\n          key: \"_finish\",\n          value: function _finish() {\n            this._timeoutId && clearTimeout(this._timeoutId), this._timeoutId = void 0;\n          }\n        }, {\n          key: \"_setupUI\",\n          value: function _setupUI(t) {\n            var _this136 = this;\n\n            if (this._container.addEventListener(\"contextmenu\", function (e) {\n              return e.preventDefault();\n            }), this._geolocateButton = a.create(\"button\", \"mapboxgl-ctrl-geolocate\", this._container), a.create(\"span\", \"mapboxgl-ctrl-icon\", this._geolocateButton).setAttribute(\"aria-hidden\", !0), this._geolocateButton.type = \"button\", !1 === t) {\n              e.warnOnce(\"Geolocation support is not available so the GeolocateControl will be disabled.\");\n\n              var _t382 = this._map._getUIString(\"GeolocateControl.LocationNotAvailable\");\n\n              this._geolocateButton.disabled = !0, this._geolocateButton.title = _t382, this._geolocateButton.setAttribute(\"aria-label\", _t382);\n            } else {\n              var _e413 = this._map._getUIString(\"GeolocateControl.FindMyLocation\");\n\n              this._geolocateButton.title = _e413, this._geolocateButton.setAttribute(\"aria-label\", _e413);\n            }\n\n            this.options.trackUserLocation && (this._geolocateButton.setAttribute(\"aria-pressed\", \"false\"), this._watchState = \"OFF\"), this.options.showUserLocation && (this._dotElement = a.create(\"div\", \"mapboxgl-user-location-dot\"), this._userLocationDotMarker = new na(this._dotElement), this._circleElement = a.create(\"div\", \"mapboxgl-user-location-accuracy-circle\"), this._accuracyCircleMarker = new na({\n              element: this._circleElement,\n              pitchAlignment: \"map\"\n            }), this.options.trackUserLocation && (this._watchState = \"OFF\"), this._map.on(\"zoom\", this._onZoom)), this._geolocateButton.addEventListener(\"click\", this.trigger.bind(this)), this._setup = !0, this.options.trackUserLocation && this._map.on(\"movestart\", function (t) {\n              t.geolocateSource || \"ACTIVE_LOCK\" !== _this136._watchState || t.originalEvent && \"resize\" === t.originalEvent.type || (_this136._watchState = \"BACKGROUND\", _this136._geolocateButton.classList.add(\"mapboxgl-ctrl-geolocate-background\"), _this136._geolocateButton.classList.remove(\"mapboxgl-ctrl-geolocate-active\"), _this136.fire(new e.Event(\"trackuserlocationend\")));\n            });\n          }\n        }, {\n          key: \"trigger\",\n          value: function trigger() {\n            if (!this._setup) return e.warnOnce(\"Geolocate control triggered before added to a map\"), !1;\n\n            if (this.options.trackUserLocation) {\n              switch (this._watchState) {\n                case \"OFF\":\n                  this._watchState = \"WAITING_ACTIVE\", this.fire(new e.Event(\"trackuserlocationstart\"));\n                  break;\n\n                case \"WAITING_ACTIVE\":\n                case \"ACTIVE_LOCK\":\n                case \"ACTIVE_ERROR\":\n                case \"BACKGROUND_ERROR\":\n                  ca--, ha = !1, this._watchState = \"OFF\", this._geolocateButton.classList.remove(\"mapboxgl-ctrl-geolocate-waiting\"), this._geolocateButton.classList.remove(\"mapboxgl-ctrl-geolocate-active\"), this._geolocateButton.classList.remove(\"mapboxgl-ctrl-geolocate-active-error\"), this._geolocateButton.classList.remove(\"mapboxgl-ctrl-geolocate-background\"), this._geolocateButton.classList.remove(\"mapboxgl-ctrl-geolocate-background-error\"), this.fire(new e.Event(\"trackuserlocationend\"));\n                  break;\n\n                case \"BACKGROUND\":\n                  this._watchState = \"ACTIVE_LOCK\", this._geolocateButton.classList.remove(\"mapboxgl-ctrl-geolocate-background\"), this._lastKnownPosition && this._updateCamera(this._lastKnownPosition), this.fire(new e.Event(\"trackuserlocationstart\"));\n              }\n\n              switch (this._watchState) {\n                case \"WAITING_ACTIVE\":\n                  this._geolocateButton.classList.add(\"mapboxgl-ctrl-geolocate-waiting\"), this._geolocateButton.classList.add(\"mapboxgl-ctrl-geolocate-active\");\n                  break;\n\n                case \"ACTIVE_LOCK\":\n                  this._geolocateButton.classList.add(\"mapboxgl-ctrl-geolocate-active\");\n\n                  break;\n\n                case \"ACTIVE_ERROR\":\n                  this._geolocateButton.classList.add(\"mapboxgl-ctrl-geolocate-waiting\"), this._geolocateButton.classList.add(\"mapboxgl-ctrl-geolocate-active-error\");\n                  break;\n\n                case \"BACKGROUND\":\n                  this._geolocateButton.classList.add(\"mapboxgl-ctrl-geolocate-background\");\n\n                  break;\n\n                case \"BACKGROUND_ERROR\":\n                  this._geolocateButton.classList.add(\"mapboxgl-ctrl-geolocate-waiting\"), this._geolocateButton.classList.add(\"mapboxgl-ctrl-geolocate-background-error\");\n              }\n\n              if (\"OFF\" === this._watchState && void 0 !== this._geolocationWatchID) this._clearWatch();else if (void 0 === this._geolocationWatchID) {\n                var _t383;\n\n                this._geolocateButton.classList.add(\"mapboxgl-ctrl-geolocate-waiting\"), this._geolocateButton.setAttribute(\"aria-pressed\", \"true\"), ca++, ca > 1 ? (_t383 = {\n                  maximumAge: 6e5,\n                  timeout: 0\n                }, ha = !0) : (_t383 = this.options.positionOptions, ha = !1), this._geolocationWatchID = e.window.navigator.geolocation.watchPosition(this._onSuccess, this._onError, _t383);\n              }\n            } else e.window.navigator.geolocation.getCurrentPosition(this._onSuccess, this._onError, this.options.positionOptions), this._timeoutId = setTimeout(this._finish, 1e4);\n\n            return !0;\n          }\n        }, {\n          key: \"_clearWatch\",\n          value: function _clearWatch() {\n            e.window.navigator.geolocation.clearWatch(this._geolocationWatchID), this._geolocationWatchID = void 0, this._geolocateButton.classList.remove(\"mapboxgl-ctrl-geolocate-waiting\"), this._geolocateButton.setAttribute(\"aria-pressed\", \"false\"), this.options.showUserLocation && this._updateMarker(null);\n          }\n        }]);\n\n        return GeolocateControl;\n      }(e.Evented),\n      AttributionControl: $o,\n      ScaleControl: /*#__PURE__*/function () {\n        function ScaleControl(t) {\n          _classCallCheck(this, ScaleControl);\n\n          this.options = e.extend({}, ua, t), e.bindAll([\"_onMove\", \"setUnit\"], this);\n        }\n\n        _createClass(ScaleControl, [{\n          key: \"getDefaultPosition\",\n          value: function getDefaultPosition() {\n            return \"bottom-left\";\n          }\n        }, {\n          key: \"_onMove\",\n          value: function _onMove() {\n            da(this._map, this._container, this.options);\n          }\n        }, {\n          key: \"onAdd\",\n          value: function onAdd(e) {\n            return this._map = e, this._container = a.create(\"div\", \"mapboxgl-ctrl mapboxgl-ctrl-scale\", e.getContainer()), this._map.on(\"move\", this._onMove), this._onMove(), this._container;\n          }\n        }, {\n          key: \"onRemove\",\n          value: function onRemove() {\n            a.remove(this._container), this._map.off(\"move\", this._onMove), this._map = void 0;\n          }\n        }, {\n          key: \"setUnit\",\n          value: function setUnit(e) {\n            this.options.unit = e, da(this._map, this._container, this.options);\n          }\n        }]);\n\n        return ScaleControl;\n      }(),\n      FullscreenControl: /*#__PURE__*/function () {\n        function FullscreenControl(t) {\n          _classCallCheck(this, FullscreenControl);\n\n          this._fullscreen = !1, t && t.container && (t.container instanceof e.window.HTMLElement ? this._container = t.container : e.warnOnce(\"Full screen control 'container' must be a DOM element.\")), e.bindAll([\"_onClickFullscreen\", \"_changeIcon\"], this), \"onfullscreenchange\" in e.window.document ? this._fullscreenchange = \"fullscreenchange\" : \"onwebkitfullscreenchange\" in e.window.document && (this._fullscreenchange = \"webkitfullscreenchange\");\n        }\n\n        _createClass(FullscreenControl, [{\n          key: \"onAdd\",\n          value: function onAdd(t) {\n            return this._map = t, this._container || (this._container = this._map.getContainer()), this._controlContainer = a.create(\"div\", \"mapboxgl-ctrl mapboxgl-ctrl-group\"), this._checkFullscreenSupport() ? this._setupUI() : (this._controlContainer.style.display = \"none\", e.warnOnce(\"This device does not support fullscreen mode.\")), this._controlContainer;\n          }\n        }, {\n          key: \"onRemove\",\n          value: function onRemove() {\n            a.remove(this._controlContainer), this._map = null, e.window.document.removeEventListener(this._fullscreenchange, this._changeIcon);\n          }\n        }, {\n          key: \"_checkFullscreenSupport\",\n          value: function _checkFullscreenSupport() {\n            return !(!e.window.document.fullscreenEnabled && !e.window.document.webkitFullscreenEnabled);\n          }\n        }, {\n          key: \"_setupUI\",\n          value: function _setupUI() {\n            var t = this._fullscreenButton = a.create(\"button\", \"mapboxgl-ctrl-fullscreen\", this._controlContainer);\n            a.create(\"span\", \"mapboxgl-ctrl-icon\", t).setAttribute(\"aria-hidden\", !0), t.type = \"button\", this._updateTitle(), this._fullscreenButton.addEventListener(\"click\", this._onClickFullscreen), e.window.document.addEventListener(this._fullscreenchange, this._changeIcon);\n          }\n        }, {\n          key: \"_updateTitle\",\n          value: function _updateTitle() {\n            var e = this._getTitle();\n\n            this._fullscreenButton.setAttribute(\"aria-label\", e), this._fullscreenButton.title = e;\n          }\n        }, {\n          key: \"_getTitle\",\n          value: function _getTitle() {\n            return this._map._getUIString(this._isFullscreen() ? \"FullscreenControl.Exit\" : \"FullscreenControl.Enter\");\n          }\n        }, {\n          key: \"_isFullscreen\",\n          value: function _isFullscreen() {\n            return this._fullscreen;\n          }\n        }, {\n          key: \"_changeIcon\",\n          value: function _changeIcon() {\n            (e.window.document.fullscreenElement || e.window.document.webkitFullscreenElement) === this._container !== this._fullscreen && (this._fullscreen = !this._fullscreen, this._fullscreenButton.classList.toggle(\"mapboxgl-ctrl-shrink\"), this._fullscreenButton.classList.toggle(\"mapboxgl-ctrl-fullscreen\"), this._updateTitle());\n          }\n        }, {\n          key: \"_onClickFullscreen\",\n          value: function _onClickFullscreen() {\n            this._isFullscreen() ? e.window.document.exitFullscreen ? e.window.document.exitFullscreen() : e.window.document.webkitCancelFullScreen && e.window.document.webkitCancelFullScreen() : this._container.requestFullscreen ? this._container.requestFullscreen() : this._container.webkitRequestFullscreen && this._container.webkitRequestFullscreen();\n          }\n        }]);\n\n        return FullscreenControl;\n      }(),\n      Popup: /*#__PURE__*/function (_e$Evented12) {\n        _inherits(Popup, _e$Evented12);\n\n        var _super130 = _createSuper(Popup);\n\n        function Popup(t) {\n          var _this137;\n\n          _classCallCheck(this, Popup);\n\n          _this137 = _super130.call(this), _this137.options = e.extend(Object.create(ma), t), e.bindAll([\"_update\", \"_onClose\", \"remove\", \"_onMouseMove\", \"_onMouseUp\", \"_onDrag\"], _assertThisInitialized(_this137));\n          return _this137;\n        }\n\n        _createClass(Popup, [{\n          key: \"addTo\",\n          value: function addTo(t) {\n            return this._map && this.remove(), this._map = t, this.options.closeOnClick && this._map.on(\"click\", this._onClose), this.options.closeOnMove && this._map.on(\"move\", this._onClose), this._map.on(\"remove\", this.remove), this._update(), this._focusFirstElement(), this._trackPointer ? (this._map.on(\"mousemove\", this._onMouseMove), this._map.on(\"mouseup\", this._onMouseUp), this._container && this._container.classList.add(\"mapboxgl-popup-track-pointer\"), this._map._canvasContainer.classList.add(\"mapboxgl-track-pointer\")) : this._map.on(\"move\", this._update), this.fire(new e.Event(\"open\")), this;\n          }\n        }, {\n          key: \"isOpen\",\n          value: function isOpen() {\n            return !!this._map;\n          }\n        }, {\n          key: \"remove\",\n          value: function remove() {\n            return this._content && a.remove(this._content), this._container && (a.remove(this._container), delete this._container), this._map && (this._map.off(\"move\", this._update), this._map.off(\"move\", this._onClose), this._map.off(\"click\", this._onClose), this._map.off(\"remove\", this.remove), this._map.off(\"mousemove\", this._onMouseMove), this._map.off(\"mouseup\", this._onMouseUp), this._map.off(\"drag\", this._onDrag), delete this._map), this.fire(new e.Event(\"close\")), this;\n          }\n        }, {\n          key: \"getLngLat\",\n          value: function getLngLat() {\n            return this._lngLat;\n          }\n        }, {\n          key: \"setLngLat\",\n          value: function setLngLat(t) {\n            return this._lngLat = e.LngLat.convert(t), this._pos = null, this._trackPointer = !1, this._update(), this._map && (this._map.on(\"move\", this._update), this._map.off(\"mousemove\", this._onMouseMove), this._container && this._container.classList.remove(\"mapboxgl-popup-track-pointer\"), this._map._canvasContainer.classList.remove(\"mapboxgl-track-pointer\")), this;\n          }\n        }, {\n          key: \"trackPointer\",\n          value: function trackPointer() {\n            return this._trackPointer = !0, this._pos = null, this._update(), this._map && (this._map.off(\"move\", this._update), this._map.on(\"mousemove\", this._onMouseMove), this._map.on(\"drag\", this._onDrag), this._container && this._container.classList.add(\"mapboxgl-popup-track-pointer\"), this._map._canvasContainer.classList.add(\"mapboxgl-track-pointer\")), this;\n          }\n        }, {\n          key: \"getElement\",\n          value: function getElement() {\n            return this._container;\n          }\n        }, {\n          key: \"setText\",\n          value: function setText(t) {\n            return this.setDOMContent(e.window.document.createTextNode(t));\n          }\n        }, {\n          key: \"setHTML\",\n          value: function setHTML(t) {\n            var i = e.window.document.createDocumentFragment(),\n                o = e.window.document.createElement(\"body\");\n            var a;\n\n            for (o.innerHTML = t; a = o.firstChild, a;) {\n              i.appendChild(a);\n            }\n\n            return this.setDOMContent(i);\n          }\n        }, {\n          key: \"getMaxWidth\",\n          value: function getMaxWidth() {\n            return this._container && this._container.style.maxWidth;\n          }\n        }, {\n          key: \"setMaxWidth\",\n          value: function setMaxWidth(e) {\n            return this.options.maxWidth = e, this._update(), this;\n          }\n        }, {\n          key: \"setDOMContent\",\n          value: function setDOMContent(e) {\n            if (this._content) for (; this._content.hasChildNodes();) {\n              this._content.firstChild && this._content.removeChild(this._content.firstChild);\n            } else this._content = a.create(\"div\", \"mapboxgl-popup-content\", this._container);\n            return this._content.appendChild(e), this._createCloseButton(), this._update(), this._focusFirstElement(), this;\n          }\n        }, {\n          key: \"addClassName\",\n          value: function addClassName(e) {\n            this._container && this._container.classList.add(e);\n          }\n        }, {\n          key: \"removeClassName\",\n          value: function removeClassName(e) {\n            this._container && this._container.classList.remove(e);\n          }\n        }, {\n          key: \"setOffset\",\n          value: function setOffset(e) {\n            return this.options.offset = e, this._update(), this;\n          }\n        }, {\n          key: \"toggleClassName\",\n          value: function toggleClassName(e) {\n            if (this._container) return this._container.classList.toggle(e);\n          }\n        }, {\n          key: \"_createCloseButton\",\n          value: function _createCloseButton() {\n            this.options.closeButton && (this._closeButton = a.create(\"button\", \"mapboxgl-popup-close-button\", this._content), this._closeButton.type = \"button\", this._closeButton.setAttribute(\"aria-label\", \"Close popup\"), this._closeButton.innerHTML = \"&#215;\", this._closeButton.addEventListener(\"click\", this._onClose));\n          }\n        }, {\n          key: \"_onMouseUp\",\n          value: function _onMouseUp(e) {\n            this._update(e.point);\n          }\n        }, {\n          key: \"_onMouseMove\",\n          value: function _onMouseMove(e) {\n            this._update(e.point);\n          }\n        }, {\n          key: \"_onDrag\",\n          value: function _onDrag(e) {\n            this._update(e.point);\n          }\n        }, {\n          key: \"_update\",\n          value: function _update(t) {\n            var _this138 = this;\n\n            if (!this._map || !this._lngLat && !this._trackPointer || !this._content) return;\n            if (this._container || (this._container = a.create(\"div\", \"mapboxgl-popup\", this._map.getContainer()), this._tip = a.create(\"div\", \"mapboxgl-popup-tip\", this._container), this._container.appendChild(this._content), this.options.className && this.options.className.split(\" \").forEach(function (e) {\n              return _this138._container.classList.add(e);\n            }), this._trackPointer && this._container.classList.add(\"mapboxgl-popup-track-pointer\")), this.options.maxWidth && this._container.style.maxWidth !== this.options.maxWidth && (this._container.style.maxWidth = this.options.maxWidth), this._map.transform.renderWorldCopies && !this._trackPointer && (this._lngLat = oa(this._lngLat, this._pos, this._map.transform)), this._trackPointer && !t) return;\n            var i = this._pos = this._trackPointer && t ? t : this._map.project(this._lngLat);\n            var o = this.options.anchor;\n\n            var r = function t(i) {\n              if (i) {\n                if (\"number\" == typeof i) {\n                  var _t384 = Math.round(Math.sqrt(.5 * Math.pow(i, 2)));\n\n                  return {\n                    center: new e.Point(0, 0),\n                    top: new e.Point(0, i),\n                    \"top-left\": new e.Point(_t384, _t384),\n                    \"top-right\": new e.Point(-_t384, _t384),\n                    bottom: new e.Point(0, -i),\n                    \"bottom-left\": new e.Point(_t384, -_t384),\n                    \"bottom-right\": new e.Point(-_t384, -_t384),\n                    left: new e.Point(i, 0),\n                    right: new e.Point(-i, 0)\n                  };\n                }\n\n                if (i instanceof e.Point || Array.isArray(i)) {\n                  var _t385 = e.Point.convert(i);\n\n                  return {\n                    center: _t385,\n                    top: _t385,\n                    \"top-left\": _t385,\n                    \"top-right\": _t385,\n                    bottom: _t385,\n                    \"bottom-left\": _t385,\n                    \"bottom-right\": _t385,\n                    left: _t385,\n                    right: _t385\n                  };\n                }\n\n                return {\n                  center: e.Point.convert(i.center || [0, 0]),\n                  top: e.Point.convert(i.top || [0, 0]),\n                  \"top-left\": e.Point.convert(i[\"top-left\"] || [0, 0]),\n                  \"top-right\": e.Point.convert(i[\"top-right\"] || [0, 0]),\n                  bottom: e.Point.convert(i.bottom || [0, 0]),\n                  \"bottom-left\": e.Point.convert(i[\"bottom-left\"] || [0, 0]),\n                  \"bottom-right\": e.Point.convert(i[\"bottom-right\"] || [0, 0]),\n                  left: e.Point.convert(i.left || [0, 0]),\n                  right: e.Point.convert(i.right || [0, 0])\n                };\n              }\n\n              return t(new e.Point(0, 0));\n            }(this.options.offset);\n\n            if (!o) {\n              var _e414 = this._container.offsetWidth,\n                  _t386 = this._container.offsetHeight;\n\n              var _a163;\n\n              _a163 = i.y + r.bottom.y < _t386 ? [\"top\"] : i.y > this._map.transform.height - _t386 ? [\"bottom\"] : [], i.x < _e414 / 2 ? _a163.push(\"left\") : i.x > this._map.transform.width - _e414 / 2 && _a163.push(\"right\"), o = 0 === _a163.length ? \"bottom\" : _a163.join(\"-\");\n            }\n\n            var n = i.add(r[o]).round();\n            a.setTransform(this._container, \"\".concat(aa[o], \" translate(\").concat(n.x, \"px,\").concat(n.y, \"px)\")), ra(this._container, o, \"popup\");\n          }\n        }, {\n          key: \"_focusFirstElement\",\n          value: function _focusFirstElement() {\n            if (!this.options.focusAfterOpen || !this._container) return;\n\n            var e = this._container.querySelector(pa);\n\n            e && e.focus();\n          }\n        }, {\n          key: \"_onClose\",\n          value: function _onClose() {\n            this.remove();\n          }\n        }]);\n\n        return Popup;\n      }(e.Evented),\n      Marker: na,\n      Style: Ze,\n      LngLat: e.LngLat,\n      LngLatBounds: e.LngLatBounds,\n      Point: e.Point,\n      MercatorCoordinate: e.MercatorCoordinate,\n      FreeCameraOptions: Xi,\n      Evented: e.Evented,\n      config: e.config,\n      prewarm: function prewarm() {\n        B().acquire(L);\n      },\n      clearPrewarmedResources: function clearPrewarmedResources() {\n        var e = k;\n        e && (e.isPreloaded() && 1 === e.numActive() ? (e.release(L), k = null) : console.warn(\"Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()\"));\n      },\n\n      get accessToken() {\n        return e.config.ACCESS_TOKEN;\n      },\n\n      set accessToken(t) {\n        e.config.ACCESS_TOKEN = t;\n      },\n\n      get baseApiUrl() {\n        return e.config.API_URL;\n      },\n\n      set baseApiUrl(t) {\n        e.config.API_URL = t;\n      },\n\n      get workerCount() {\n        return R.workerCount;\n      },\n\n      set workerCount(e) {\n        R.workerCount = e;\n      },\n\n      get maxParallelImageRequests() {\n        return e.config.MAX_PARALLEL_IMAGE_REQUESTS;\n      },\n\n      set maxParallelImageRequests(t) {\n        e.config.MAX_PARALLEL_IMAGE_REQUESTS = t;\n      },\n\n      clearStorage: function clearStorage(t) {\n        e.clearTileCache(t);\n      },\n      workerUrl: \"\",\n      workerClass: null,\n      setNow: e.browser.setNow,\n      restoreNow: e.browser.restoreNow\n    };\n    return fa;\n  }); //\n\n  return mapboxgl;\n});","map":null,"metadata":{},"sourceType":"module"}